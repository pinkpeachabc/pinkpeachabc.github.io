<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Pink&#39;s Blog</title>
  
  <subtitle>å¿—å­˜éª›è¿œï¼Œé¹°å‡»é•¿ç©º</subtitle>
  <link href="https://pinkpeachabc.cn/atom.xml" rel="self"/>
  
  <link href="https://pinkpeachabc.cn/"/>
  <updated>2022-07-06T16:12:27.116Z</updated>
  <id>https://pinkpeachabc.cn/</id>
  
  <author>
    <name>PinkPeach</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>å¤©è½¯åŠ©æ‰‹</title>
    <link href="https://pinkpeachabc.cn/%E5%A4%A9%E8%BD%AF%E5%8A%A9%E6%89%8B.html"/>
    <id>https://pinkpeachabc.cn/%E5%A4%A9%E8%BD%AF%E5%8A%A9%E6%89%8B.html</id>
    <published>2022-07-06T08:07:57.000Z</published>
    <updated>2022-07-06T16:12:27.116Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>Hello å¤§å®¶å¥½æˆ‘æ˜¯ <strong>@ç²‰è‰²æ¡ƒå­abc</strong>ï¼Œä»Šå¤©è·Ÿå¼€å¿ƒç»™å¤§å®¶å¸¦æ¥ä¸€ä¸ªå…¨æ–°çš„ç­¾åˆ°ç³»ç»Ÿ-å¤©è½¯åŠ©æ‰‹</p><p>å…è´£å£°æ˜ï¼šä¸ºé¿å…çº çº·ï¼Œç‰¹åšå‡ºå¦‚ä¸‹è¯´æ˜ï¼š<strong>@ç²‰è‰²æ¡ƒå­abc</strong>ä¸ºæ­¤ç³»ç»Ÿçš„çœŸæ­£æ‰€æœ‰è€…ï¼Œä»Šåç”±å¤©è½¯åŠ©æ‰‹ä½¿ç”¨å¯¼è‡´çš„ä¸€åˆ‡çš„<strong>åæœ</strong>ï¼Œå…¶è´£ä»»æ¦‚ç”±ä½¿ç”¨è€…è‡ªå·±<strong>æ‰¿æ‹…</strong>ï¼Œä¸<strong>æœ¬äººæ— å…³ï¼Œç‰¹æ­¤å£°æ˜</strong>ï¼</p></blockquote><a id="more"></a><h2 id="ç™»å½•">ç™»å½•<a title="#ç™»å½•" href="#ç™»å½•"></a></h2><h4 id="ç„•ç„¶ä¸€æ–°">ç„•ç„¶ä¸€æ–°<a title="#ç„•ç„¶ä¸€æ–°" href="#ç„•ç„¶ä¸€æ–°"></a></h4><ul><li>å¯¹æ¯”å‰ç³»ç»Ÿæ”¹å¤´æ¢é¢</li><li>å¦‚æœæœ‰ä¼š<code>CSS</code>çš„è¯·é€Ÿè”ç³»æˆ‘<s>æ ·å¼å¤ªéš¾äº†ğŸ¤£</s></li></ul><p><img src="https://cdn.jsdelivr.net/gh/pinkpeachabc/images/Blog-imgs/20220706131759.png" alt="sshot-1" class="Ï†bs"></p><h2 id="é¦–é¡µ">é¦–é¡µ<a title="#é¦–é¡µ" href="#é¦–é¡µ"></a></h2><h4 id="å…¨æ–°ç›‘æ§">å…¨æ–°ç›‘æ§<a title="#å…¨æ–°ç›‘æ§" href="#å…¨æ–°ç›‘æ§"></a></h4><ul><li>å­¦æœŸå®è·µåˆ†</li><li>å½’å®¿çŠ¶æ€</li><li>Echarts å›¾è¡¨-æ¯æ—¥å¾—åˆ†-æ¯æœˆå·¥èµ„</li></ul><p><img src="https://cdn.jsdelivr.net/gh/pinkpeachabc/images/Blog-imgs/20220706131925.png" alt="sshot-2" class="Ï†bs"></p><h2 id="æ™šç­¾">æ™šç­¾<a title="#æ™šç­¾" href="#æ™šç­¾"></a></h2><h4 id="ä¸–ç•Œå„åœ°">ä¸–ç•Œå„åœ°<a title="#ä¸–ç•Œå„åœ°" href="#ä¸–ç•Œå„åœ°"></a></h4><ul><li>æ”¯æŒå…¨å›½ç©ºé™(ä»…é™ä¸­å›½)</li><li>å°ç†ŠçŒ«çš„ä½ç½®æ˜¯ç­¾åˆ°çš„åœ°ç‚¹</li></ul><p><img src="https://cdn.jsdelivr.net/gh/pinkpeachabc/images/Blog-imgs/20220706132039.png" alt="sshot-1" class="Ï†bs"></p><h2 id="æ™¨è·‘&amp;å‡æ——">æ™¨è·‘&amp;å‡æ——<a title="#æ™¨è·‘&amp;å‡æ——" href="#æ™¨è·‘&amp;å‡æ——"></a></h2><h4 id="å¹³å¹³æ— å¥‡">å¹³å¹³æ— å¥‡<a title="#å¹³å¹³æ— å¥‡" href="#å¹³å¹³æ— å¥‡"></a></h4><ul><li>æ— èŠçš„åŠŸèƒ½æ²¡æœ‰ä»€ä¹ˆå¯è¯´çš„</li></ul><p><img src="https://cdn.jsdelivr.net/gh/pinkpeachabc/images/Blog-imgs/20220706132047.png" alt="sshot-2"><br><img src="https://cdn.jsdelivr.net/gh/pinkpeachabc/images/Blog-imgs/20220706132052.png" alt="sshot-3"></p><h2 id="æ ¡è®¯é€š">æ ¡è®¯é€š<a title="#æ ¡è®¯é€š" href="#æ ¡è®¯é€š"></a></h2><h4 id="ä¾¿æ·é€šçŸ¥">ä¾¿æ·é€šçŸ¥<a title="#ä¾¿æ·é€šçŸ¥" href="#ä¾¿æ·é€šçŸ¥"></a></h4><ul><li>æ”¯æŒpcç«¯ç›´æ¥ä¸‹è½½æ–‡æ¡£ï¼ˆæ‰‹æœºç«¯è€iPhoneè¿æ–‡æ¡£éƒ½ä¸‹è½½ä¸äº†<strong>å”å±å•¦</strong>ï¼‰</li></ul><p><img src="https://cdn.jsdelivr.net/gh/pinkpeachabc/images/Blog-imgs/20220706132057.png" alt="sshot-4"><br><img src="https://cdn.jsdelivr.net/gh/pinkpeachabc/images/Blog-imgs/20220706132101.png" alt="sshot-5"></p><h2 id="å¥åº·æ¡£æ¡ˆ">å¥åº·æ¡£æ¡ˆ<a title="#å¥åº·æ¡£æ¡ˆ" href="#å¥åº·æ¡£æ¡ˆ"></a></h2><h4 id="ä¸€é”®æäº¤">ä¸€é”®æäº¤<a title="#ä¸€é”®æäº¤" href="#ä¸€é”®æäº¤"></a></h4><ul><li><strong>é¥±å—è¯Ÿç—…</strong>çš„å¥åº·æ‰“å¡å¦‚ä»Šæ‚¨åªéœ€è¦è¾“å…¥åœ°å€ç‚¹å‡»æäº¤å³å¯</li></ul><p><img src="https://cdn.jsdelivr.net/gh/pinkpeachabc/images/Blog-imgs/20220706132106.png" alt="sshot-6" class="Ï†bs"></p><h2 id="æ´»åŠ¨å¤§å’–">æ´»åŠ¨å¤§å’–<a title="#æ´»åŠ¨å¤§å’–" href="#æ´»åŠ¨å¤§å’–"></a></h2><h4 id="å®•æœºå°å­">å®•æœºå°å­<a title="#å®•æœºå°å­" href="#å®•æœºå°å­"></a></h4><ul><li>æ”¯æŒpcæŠ¢æ´»åŠ¨å’Œå®šä½ç­¾åˆ°åŠŸèƒ½ï¼ˆå¾…å¼€å‘ï¼‰</li><li>å¸®ä½ è§£å†³æ‰‹æœºå¡æ­»è¿˜æŠ¢ä¸åˆ°æ´»åŠ¨çš„éš¾é¢˜</li></ul><p><img src="https://cdn.jsdelivr.net/gh/pinkpeachabc/images/Blog-imgs/20220706132112.png" alt="sshot-7" class="Ï†bs"></p><h2 id="é»‘æš—æ¨¡å¼">é»‘æš—æ¨¡å¼<a title="#é»‘æš—æ¨¡å¼" href="#é»‘æš—æ¨¡å¼"></a></h2><h4 id="ä¸€é”®åˆ‡æ¢">ä¸€é”®åˆ‡æ¢<a title="#ä¸€é”®åˆ‡æ¢" href="#ä¸€é”®åˆ‡æ¢"></a></h4><ul><li>æ”¯æŒé»‘æš—æ¨¡å¼ï¼ˆå°ç±³æ‰‹æœºå¼€å¯é»‘æš—æ¨¡å¼ä¼šåè½¬æ‰‹æœºè‰²å½©å¯¼è‡´ç½‘ç«™é¢œè‰²å¤±è°ƒï¼‰</li></ul><p><img src="https://cdn.jsdelivr.net/gh/pinkpeachabc/images/Blog-imgs/20220706171218.png" alt="sshot-8" class="Ï†bs"></p><h2 id="find-me">Find Me<a title="#find-me" href="#find-me"></a></h2><p><a href="tjise.pinkpeachabc.cn">å¤©è½¯åŠ©æ‰‹</a>ï¼š<code>tjise.pinkpeachabc.cn</code></p><p><a href="pinkpeachabc.cn">æˆ‘çš„åšå®¢</a>ï¼š<code>pinkpeachabc.cn</code></p><p><a href="pinkpeachabc@163.com">æˆ‘çš„é‚®ç®±</a>ï¼š<code>pinkpeachabc@163.com</code></p><h2 id="å¹¿å‘Š">å¹¿å‘Š<a title="#å¹¿å‘Š" href="#å¹¿å‘Š"></a></h2><blockquote><p>å¥½æœ‹å‹ï¼ˆç½‘å®‰å¤§ä½¬ï¼‰åšäº†ä¸€ä¸ªå…¬ä¼—å·ï¼Œä¸Šé¢ä¸å®šæœŸåˆ†äº«å®‰å…¨æ–‡ç« æ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯ä»¥å…³æ³¨ä¸€ä¸‹ã€‚</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/pinkpeachabc/images/Blog-imgs/20220706171224.png" alt="image-20220706135114630" class="Ï†bs"></p><hr>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;Hello å¤§å®¶å¥½æˆ‘æ˜¯ &lt;strong&gt;@ç²‰è‰²æ¡ƒå­abc&lt;/strong&gt;ï¼Œä»Šå¤©è·Ÿå¼€å¿ƒç»™å¤§å®¶å¸¦æ¥ä¸€ä¸ªå…¨æ–°çš„ç­¾åˆ°ç³»ç»Ÿ-å¤©è½¯åŠ©æ‰‹&lt;/p&gt;
&lt;p&gt;å…è´£å£°æ˜ï¼šä¸ºé¿å…çº çº·ï¼Œç‰¹åšå‡ºå¦‚ä¸‹è¯´æ˜ï¼š&lt;strong&gt;@ç²‰è‰²æ¡ƒå­abc&lt;/strong&gt;ä¸ºæ­¤ç³»ç»Ÿçš„çœŸæ­£æ‰€æœ‰è€…ï¼Œä»Šåç”±å¤©è½¯åŠ©æ‰‹ä½¿ç”¨å¯¼è‡´çš„ä¸€åˆ‡çš„&lt;strong&gt;åæœ&lt;/strong&gt;ï¼Œå…¶è´£ä»»æ¦‚ç”±ä½¿ç”¨è€…è‡ªå·±&lt;strong&gt;æ‰¿æ‹…&lt;/strong&gt;ï¼Œä¸&lt;strong&gt;æœ¬äººæ— å…³ï¼Œç‰¹æ­¤å£°æ˜&lt;/strong&gt;ï¼&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="Vue" scheme="https://pinkpeachabc.cn/categories/Vue/"/>
    
    
    <category term="Vue" scheme="https://pinkpeachabc.cn/tags/Vue/"/>
    
  </entry>
  
  <entry>
    <title>å…è´¹VPSæ¨èï¼šEvolution Host</title>
    <link href="https://pinkpeachabc.cn/2022-06-14-%E5%85%8D%E8%B4%B9VPS%E6%8E%A8%E8%8D%90%EF%BC%9AEvolution-Host.html"/>
    <id>https://pinkpeachabc.cn/2022-06-14-%E5%85%8D%E8%B4%B9VPS%E6%8E%A8%E8%8D%90%EF%BC%9AEvolution-Host.html</id>
    <published>2022-06-13T19:18:25.000Z</published>
    <updated>2022-06-14T05:16:38.244Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ä»Šå¤©æ¨èä¸€æ¬¾å·ç§°æ°¸ä¹…å…è´¹çš„VPSä¸»æœºï¼š<a href="https://www.machunjie.com/go/?url=https://evolution-host.com/vps-hosting.php" target="_blank">Evolution Hostï¼šhttps://evolution-host.com/vps-hosting.php</a></p></blockquote><a id="more"></a><h2 id="å…è´¹vpsæ¨èï¼ševolution-host">å…è´¹VPSæ¨èï¼šEvolution Host<a title="#å…è´¹vpsæ¨èï¼ševolution-host" href="#å…è´¹vpsæ¨èï¼ševolution-host"></a></h2><blockquote><p>Evolution Host æ˜¯ä¸€å®¶è‡ª2012å¹´ä»¥æ¥ä¸€ç›´å­˜åœ¨ï¼Œå¹¶ä¸”è‡ª2013å¹´ä»¥æ¥ä¸€ç›´åœ¨æ‰˜ç®¡è§£å†³æ–¹æ¡ˆæ–¹é¢è¿›è¡Œäº¤æ˜“ï¼ˆä»¥å‰ç§°ä¸º<a href="https://evolutionhost.co/" target="_blank">evolutionhost.co</a>.ukï¼‰ã€‚æˆ‘ä»¬å¸Œæœ›æ¯6ä¸ªæœˆå·¦å³ä¸ºå“ç‰Œå¼•å…¥æ–°æŠ€æœ¯ï¼Œæ–°ä½ç½®å’Œ/æˆ–æ–°æœåŠ¡ï¼Œä»è€Œä¿æŒä¸æ—¶ä¿±è¿›çš„å¸å¼•åŠ›ã€‚ æˆ‘ä»¬æä¾›100ï¼…ä¸“ç”¨çš„KVMèµ„æºï¼Œå…·æœ‰ç¨³å®šçš„CPUæ—¶é—´å¯ç”¨æ€§å’Œé«˜æ—¶é’Ÿé€Ÿåº¦ã€‚é˜…è¯»ï¼šä¸è¿›è¡ŒèŠ‚æµæˆ–æ ‡è®°åŒ–ã€‚æˆ‘ä»¬çš„VPSç‰¹åˆ«é€‚åˆæ¸¸æˆæœåŠ¡å™¨æ‰˜ç®¡ï¼Œå…¶CPUæ ¸å¿ƒæ—¶é’Ÿé«˜è¾¾5.0Ghzï¼Œä»è€Œå®ç°äº†å¾ˆé«˜çš„å•æ ¸æ€§èƒ½ã€‚é«˜æ—¶é’Ÿé€Ÿåº¦å¯¹äºæ›´ä¼ ç»Ÿçš„å·¥ä½œè´Ÿè½½ä¹Ÿæœ‰å¥½å¤„ã€‚</p></blockquote><h2 id="å…è´¹vps">å…è´¹VPS<a title="#å…è´¹vps" href="#å…è´¹vps"></a></h2><p>å…è´¹VPSé…ç½®ï¼š</p><ul><li>4Ghz +ä¸Šçš„4ä¸ªCPUå†…æ ¸</li><li>4GB DDR4å†…å­˜</li><li>80GB SSDæˆ–350GB HDD</li><li>1Gb / sç«¯å£</li><li>60TBæ¯æœˆä¼ è¾“</li><li>å…ˆè¿›çš„DDoSé˜²æŠ¤</li><li>Linuxæˆ–Windows</li><li>æ¬§æ´²/ç¾å›½ä½ç½®</li></ul><h2 id="å…è´¹ç”³è¯·">å…è´¹ç”³è¯·<a title="#å…è´¹ç”³è¯·" href="#å…è´¹ç”³è¯·"></a></h2><p>ç”³è¯·åœ°å€ï¼š <a href="https://evolution-host.com/free-vps.php" target="_blank">â†’â†’ä¼ é€é—¨</a></p><p>We do not accept applications for websites of a pornographic nature. Site popularity and relevancy will be the biggest deciding factor for each applicant.</p><p>Donâ€™t worry if you feel your website wonâ€™t be eligible for the spec mentioned above, we may be able to offer you an alternate free VPS package.</p><p><img src="https://s2.loli.net/2022/06/14/UMJn9VxagCbi2ZS.png" alt="FireShot Capture 003 - Extreme CPU frequency VPS Hosting from Evolution Host - evolution-host.com" class="Ï†bs"></p>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;ä»Šå¤©æ¨èä¸€æ¬¾å·ç§°æ°¸ä¹…å…è´¹çš„VPSä¸»æœºï¼š&lt;a href=&quot;https://www.machunjie.com/go/?url=https://evolution-host.com/vps-hosting.php&quot; target=&quot;_blank&quot;&gt;Evolution Hostï¼šhttps://evolution-host.com/vps-hosting.php&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="äº‘æœåŠ¡å™¨" scheme="https://pinkpeachabc.cn/categories/%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    
    
    <category term="VPS" scheme="https://pinkpeachabc.cn/tags/VPS/"/>
    
  </entry>
  
  <entry>
    <title>Vue3å¿«é€Ÿä¸Šæ‰‹</title>
    <link href="https://pinkpeachabc.cn/vue3.html"/>
    <id>https://pinkpeachabc.cn/vue3.html</id>
    <published>2022-02-22T23:51:31.000Z</published>
    <updated>2022-02-23T09:26:33.881Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a><h1 id="vue3å¿«é€Ÿä¸Šæ‰‹">Vue3å¿«é€Ÿä¸Šæ‰‹<a title="#vue3å¿«é€Ÿä¸Šæ‰‹" href="#vue3å¿«é€Ÿä¸Šæ‰‹"></a></h1><p><img src="https://user-images.githubusercontent.com/499550/93624428-53932780-f9ae-11ea-8d16-af949e16a09f.png" alt="" class="Ï†bs"></p><h2 id="1.vue3ç®€ä»‹">1.Vue3ç®€ä»‹<a title="#1.vue3ç®€ä»‹" href="#1.vue3ç®€ä»‹"></a></h2><ul><li>2020å¹´9æœˆ18æ—¥ï¼ŒVue.jså‘å¸ƒ3.0ç‰ˆæœ¬ï¼Œä»£å·ï¼šOne Pieceï¼ˆæµ·è´¼ç‹ï¼‰</li><li>è€—æ—¶2å¹´å¤šã€<a href="https://github.com/vuejs/vue-next/graphs/commit-activity" target="_blank">2600+æ¬¡æäº¤</a>ã€<a href="https://github.com/vuejs/rfcs/tree/master/active-rfcs" target="_blank">30+ä¸ªRFC</a>ã€<a href="https://github.com/vuejs/vue-next/pulls?q=is%3Apr+is%3Amerged+-author%3Aapp%2Fdependabot-preview+" target="_blank">600+æ¬¡PR</a>ã€<a href="https://github.com/vuejs/vue-next/graphs/contributors" target="_blank">99ä½è´¡çŒ®è€…</a></li><li>githubä¸Šçš„tagsåœ°å€ï¼š<a href="https://github.com/vuejs/vue-next/releases/tag/v3.0.0">https://github.com/vuejs/vue-next/releases/tag/v3.0.0</a></li></ul><h2 id="2.vue3å¸¦æ¥äº†ä»€ä¹ˆ">2.Vue3å¸¦æ¥äº†ä»€ä¹ˆ<a title="#2.vue3å¸¦æ¥äº†ä»€ä¹ˆ" href="#2.vue3å¸¦æ¥äº†ä»€ä¹ˆ"></a></h2><h3 id="1.æ€§èƒ½çš„æå‡">1.æ€§èƒ½çš„æå‡<a title="#1.æ€§èƒ½çš„æå‡" href="#1.æ€§èƒ½çš„æå‡"></a></h3><ul><li><p>æ‰“åŒ…å¤§å°å‡å°‘41%</p></li><li><p>åˆæ¬¡æ¸²æŸ“å¿«55%, æ›´æ–°æ¸²æŸ“å¿«133%</p></li><li><p>å†…å­˜å‡å°‘54%</p><p>â€¦</p></li></ul><h3 id="2.æºç çš„å‡çº§">2.æºç çš„å‡çº§<a title="#2.æºç çš„å‡çº§" href="#2.æºç çš„å‡çº§"></a></h3><ul><li><p>ä½¿ç”¨Proxyä»£æ›¿definePropertyå®ç°å“åº”å¼</p></li><li><p>é‡å†™è™šæ‹ŸDOMçš„å®ç°å’ŒTree-Shaking</p><p>â€¦</p></li></ul><h3 id="3.æ‹¥æŠ±typescript">3.æ‹¥æŠ±TypeScript<a title="#3.æ‹¥æŠ±typescript" href="#3.æ‹¥æŠ±typescript"></a></h3><ul><li>Vue3å¯ä»¥æ›´å¥½çš„æ”¯æŒTypeScript</li></ul><h3 id="4.æ–°çš„ç‰¹æ€§">4.æ–°çš„ç‰¹æ€§<a title="#4.æ–°çš„ç‰¹æ€§" href="#4.æ–°çš„ç‰¹æ€§"></a></h3><ol><li><p>Composition APIï¼ˆç»„åˆAPIï¼‰</p><ul><li>setupé…ç½®</li><li>refä¸reactive</li><li>watchä¸watchEffect</li><li>provideä¸inject</li><li>â€¦</li></ul></li><li><p>æ–°çš„å†…ç½®ç»„ä»¶</p><ul><li>Fragment</li><li>Teleport</li><li>Suspense</li></ul></li><li><p>å…¶ä»–æ”¹å˜</p><ul><li>æ–°çš„ç”Ÿå‘½å‘¨æœŸé’©å­</li><li>data é€‰é¡¹åº”å§‹ç»ˆè¢«å£°æ˜ä¸ºä¸€ä¸ªå‡½æ•°</li><li>ç§»é™¤keyCodeæ”¯æŒä½œä¸º v-on çš„ä¿®é¥°ç¬¦</li><li>â€¦</li></ul></li></ol><h1 id="ä¸€ã€åˆ›å»ºvue3.0å·¥ç¨‹">ä¸€ã€åˆ›å»ºVue3.0å·¥ç¨‹<a title="#ä¸€ã€åˆ›å»ºvue3.0å·¥ç¨‹" href="#ä¸€ã€åˆ›å»ºvue3.0å·¥ç¨‹"></a></h1><h2 id="1.ä½¿ç”¨-vue-cli-åˆ›å»º">1.ä½¿ç”¨ vue-cli åˆ›å»º<a title="#1.ä½¿ç”¨-vue-cli-åˆ›å»º" href="#1.ä½¿ç”¨-vue-cli-åˆ›å»º"></a></h2><p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://cli.vuejs.org/zh/guide/creating-a-project.html#vue-create">https://cli.vuejs.org/zh/guide/creating-a-project.html#vue-create</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## æŸ¥çœ‹@vue/cliç‰ˆæœ¬ï¼Œç¡®ä¿@vue/cliç‰ˆæœ¬åœ¨4.5.0ä»¥ä¸Š</span></span><br><span class="line">vue --version</span><br><span class="line"><span class="comment">## å®‰è£…æˆ–è€…å‡çº§ä½ çš„@vue/cli</span></span><br><span class="line">npm install -g @vue/cli</span><br><span class="line"><span class="comment">## åˆ›å»º</span></span><br><span class="line">vue create vue_test</span><br><span class="line"><span class="comment">## å¯åŠ¨</span></span><br><span class="line"><span class="built_in">cd</span> vue_test</span><br><span class="line">npm run serve</span><br></pre></td></tr></table></figure><h2 id="2.ä½¿ç”¨-vite-åˆ›å»º">2.ä½¿ç”¨ vite åˆ›å»º<a title="#2.ä½¿ç”¨-vite-åˆ›å»º" href="#2.ä½¿ç”¨-vite-åˆ›å»º"></a></h2><p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://v3.cn.vuejs.org/guide/installation.html#vite">https://v3.cn.vuejs.org/guide/installation.html#vite</a></p><p>viteå®˜ç½‘ï¼š<a href="https://vitejs.cn">https://vitejs.cn</a></p><ul><li>ä»€ä¹ˆæ˜¯viteï¼Ÿâ€”â€” æ–°ä¸€ä»£å‰ç«¯æ„å»ºå·¥å…·ã€‚</li><li>ä¼˜åŠ¿å¦‚ä¸‹ï¼š<ul><li>å¼€å‘ç¯å¢ƒä¸­ï¼Œæ— éœ€æ‰“åŒ…æ“ä½œï¼Œå¯å¿«é€Ÿçš„å†·å¯åŠ¨ã€‚</li><li>è½»é‡å¿«é€Ÿçš„çƒ­é‡è½½ï¼ˆHMRï¼‰ã€‚</li><li>çœŸæ­£çš„æŒ‰éœ€ç¼–è¯‘ï¼Œä¸å†ç­‰å¾…æ•´ä¸ªåº”ç”¨ç¼–è¯‘å®Œæˆã€‚</li></ul></li><li>ä¼ ç»Ÿæ„å»º ä¸ viteæ„å»ºå¯¹æ¯”å›¾</li></ul><p><img src="https://cn.vitejs.dev/assets/bundler.37740380.png" alt="" class="Ï†bs"></p><p><img src="https://cn.vitejs.dev/assets/esm.3070012d.png" alt="" class="Ï†bs"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## åˆ›å»ºå·¥ç¨‹</span></span><br><span class="line">npm init vite-app &lt;project-name&gt;</span><br><span class="line"><span class="comment">## è¿›å…¥å·¥ç¨‹ç›®å½•</span></span><br><span class="line"><span class="built_in">cd</span> &lt;project-name&gt;</span><br><span class="line"><span class="comment">## å®‰è£…ä¾èµ–</span></span><br><span class="line">npm install</span><br><span class="line"><span class="comment">## è¿è¡Œ</span></span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure><h1 id="äºŒã€å¸¸ç”¨-composition-api">äºŒã€å¸¸ç”¨ Composition API<a title="#äºŒã€å¸¸ç”¨-composition-api" href="#äºŒã€å¸¸ç”¨-composition-api"></a></h1><p>å®˜æ–¹æ–‡æ¡£: <a href="https://v3.cn.vuejs.org/guide/composition-api-introduction.html">https://v3.cn.vuejs.org/guide/composition-api-introduction.html</a></p><h2 id="1.æ‹‰å¼€åºå¹•çš„setup">1.æ‹‰å¼€åºå¹•çš„setup<a title="#1.æ‹‰å¼€åºå¹•çš„setup" href="#1.æ‹‰å¼€åºå¹•çš„setup"></a></h2><ol><li>ç†è§£ï¼šVue3.0ä¸­ä¸€ä¸ªæ–°çš„é…ç½®é¡¹ï¼Œå€¼ä¸ºä¸€ä¸ªå‡½æ•°ã€‚</li><li>setupæ˜¯æ‰€æœ‰<strong style="color:#DD5145">Composition APIï¼ˆç»„åˆAPIï¼‰</strong><i style="color:gray;font-weight:bold">â€œ è¡¨æ¼”çš„èˆå° â€</i>ã€‚</li><li>ç»„ä»¶ä¸­æ‰€ç”¨åˆ°çš„ï¼šæ•°æ®ã€æ–¹æ³•ç­‰ç­‰ï¼Œå‡è¦é…ç½®åœ¨setupä¸­ã€‚</li><li>setupå‡½æ•°çš„ä¸¤ç§è¿”å›å€¼ï¼š<ol><li>è‹¥è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™å¯¹è±¡ä¸­çš„å±æ€§ã€æ–¹æ³•, åœ¨æ¨¡æ¿ä¸­å‡å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚ï¼ˆé‡ç‚¹å…³æ³¨ï¼ï¼‰</li><li><span style="color:#aad">è‹¥è¿”å›ä¸€ä¸ªæ¸²æŸ“å‡½æ•°ï¼šåˆ™å¯ä»¥è‡ªå®šä¹‰æ¸²æŸ“å†…å®¹ã€‚ï¼ˆäº†è§£ï¼‰</span></li></ol></li><li>æ³¨æ„ç‚¹ï¼š<ol><li>å°½é‡ä¸è¦ä¸Vue2.xé…ç½®æ··ç”¨<ul><li>Vue2.xé…ç½®ï¼ˆdataã€methosã€computedâ€¦ï¼‰ä¸­<strong style="color:#DD5145">å¯ä»¥è®¿é—®åˆ°</strong>setupä¸­çš„å±æ€§ã€æ–¹æ³•ã€‚</li><li>ä½†åœ¨setupä¸­<strong style="color:#DD5145">ä¸èƒ½è®¿é—®åˆ°</strong>Vue2.xé…ç½®ï¼ˆdataã€methosã€computedâ€¦ï¼‰ã€‚</li><li>å¦‚æœæœ‰é‡å, setupä¼˜å…ˆã€‚</li></ul></li><li>setupä¸èƒ½æ˜¯ä¸€ä¸ªasyncå‡½æ•°ï¼Œå› ä¸ºè¿”å›å€¼ä¸å†æ˜¯returnçš„å¯¹è±¡, è€Œæ˜¯promise, æ¨¡æ¿çœ‹ä¸åˆ°returnå¯¹è±¡ä¸­çš„å±æ€§ã€‚ï¼ˆåæœŸä¹Ÿå¯ä»¥è¿”å›ä¸€ä¸ªPromiseå®ä¾‹ï¼Œä½†éœ€è¦Suspenseå’Œå¼‚æ­¥ç»„ä»¶çš„é…åˆï¼‰</li></ol></li></ol><h2 id="2.refå‡½æ•°">2.refå‡½æ•°<a title="#2.refå‡½æ•°" href="#2.refå‡½æ•°"></a></h2><ul><li>ä½œç”¨: å®šä¹‰ä¸€ä¸ªå“åº”å¼çš„æ•°æ®</li><li>è¯­æ³•: <code>const xxx = ref(initValue)</code><ul><li>åˆ›å»ºä¸€ä¸ªåŒ…å«å“åº”å¼æ•°æ®çš„<strong style="color:#DD5145">å¼•ç”¨å¯¹è±¡ï¼ˆreferenceå¯¹è±¡ï¼Œç®€ç§°refå¯¹è±¡ï¼‰</strong>ã€‚</li><li>JSä¸­æ“ä½œæ•°æ®ï¼š <code>xxx.value</code></li><li>æ¨¡æ¿ä¸­è¯»å–æ•°æ®: ä¸éœ€è¦.valueï¼Œç›´æ¥ï¼š<code>&lt;div&gt;&#123;&#123;xxx&#125;&#125;&lt;/div&gt;</code></li></ul></li><li>å¤‡æ³¨ï¼š<ul><li>æ¥æ”¶çš„æ•°æ®å¯ä»¥æ˜¯ï¼šåŸºæœ¬ç±»å‹ã€ä¹Ÿå¯ä»¥æ˜¯å¯¹è±¡ç±»å‹ã€‚</li><li>åŸºæœ¬ç±»å‹çš„æ•°æ®ï¼šå“åº”å¼ä¾ç„¶æ˜¯é <code>Object.defineProperty()</code>çš„<code>get</code>ä¸<code>set</code>å®Œæˆçš„ã€‚</li><li>å¯¹è±¡ç±»å‹çš„æ•°æ®ï¼šå†…éƒ¨ <i style="color:gray;font-weight:bold">â€œ æ±‚åŠ© â€</i> äº†Vue3.0ä¸­çš„ä¸€ä¸ªæ–°å‡½æ•°â€”â€” <code>reactive</code>å‡½æ•°ã€‚</li></ul></li></ul><h2 id="3.reactiveå‡½æ•°">3.reactiveå‡½æ•°<a title="#3.reactiveå‡½æ•°" href="#3.reactiveå‡½æ•°"></a></h2><ul><li>ä½œç”¨: å®šä¹‰ä¸€ä¸ª<strong style="color:#DD5145">å¯¹è±¡ç±»å‹</strong>çš„å“åº”å¼æ•°æ®ï¼ˆåŸºæœ¬ç±»å‹ä¸è¦ç”¨å®ƒï¼Œè¦ç”¨<code>ref</code>å‡½æ•°ï¼‰</li><li>è¯­æ³•ï¼š<code>const ä»£ç†å¯¹è±¡= reactive(æºå¯¹è±¡)</code>æ¥æ”¶ä¸€ä¸ªå¯¹è±¡ï¼ˆæˆ–æ•°ç»„ï¼‰ï¼Œè¿”å›ä¸€ä¸ª<strong style="color:#DD5145">ä»£ç†å¯¹è±¡ï¼ˆProxyçš„å®ä¾‹å¯¹è±¡ï¼Œç®€ç§°proxyå¯¹è±¡ï¼‰</strong></li><li>reactiveå®šä¹‰çš„å“åº”å¼æ•°æ®æ˜¯â€œæ·±å±‚æ¬¡çš„â€ã€‚</li><li>å†…éƒ¨åŸºäº ES6 çš„ Proxy å®ç°ï¼Œé€šè¿‡ä»£ç†å¯¹è±¡æ“ä½œæºå¯¹è±¡å†…éƒ¨æ•°æ®è¿›è¡Œæ“ä½œã€‚</li></ul><h2 id="4.vue3.0ä¸­çš„å“åº”å¼åŸç†">4.Vue3.0ä¸­çš„å“åº”å¼åŸç†<a title="#4.vue3.0ä¸­çš„å“åº”å¼åŸç†" href="#4.vue3.0ä¸­çš„å“åº”å¼åŸç†"></a></h2><h3 id="vue2.xçš„å“åº”å¼">vue2.xçš„å“åº”å¼<a title="#vue2.xçš„å“åº”å¼" href="#vue2.xçš„å“åº”å¼"></a></h3><ul><li><p>å®ç°åŸç†ï¼š</p><ul><li><p>å¯¹è±¡ç±»å‹ï¼šé€šè¿‡<code>Object.defineProperty()</code>å¯¹å±æ€§çš„è¯»å–ã€ä¿®æ”¹è¿›è¡Œæ‹¦æˆªï¼ˆæ•°æ®åŠ«æŒï¼‰ã€‚</p></li><li><p>æ•°ç»„ç±»å‹ï¼šé€šè¿‡é‡å†™æ›´æ–°æ•°ç»„çš„ä¸€ç³»åˆ—æ–¹æ³•æ¥å®ç°æ‹¦æˆªã€‚ï¼ˆå¯¹æ•°ç»„çš„å˜æ›´æ–¹æ³•è¿›è¡Œäº†åŒ…è£¹ï¼‰ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.defineProperty(data, <span class="string">&#x27;count&#x27;</span>, &#123;</span><br><span class="line">    get () &#123;&#125;, </span><br><span class="line">    set () &#123;&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ul></li><li><p>å­˜åœ¨é—®é¢˜ï¼š</p><ul><li>æ–°å¢å±æ€§ã€åˆ é™¤å±æ€§, ç•Œé¢ä¸ä¼šæ›´æ–°ã€‚</li><li>ç›´æ¥é€šè¿‡ä¸‹æ ‡ä¿®æ”¹æ•°ç»„, ç•Œé¢ä¸ä¼šè‡ªåŠ¨æ›´æ–°ã€‚</li></ul></li></ul><h3 id="vue3.0çš„å“åº”å¼">Vue3.0çš„å“åº”å¼<a title="#vue3.0çš„å“åº”å¼" href="#vue3.0çš„å“åº”å¼"></a></h3><ul><li>å®ç°åŸç†:<ul><li>é€šè¿‡Proxyï¼ˆä»£ç†ï¼‰:  æ‹¦æˆªå¯¹è±¡ä¸­ä»»æ„å±æ€§çš„å˜åŒ–, åŒ…æ‹¬ï¼šå±æ€§å€¼çš„è¯»å†™ã€å±æ€§çš„æ·»åŠ ã€å±æ€§çš„åˆ é™¤ç­‰ã€‚</li><li>é€šè¿‡Reflectï¼ˆåå°„ï¼‰:  å¯¹æºå¯¹è±¡çš„å±æ€§è¿›è¡Œæ“ä½œã€‚</li><li>MDNæ–‡æ¡£ä¸­æè¿°çš„Proxyä¸Reflectï¼š<ul><li><p>Proxyï¼š<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy</a></p></li><li><p>Reflectï¼š<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Proxy</span>(data, &#123;</span><br><span class="line"><span class="comment">// æ‹¦æˆªè¯»å–å±æ€§å€¼</span></span><br><span class="line">    get (target, prop) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Reflect</span>.get(target, prop)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// æ‹¦æˆªè®¾ç½®å±æ€§å€¼æˆ–æ·»åŠ æ–°å±æ€§</span></span><br><span class="line">    set (target, prop, value) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Reflect</span>.set(target, prop, value)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// æ‹¦æˆªåˆ é™¤å±æ€§</span></span><br><span class="line">    deleteProperty (target, prop) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Reflect</span>.deleteProperty(target, prop)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">proxy.name = <span class="string">&#x27;tom&#x27;</span>   </span><br></pre></td></tr></table></figure></li></ul></li></ul></li></ul><h2 id="5.reactiveå¯¹æ¯”ref">5.reactiveå¯¹æ¯”ref<a title="#5.reactiveå¯¹æ¯”ref" href="#5.reactiveå¯¹æ¯”ref"></a></h2><ul><li>ä»å®šä¹‰æ•°æ®è§’åº¦å¯¹æ¯”ï¼š<ul><li>refç”¨æ¥å®šä¹‰ï¼š<strong style="color:#DD5145">åŸºæœ¬ç±»å‹æ•°æ®</strong>ã€‚</li><li>reactiveç”¨æ¥å®šä¹‰ï¼š<strong style="color:#DD5145">å¯¹è±¡ï¼ˆæˆ–æ•°ç»„ï¼‰ç±»å‹æ•°æ®</strong>ã€‚</li><li>å¤‡æ³¨ï¼šrefä¹Ÿå¯ä»¥ç”¨æ¥å®šä¹‰<strong style="color:#DD5145">å¯¹è±¡ï¼ˆæˆ–æ•°ç»„ï¼‰ç±»å‹æ•°æ®</strong>, å®ƒå†…éƒ¨ä¼šè‡ªåŠ¨é€šè¿‡<code>reactive</code>è½¬ä¸º<strong style="color:#DD5145">ä»£ç†å¯¹è±¡</strong>ã€‚</li></ul></li><li>ä»åŸç†è§’åº¦å¯¹æ¯”ï¼š<ul><li>refé€šè¿‡<code>Object.defineProperty()</code>çš„<code>get</code>ä¸<code>set</code>æ¥å®ç°å“åº”å¼ï¼ˆæ•°æ®åŠ«æŒï¼‰ã€‚</li><li>reactiveé€šè¿‡ä½¿ç”¨<strong style="color:#DD5145">Proxy</strong>æ¥å®ç°å“åº”å¼ï¼ˆæ•°æ®åŠ«æŒï¼‰, å¹¶é€šè¿‡<strong style="color:#DD5145">Reflect</strong>æ“ä½œ<strong style="color:orange">æºå¯¹è±¡</strong>å†…éƒ¨çš„æ•°æ®ã€‚</li></ul></li><li>ä»ä½¿ç”¨è§’åº¦å¯¹æ¯”ï¼š<ul><li>refå®šä¹‰çš„æ•°æ®ï¼šæ“ä½œæ•°æ®<strong style="color:#DD5145">éœ€è¦</strong><code>.value</code>ï¼Œè¯»å–æ•°æ®æ—¶æ¨¡æ¿ä¸­ç›´æ¥è¯»å–<strong style="color:#DD5145">ä¸éœ€è¦</strong><code>.value</code>ã€‚</li><li>reactiveå®šä¹‰çš„æ•°æ®ï¼šæ“ä½œæ•°æ®ä¸è¯»å–æ•°æ®ï¼š<strong style="color:#DD5145">å‡ä¸éœ€è¦</strong><code>.value</code>ã€‚</li></ul></li></ul><h2 id="6.setupçš„ä¸¤ä¸ªæ³¨æ„ç‚¹">6.setupçš„ä¸¤ä¸ªæ³¨æ„ç‚¹<a title="#6.setupçš„ä¸¤ä¸ªæ³¨æ„ç‚¹" href="#6.setupçš„ä¸¤ä¸ªæ³¨æ„ç‚¹"></a></h2><ul><li><p>setupæ‰§è¡Œçš„æ—¶æœº</p><ul><li>åœ¨beforeCreateä¹‹å‰æ‰§è¡Œä¸€æ¬¡ï¼Œthisæ˜¯undefinedã€‚</li></ul></li><li><p>setupçš„å‚æ•°</p><ul><li>propsï¼šå€¼ä¸ºå¯¹è±¡ï¼ŒåŒ…å«ï¼šç»„ä»¶å¤–éƒ¨ä¼ é€’è¿‡æ¥ï¼Œä¸”ç»„ä»¶å†…éƒ¨å£°æ˜æ¥æ”¶äº†çš„å±æ€§ã€‚</li><li>contextï¼šä¸Šä¸‹æ–‡å¯¹è±¡<ul><li>attrs: å€¼ä¸ºå¯¹è±¡ï¼ŒåŒ…å«ï¼šç»„ä»¶å¤–éƒ¨ä¼ é€’è¿‡æ¥ï¼Œä½†æ²¡æœ‰åœ¨propsé…ç½®ä¸­å£°æ˜çš„å±æ€§, ç›¸å½“äº <code>this.$attrs</code>ã€‚</li><li>slots: æ”¶åˆ°çš„æ’æ§½å†…å®¹, ç›¸å½“äº <code>this.$slots</code>ã€‚</li><li>emit: åˆ†å‘è‡ªå®šä¹‰äº‹ä»¶çš„å‡½æ•°, ç›¸å½“äº <code>this.$emit</code>ã€‚</li></ul></li></ul></li></ul><h2 id="7.è®¡ç®—å±æ€§ä¸ç›‘è§†">7.è®¡ç®—å±æ€§ä¸ç›‘è§†<a title="#7.è®¡ç®—å±æ€§ä¸ç›‘è§†" href="#7.è®¡ç®—å±æ€§ä¸ç›‘è§†"></a></h2><h3 id="1.computedå‡½æ•°">1.computedå‡½æ•°<a title="#1.computedå‡½æ•°" href="#1.computedå‡½æ•°"></a></h3><ul><li><p>ä¸Vue2.xä¸­computedé…ç½®åŠŸèƒ½ä¸€è‡´</p></li><li><p>å†™æ³•</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;computed&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line">setup()&#123;</span><br><span class="line">    ...</span><br><span class="line"><span class="comment">//è®¡ç®—å±æ€§â€”â€”ç®€å†™</span></span><br><span class="line">    <span class="keyword">let</span> fullName = computed(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> person.firstName + <span class="string">&#x27;-&#x27;</span> + person.lastName</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">//è®¡ç®—å±æ€§â€”â€”å®Œæ•´</span></span><br><span class="line">    <span class="keyword">let</span> fullName = computed(&#123;</span><br><span class="line">        get()&#123;</span><br><span class="line">            <span class="keyword">return</span> person.firstName + <span class="string">&#x27;-&#x27;</span> + person.lastName</span><br><span class="line">        &#125;,</span><br><span class="line">        set(value)&#123;</span><br><span class="line">            <span class="keyword">const</span> nameArr = value.split(<span class="string">&#x27;-&#x27;</span>)</span><br><span class="line">            person.firstName = nameArr[<span class="number">0</span>]</span><br><span class="line">            person.lastName = nameArr[<span class="number">1</span>]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="2.watchå‡½æ•°">2.watchå‡½æ•°<a title="#2.watchå‡½æ•°" href="#2.watchå‡½æ•°"></a></h3><ul><li><p>ä¸Vue2.xä¸­watché…ç½®åŠŸèƒ½ä¸€è‡´</p></li><li><p>ä¸¤ä¸ªå°â€œå‘â€ï¼š</p><ul><li>ç›‘è§†reactiveå®šä¹‰çš„å“åº”å¼æ•°æ®æ—¶ï¼šoldValueæ— æ³•æ­£ç¡®è·å–ã€å¼ºåˆ¶å¼€å¯äº†æ·±åº¦ç›‘è§†ï¼ˆdeepé…ç½®å¤±æ•ˆï¼‰ã€‚</li><li>ç›‘è§†reactiveå®šä¹‰çš„å“åº”å¼æ•°æ®ä¸­æŸä¸ªå±æ€§æ—¶ï¼šdeepé…ç½®æœ‰æ•ˆã€‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æƒ…å†µä¸€ï¼šç›‘è§†refå®šä¹‰çš„å“åº”å¼æ•°æ®</span></span><br><span class="line">watch(sum,<span class="function">(<span class="params">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;sumå˜åŒ–äº†&#x27;</span>,newValue,oldValue)</span><br><span class="line">&#125;,&#123;<span class="attr">immediate</span>:<span class="literal">true</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//æƒ…å†µäºŒï¼šç›‘è§†å¤šä¸ªrefå®šä¹‰çš„å“åº”å¼æ•°æ®</span></span><br><span class="line">watch([sum,msg],<span class="function">(<span class="params">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;sumæˆ–msgå˜åŒ–äº†&#x27;</span>,newValue,oldValue)</span><br><span class="line">&#125;) </span><br><span class="line"></span><br><span class="line"><span class="comment">/* æƒ…å†µä¸‰ï¼šç›‘è§†reactiveå®šä¹‰çš„å“åº”å¼æ•°æ®</span></span><br><span class="line"><span class="comment">è‹¥watchç›‘è§†çš„æ˜¯reactiveå®šä¹‰çš„å“åº”å¼æ•°æ®ï¼Œåˆ™æ— æ³•æ­£ç¡®è·å¾—oldValueï¼ï¼</span></span><br><span class="line"><span class="comment">è‹¥watchç›‘è§†çš„æ˜¯reactiveå®šä¹‰çš„å“åº”å¼æ•°æ®ï¼Œåˆ™å¼ºåˆ¶å¼€å¯äº†æ·±åº¦ç›‘è§† </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">watch(person,<span class="function">(<span class="params">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;personå˜åŒ–äº†&#x27;</span>,newValue,oldValue)</span><br><span class="line">&#125;,&#123;<span class="attr">immediate</span>:<span class="literal">true</span>,<span class="attr">deep</span>:<span class="literal">false</span>&#125;) <span class="comment">//æ­¤å¤„çš„deepé…ç½®ä¸å†å¥æ•ˆ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æƒ…å†µå››ï¼šç›‘è§†reactiveå®šä¹‰çš„å“åº”å¼æ•°æ®ä¸­çš„æŸä¸ªå±æ€§</span></span><br><span class="line">watch(<span class="function">()=&gt;</span>person.job,<span class="function">(<span class="params">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;personçš„jobå˜åŒ–äº†&#x27;</span>,newValue,oldValue)</span><br><span class="line">&#125;,&#123;<span class="attr">immediate</span>:<span class="literal">true</span>,<span class="attr">deep</span>:<span class="literal">true</span>&#125;) </span><br><span class="line"></span><br><span class="line"><span class="comment">//æƒ…å†µäº”ï¼šç›‘è§†reactiveå®šä¹‰çš„å“åº”å¼æ•°æ®ä¸­çš„æŸäº›å±æ€§</span></span><br><span class="line">watch([<span class="function">()=&gt;</span>person.job,<span class="function">()=&gt;</span>person.name],<span class="function">(<span class="params">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;personçš„jobå˜åŒ–äº†&#x27;</span>,newValue,oldValue)</span><br><span class="line">&#125;,&#123;<span class="attr">immediate</span>:<span class="literal">true</span>,<span class="attr">deep</span>:<span class="literal">true</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç‰¹æ®Šæƒ…å†µ</span></span><br><span class="line">watch(<span class="function">()=&gt;</span>person.job,<span class="function">(<span class="params">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;personçš„jobå˜åŒ–äº†&#x27;</span>,newValue,oldValue)</span><br><span class="line">&#125;,&#123;<span class="attr">deep</span>:<span class="literal">true</span>&#125;) <span class="comment">//æ­¤å¤„ç”±äºç›‘è§†çš„æ˜¯reactiveç´ å®šä¹‰çš„å¯¹è±¡ä¸­çš„æŸä¸ªå±æ€§ï¼Œæ‰€ä»¥deepé…ç½®æœ‰æ•ˆ</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="3.watcheffectå‡½æ•°">3.watchEffectå‡½æ•°<a title="#3.watcheffectå‡½æ•°" href="#3.watcheffectå‡½æ•°"></a></h3><ul><li><p>watchçš„å¥—è·¯æ˜¯ï¼šæ—¢è¦æŒ‡æ˜ç›‘è§†çš„å±æ€§ï¼Œä¹Ÿè¦æŒ‡æ˜ç›‘è§†çš„å›è°ƒã€‚</p></li><li><p>watchEffectçš„å¥—è·¯æ˜¯ï¼šä¸ç”¨æŒ‡æ˜ç›‘è§†å“ªä¸ªå±æ€§ï¼Œç›‘è§†çš„å›è°ƒä¸­ç”¨åˆ°å“ªä¸ªå±æ€§ï¼Œé‚£å°±ç›‘è§†å“ªä¸ªå±æ€§ã€‚</p></li><li><p>watchEffectæœ‰ç‚¹åƒcomputedï¼š</p><ul><li>ä½†computedæ³¨é‡çš„è®¡ç®—å‡ºæ¥çš„å€¼ï¼ˆå›è°ƒå‡½æ•°çš„è¿”å›å€¼ï¼‰ï¼Œæ‰€ä»¥å¿…é¡»è¦å†™è¿”å›å€¼ã€‚</li><li>è€ŒwatchEffectæ›´æ³¨é‡çš„æ˜¯è¿‡ç¨‹ï¼ˆå›è°ƒå‡½æ•°çš„å‡½æ•°ä½“ï¼‰ï¼Œæ‰€ä»¥ä¸ç”¨å†™è¿”å›å€¼ã€‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//watchEffectæ‰€æŒ‡å®šçš„å›è°ƒä¸­ç”¨åˆ°çš„æ•°æ®åªè¦å‘ç”Ÿå˜åŒ–ï¼Œåˆ™ç›´æ¥é‡æ–°æ‰§è¡Œå›è°ƒã€‚</span></span><br><span class="line">watchEffect(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> x1 = sum.value</span><br><span class="line">    <span class="keyword">const</span> x2 = person.age</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;watchEffecté…ç½®çš„å›è°ƒæ‰§è¡Œäº†&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ul><h2 id="8.ç”Ÿå‘½å‘¨æœŸ">8.ç”Ÿå‘½å‘¨æœŸ<a title="#8.ç”Ÿå‘½å‘¨æœŸ" href="#8.ç”Ÿå‘½å‘¨æœŸ"></a></h2><ul><li>vue2.xçš„ç”Ÿå‘½å‘¨æœŸ</li></ul><p><img src="https://cn.vuejs.org/images/lifecycle.png" alt="" class="Ï†bs"></p><ul><li>vue3.0çš„ç”Ÿå‘½å‘¨æœŸ</li></ul><p><img src="https://v3.cn.vuejs.org/images/lifecycle.svg" alt="" class="Ï†bs"></p><ul><li>Vue3.0ä¸­å¯ä»¥ç»§ç»­ä½¿ç”¨Vue2.xä¸­çš„ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œä½†æœ‰æœ‰ä¸¤ä¸ªè¢«æ›´åï¼š<ul><li><code>beforeDestroy</code>æ”¹åä¸º <code>beforeUnmount</code></li><li><code>destroyed</code>æ”¹åä¸º <code>unmounted</code></li></ul></li><li>Vue3.0ä¹Ÿæä¾›äº† Composition API å½¢å¼çš„ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œä¸Vue2.xä¸­é’©å­å¯¹åº”å…³ç³»å¦‚ä¸‹ï¼š<ul><li><code>beforeCreate</code>===&gt;<code>setup()</code></li><li><code>created</code>=======&gt;<code>setup()</code></li><li><code>beforeMount</code> ===&gt;<code>onBeforeMount</code></li><li><code>mounted</code>=======&gt;<code>onMounted</code></li><li><code>beforeUpdate</code>===&gt;<code>onBeforeUpdate</code></li><li><code>updated</code> =======&gt;<code>onUpdated</code></li><li><code>beforeUnmount</code>Â ==&gt;<code>onBeforeUnmount</code></li><li><code>unmounted</code> =====&gt;<code>onUnmounted</code></li></ul></li></ul><h2 id="9.è‡ªå®šä¹‰hookå‡½æ•°">9.è‡ªå®šä¹‰hookå‡½æ•°<a title="#9.è‡ªå®šä¹‰hookå‡½æ•°" href="#9.è‡ªå®šä¹‰hookå‡½æ•°"></a></h2><ul><li><p>ä»€ä¹ˆæ˜¯hookï¼Ÿâ€”â€” æœ¬è´¨æ˜¯ä¸€ä¸ªå‡½æ•°ï¼ŒæŠŠsetupå‡½æ•°ä¸­ä½¿ç”¨çš„Composition APIè¿›è¡Œäº†å°è£…ã€‚</p></li><li><p>ç±»ä¼¼äºvue2.xä¸­çš„mixinã€‚</p></li><li><p>è‡ªå®šä¹‰hookçš„ä¼˜åŠ¿: å¤ç”¨ä»£ç , è®©setupä¸­çš„é€»è¾‘æ›´æ¸…æ¥šæ˜“æ‡‚ã€‚</p></li></ul><h2 id="10.toref">10.toRef<a title="#10.toref" href="#10.toref"></a></h2><ul><li><p>ä½œç”¨ï¼šåˆ›å»ºä¸€ä¸ª ref å¯¹è±¡ï¼Œå…¶valueå€¼æŒ‡å‘å¦ä¸€ä¸ªå¯¹è±¡ä¸­çš„æŸä¸ªå±æ€§ã€‚</p></li><li><p>è¯­æ³•ï¼š<code>const name = toRef(person,'name')</code></p></li><li><p>åº”ç”¨:   è¦å°†å“åº”å¼å¯¹è±¡ä¸­çš„æŸä¸ªå±æ€§å•ç‹¬æä¾›ç»™å¤–éƒ¨ä½¿ç”¨æ—¶ã€‚</p></li><li><p>æ‰©å±•ï¼š<code>toRefs</code> ä¸<code>toRef</code>åŠŸèƒ½ä¸€è‡´ï¼Œä½†å¯ä»¥æ‰¹é‡åˆ›å»ºå¤šä¸ª ref å¯¹è±¡ï¼Œè¯­æ³•ï¼š<code>toRefs(person)</code></p></li></ul><h1 id="ä¸‰ã€å…¶å®ƒ-composition-api">ä¸‰ã€å…¶å®ƒ Composition API<a title="#ä¸‰ã€å…¶å®ƒ-composition-api" href="#ä¸‰ã€å…¶å®ƒ-composition-api"></a></h1><h2 id="1.shallowreactive-ä¸-shallowref">1.shallowReactive ä¸ shallowRef<a title="#1.shallowreactive-ä¸-shallowref" href="#1.shallowreactive-ä¸-shallowref"></a></h2><ul><li><p>shallowReactiveï¼šåªå¤„ç†å¯¹è±¡æœ€å¤–å±‚å±æ€§çš„å“åº”å¼ï¼ˆæµ…å“åº”å¼ï¼‰ã€‚</p></li><li><p>shallowRefï¼šåªå¤„ç†åŸºæœ¬æ•°æ®ç±»å‹çš„å“åº”å¼, ä¸è¿›è¡Œå¯¹è±¡çš„å“åº”å¼å¤„ç†ã€‚</p></li><li><p>ä»€ä¹ˆæ—¶å€™ä½¿ç”¨?</p><ul><li>å¦‚æœæœ‰ä¸€ä¸ªå¯¹è±¡æ•°æ®ï¼Œç»“æ„æ¯”è¾ƒæ·±, ä½†å˜åŒ–æ—¶åªæ˜¯å¤–å±‚å±æ€§å˜åŒ– ===&gt; shallowReactiveã€‚</li><li>å¦‚æœæœ‰ä¸€ä¸ªå¯¹è±¡æ•°æ®ï¼Œåç»­åŠŸèƒ½ä¸ä¼šä¿®æ”¹è¯¥å¯¹è±¡ä¸­çš„å±æ€§ï¼Œè€Œæ˜¯ç”Ÿæ–°çš„å¯¹è±¡æ¥æ›¿æ¢ ===&gt; shallowRefã€‚</li></ul></li></ul><h2 id="2.readonly-ä¸-shallowreadonly">2.readonly ä¸ shallowReadonly<a title="#2.readonly-ä¸-shallowreadonly" href="#2.readonly-ä¸-shallowreadonly"></a></h2><ul><li>readonly: è®©ä¸€ä¸ªå“åº”å¼æ•°æ®å˜ä¸ºåªè¯»çš„ï¼ˆæ·±åªè¯»ï¼‰ã€‚</li><li>shallowReadonlyï¼šè®©ä¸€ä¸ªå“åº”å¼æ•°æ®å˜ä¸ºåªè¯»çš„ï¼ˆæµ…åªè¯»ï¼‰ã€‚</li><li>åº”ç”¨åœºæ™¯: ä¸å¸Œæœ›æ•°æ®è¢«ä¿®æ”¹æ—¶ã€‚</li></ul><h2 id="3.toraw-ä¸-markraw">3.toRaw ä¸ markRaw<a title="#3.toraw-ä¸-markraw" href="#3.toraw-ä¸-markraw"></a></h2><ul><li>toRawï¼š<ul><li>ä½œç”¨ï¼šå°†ä¸€ä¸ªç”±<code>reactive</code>ç”Ÿæˆçš„<strong style="color:orange">å“åº”å¼å¯¹è±¡</strong>è½¬ä¸º<strong style="color:orange">æ™®é€šå¯¹è±¡</strong>ã€‚</li><li>ä½¿ç”¨åœºæ™¯ï¼šç”¨äºè¯»å–å“åº”å¼å¯¹è±¡å¯¹åº”çš„æ™®é€šå¯¹è±¡ï¼Œå¯¹è¿™ä¸ªæ™®é€šå¯¹è±¡çš„æ‰€æœ‰æ“ä½œï¼Œä¸ä¼šå¼•èµ·é¡µé¢æ›´æ–°ã€‚</li></ul></li><li>markRawï¼š<ul><li>ä½œç”¨ï¼šæ ‡è®°ä¸€ä¸ªå¯¹è±¡ï¼Œä½¿å…¶æ°¸è¿œä¸ä¼šå†æˆä¸ºå“åº”å¼å¯¹è±¡ã€‚</li><li>åº”ç”¨åœºæ™¯:<ol><li>æœ‰äº›å€¼ä¸åº”è¢«è®¾ç½®ä¸ºå“åº”å¼çš„ï¼Œä¾‹å¦‚å¤æ‚çš„ç¬¬ä¸‰æ–¹ç±»åº“ç­‰ã€‚</li><li>å½“æ¸²æŸ“å…·æœ‰ä¸å¯å˜æ•°æ®æºçš„å¤§åˆ—è¡¨æ—¶ï¼Œè·³è¿‡å“åº”å¼è½¬æ¢å¯ä»¥æé«˜æ€§èƒ½ã€‚</li></ol></li></ul></li></ul><h2 id="4.customref">4.customRef<a title="#4.customref" href="#4.customref"></a></h2><ul><li><p>ä½œç”¨ï¼šåˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„ refï¼Œå¹¶å¯¹å…¶ä¾èµ–é¡¹è·Ÿè¸ªå’Œæ›´æ–°è§¦å‘è¿›è¡Œæ˜¾å¼æ§åˆ¶ã€‚</p></li><li><p>å®ç°é˜²æŠ–æ•ˆæœï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;input type&#x3D;&quot;text&quot; v-model&#x3D;&quot;keyword&quot;&gt;</span><br><span class="line">&lt;h3&gt;&#123;&#123;keyword&#125;&#125;&lt;&#x2F;h3&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;ref,customRef&#125; from &#39;vue&#39;</span><br><span class="line">export default &#123;</span><br><span class="line">name:&#39;Demo&#39;,</span><br><span class="line">setup()&#123;</span><br><span class="line">&#x2F;&#x2F; let keyword &#x3D; ref(&#39;hello&#39;) &#x2F;&#x2F;ä½¿ç”¨Vueå‡†å¤‡å¥½çš„å†…ç½®ref</span><br><span class="line">&#x2F;&#x2F;è‡ªå®šä¹‰ä¸€ä¸ªmyRef</span><br><span class="line">function myRef(value,delay)&#123;</span><br><span class="line">let timer</span><br><span class="line">&#x2F;&#x2F;é€šè¿‡customRefå»å®ç°è‡ªå®šä¹‰</span><br><span class="line">return customRef((track,trigger)&#x3D;&gt;&#123;</span><br><span class="line">return&#123;</span><br><span class="line">get()&#123;</span><br><span class="line">track() &#x2F;&#x2F;å‘Šè¯‰Vueè¿™ä¸ªvalueå€¼æ˜¯éœ€è¦è¢«â€œè¿½è¸ªâ€çš„</span><br><span class="line">return value</span><br><span class="line">&#125;,</span><br><span class="line">set(newValue)&#123;</span><br><span class="line">clearTimeout(timer)</span><br><span class="line">timer &#x3D; setTimeout(()&#x3D;&gt;&#123;</span><br><span class="line">value &#x3D; newValue</span><br><span class="line">trigger() &#x2F;&#x2F;å‘Šè¯‰Vueå»æ›´æ–°ç•Œé¢</span><br><span class="line">&#125;,delay)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line">let keyword &#x3D; myRef(&#39;hello&#39;,500) &#x2F;&#x2F;ä½¿ç”¨ç¨‹åºå‘˜è‡ªå®šä¹‰çš„ref</span><br><span class="line">return &#123;</span><br><span class="line">keyword</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure></li></ul><h2 id="5.provide-ä¸-inject">5.provide ä¸ inject<a title="#5.provide-ä¸-inject" href="#5.provide-ä¸-inject"></a></h2><p><img src="https://v3.cn.vuejs.org/images/components_provide.png" alt="" class="Ï†bs"></p><ul><li><p>ä½œç”¨ï¼šå®ç°<strong style="color:#DD5145">ç¥–ä¸åä»£ç»„ä»¶é—´</strong>é€šä¿¡</p></li><li><p>å¥—è·¯ï¼šçˆ¶ç»„ä»¶æœ‰ä¸€ä¸ª <code>provide</code> é€‰é¡¹æ¥æä¾›æ•°æ®ï¼Œåä»£ç»„ä»¶æœ‰ä¸€ä¸ª <code>inject</code> é€‰é¡¹æ¥å¼€å§‹ä½¿ç”¨è¿™äº›æ•°æ®</p></li><li><p>å…·ä½“å†™æ³•ï¼š</p><ol><li><p>ç¥–ç»„ä»¶ä¸­ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">setup()&#123;</span><br><span class="line">......</span><br><span class="line">    <span class="keyword">let</span> car = reactive(&#123;<span class="attr">name</span>:<span class="string">&#x27;å¥”é©°&#x27;</span>,<span class="attr">price</span>:<span class="string">&#x27;40ä¸‡&#x27;</span>&#125;)</span><br><span class="line">    provide(<span class="string">&#x27;car&#x27;</span>,car)</span><br><span class="line">    ......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>åä»£ç»„ä»¶ä¸­ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">setup(props,context)&#123;</span><br><span class="line">......</span><br><span class="line">    <span class="keyword">const</span> car = inject(<span class="string">&#x27;car&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> &#123;car&#125;</span><br><span class="line">......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol></li></ul><h2 id="6.å“åº”å¼æ•°æ®çš„åˆ¤æ–­">6.å“åº”å¼æ•°æ®çš„åˆ¤æ–­<a title="#6.å“åº”å¼æ•°æ®çš„åˆ¤æ–­" href="#6.å“åº”å¼æ•°æ®çš„åˆ¤æ–­"></a></h2><ul><li>isRef: æ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºä¸€ä¸ª ref å¯¹è±¡</li><li>isReactive: æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ç”± <code>reactive</code> åˆ›å»ºçš„å“åº”å¼ä»£ç†</li><li>isReadonly: æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ç”± <code>readonly</code> åˆ›å»ºçš„åªè¯»ä»£ç†</li><li>isProxy: æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ç”± <code>reactive</code> æˆ–è€… <code>readonly</code> æ–¹æ³•åˆ›å»ºçš„ä»£ç†</li></ul><h1 id="å››ã€composition-api-çš„ä¼˜åŠ¿">å››ã€Composition API çš„ä¼˜åŠ¿<a title="#å››ã€composition-api-çš„ä¼˜åŠ¿" href="#å››ã€composition-api-çš„ä¼˜åŠ¿"></a></h1><h2 id="1.options-api-å­˜åœ¨çš„é—®é¢˜">1.Options API å­˜åœ¨çš„é—®é¢˜<a title="#1.options-api-å­˜åœ¨çš„é—®é¢˜" href="#1.options-api-å­˜åœ¨çš„é—®é¢˜"></a></h2><p>ä½¿ç”¨ä¼ ç»ŸOptionsAPIä¸­ï¼Œæ–°å¢æˆ–è€…ä¿®æ”¹ä¸€ä¸ªéœ€æ±‚ï¼Œå°±éœ€è¦åˆ†åˆ«åœ¨dataï¼Œmethodsï¼Œcomputedé‡Œä¿®æ”¹ ã€‚</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f84e4e2c02424d9a99862ade0a2e4114~tplv-k3u1fbpfcp-watermark.image" alt="" class="Ï†bs"></p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e5ac7e20d1784887a826f6360768a368~tplv-k3u1fbpfcp-watermark.image" alt="" class="Ï†bs"></p><h2 id="2.composition-api-çš„ä¼˜åŠ¿">2.Composition API çš„ä¼˜åŠ¿<a title="#2.composition-api-çš„ä¼˜åŠ¿" href="#2.composition-api-çš„ä¼˜åŠ¿"></a></h2><p>æˆ‘ä»¬å¯ä»¥æ›´åŠ ä¼˜é›…çš„ç»„ç»‡æˆ‘ä»¬çš„ä»£ç ï¼Œå‡½æ•°ã€‚è®©ç›¸å…³åŠŸèƒ½çš„ä»£ç æ›´åŠ æœ‰åºçš„ç»„ç»‡åœ¨ä¸€èµ·ã€‚</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bc0be8211fc54b6c941c036791ba4efe~tplv-k3u1fbpfcp-watermark.image" alt="" class="Ï†bs"></p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6cc55165c0e34069a75fe36f8712eb80~tplv-k3u1fbpfcp-watermark.image" alt="" class="Ï†bs"></p><h1 id="äº”ã€æ–°çš„ç»„ä»¶">äº”ã€æ–°çš„ç»„ä»¶<a title="#äº”ã€æ–°çš„ç»„ä»¶" href="#äº”ã€æ–°çš„ç»„ä»¶"></a></h1><h2 id="1.fragment">1.Fragment<a title="#1.fragment" href="#1.fragment"></a></h2><ul><li>åœ¨Vue2ä¸­: ç»„ä»¶å¿…é¡»æœ‰ä¸€ä¸ªæ ¹æ ‡ç­¾</li><li>åœ¨Vue3ä¸­: ç»„ä»¶å¯ä»¥æ²¡æœ‰æ ¹æ ‡ç­¾, å†…éƒ¨ä¼šå°†å¤šä¸ªæ ‡ç­¾åŒ…å«åœ¨ä¸€ä¸ªFragmentè™šæ‹Ÿå…ƒç´ ä¸­</li><li>å¥½å¤„: å‡å°‘æ ‡ç­¾å±‚çº§, å‡å°å†…å­˜å ç”¨</li></ul><h2 id="2.teleport">2.Teleport<a title="#2.teleport" href="#2.teleport"></a></h2><ul><li><p>ä»€ä¹ˆæ˜¯Teleportï¼Ÿâ€”â€” <code>Teleport</code> æ˜¯ä¸€ç§èƒ½å¤Ÿå°†æˆ‘ä»¬çš„<strong style="color:#DD5145">ç»„ä»¶htmlç»“æ„</strong>ç§»åŠ¨åˆ°æŒ‡å®šä½ç½®çš„æŠ€æœ¯ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;teleport to&#x3D;&quot;ç§»åŠ¨ä½ç½®&quot;&gt;</span><br><span class="line">&lt;div v-if&#x3D;&quot;isShow&quot; class&#x3D;&quot;mask&quot;&gt;</span><br><span class="line">&lt;div class&#x3D;&quot;dialog&quot;&gt;</span><br><span class="line">&lt;h3&gt;æˆ‘æ˜¯ä¸€ä¸ªå¼¹çª—&lt;&#x2F;h3&gt;</span><br><span class="line">&lt;button @click&#x3D;&quot;isShow &#x3D; false&quot;&gt;å…³é—­å¼¹çª—&lt;&#x2F;button&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;teleport&gt;</span><br></pre></td></tr></table></figure></li></ul><h2 id="3.suspense">3.Suspense<a title="#3.suspense" href="#3.suspense"></a></h2><ul><li><p>ç­‰å¾…å¼‚æ­¥ç»„ä»¶æ—¶æ¸²æŸ“ä¸€äº›é¢å¤–å†…å®¹ï¼Œè®©åº”ç”¨æœ‰æ›´å¥½çš„ç”¨æˆ·ä½“éªŒ</p></li><li><p>ä½¿ç”¨æ­¥éª¤ï¼š</p><ul><li><p>å¼‚æ­¥å¼•å…¥ç»„ä»¶</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;defineAsyncComponent&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">const</span> Child = defineAsyncComponent(<span class="function">()=&gt;</span><span class="keyword">import</span>(<span class="string">&#x27;./components/Child.vue&#x27;</span>))</span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨<code>Suspense</code>åŒ…è£¹ç»„ä»¶ï¼Œå¹¶é…ç½®å¥½<code>default</code> ä¸ <code>fallback</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div class&#x3D;&quot;app&quot;&gt;</span><br><span class="line">&lt;h3&gt;æˆ‘æ˜¯Appç»„ä»¶&lt;&#x2F;h3&gt;</span><br><span class="line">&lt;Suspense&gt;</span><br><span class="line">&lt;template v-slot:default&gt;</span><br><span class="line">&lt;Child&#x2F;&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line">&lt;template v-slot:fallback&gt;</span><br><span class="line">&lt;h3&gt;åŠ è½½ä¸­.....&lt;&#x2F;h3&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line">&lt;&#x2F;Suspense&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br></pre></td></tr></table></figure></li></ul></li></ul><h1 id="å…­ã€å…¶ä»–">å…­ã€å…¶ä»–<a title="#å…­ã€å…¶ä»–" href="#å…­ã€å…¶ä»–"></a></h1><h2 id="1.å…¨å±€apiçš„è½¬ç§»">1.å…¨å±€APIçš„è½¬ç§»<a title="#1.å…¨å±€apiçš„è½¬ç§»" href="#1.å…¨å±€apiçš„è½¬ç§»"></a></h2><ul><li><p>Vue 2.x æœ‰è®¸å¤šå…¨å±€ API å’Œé…ç½®ã€‚</p><ul><li><p>ä¾‹å¦‚ï¼šæ³¨å†Œå…¨å±€ç»„ä»¶ã€æ³¨å†Œå…¨å±€æŒ‡ä»¤ç­‰ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ³¨å†Œå…¨å±€ç»„ä»¶</span></span><br><span class="line">Vue.component(<span class="string">&#x27;MyButton&#x27;</span>, &#123;</span><br><span class="line">  data: <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">    count: <span class="number">0</span></span><br><span class="line">  &#125;),</span><br><span class="line">  template: <span class="string">&#x27;&lt;button @click=&quot;count++&quot;&gt;Clicked &#123;&#123; count &#125;&#125; times.&lt;/button&gt;&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ³¨å†Œå…¨å±€æŒ‡ä»¤</span></span><br><span class="line">Vue.directive(<span class="string">&#x27;focus&#x27;</span>, &#123;</span><br><span class="line">  inserted: <span class="function"><span class="params">el</span> =&gt;</span> el.focus()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>Vue3.0ä¸­å¯¹è¿™äº›APIåšå‡ºäº†è°ƒæ•´ï¼š</p><ul><li><p>å°†å…¨å±€çš„APIï¼Œå³ï¼š<code>Vue.xxx</code>è°ƒæ•´åˆ°åº”ç”¨å®ä¾‹ï¼ˆ<code>app</code>ï¼‰ä¸Š</p><div class="Ï†bt"><div class="Ï†bv"><table><thead><tr><th>2.x å…¨å±€ APIï¼ˆ<code>Vue</code>ï¼‰</th><th>3.x å®ä¾‹ API (<code>app</code>)</th></tr></thead><tbody><tr><td>Vue.config.xxxx</td><td>app.config.xxxx</td></tr><tr><td>Vue.config.productionTip</td><td><strong style="color:#DD5145">ç§»é™¤</strong></td></tr><tr><td>Vue.component</td><td>app.component</td></tr><tr><td>Vue.directive</td><td>app.directive</td></tr><tr><td>Vue.mixin</td><td>app.mixin</td></tr><tr><td>Vue.use</td><td>app.use</td></tr><tr><td>Vue.prototype</td><td>app.config.globalProperties</td></tr></tbody></table></div></div></li></ul></li></ul><h2 id="2.å…¶ä»–æ”¹å˜">2.å…¶ä»–æ”¹å˜<a title="#2.å…¶ä»–æ”¹å˜" href="#2.å…¶ä»–æ”¹å˜"></a></h2><ul><li><p>dataé€‰é¡¹åº”å§‹ç»ˆè¢«å£°æ˜ä¸ºä¸€ä¸ªå‡½æ•°ã€‚</p></li><li><p>è¿‡åº¦ç±»åçš„æ›´æ”¹ï¼š</p><ul><li><p>Vue2.xå†™æ³•</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.v-enter</span>,</span><br><span class="line"><span class="selector-class">.v-leave-to</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.v-leave</span>,</span><br><span class="line"><span class="selector-class">.v-enter-to</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>Vue3.xå†™æ³•</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.v-enter-from</span>,</span><br><span class="line"><span class="selector-class">.v-leave-to</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.v-leave-from</span>,</span><br><span class="line"><span class="selector-class">.v-enter-to</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong style="color:#DD5145">ç§»é™¤</strong>keyCodeä½œä¸º v-on çš„ä¿®é¥°ç¬¦ï¼ŒåŒæ—¶ä¹Ÿä¸å†æ”¯æŒ<code>config.keyCodes</code></p></li><li><p><strong style="color:#DD5145">ç§»é™¤</strong><code>v-on.native</code>ä¿®é¥°ç¬¦</p><ul><li><p>çˆ¶ç»„ä»¶ä¸­ç»‘å®šäº‹ä»¶</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;my-component</span><br><span class="line">  v-on:close&#x3D;&quot;handleComponentEvent&quot;</span><br><span class="line">  v-on:click&#x3D;&quot;handleNativeClickEvent&quot;</span><br><span class="line">&#x2F;&gt;</span><br></pre></td></tr></table></figure></li><li><p>å­ç»„ä»¶ä¸­å£°æ˜è‡ªå®šä¹‰äº‹ä»¶</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    emits: [&#39;close&#39;]</span><br><span class="line">  &#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong style="color:#DD5145">ç§»é™¤</strong>è¿‡æ»¤å™¨ï¼ˆfilterï¼‰</p><blockquote><p>è¿‡æ»¤å™¨è™½ç„¶è¿™çœ‹èµ·æ¥å¾ˆæ–¹ä¾¿ï¼Œä½†å®ƒéœ€è¦ä¸€ä¸ªè‡ªå®šä¹‰è¯­æ³•ï¼Œæ‰“ç ´å¤§æ‹¬å·å†…è¡¨è¾¾å¼æ˜¯ â€œåªæ˜¯ JavaScriptâ€ çš„å‡è®¾ï¼Œè¿™ä¸ä»…æœ‰å­¦ä¹ æˆæœ¬ï¼Œè€Œä¸”æœ‰å®ç°æˆæœ¬ï¼å»ºè®®ç”¨æ–¹æ³•è°ƒç”¨æˆ–è®¡ç®—å±æ€§å»æ›¿æ¢è¿‡æ»¤å™¨ã€‚</p></blockquote></li><li><p>â€¦</p></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;vue3å¿«é€Ÿä¸Šæ‰‹&quot;&gt;Vue3å¿«é€Ÿä¸Šæ‰‹&lt;a title=&quot;#vue3å¿«é€Ÿä¸Šæ‰‹&quot; href=&quot;#vue3å¿«é€Ÿä¸Šæ‰‹&quot;&gt;&lt;/a&gt;&lt;/h1&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubuserconte</summary>
      
    
    
    
    <category term="ç¬”è®°" scheme="https://pinkpeachabc.cn/categories/%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="vue" scheme="https://pinkpeachabc.cn/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>Vueå¼ å¤©ç¦¹è€å¸ˆç¬”è®°</title>
    <link href="https://pinkpeachabc.cn/vue2.0%E7%AC%94%E8%AE%B0.html"/>
    <id>https://pinkpeachabc.cn/vue2.0%E7%AC%94%E8%AE%B0.html</id>
    <published>2022-02-20T18:43:55.000Z</published>
    <updated>2022-02-21T03:29:16.146Z</updated>
    
    <content type="html"><![CDATA[<p>å°šç¡…è°· å¼ å¤©ç¦¹è€å¸ˆvue2ç¬”è®°ï¼ˆæ–¹ä¾¿è‡ªå·±æŸ¥é˜…ï¼‰</p><a id="more"></a><p>[TOC]</p><h1 id="å°šç¡…è°·-å¼ å¤©ç¦¹è€å¸ˆvue2ç¬”è®°">å°šç¡…è°· å¼ å¤©ç¦¹è€å¸ˆvue2ç¬”è®°<a title="#å°šç¡…è°·-å¼ å¤©ç¦¹è€å¸ˆvue2ç¬”è®°" href="#å°šç¡…è°·-å¼ å¤©ç¦¹è€å¸ˆvue2ç¬”è®°"></a></h1><h2 id="è„šæ‰‹æ¶æ–‡ä»¶ç»“æ„">è„šæ‰‹æ¶æ–‡ä»¶ç»“æ„<a title="#è„šæ‰‹æ¶æ–‡ä»¶ç»“æ„" href="#è„šæ‰‹æ¶æ–‡ä»¶ç»“æ„"></a></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€â”€ node_modules </span><br><span class="line">â”œâ”€â”€ public</span><br><span class="line">â”‚   â”œâ”€â”€ favicon.ico: é¡µç­¾å›¾æ ‡</span><br><span class="line">â”‚   â””â”€â”€ index.html: ä¸»é¡µé¢</span><br><span class="line">â”œâ”€â”€ src</span><br><span class="line">â”‚   â”œâ”€â”€ assets: å­˜æ”¾é™æ€èµ„æº</span><br><span class="line">â”‚   â”‚   â””â”€â”€ logo.png</span><br><span class="line">â”‚   â”‚â”€â”€ component: å­˜æ”¾ç»„ä»¶</span><br><span class="line">â”‚   â”‚   â””â”€â”€ HelloWorld.vue</span><br><span class="line">â”‚   â”‚â”€â”€ App.vue: æ±‡æ€»æ‰€æœ‰ç»„ä»¶</span><br><span class="line">â”‚   â”‚â”€â”€ main.js: å…¥å£æ–‡ä»¶</span><br><span class="line">â”œâ”€â”€ .gitignore: gitç‰ˆæœ¬ç®¡åˆ¶å¿½ç•¥çš„é…ç½®</span><br><span class="line">â”œâ”€â”€ babel.config.js: babelçš„é…ç½®æ–‡ä»¶</span><br><span class="line">â”œâ”€â”€ package.json: åº”ç”¨åŒ…é…ç½®æ–‡ä»¶ </span><br><span class="line">â”œâ”€â”€ README.md: åº”ç”¨æè¿°æ–‡ä»¶</span><br><span class="line">â”œâ”€â”€ package-lock.jsonï¼šåŒ…ç‰ˆæœ¬æ§åˆ¶æ–‡ä»¶</span><br></pre></td></tr></table></figure><h2 id="å…³äºä¸åŒç‰ˆæœ¬çš„vue">å…³äºä¸åŒç‰ˆæœ¬çš„Vue<a title="#å…³äºä¸åŒç‰ˆæœ¬çš„vue" href="#å…³äºä¸åŒç‰ˆæœ¬çš„vue"></a></h2><ol><li>vue.jsä¸vue.runtime.xxx.jsçš„åŒºåˆ«ï¼š<ol><li>vue.jsæ˜¯å®Œæ•´ç‰ˆçš„Vueï¼ŒåŒ…å«ï¼šæ ¸å¿ƒåŠŸèƒ½ + æ¨¡æ¿è§£æå™¨ã€‚</li><li>vue.runtime.xxx.jsæ˜¯è¿è¡Œç‰ˆçš„Vueï¼ŒåªåŒ…å«ï¼šæ ¸å¿ƒåŠŸèƒ½ï¼›æ²¡æœ‰æ¨¡æ¿è§£æå™¨ã€‚</li></ol></li><li>å› ä¸ºvue.runtime.xxx.jsæ²¡æœ‰æ¨¡æ¿è§£æå™¨ï¼Œæ‰€ä»¥ä¸èƒ½ä½¿ç”¨templateè¿™ä¸ªé…ç½®é¡¹ï¼Œéœ€è¦ä½¿ç”¨renderå‡½æ•°æ¥æ”¶åˆ°çš„createElementå‡½æ•°å»æŒ‡å®šå…·ä½“å†…å®¹ã€‚</li></ol><h2 id="vue.config.jsé…ç½®æ–‡ä»¶">vue.config.jsé…ç½®æ–‡ä»¶<a title="#vue.config.jsé…ç½®æ–‡ä»¶" href="#vue.config.jsé…ç½®æ–‡ä»¶"></a></h2><ol><li>ä½¿ç”¨vue inspect &gt; output.jså¯ä»¥æŸ¥çœ‹åˆ°Vueè„šæ‰‹æ¶çš„é»˜è®¤é…ç½®ã€‚</li><li>ä½¿ç”¨vue.config.jså¯ä»¥å¯¹è„šæ‰‹æ¶è¿›è¡Œä¸ªæ€§åŒ–å®šåˆ¶ï¼Œè¯¦æƒ…è§ï¼š<a href="https://cli.vuejs.org/zh">https://cli.vuejs.org/zh</a></li></ol><h2 id="refå±æ€§">refå±æ€§<a title="#refå±æ€§" href="#refå±æ€§"></a></h2><ol><li>è¢«ç”¨æ¥ç»™å…ƒç´ æˆ–å­ç»„ä»¶æ³¨å†Œå¼•ç”¨ä¿¡æ¯ï¼ˆidçš„æ›¿ä»£è€…ï¼‰</li><li>åº”ç”¨åœ¨htmlæ ‡ç­¾ä¸Šè·å–çš„æ˜¯çœŸå®DOMå…ƒç´ ï¼Œåº”ç”¨åœ¨ç»„ä»¶æ ‡ç­¾ä¸Šæ˜¯ç»„ä»¶å®ä¾‹å¯¹è±¡ï¼ˆvcï¼‰</li><li>ä½¿ç”¨æ–¹å¼ï¼š<ol><li>æ‰“æ ‡è¯†ï¼š<code>&lt;h1 ref=&quot;xxx&quot;&gt;.....&lt;/h1&gt;</code>æˆ– <code>&lt;School ref=&quot;xxx&quot;&gt;&lt;/School&gt;</code></li><li>è·å–ï¼š<code>this.$refs.xxx</code></li></ol></li></ol><h2 id="propsé…ç½®é¡¹">propsé…ç½®é¡¹<a title="#propsé…ç½®é¡¹" href="#propsé…ç½®é¡¹"></a></h2><ol><li><p>åŠŸèƒ½ï¼šè®©ç»„ä»¶æ¥æ”¶å¤–éƒ¨ä¼ è¿‡æ¥çš„æ•°æ®</p></li><li><p>ä¼ é€’æ•°æ®ï¼š<code>&lt;Demo name=&quot;xxx&quot;/&gt;</code></p></li><li><p>æ¥æ”¶æ•°æ®ï¼š</p><ol><li><p>ç¬¬ä¸€ç§æ–¹å¼ï¼ˆåªæ¥æ”¶ï¼‰ï¼š<code>props:['name']</code></p></li><li><p>ç¬¬äºŒç§æ–¹å¼ï¼ˆé™åˆ¶ç±»å‹ï¼‰ï¼š<code>props:&#123;name:String&#125;</code></p></li><li><p>ç¬¬ä¸‰ç§æ–¹å¼ï¼ˆé™åˆ¶ç±»å‹ã€é™åˆ¶å¿…è¦æ€§ã€æŒ‡å®šé»˜è®¤å€¼ï¼‰ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">props:&#123;</span><br><span class="line">name:&#123;</span><br><span class="line">type:<span class="built_in">String</span>, <span class="comment">//ç±»å‹</span></span><br><span class="line">required:<span class="literal">true</span>, <span class="comment">//å¿…è¦æ€§</span></span><br><span class="line"><span class="keyword">default</span>:<span class="string">&#x27;è€ç‹&#x27;</span> <span class="comment">//é»˜è®¤å€¼</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><blockquote><p>å¤‡æ³¨ï¼špropsæ˜¯åªè¯»çš„ï¼ŒVueåº•å±‚ä¼šç›‘æµ‹ä½ å¯¹propsçš„ä¿®æ”¹ï¼Œå¦‚æœè¿›è¡Œäº†ä¿®æ”¹ï¼Œå°±ä¼šå‘å‡ºè­¦å‘Šï¼Œè‹¥ä¸šåŠ¡éœ€æ±‚ç¡®å®éœ€è¦ä¿®æ”¹ï¼Œé‚£ä¹ˆè¯·å¤åˆ¶propsçš„å†…å®¹åˆ°dataä¸­ä¸€ä»½ï¼Œç„¶åå»ä¿®æ”¹dataä¸­çš„æ•°æ®ã€‚</p></blockquote></li></ol><h2 id="mixin(æ··å…¥)">mixin(æ··å…¥)<a title="#mixin(æ··å…¥)" href="#mixin(æ··å…¥)"></a></h2><ol><li><p>åŠŸèƒ½ï¼šå¯ä»¥æŠŠå¤šä¸ªç»„ä»¶å…±ç”¨çš„é…ç½®æå–æˆä¸€ä¸ªæ··å…¥å¯¹è±¡</p></li><li><p>ä½¿ç”¨æ–¹å¼ï¼š</p><p>ç¬¬ä¸€æ­¥å®šä¹‰æ··åˆï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    data()&#123;....&#125;,</span><br><span class="line">    methods:&#123;....&#125;</span><br><span class="line">    ....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒæ­¥ä½¿ç”¨æ··å…¥ï¼š</p><p>å…¨å±€æ··å…¥ï¼š<code>Vue.mixin(xxx)</code><br>â€‹ å±€éƒ¨æ··å…¥ï¼š<code>mixins:['xxx']</code></p></li></ol><h2 id="æ’ä»¶">æ’ä»¶<a title="#æ’ä»¶" href="#æ’ä»¶"></a></h2><ol><li><p>åŠŸèƒ½ï¼šç”¨äºå¢å¼ºVue</p></li><li><p>æœ¬è´¨ï¼šåŒ…å«installæ–¹æ³•çš„ä¸€ä¸ªå¯¹è±¡ï¼Œinstallçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯Vueï¼Œç¬¬äºŒä¸ªä»¥åçš„å‚æ•°æ˜¯æ’ä»¶ä½¿ç”¨è€…ä¼ é€’çš„æ•°æ®ã€‚</p></li><li><p>å®šä¹‰æ’ä»¶ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">å¯¹è±¡.install = <span class="function"><span class="keyword">function</span> (<span class="params">Vue, options</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 1. æ·»åŠ å…¨å±€è¿‡æ»¤å™¨</span></span><br><span class="line">    Vue.filter(....)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2. æ·»åŠ å…¨å±€æŒ‡ä»¤</span></span><br><span class="line">    Vue.directive(....)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3. é…ç½®å…¨å±€æ··å…¥(åˆ)</span></span><br><span class="line">    Vue.mixin(....)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 4. æ·»åŠ å®ä¾‹æ–¹æ³•</span></span><br><span class="line">    Vue.prototype.$myMethod = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;...&#125;</span><br><span class="line">    Vue.prototype.$myProperty = xxxx</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨æ’ä»¶ï¼š<code>Vue.use()</code></p></li></ol><h2 id="scopedæ ·å¼">scopedæ ·å¼<a title="#scopedæ ·å¼" href="#scopedæ ·å¼"></a></h2><ol><li>ä½œç”¨ï¼šè®©æ ·å¼åœ¨å±€éƒ¨ç”Ÿæ•ˆï¼Œé˜²æ­¢å†²çªã€‚</li><li>å†™æ³•ï¼š<code>&lt;style scoped&gt;</code></li></ol><h2 id="æ€»ç»“todolistæ¡ˆä¾‹">æ€»ç»“TodoListæ¡ˆä¾‹<a title="#æ€»ç»“todolistæ¡ˆä¾‹" href="#æ€»ç»“todolistæ¡ˆä¾‹"></a></h2><ol><li><p>ç»„ä»¶åŒ–ç¼–ç æµç¨‹ï¼š</p><p>(1).æ‹†åˆ†é™æ€ç»„ä»¶ï¼šç»„ä»¶è¦æŒ‰ç…§åŠŸèƒ½ç‚¹æ‹†åˆ†ï¼Œå‘½åä¸è¦ä¸htmlå…ƒç´ å†²çªã€‚</p><p>(2).å®ç°åŠ¨æ€ç»„ä»¶ï¼šè€ƒè™‘å¥½æ•°æ®çš„å­˜æ”¾ä½ç½®ï¼Œæ•°æ®æ˜¯ä¸€ä¸ªç»„ä»¶åœ¨ç”¨ï¼Œè¿˜æ˜¯ä¸€äº›ç»„ä»¶åœ¨ç”¨ï¼š</p><p>1).ä¸€ä¸ªç»„ä»¶åœ¨ç”¨ï¼šæ”¾åœ¨ç»„ä»¶è‡ªèº«å³å¯ã€‚</p><p>2). ä¸€äº›ç»„ä»¶åœ¨ç”¨ï¼šæ”¾åœ¨ä»–ä»¬å…±åŒçš„çˆ¶ç»„ä»¶ä¸Šï¼ˆçŠ¶æ€æå‡ï¼‰ã€‚</p><p>(3).å®ç°äº¤äº’ï¼šä»ç»‘å®šäº‹ä»¶å¼€å§‹ã€‚</p></li><li><p>propsé€‚ç”¨äºï¼š</p><p>(1).çˆ¶ç»„ä»¶ ==&gt; å­ç»„ä»¶ é€šä¿¡</p><p>(2).å­ç»„ä»¶ ==&gt; çˆ¶ç»„ä»¶ é€šä¿¡ï¼ˆè¦æ±‚çˆ¶å…ˆç»™å­ä¸€ä¸ªå‡½æ•°ï¼‰</p></li><li><p>ä½¿ç”¨v-modelæ—¶è¦åˆ‡è®°ï¼šv-modelç»‘å®šçš„å€¼ä¸èƒ½æ˜¯propsä¼ è¿‡æ¥çš„å€¼ï¼Œå› ä¸ºpropsæ˜¯ä¸å¯ä»¥ä¿®æ”¹çš„ï¼</p></li><li><p>propsä¼ è¿‡æ¥çš„è‹¥æ˜¯å¯¹è±¡ç±»å‹çš„å€¼ï¼Œä¿®æ”¹å¯¹è±¡ä¸­çš„å±æ€§æ—¶Vueä¸ä¼šæŠ¥é”™ï¼Œä½†ä¸æ¨èè¿™æ ·åšã€‚</p></li></ol><h2 id="webstorage">webStorage<a title="#webstorage" href="#webstorage"></a></h2><ol><li><p>å­˜å‚¨å†…å®¹å¤§å°ä¸€èˆ¬æ”¯æŒ5MBå·¦å³ï¼ˆä¸åŒæµè§ˆå™¨å¯èƒ½è¿˜ä¸ä¸€æ ·ï¼‰</p></li><li><p>æµè§ˆå™¨ç«¯é€šè¿‡ Window.sessionStorage å’Œ Window.localStorage å±æ€§æ¥å®ç°æœ¬åœ°å­˜å‚¨æœºåˆ¶ã€‚</p></li><li><p>ç›¸å…³APIï¼š</p><ol><li><p><code>xxxxxStorage.setItem('key', 'value');</code><br>è¯¥æ–¹æ³•æ¥å—ä¸€ä¸ªé”®å’Œå€¼ä½œä¸ºå‚æ•°ï¼Œä¼šæŠŠé”®å€¼å¯¹æ·»åŠ åˆ°å­˜å‚¨ä¸­ï¼Œå¦‚æœé”®åå­˜åœ¨ï¼Œåˆ™æ›´æ–°å…¶å¯¹åº”çš„å€¼ã€‚</p></li><li><p><code>xxxxxStorage.getItem('person');</code></p><p>è¯¥æ–¹æ³•æ¥å—ä¸€ä¸ªé”®åä½œä¸ºå‚æ•°ï¼Œè¿”å›é”®åå¯¹åº”çš„å€¼ã€‚</p></li><li><p><code>xxxxxStorage.removeItem('key');</code></p><p>è¯¥æ–¹æ³•æ¥å—ä¸€ä¸ªé”®åä½œä¸ºå‚æ•°ï¼Œå¹¶æŠŠè¯¥é”®åä»å­˜å‚¨ä¸­åˆ é™¤ã€‚</p></li><li><p><code>xxxxxStorage.clear()</code></p><p>è¯¥æ–¹æ³•ä¼šæ¸…ç©ºå­˜å‚¨ä¸­çš„æ‰€æœ‰æ•°æ®ã€‚</p></li></ol></li><li><p>å¤‡æ³¨ï¼š</p><ol><li>SessionStorageå­˜å‚¨çš„å†…å®¹ä¼šéšç€æµè§ˆå™¨çª—å£å…³é—­è€Œæ¶ˆå¤±ã€‚</li><li>LocalStorageå­˜å‚¨çš„å†…å®¹ï¼Œéœ€è¦æ‰‹åŠ¨æ¸…é™¤æ‰ä¼šæ¶ˆå¤±ã€‚</li><li><code>xxxxxStorage.getItem(xxx)</code>å¦‚æœxxxå¯¹åº”çš„valueè·å–ä¸åˆ°ï¼Œé‚£ä¹ˆgetItemçš„è¿”å›å€¼æ˜¯nullã€‚</li><li><code>JSON.parse(null)</code>çš„ç»“æœä¾ç„¶æ˜¯nullã€‚</li></ol></li></ol><h2 id="ç»„ä»¶çš„è‡ªå®šä¹‰äº‹ä»¶">ç»„ä»¶çš„è‡ªå®šä¹‰äº‹ä»¶<a title="#ç»„ä»¶çš„è‡ªå®šä¹‰äº‹ä»¶" href="#ç»„ä»¶çš„è‡ªå®šä¹‰äº‹ä»¶"></a></h2><ol><li><p>ä¸€ç§ç»„ä»¶é—´é€šä¿¡çš„æ–¹å¼ï¼Œé€‚ç”¨äºï¼š<strong>å­ç»„ä»¶ ===&gt; çˆ¶ç»„ä»¶</strong></p></li><li><p>ä½¿ç”¨åœºæ™¯ï¼šAæ˜¯çˆ¶ç»„ä»¶ï¼ŒBæ˜¯å­ç»„ä»¶ï¼ŒBæƒ³ç»™Aä¼ æ•°æ®ï¼Œé‚£ä¹ˆå°±è¦åœ¨Aä¸­ç»™Bç»‘å®šè‡ªå®šä¹‰äº‹ä»¶ï¼ˆäº‹ä»¶çš„å›è°ƒåœ¨Aä¸­ï¼‰ã€‚</p></li><li><p>ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶ï¼š</p><ol><li><p>ç¬¬ä¸€ç§æ–¹å¼ï¼Œåœ¨çˆ¶ç»„ä»¶ä¸­ï¼š<code>&lt;Demo @atguigu=&quot;test&quot;/&gt;</code>æˆ– <code>&lt;Demo v-on:atguigu=&quot;test&quot;/&gt;</code></p></li><li><p>ç¬¬äºŒç§æ–¹å¼ï¼Œåœ¨çˆ¶ç»„ä»¶ä¸­ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;Demo ref=<span class="string">&quot;demo&quot;</span>/&gt;</span><br><span class="line">......</span><br><span class="line">mounted()&#123;</span><br><span class="line">   <span class="built_in">this</span>.$refs.xxx.$on(<span class="string">&#x27;atguigu&#x27;</span>,<span class="built_in">this</span>.test)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>è‹¥æƒ³è®©è‡ªå®šä¹‰äº‹ä»¶åªèƒ½è§¦å‘ä¸€æ¬¡ï¼Œå¯ä»¥ä½¿ç”¨<code>once</code>ä¿®é¥°ç¬¦ï¼Œæˆ–<code>$once</code>æ–¹æ³•ã€‚</p></li></ol></li><li><p>è§¦å‘è‡ªå®šä¹‰äº‹ä»¶ï¼š<code>this.$emit('atguigu',æ•°æ®)</code></p></li><li><p>è§£ç»‘è‡ªå®šä¹‰äº‹ä»¶<code>this.$off('atguigu')</code></p></li><li><p>ç»„ä»¶ä¸Šä¹Ÿå¯ä»¥ç»‘å®šåŸç”ŸDOMäº‹ä»¶ï¼Œéœ€è¦ä½¿ç”¨<code>native</code>ä¿®é¥°ç¬¦ã€‚</p></li><li><p>æ³¨æ„ï¼šé€šè¿‡<code>this.$refs.xxx.$on('atguigu',å›è°ƒ)</code>ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶æ—¶ï¼Œå›è°ƒè¦ä¹ˆé…ç½®åœ¨methodsä¸­ï¼Œè¦ä¹ˆç”¨ç®­å¤´å‡½æ•°ï¼Œå¦åˆ™thisæŒ‡å‘ä¼šå‡ºé—®é¢˜ï¼</p></li></ol><h2 id="å…¨å±€äº‹ä»¶æ€»çº¿ï¼ˆglobaleventbusï¼‰">å…¨å±€äº‹ä»¶æ€»çº¿ï¼ˆGlobalEventBusï¼‰<a title="#å…¨å±€äº‹ä»¶æ€»çº¿ï¼ˆglobaleventbusï¼‰" href="#å…¨å±€äº‹ä»¶æ€»çº¿ï¼ˆglobaleventbusï¼‰"></a></h2><ol><li><p>ä¸€ç§ç»„ä»¶é—´é€šä¿¡çš„æ–¹å¼ï¼Œé€‚ç”¨äºä»»æ„ç»„ä»¶é—´é€šä¿¡ã€‚</p></li><li><p>å®‰è£…å…¨å±€äº‹ä»¶æ€»çº¿ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">......</span><br><span class="line">beforeCreate() &#123;</span><br><span class="line">Vue.prototype.$bus = <span class="built_in">this</span> <span class="comment">//å®‰è£…å…¨å±€äº‹ä»¶æ€»çº¿ï¼Œ$buså°±æ˜¯å½“å‰åº”ç”¨çš„vm</span></span><br><span class="line">&#125;,</span><br><span class="line">    ......</span><br><span class="line">&#125;) </span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨äº‹ä»¶æ€»çº¿ï¼š</p><ol><li><p>æ¥æ”¶æ•°æ®ï¼šAç»„ä»¶æƒ³æ¥æ”¶æ•°æ®ï¼Œåˆ™åœ¨Aç»„ä»¶ä¸­ç»™$busç»‘å®šè‡ªå®šä¹‰äº‹ä»¶ï¼Œäº‹ä»¶çš„å›è°ƒç•™åœ¨Aç»„ä»¶è‡ªèº«ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">methods()&#123;</span><br><span class="line">  demo(data)&#123;......&#125;</span><br><span class="line">&#125;</span><br><span class="line">......</span><br><span class="line">mounted() &#123;</span><br><span class="line">  <span class="built_in">this</span>.$bus.$on(<span class="string">&#x27;xxxx&#x27;</span>,<span class="built_in">this</span>.demo)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æä¾›æ•°æ®ï¼š<code>this.$bus.$emit('xxxx',æ•°æ®)</code></p></li></ol></li><li><p>æœ€å¥½åœ¨beforeDestroyé’©å­ä¸­ï¼Œç”¨$offå»è§£ç»‘å½“å‰ç»„ä»¶æ‰€ç”¨åˆ°çš„äº‹ä»¶ã€‚</p></li></ol><h2 id="æ¶ˆæ¯è®¢é˜…ä¸å‘å¸ƒï¼ˆpubsubï¼‰">æ¶ˆæ¯è®¢é˜…ä¸å‘å¸ƒï¼ˆpubsubï¼‰<a title="#æ¶ˆæ¯è®¢é˜…ä¸å‘å¸ƒï¼ˆpubsubï¼‰" href="#æ¶ˆæ¯è®¢é˜…ä¸å‘å¸ƒï¼ˆpubsubï¼‰"></a></h2><ol><li><p>ä¸€ç§ç»„ä»¶é—´é€šä¿¡çš„æ–¹å¼ï¼Œé€‚ç”¨äºä»»æ„ç»„ä»¶é—´é€šä¿¡ã€‚</p></li><li><p>ä½¿ç”¨æ­¥éª¤ï¼š</p><ol><li><p>å®‰è£…pubsubï¼š<code>npm i pubsub-js</code></p></li><li><p>å¼•å…¥: <code>import pubsub from 'pubsub-js'</code></p></li><li><p>æ¥æ”¶æ•°æ®ï¼šAç»„ä»¶æƒ³æ¥æ”¶æ•°æ®ï¼Œåˆ™åœ¨Aç»„ä»¶ä¸­è®¢é˜…æ¶ˆæ¯ï¼Œè®¢é˜…çš„å›è°ƒç•™åœ¨Aç»„ä»¶è‡ªèº«ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">methods()&#123;</span><br><span class="line">  demo(data)&#123;......&#125;</span><br><span class="line">&#125;</span><br><span class="line">......</span><br><span class="line">mounted() &#123;</span><br><span class="line">  <span class="built_in">this</span>.pid = pubsub.subscribe(<span class="string">&#x27;xxx&#x27;</span>,<span class="built_in">this</span>.demo) <span class="comment">//è®¢é˜…æ¶ˆæ¯</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æä¾›æ•°æ®ï¼š<code>pubsub.publish('xxx',æ•°æ®)</code></p></li><li><p>æœ€å¥½åœ¨beforeDestroyé’©å­ä¸­ï¼Œç”¨<code>PubSub.unsubscribe(pid)</code>å»å–æ¶ˆè®¢é˜…ã€‚</p></li></ol></li></ol><h2 id="nexttick">nextTick<a title="#nexttick" href="#nexttick"></a></h2><ol><li>è¯­æ³•ï¼š<code>this.$nextTick(å›è°ƒå‡½æ•°)</code></li><li>ä½œç”¨ï¼šåœ¨ä¸‹ä¸€æ¬¡ DOM æ›´æ–°ç»“æŸåæ‰§è¡Œå…¶æŒ‡å®šçš„å›è°ƒã€‚</li><li>ä»€ä¹ˆæ—¶å€™ç”¨ï¼šå½“æ”¹å˜æ•°æ®åï¼Œè¦åŸºäºæ›´æ–°åçš„æ–°DOMè¿›è¡ŒæŸäº›æ“ä½œæ—¶ï¼Œè¦åœ¨nextTickæ‰€æŒ‡å®šçš„å›è°ƒå‡½æ•°ä¸­æ‰§è¡Œã€‚</li></ol><h2 id="vueå°è£…çš„è¿‡åº¦ä¸åŠ¨ç”»">Vueå°è£…çš„è¿‡åº¦ä¸åŠ¨ç”»<a title="#vueå°è£…çš„è¿‡åº¦ä¸åŠ¨ç”»" href="#vueå°è£…çš„è¿‡åº¦ä¸åŠ¨ç”»"></a></h2><ol><li><p>ä½œç”¨ï¼šåœ¨æ’å…¥ã€æ›´æ–°æˆ–ç§»é™¤ DOMå…ƒç´ æ—¶ï¼Œåœ¨åˆé€‚çš„æ—¶å€™ç»™å…ƒç´ æ·»åŠ æ ·å¼ç±»åã€‚</p></li><li><p>å›¾ç¤ºï¼š<img src="https://img04.sogoucdn.com/app/a/100520146/5990c1dff7dc7a8fb3b34b4462bd0105" alt="img"></p></li><li><p>å†™æ³•ï¼š</p><ol><li><p>å‡†å¤‡å¥½æ ·å¼ï¼š</p><ul><li>å…ƒç´ è¿›å…¥çš„æ ·å¼ï¼š<ol><li>v-enterï¼šè¿›å…¥çš„èµ·ç‚¹</li><li>v-enter-activeï¼šè¿›å…¥è¿‡ç¨‹ä¸­</li><li>v-enter-toï¼šè¿›å…¥çš„ç»ˆç‚¹</li></ol></li><li>å…ƒç´ ç¦»å¼€çš„æ ·å¼ï¼š<ol><li>v-leaveï¼šç¦»å¼€çš„èµ·ç‚¹</li><li>v-leave-activeï¼šç¦»å¼€è¿‡ç¨‹ä¸­</li><li>v-leave-toï¼šç¦»å¼€çš„ç»ˆç‚¹</li></ol></li></ul></li><li><p>ä½¿ç”¨<code>&lt;transition&gt;</code>åŒ…è£¹è¦è¿‡åº¦çš„å…ƒç´ ï¼Œå¹¶é…ç½®nameå±æ€§ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;transition name&#x3D;&quot;hello&quot;&gt;</span><br><span class="line">&lt;h1 v-show&#x3D;&quot;isShow&quot;&gt;ä½ å¥½å•Šï¼&lt;&#x2F;h1&gt;</span><br><span class="line">&lt;&#x2F;transition&gt;</span><br></pre></td></tr></table></figure></li><li><p>å¤‡æ³¨ï¼šè‹¥æœ‰å¤šä¸ªå…ƒç´ éœ€è¦è¿‡åº¦ï¼Œåˆ™éœ€è¦ä½¿ç”¨ï¼š<code>&lt;transition-group&gt;</code>ï¼Œä¸”æ¯ä¸ªå…ƒç´ éƒ½è¦æŒ‡å®š<code>key</code>å€¼ã€‚</p></li></ol></li></ol><h2 id="vueè„šæ‰‹æ¶é…ç½®ä»£ç†">vueè„šæ‰‹æ¶é…ç½®ä»£ç†<a title="#vueè„šæ‰‹æ¶é…ç½®ä»£ç†" href="#vueè„šæ‰‹æ¶é…ç½®ä»£ç†"></a></h2><h3 id="æ–¹æ³•ä¸€">æ–¹æ³•ä¸€<a title="#æ–¹æ³•ä¸€" href="#æ–¹æ³•ä¸€"></a></h3><p>åœ¨vue.config.jsä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">devServer:&#123;</span><br><span class="line">  proxy:<span class="string">&quot;http://localhost:5000&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯´æ˜ï¼š</p><ol><li>ä¼˜ç‚¹ï¼šé…ç½®ç®€å•ï¼Œè¯·æ±‚èµ„æºæ—¶ç›´æ¥å‘ç»™å‰ç«¯ï¼ˆ8080ï¼‰å³å¯ã€‚</li><li>ç¼ºç‚¹ï¼šä¸èƒ½é…ç½®å¤šä¸ªä»£ç†ï¼Œä¸èƒ½çµæ´»çš„æ§åˆ¶è¯·æ±‚æ˜¯å¦èµ°ä»£ç†ã€‚</li><li>å·¥ä½œæ–¹å¼ï¼šè‹¥æŒ‰ç…§ä¸Šè¿°é…ç½®ä»£ç†ï¼Œå½“è¯·æ±‚äº†å‰ç«¯ä¸å­˜åœ¨çš„èµ„æºæ—¶ï¼Œé‚£ä¹ˆè¯¥è¯·æ±‚ä¼šè½¬å‘ç»™æœåŠ¡å™¨ ï¼ˆä¼˜å…ˆåŒ¹é…å‰ç«¯èµ„æºï¼‰</li></ol><h3 id="æ–¹æ³•äºŒ">æ–¹æ³•äºŒ<a title="#æ–¹æ³•äºŒ" href="#æ–¹æ³•äºŒ"></a></h3><p>ç¼–å†™vue.config.jsé…ç½®å…·ä½“ä»£ç†è§„åˆ™ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">devServer: &#123;</span><br><span class="line">      proxy: &#123;</span><br><span class="line">      <span class="string">&#x27;/api1&#x27;</span>: &#123;<span class="comment">// åŒ¹é…æ‰€æœ‰ä»¥ &#x27;/api1&#x27;å¼€å¤´çš„è¯·æ±‚è·¯å¾„</span></span><br><span class="line">        target: <span class="string">&#x27;http://localhost:5000&#x27;</span>,<span class="comment">// ä»£ç†ç›®æ ‡çš„åŸºç¡€è·¯å¾„</span></span><br><span class="line">        changeOrigin: <span class="literal">true</span>,</span><br><span class="line">        pathRewrite: &#123;<span class="string">&#x27;^/api1&#x27;</span>: <span class="string">&#x27;&#x27;</span>&#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">&#x27;/api2&#x27;</span>: &#123;<span class="comment">// åŒ¹é…æ‰€æœ‰ä»¥ &#x27;/api2&#x27;å¼€å¤´çš„è¯·æ±‚è·¯å¾„</span></span><br><span class="line">        target: <span class="string">&#x27;http://localhost:5001&#x27;</span>,<span class="comment">// ä»£ç†ç›®æ ‡çš„åŸºç¡€è·¯å¾„</span></span><br><span class="line">        changeOrigin: <span class="literal">true</span>,</span><br><span class="line">        pathRewrite: &#123;<span class="string">&#x27;^/api2&#x27;</span>: <span class="string">&#x27;&#x27;</span>&#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">   changeOriginè®¾ç½®ä¸ºtrueæ—¶ï¼ŒæœåŠ¡å™¨æ”¶åˆ°çš„è¯·æ±‚å¤´ä¸­çš„hostä¸ºï¼šlocalhost:5000</span></span><br><span class="line"><span class="comment">   changeOriginè®¾ç½®ä¸ºfalseæ—¶ï¼ŒæœåŠ¡å™¨æ”¶åˆ°çš„è¯·æ±‚å¤´ä¸­çš„hostä¸ºï¼šlocalhost:8080</span></span><br><span class="line"><span class="comment">   changeOriginé»˜è®¤å€¼ä¸ºtrue</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><p>è¯´æ˜ï¼š</p><ol><li>ä¼˜ç‚¹ï¼šå¯ä»¥é…ç½®å¤šä¸ªä»£ç†ï¼Œä¸”å¯ä»¥çµæ´»çš„æ§åˆ¶è¯·æ±‚æ˜¯å¦èµ°ä»£ç†ã€‚</li><li>ç¼ºç‚¹ï¼šé…ç½®ç•¥å¾®ç¹çï¼Œè¯·æ±‚èµ„æºæ—¶å¿…é¡»åŠ å‰ç¼€ã€‚</li></ol><h2 id="æ’æ§½">æ’æ§½<a title="#æ’æ§½" href="#æ’æ§½"></a></h2><ol><li><p>ä½œç”¨ï¼šè®©çˆ¶ç»„ä»¶å¯ä»¥å‘å­ç»„ä»¶æŒ‡å®šä½ç½®æ’å…¥htmlç»“æ„ï¼Œä¹Ÿæ˜¯ä¸€ç§ç»„ä»¶é—´é€šä¿¡çš„æ–¹å¼ï¼Œé€‚ç”¨äº <strong>çˆ¶ç»„ä»¶ ===&gt; å­ç»„ä»¶</strong> ã€‚</p></li><li><p>åˆ†ç±»ï¼šé»˜è®¤æ’æ§½ã€å…·åæ’æ§½ã€ä½œç”¨åŸŸæ’æ§½</p></li><li><p>ä½¿ç”¨æ–¹å¼ï¼š</p><ol><li><p>é»˜è®¤æ’æ§½ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">çˆ¶ç»„ä»¶ä¸­ï¼š</span><br><span class="line">        &lt;Category&gt;</span><br><span class="line">           &lt;div&gt;htmlç»“æ„1&lt;&#x2F;div&gt;</span><br><span class="line">        &lt;&#x2F;Category&gt;</span><br><span class="line">å­ç»„ä»¶ä¸­ï¼š</span><br><span class="line">        &lt;template&gt;</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">               &lt;!-- å®šä¹‰æ’æ§½ --&gt;</span><br><span class="line">               &lt;slot&gt;æ’æ§½é»˜è®¤å†…å®¹...&lt;&#x2F;slot&gt;</span><br><span class="line">            &lt;&#x2F;div&gt;</span><br><span class="line">        &lt;&#x2F;template&gt;</span><br></pre></td></tr></table></figure></li><li><p>å…·åæ’æ§½ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">çˆ¶ç»„ä»¶ä¸­ï¼š</span><br><span class="line">        &lt;Category&gt;</span><br><span class="line">            &lt;template slot&#x3D;&quot;center&quot;&gt;</span><br><span class="line">              &lt;div&gt;htmlç»“æ„1&lt;&#x2F;div&gt;</span><br><span class="line">            &lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">            &lt;template v-slot:footer&gt;</span><br><span class="line">               &lt;div&gt;htmlç»“æ„2&lt;&#x2F;div&gt;</span><br><span class="line">            &lt;&#x2F;template&gt;</span><br><span class="line">        &lt;&#x2F;Category&gt;</span><br><span class="line">å­ç»„ä»¶ä¸­ï¼š</span><br><span class="line">        &lt;template&gt;</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">               &lt;!-- å®šä¹‰æ’æ§½ --&gt;</span><br><span class="line">               &lt;slot name&#x3D;&quot;center&quot;&gt;æ’æ§½é»˜è®¤å†…å®¹...&lt;&#x2F;slot&gt;</span><br><span class="line">               &lt;slot name&#x3D;&quot;footer&quot;&gt;æ’æ§½é»˜è®¤å†…å®¹...&lt;&#x2F;slot&gt;</span><br><span class="line">            &lt;&#x2F;div&gt;</span><br><span class="line">        &lt;&#x2F;template&gt;</span><br></pre></td></tr></table></figure></li><li><p>ä½œç”¨åŸŸæ’æ§½ï¼š</p><ol><li><p>ç†è§£ï¼šæ•°æ®åœ¨ç»„ä»¶çš„è‡ªèº«ï¼Œä½†æ ¹æ®æ•°æ®ç”Ÿæˆçš„ç»“æ„éœ€è¦ç»„ä»¶çš„ä½¿ç”¨è€…æ¥å†³å®šã€‚ï¼ˆgamesæ•°æ®åœ¨Categoryç»„ä»¶ä¸­ï¼Œä½†ä½¿ç”¨æ•°æ®æ‰€éå†å‡ºæ¥çš„ç»“æ„ç”±Appç»„ä»¶å†³å®šï¼‰</p></li><li><p>å…·ä½“ç¼–ç ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">çˆ¶ç»„ä»¶ä¸­ï¼š</span><br><span class="line">&lt;Category&gt;</span><br><span class="line">&lt;template scope&#x3D;&quot;scopeData&quot;&gt;</span><br><span class="line">&lt;!-- ç”Ÿæˆçš„æ˜¯ulåˆ—è¡¨ --&gt;</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">&lt;li v-for&#x3D;&quot;g in scopeData.games&quot; :key&#x3D;&quot;g&quot;&gt;&#123;&#123;g&#125;&#125;&lt;&#x2F;li&gt;</span><br><span class="line">&lt;&#x2F;ul&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line">&lt;&#x2F;Category&gt;</span><br><span class="line"></span><br><span class="line">&lt;Category&gt;</span><br><span class="line">&lt;template slot-scope&#x3D;&quot;scopeData&quot;&gt;</span><br><span class="line">&lt;!-- ç”Ÿæˆçš„æ˜¯h4æ ‡é¢˜ --&gt;</span><br><span class="line">&lt;h4 v-for&#x3D;&quot;g in scopeData.games&quot; :key&#x3D;&quot;g&quot;&gt;&#123;&#123;g&#125;&#125;&lt;&#x2F;h4&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line">&lt;&#x2F;Category&gt;</span><br><span class="line">å­ç»„ä»¶ä¸­ï¼š</span><br><span class="line">        &lt;template&gt;</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &lt;slot :games&#x3D;&quot;games&quot;&gt;&lt;&#x2F;slot&gt;</span><br><span class="line">            &lt;&#x2F;div&gt;</span><br><span class="line">        &lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">        &lt;script&gt;</span><br><span class="line">            export default &#123;</span><br><span class="line">                name:&#39;Category&#39;,</span><br><span class="line">                props:[&#39;title&#39;],</span><br><span class="line">                &#x2F;&#x2F;æ•°æ®åœ¨å­ç»„ä»¶è‡ªèº«</span><br><span class="line">                data() &#123;</span><br><span class="line">                    return &#123;</span><br><span class="line">                        games:[&#39;çº¢è‰²è­¦æˆ’&#39;,&#39;ç©¿è¶Šç«çº¿&#39;,&#39;åŠ²èˆå›¢&#39;,&#39;è¶…çº§ç›ä¸½&#39;]</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;</span><br><span class="line">        &lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure></li></ol></li></ol></li></ol><h2 id="vuex">Vuex<a title="#vuex" href="#vuex"></a></h2><h3 id="1.æ¦‚å¿µ">1.æ¦‚å¿µ<a title="#1.æ¦‚å¿µ" href="#1.æ¦‚å¿µ"></a></h3><p>åœ¨Vueä¸­å®ç°é›†ä¸­å¼çŠ¶æ€ï¼ˆæ•°æ®ï¼‰ç®¡ç†çš„ä¸€ä¸ªVueæ’ä»¶ï¼Œå¯¹vueåº”ç”¨ä¸­å¤šä¸ªç»„ä»¶çš„å…±äº«çŠ¶æ€è¿›è¡Œé›†ä¸­å¼çš„ç®¡ç†ï¼ˆè¯»/å†™ï¼‰ï¼Œä¹Ÿæ˜¯ä¸€ç§ç»„ä»¶é—´é€šä¿¡çš„æ–¹å¼ï¼Œä¸”é€‚ç”¨äºä»»æ„ç»„ä»¶é—´é€šä¿¡ã€‚</p><h3 id="2.ä½•æ—¶ä½¿ç”¨ï¼Ÿ">2.ä½•æ—¶ä½¿ç”¨ï¼Ÿ<a title="#2.ä½•æ—¶ä½¿ç”¨ï¼Ÿ" href="#2.ä½•æ—¶ä½¿ç”¨ï¼Ÿ"></a></h3><p>å¤šä¸ªç»„ä»¶éœ€è¦å…±äº«æ•°æ®æ—¶</p><h3 id="3.æ­å»ºvuexç¯å¢ƒ">3.æ­å»ºvuexç¯å¢ƒ<a title="#3.æ­å»ºvuexç¯å¢ƒ" href="#3.æ­å»ºvuexç¯å¢ƒ"></a></h3><ol><li><p>åˆ›å»ºæ–‡ä»¶ï¼š<code>src/store/index.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¼•å…¥Vueæ ¸å¿ƒåº“</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="comment">//å¼•å…¥Vuex</span></span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="comment">//åº”ç”¨Vuexæ’ä»¶</span></span><br><span class="line">Vue.use(Vuex)</span><br><span class="line"></span><br><span class="line"><span class="comment">//å‡†å¤‡actionså¯¹è±¡â€”â€”å“åº”ç»„ä»¶ä¸­ç”¨æˆ·çš„åŠ¨ä½œ</span></span><br><span class="line"><span class="keyword">const</span> actions = &#123;&#125;</span><br><span class="line"><span class="comment">//å‡†å¤‡mutationså¯¹è±¡â€”â€”ä¿®æ”¹stateä¸­çš„æ•°æ®</span></span><br><span class="line"><span class="keyword">const</span> mutations = &#123;&#125;</span><br><span class="line"><span class="comment">//å‡†å¤‡stateå¯¹è±¡â€”â€”ä¿å­˜å…·ä½“çš„æ•°æ®</span></span><br><span class="line"><span class="keyword">const</span> state = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºå¹¶æš´éœ²store</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">actions,</span><br><span class="line">mutations,</span><br><span class="line">state</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>åœ¨<code>main.js</code>ä¸­åˆ›å»ºvmæ—¶ä¼ å…¥<code>store</code>é…ç½®é¡¹</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">......</span><br><span class="line"><span class="comment">//å¼•å…¥store</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store&#x27;</span></span><br><span class="line">......</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºvm</span></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">el:<span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">render: <span class="function"><span class="params">h</span> =&gt;</span> h(App),</span><br><span class="line">store</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ol><h3 id="4.åŸºæœ¬ä½¿ç”¨">4.åŸºæœ¬ä½¿ç”¨<a title="#4.åŸºæœ¬ä½¿ç”¨" href="#4.åŸºæœ¬ä½¿ç”¨"></a></h3><ol><li><p>åˆå§‹åŒ–æ•°æ®ã€é…ç½®<code>actions</code>ã€é…ç½®<code>mutations</code>ï¼Œæ“ä½œæ–‡ä»¶<code>store.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¼•å…¥Vueæ ¸å¿ƒåº“</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="comment">//å¼•å…¥Vuex</span></span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="comment">//å¼•ç”¨Vuex</span></span><br><span class="line">Vue.use(Vuex)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> actions = &#123;</span><br><span class="line">    <span class="comment">//å“åº”ç»„ä»¶ä¸­åŠ çš„åŠ¨ä½œ</span></span><br><span class="line">jia(context,value)&#123;</span><br><span class="line"><span class="comment">// console.log(&#x27;actionsä¸­çš„jiaè¢«è°ƒç”¨äº†&#x27;,miniStore,value)</span></span><br><span class="line">context.commit(<span class="string">&#x27;JIA&#x27;</span>,value)</span><br><span class="line">&#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mutations = &#123;</span><br><span class="line">    <span class="comment">//æ‰§è¡ŒåŠ </span></span><br><span class="line">JIA(state,value)&#123;</span><br><span class="line"><span class="comment">// console.log(&#x27;mutationsä¸­çš„JIAè¢«è°ƒç”¨äº†&#x27;,state,value)</span></span><br><span class="line">state.sum += value</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆå§‹åŒ–æ•°æ®</span></span><br><span class="line"><span class="keyword">const</span> state = &#123;</span><br><span class="line">   sum:<span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºå¹¶æš´éœ²store</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">actions,</span><br><span class="line">mutations,</span><br><span class="line">state,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>ç»„ä»¶ä¸­è¯»å–vuexä¸­çš„æ•°æ®ï¼š<code>$store.state.sum</code></p></li><li><p>ç»„ä»¶ä¸­ä¿®æ”¹vuexä¸­çš„æ•°æ®ï¼š<code>$store.dispatch('actionä¸­çš„æ–¹æ³•å',æ•°æ®)</code>æˆ– <code>$store.commit('mutationsä¸­çš„æ–¹æ³•å',æ•°æ®)</code></p><blockquote><p>å¤‡æ³¨ï¼šè‹¥æ²¡æœ‰ç½‘ç»œè¯·æ±‚æˆ–å…¶ä»–ä¸šåŠ¡é€»è¾‘ï¼Œç»„ä»¶ä¸­ä¹Ÿå¯ä»¥è¶Šè¿‡actionsï¼Œå³ä¸å†™<code>dispatch</code>ï¼Œç›´æ¥ç¼–å†™<code>commit</code></p></blockquote></li></ol><h3 id="5.gettersçš„ä½¿ç”¨">5.gettersçš„ä½¿ç”¨<a title="#5.gettersçš„ä½¿ç”¨" href="#5.gettersçš„ä½¿ç”¨"></a></h3><ol><li><p>æ¦‚å¿µï¼šå½“stateä¸­çš„æ•°æ®éœ€è¦ç»è¿‡åŠ å·¥åå†ä½¿ç”¨æ—¶ï¼Œå¯ä»¥ä½¿ç”¨gettersåŠ å·¥ã€‚</p></li><li><p>åœ¨<code>store.js</code>ä¸­è¿½åŠ <code>getters</code>é…ç½®</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">......</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> getters = &#123;</span><br><span class="line">bigSum(state)&#123;</span><br><span class="line"><span class="keyword">return</span> state.sum * <span class="number">10</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºå¹¶æš´éœ²store</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">......</span><br><span class="line">getters</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>ç»„ä»¶ä¸­è¯»å–æ•°æ®ï¼š<code>$store.getters.bigSum</code></p></li></ol><h3 id="6.å››ä¸ªmapæ–¹æ³•çš„ä½¿ç”¨">6.å››ä¸ªmapæ–¹æ³•çš„ä½¿ç”¨<a title="#6.å››ä¸ªmapæ–¹æ³•çš„ä½¿ç”¨" href="#6.å››ä¸ªmapæ–¹æ³•çš„ä½¿ç”¨"></a></h3><ol><li><p>**mapStateæ–¹æ³•ï¼š**ç”¨äºå¸®åŠ©æˆ‘ä»¬æ˜ å°„<code>state</code>ä¸­çš„æ•°æ®ä¸ºè®¡ç®—å±æ€§</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">    <span class="comment">//å€ŸåŠ©mapStateç”Ÿæˆè®¡ç®—å±æ€§ï¼šsumã€schoolã€subjectï¼ˆå¯¹è±¡å†™æ³•ï¼‰</span></span><br><span class="line">     ...mapState(&#123;<span class="attr">sum</span>:<span class="string">&#x27;sum&#x27;</span>,<span class="attr">school</span>:<span class="string">&#x27;school&#x27;</span>,<span class="attr">subject</span>:<span class="string">&#x27;subject&#x27;</span>&#125;),</span><br><span class="line">         </span><br><span class="line">    <span class="comment">//å€ŸåŠ©mapStateç”Ÿæˆè®¡ç®—å±æ€§ï¼šsumã€schoolã€subjectï¼ˆæ•°ç»„å†™æ³•ï¼‰</span></span><br><span class="line">    ...mapState([<span class="string">&#x27;sum&#x27;</span>,<span class="string">&#x27;school&#x27;</span>,<span class="string">&#x27;subject&#x27;</span>]),</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></li><li><p>**mapGettersæ–¹æ³•ï¼š**ç”¨äºå¸®åŠ©æˆ‘ä»¬æ˜ å°„<code>getters</code>ä¸­çš„æ•°æ®ä¸ºè®¡ç®—å±æ€§</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">    <span class="comment">//å€ŸåŠ©mapGettersç”Ÿæˆè®¡ç®—å±æ€§ï¼šbigSumï¼ˆå¯¹è±¡å†™æ³•ï¼‰</span></span><br><span class="line">    ...mapGetters(&#123;<span class="attr">bigSum</span>:<span class="string">&#x27;bigSum&#x27;</span>&#125;),</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å€ŸåŠ©mapGettersç”Ÿæˆè®¡ç®—å±æ€§ï¼šbigSumï¼ˆæ•°ç»„å†™æ³•ï¼‰</span></span><br><span class="line">    ...mapGetters([<span class="string">&#x27;bigSum&#x27;</span>])</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></li><li><p>**mapActionsæ–¹æ³•ï¼š**ç”¨äºå¸®åŠ©æˆ‘ä»¬ç”Ÿæˆä¸<code>actions</code>å¯¹è¯çš„æ–¹æ³•ï¼Œå³ï¼šåŒ…å«<code>$store.dispatch(xxx)</code>çš„å‡½æ•°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">methods:&#123;</span><br><span class="line">    <span class="comment">//é mapActionsç”Ÿæˆï¼šincrementOddã€incrementWaitï¼ˆå¯¹è±¡å½¢å¼ï¼‰</span></span><br><span class="line">    ...mapActions(&#123;<span class="attr">incrementOdd</span>:<span class="string">&#x27;jiaOdd&#x27;</span>,<span class="attr">incrementWait</span>:<span class="string">&#x27;jiaWait&#x27;</span>&#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//é mapActionsç”Ÿæˆï¼šincrementOddã€incrementWaitï¼ˆæ•°ç»„å½¢å¼ï¼‰</span></span><br><span class="line">    ...mapActions([<span class="string">&#x27;jiaOdd&#x27;</span>,<span class="string">&#x27;jiaWait&#x27;</span>])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>**mapMutationsæ–¹æ³•ï¼š**ç”¨äºå¸®åŠ©æˆ‘ä»¬ç”Ÿæˆä¸<code>mutations</code>å¯¹è¯çš„æ–¹æ³•ï¼Œå³ï¼šåŒ…å«<code>$store.commit(xxx)</code>çš„å‡½æ•°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">methods:&#123;</span><br><span class="line">    <span class="comment">//é mapActionsç”Ÿæˆï¼šincrementã€decrementï¼ˆå¯¹è±¡å½¢å¼ï¼‰</span></span><br><span class="line">    ...mapMutations(&#123;<span class="attr">increment</span>:<span class="string">&#x27;JIA&#x27;</span>,<span class="attr">decrement</span>:<span class="string">&#x27;JIAN&#x27;</span>&#125;),</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//é mapMutationsç”Ÿæˆï¼šJIAã€JIANï¼ˆå¯¹è±¡å½¢å¼ï¼‰</span></span><br><span class="line">    ...mapMutations([<span class="string">&#x27;JIA&#x27;</span>,<span class="string">&#x27;JIAN&#x27;</span>]),</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><blockquote><p>å¤‡æ³¨ï¼šmapActionsä¸mapMutationsä½¿ç”¨æ—¶ï¼Œè‹¥éœ€è¦ä¼ é€’å‚æ•°éœ€è¦ï¼šåœ¨æ¨¡æ¿ä¸­ç»‘å®šäº‹ä»¶æ—¶ä¼ é€’å¥½å‚æ•°ï¼Œå¦åˆ™å‚æ•°æ˜¯äº‹ä»¶å¯¹è±¡ã€‚</p></blockquote><h3 id="7.æ¨¡å—åŒ–+å‘½åç©ºé—´">7.æ¨¡å—åŒ–+å‘½åç©ºé—´<a title="#7.æ¨¡å—åŒ–+å‘½åç©ºé—´" href="#7.æ¨¡å—åŒ–+å‘½åç©ºé—´"></a></h3><ol><li><p>ç›®çš„ï¼šè®©ä»£ç æ›´å¥½ç»´æŠ¤ï¼Œè®©å¤šç§æ•°æ®åˆ†ç±»æ›´åŠ æ˜ç¡®ã€‚</p></li><li><p>ä¿®æ”¹<code>store.js</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> countAbout = &#123;</span><br><span class="line">  namespaced:<span class="literal">true</span>,<span class="comment">//å¼€å¯å‘½åç©ºé—´</span></span><br><span class="line">  state:&#123;<span class="attr">x</span>:<span class="number">1</span>&#125;,</span><br><span class="line">  mutations: &#123; ... &#125;,</span><br><span class="line">  actions: &#123; ... &#125;,</span><br><span class="line">  getters: &#123;</span><br><span class="line">    bigSum(state)&#123;</span><br><span class="line">       <span class="keyword">return</span> state.sum * <span class="number">10</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> personAbout = &#123;</span><br><span class="line">  namespaced:<span class="literal">true</span>,<span class="comment">//å¼€å¯å‘½åç©ºé—´</span></span><br><span class="line">  state:&#123; ... &#125;,</span><br><span class="line">  mutations: &#123; ... &#125;,</span><br><span class="line">  actions: &#123; ... &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  modules: &#123;</span><br><span class="line">    countAbout,</span><br><span class="line">    personAbout</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>å¼€å¯å‘½åç©ºé—´åï¼Œç»„ä»¶ä¸­è¯»å–stateæ•°æ®ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ–¹å¼ä¸€ï¼šè‡ªå·±ç›´æ¥è¯»å–</span></span><br><span class="line"><span class="built_in">this</span>.$store.state.personAbout.list</span><br><span class="line"><span class="comment">//æ–¹å¼äºŒï¼šå€ŸåŠ©mapStateè¯»å–ï¼š</span></span><br><span class="line">...mapState(<span class="string">&#x27;countAbout&#x27;</span>,[<span class="string">&#x27;sum&#x27;</span>,<span class="string">&#x27;school&#x27;</span>,<span class="string">&#x27;subject&#x27;</span>]),</span><br></pre></td></tr></table></figure></li><li><p>å¼€å¯å‘½åç©ºé—´åï¼Œç»„ä»¶ä¸­è¯»å–gettersæ•°æ®ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ–¹å¼ä¸€ï¼šè‡ªå·±ç›´æ¥è¯»å–</span></span><br><span class="line"><span class="built_in">this</span>.$store.getters[<span class="string">&#x27;personAbout/firstPersonName&#x27;</span>]</span><br><span class="line"><span class="comment">//æ–¹å¼äºŒï¼šå€ŸåŠ©mapGettersè¯»å–ï¼š</span></span><br><span class="line">...mapGetters(<span class="string">&#x27;countAbout&#x27;</span>,[<span class="string">&#x27;bigSum&#x27;</span>])</span><br></pre></td></tr></table></figure></li><li><p>å¼€å¯å‘½åç©ºé—´åï¼Œç»„ä»¶ä¸­è°ƒç”¨dispatch</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ–¹å¼ä¸€ï¼šè‡ªå·±ç›´æ¥dispatch</span></span><br><span class="line"><span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;personAbout/addPersonWang&#x27;</span>,person)</span><br><span class="line"><span class="comment">//æ–¹å¼äºŒï¼šå€ŸåŠ©mapActionsï¼š</span></span><br><span class="line">...mapActions(<span class="string">&#x27;countAbout&#x27;</span>,&#123;<span class="attr">incrementOdd</span>:<span class="string">&#x27;jiaOdd&#x27;</span>,<span class="attr">incrementWait</span>:<span class="string">&#x27;jiaWait&#x27;</span>&#125;)</span><br></pre></td></tr></table></figure></li><li><p>å¼€å¯å‘½åç©ºé—´åï¼Œç»„ä»¶ä¸­è°ƒç”¨commit</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ–¹å¼ä¸€ï¼šè‡ªå·±ç›´æ¥commit</span></span><br><span class="line"><span class="built_in">this</span>.$store.commit(<span class="string">&#x27;personAbout/ADD_PERSON&#x27;</span>,person)</span><br><span class="line"><span class="comment">//æ–¹å¼äºŒï¼šå€ŸåŠ©mapMutationsï¼š</span></span><br><span class="line">...mapMutations(<span class="string">&#x27;countAbout&#x27;</span>,&#123;<span class="attr">increment</span>:<span class="string">&#x27;JIA&#x27;</span>,<span class="attr">decrement</span>:<span class="string">&#x27;JIAN&#x27;</span>&#125;),</span><br></pre></td></tr></table></figure></li></ol><h2 id="è·¯ç”±">è·¯ç”±<a title="#è·¯ç”±" href="#è·¯ç”±"></a></h2><ol><li>ç†è§£ï¼š ä¸€ä¸ªè·¯ç”±ï¼ˆrouteï¼‰å°±æ˜¯ä¸€ç»„æ˜ å°„å…³ç³»ï¼ˆkey - valueï¼‰ï¼Œå¤šä¸ªè·¯ç”±éœ€è¦è·¯ç”±å™¨ï¼ˆrouterï¼‰è¿›è¡Œç®¡ç†ã€‚</li><li>å‰ç«¯è·¯ç”±ï¼škeyæ˜¯è·¯å¾„ï¼Œvalueæ˜¯ç»„ä»¶ã€‚</li></ol><h3 id="1.åŸºæœ¬ä½¿ç”¨">1.åŸºæœ¬ä½¿ç”¨<a title="#1.åŸºæœ¬ä½¿ç”¨" href="#1.åŸºæœ¬ä½¿ç”¨"></a></h3><ol><li><p>å®‰è£…vue-routerï¼Œå‘½ä»¤ï¼š<code>npm i vue-router</code></p></li><li><p>åº”ç”¨æ’ä»¶ï¼š<code>Vue.use(VueRouter)</code></p></li><li><p>ç¼–å†™routeré…ç½®é¡¹:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¼•å…¥VueRouter</span></span><br><span class="line"><span class="keyword">import</span> VueRouter <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="comment">//å¼•å…¥Luyou ç»„ä»¶</span></span><br><span class="line"><span class="keyword">import</span> About <span class="keyword">from</span> <span class="string">&#x27;../components/About&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Home <span class="keyword">from</span> <span class="string">&#x27;../components/Home&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºrouterå®ä¾‹å¯¹è±¡ï¼Œå»ç®¡ç†ä¸€ç»„ä¸€ç»„çš„è·¯ç”±è§„åˆ™</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">routes:[</span><br><span class="line">&#123;</span><br><span class="line">path:<span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">component:About</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">path:<span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">component:Home</span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//æš´éœ²router</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure></li><li><p>å®ç°åˆ‡æ¢ï¼ˆactive-classå¯é…ç½®é«˜äº®æ ·å¼ï¼‰</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link active-class&#x3D;&quot;active&quot; to&#x3D;&quot;&#x2F;about&quot;&gt;About&lt;&#x2F;router-link&gt;</span><br></pre></td></tr></table></figure></li><li><p>æŒ‡å®šå±•ç¤ºä½ç½®</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-view&gt;&lt;&#x2F;router-view&gt;</span><br></pre></td></tr></table></figure></li></ol><h3 id="2.å‡ ä¸ªæ³¨æ„ç‚¹">2.å‡ ä¸ªæ³¨æ„ç‚¹<a title="#2.å‡ ä¸ªæ³¨æ„ç‚¹" href="#2.å‡ ä¸ªæ³¨æ„ç‚¹"></a></h3><ol><li>è·¯ç”±ç»„ä»¶é€šå¸¸å­˜æ”¾åœ¨<code>pages</code>æ–‡ä»¶å¤¹ï¼Œä¸€èˆ¬ç»„ä»¶é€šå¸¸å­˜æ”¾åœ¨<code>components</code>æ–‡ä»¶å¤¹ã€‚</li><li>é€šè¿‡åˆ‡æ¢ï¼Œâ€œéšè—â€äº†çš„è·¯ç”±ç»„ä»¶ï¼Œé»˜è®¤æ˜¯è¢«é”€æ¯æ‰çš„ï¼Œéœ€è¦çš„æ—¶å€™å†å»æŒ‚è½½ã€‚</li><li>æ¯ä¸ªç»„ä»¶éƒ½æœ‰è‡ªå·±çš„<code>$route</code>å±æ€§ï¼Œé‡Œé¢å­˜å‚¨ç€è‡ªå·±çš„è·¯ç”±ä¿¡æ¯ã€‚</li><li>æ•´ä¸ªåº”ç”¨åªæœ‰ä¸€ä¸ªrouterï¼Œå¯ä»¥é€šè¿‡ç»„ä»¶çš„<code>$router</code>å±æ€§è·å–åˆ°ã€‚</li></ol><h3 id="3.å¤šçº§è·¯ç”±ï¼ˆå¤šçº§è·¯ç”±ï¼‰">3.å¤šçº§è·¯ç”±ï¼ˆå¤šçº§è·¯ç”±ï¼‰<a title="#3.å¤šçº§è·¯ç”±ï¼ˆå¤šçº§è·¯ç”±ï¼‰" href="#3.å¤šçº§è·¯ç”±ï¼ˆå¤šçº§è·¯ç”±ï¼‰"></a></h3><ol><li><p>é…ç½®è·¯ç”±è§„åˆ™ï¼Œä½¿ç”¨childrené…ç½®é¡¹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">routes:[</span><br><span class="line">&#123;</span><br><span class="line">path:<span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">component:About,</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">path:<span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">component:Home,</span><br><span class="line">children:[ <span class="comment">//é€šè¿‡childrené…ç½®å­çº§è·¯ç”±</span></span><br><span class="line">&#123;</span><br><span class="line">path:<span class="string">&#x27;news&#x27;</span>, <span class="comment">//æ­¤å¤„ä¸€å®šä¸è¦å†™ï¼š/news</span></span><br><span class="line">component:News</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">path:<span class="string">&#x27;message&#x27;</span>,<span class="comment">//æ­¤å¤„ä¸€å®šä¸è¦å†™ï¼š/message</span></span><br><span class="line">component:Message</span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure></li><li><p>è·³è½¬ï¼ˆè¦å†™å®Œæ•´è·¯å¾„ï¼‰ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link to&#x3D;&quot;&#x2F;home&#x2F;news&quot;&gt;News&lt;&#x2F;router-link&gt;</span><br></pre></td></tr></table></figure></li></ol><h3 id="4.è·¯ç”±çš„queryå‚æ•°">4.è·¯ç”±çš„queryå‚æ•°<a title="#4.è·¯ç”±çš„queryå‚æ•°" href="#4.è·¯ç”±çš„queryå‚æ•°"></a></h3><ol><li><p>ä¼ é€’å‚æ•°</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- è·³è½¬å¹¶æºå¸¦queryå‚æ•°ï¼Œtoçš„å­—ç¬¦ä¸²å†™æ³• --&gt;</span><br><span class="line">&lt;router-link :to&#x3D;&quot;&#x2F;home&#x2F;message&#x2F;detail?id&#x3D;666&amp;title&#x3D;ä½ å¥½&quot;&gt;è·³è½¬&lt;&#x2F;router-link&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- è·³è½¬å¹¶æºå¸¦queryå‚æ•°ï¼Œtoçš„å¯¹è±¡å†™æ³• --&gt;</span><br><span class="line">&lt;router-link </span><br><span class="line">:to&#x3D;&quot;&#123;</span><br><span class="line">path:&#39;&#x2F;home&#x2F;message&#x2F;detail&#39;,</span><br><span class="line">query:&#123;</span><br><span class="line">   id:666,</span><br><span class="line">            title:&#39;ä½ å¥½&#39;</span><br><span class="line">&#125;</span><br><span class="line">&#125;&quot;</span><br><span class="line">&gt;è·³è½¬&lt;&#x2F;router-link&gt;</span><br></pre></td></tr></table></figure></li><li><p>æ¥æ”¶å‚æ•°ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$route.query.id</span><br><span class="line">$route.query.title</span><br></pre></td></tr></table></figure></li></ol><h3 id="5.å‘½åè·¯ç”±">5.å‘½åè·¯ç”±<a title="#5.å‘½åè·¯ç”±" href="#5.å‘½åè·¯ç”±"></a></h3><ol><li><p>ä½œç”¨ï¼šå¯ä»¥ç®€åŒ–è·¯ç”±çš„è·³è½¬ã€‚</p></li><li><p>å¦‚ä½•ä½¿ç”¨</p><ol><li><p>ç»™è·¯ç”±å‘½åï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">path:<span class="string">&#x27;/demo&#x27;</span>,</span><br><span class="line">component:Demo,</span><br><span class="line">children:[</span><br><span class="line">&#123;</span><br><span class="line">path:<span class="string">&#x27;test&#x27;</span>,</span><br><span class="line">component:Test,</span><br><span class="line">children:[</span><br><span class="line">&#123;</span><br><span class="line">                      name:<span class="string">&#x27;hello&#x27;</span> <span class="comment">//ç»™è·¯ç”±å‘½å</span></span><br><span class="line">path:<span class="string">&#x27;welcome&#x27;</span>,</span><br><span class="line">component:Hello,</span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ç®€åŒ–è·³è½¬ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--ç®€åŒ–å‰ï¼Œéœ€è¦å†™å®Œæ•´çš„è·¯å¾„ --&gt;</span><br><span class="line">&lt;router-link to&#x3D;&quot;&#x2F;demo&#x2F;test&#x2F;welcome&quot;&gt;è·³è½¬&lt;&#x2F;router-link&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--ç®€åŒ–åï¼Œç›´æ¥é€šè¿‡åå­—è·³è½¬ --&gt;</span><br><span class="line">&lt;router-link :to&#x3D;&quot;&#123;name:&#39;hello&#39;&#125;&quot;&gt;è·³è½¬&lt;&#x2F;router-link&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--ç®€åŒ–å†™æ³•é…åˆä¼ é€’å‚æ•° --&gt;</span><br><span class="line">&lt;router-link </span><br><span class="line">:to&#x3D;&quot;&#123;</span><br><span class="line">name:&#39;hello&#39;,</span><br><span class="line">query:&#123;</span><br><span class="line">   id:666,</span><br><span class="line">            title:&#39;ä½ å¥½&#39;</span><br><span class="line">&#125;</span><br><span class="line">&#125;&quot;</span><br><span class="line">&gt;è·³è½¬&lt;&#x2F;router-link&gt;</span><br></pre></td></tr></table></figure></li></ol></li></ol><h3 id="6.è·¯ç”±çš„paramså‚æ•°">6.è·¯ç”±çš„paramså‚æ•°<a title="#6.è·¯ç”±çš„paramså‚æ•°" href="#6.è·¯ç”±çš„paramså‚æ•°"></a></h3><ol><li><p>é…ç½®è·¯ç”±ï¼Œå£°æ˜æ¥æ”¶paramså‚æ•°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">path:<span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">component:Home,</span><br><span class="line">children:[</span><br><span class="line">&#123;</span><br><span class="line">path:<span class="string">&#x27;news&#x27;</span>,</span><br><span class="line">component:News</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">component:Message,</span><br><span class="line">children:[</span><br><span class="line">&#123;</span><br><span class="line">name:<span class="string">&#x27;xiangqing&#x27;</span>,</span><br><span class="line">path:<span class="string">&#x27;detail/:id/:title&#x27;</span>, <span class="comment">//ä½¿ç”¨å ä½ç¬¦å£°æ˜æ¥æ”¶paramså‚æ•°</span></span><br><span class="line">component:Detail</span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ä¼ é€’å‚æ•°</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- è·³è½¬å¹¶æºå¸¦paramså‚æ•°ï¼Œtoçš„å­—ç¬¦ä¸²å†™æ³• --&gt;</span><br><span class="line">&lt;router-link :to&#x3D;&quot;&#x2F;home&#x2F;message&#x2F;detail&#x2F;666&#x2F;ä½ å¥½&quot;&gt;è·³è½¬&lt;&#x2F;router-link&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- è·³è½¬å¹¶æºå¸¦paramså‚æ•°ï¼Œtoçš„å¯¹è±¡å†™æ³• --&gt;</span><br><span class="line">&lt;router-link </span><br><span class="line">:to&#x3D;&quot;&#123;</span><br><span class="line">name:&#39;xiangqing&#39;,</span><br><span class="line">params:&#123;</span><br><span class="line">   id:666,</span><br><span class="line">            title:&#39;ä½ å¥½&#39;</span><br><span class="line">&#125;</span><br><span class="line">&#125;&quot;</span><br><span class="line">&gt;è·³è½¬&lt;&#x2F;router-link&gt;</span><br></pre></td></tr></table></figure><blockquote><p>ç‰¹åˆ«æ³¨æ„ï¼šè·¯ç”±æºå¸¦paramså‚æ•°æ—¶ï¼Œè‹¥ä½¿ç”¨toçš„å¯¹è±¡å†™æ³•ï¼Œåˆ™ä¸èƒ½ä½¿ç”¨pathé…ç½®é¡¹ï¼Œå¿…é¡»ä½¿ç”¨nameé…ç½®ï¼</p></blockquote></li><li><p>æ¥æ”¶å‚æ•°ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$route.params.id</span><br><span class="line">$route.params.title</span><br></pre></td></tr></table></figure></li></ol><h3 id="7.è·¯ç”±çš„propsé…ç½®">7.è·¯ç”±çš„propsé…ç½®<a title="#7.è·¯ç”±çš„propsé…ç½®" href="#7.è·¯ç”±çš„propsé…ç½®"></a></h3><p>ä½œç”¨ï¼šè®©è·¯ç”±ç»„ä»¶æ›´æ–¹ä¾¿çš„æ”¶åˆ°å‚æ•°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">name:<span class="string">&#x27;xiangqing&#x27;</span>,</span><br><span class="line">path:<span class="string">&#x27;detail/:id&#x27;</span>,</span><br><span class="line">component:Detail,</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¬¬ä¸€ç§å†™æ³•ï¼špropså€¼ä¸ºå¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä¸­æ‰€æœ‰çš„key-valueçš„ç»„åˆæœ€ç»ˆéƒ½ä¼šé€šè¿‡propsä¼ ç»™Detailç»„ä»¶</span></span><br><span class="line"><span class="comment">// props:&#123;a:900&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¬¬äºŒç§å†™æ³•ï¼špropså€¼ä¸ºå¸ƒå°”å€¼ï¼Œå¸ƒå°”å€¼ä¸ºtrueï¼Œåˆ™æŠŠè·¯ç”±æ”¶åˆ°çš„æ‰€æœ‰paramså‚æ•°é€šè¿‡propsä¼ ç»™Detailç»„ä»¶</span></span><br><span class="line"><span class="comment">// props:true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¬¬ä¸‰ç§å†™æ³•ï¼špropså€¼ä¸ºå‡½æ•°ï¼Œè¯¥å‡½æ•°è¿”å›çš„å¯¹è±¡ä¸­æ¯ä¸€ç»„key-valueéƒ½ä¼šé€šè¿‡propsä¼ ç»™Detailç»„ä»¶</span></span><br><span class="line">props(route)&#123;</span><br><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line">id:route.query.id,</span><br><span class="line">title:route.query.title</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="8.&lt;router-link&gt;çš„replaceå±æ€§">8.<code>&lt;router-link&gt;</code>çš„replaceå±æ€§<a title="#8.&lt;router-link&gt;çš„replaceå±æ€§" href="#8.&lt;router-link&gt;çš„replaceå±æ€§"></a></h3><ol><li>ä½œç”¨ï¼šæ§åˆ¶è·¯ç”±è·³è½¬æ—¶æ“ä½œæµè§ˆå™¨å†å²è®°å½•çš„æ¨¡å¼</li><li>æµè§ˆå™¨çš„å†å²è®°å½•æœ‰ä¸¤ç§å†™å…¥æ–¹å¼ï¼šåˆ†åˆ«ä¸º<code>push</code>å’Œ<code>replace</code>ï¼Œ<code>push</code>æ˜¯è¿½åŠ å†å²è®°å½•ï¼Œ<code>replace</code>æ˜¯æ›¿æ¢å½“å‰è®°å½•ã€‚è·¯ç”±è·³è½¬æ—¶å€™é»˜è®¤ä¸º<code>push</code></li><li>å¦‚ä½•å¼€å¯<code>replace</code>æ¨¡å¼ï¼š<code>&lt;router-link replace .......&gt;News&lt;/router-link&gt;</code></li></ol><h3 id="9.ç¼–ç¨‹å¼è·¯ç”±å¯¼èˆª">9.ç¼–ç¨‹å¼è·¯ç”±å¯¼èˆª<a title="#9.ç¼–ç¨‹å¼è·¯ç”±å¯¼èˆª" href="#9.ç¼–ç¨‹å¼è·¯ç”±å¯¼èˆª"></a></h3><ol><li><p>ä½œç”¨ï¼šä¸å€ŸåŠ©<code>&lt;router-link&gt;</code>å®ç°è·¯ç”±è·³è½¬ï¼Œè®©è·¯ç”±è·³è½¬æ›´åŠ çµæ´»</p></li><li><p>å…·ä½“ç¼–ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//$routerçš„ä¸¤ä¸ªAPI</span></span><br><span class="line"><span class="built_in">this</span>.$router.push(&#123;</span><br><span class="line">name:<span class="string">&#x27;xiangqing&#x27;</span>,</span><br><span class="line">params:&#123;</span><br><span class="line">id:xxx,</span><br><span class="line">title:xxx</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">this</span>.$router.replace(&#123;</span><br><span class="line">name:<span class="string">&#x27;xiangqing&#x27;</span>,</span><br><span class="line">params:&#123;</span><br><span class="line">id:xxx,</span><br><span class="line">title:xxx</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">this</span>.$router.forward() <span class="comment">//å‰è¿›</span></span><br><span class="line"><span class="built_in">this</span>.$router.back() <span class="comment">//åé€€</span></span><br><span class="line"><span class="built_in">this</span>.$router.go() <span class="comment">//å¯å‰è¿›ä¹Ÿå¯åé€€</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="10.ç¼“å­˜è·¯ç”±ç»„ä»¶">10.ç¼“å­˜è·¯ç”±ç»„ä»¶<a title="#10.ç¼“å­˜è·¯ç”±ç»„ä»¶" href="#10.ç¼“å­˜è·¯ç”±ç»„ä»¶"></a></h3><ol><li><p>ä½œç”¨ï¼šè®©ä¸å±•ç¤ºçš„è·¯ç”±ç»„ä»¶ä¿æŒæŒ‚è½½ï¼Œä¸è¢«é”€æ¯ã€‚</p></li><li><p>å…·ä½“ç¼–ç ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;keep-alive include&#x3D;&quot;News&quot;&gt; </span><br><span class="line">    &lt;router-view&gt;&lt;&#x2F;router-view&gt;</span><br><span class="line">&lt;&#x2F;keep-alive&gt;</span><br></pre></td></tr></table></figure></li></ol><h3 id="11.ä¸¤ä¸ªæ–°çš„ç”Ÿå‘½å‘¨æœŸé’©å­">11.ä¸¤ä¸ªæ–°çš„ç”Ÿå‘½å‘¨æœŸé’©å­<a title="#11.ä¸¤ä¸ªæ–°çš„ç”Ÿå‘½å‘¨æœŸé’©å­" href="#11.ä¸¤ä¸ªæ–°çš„ç”Ÿå‘½å‘¨æœŸé’©å­"></a></h3><ol><li>ä½œç”¨ï¼šè·¯ç”±ç»„ä»¶æ‰€ç‹¬æœ‰çš„ä¸¤ä¸ªé’©å­ï¼Œç”¨äºæ•è·è·¯ç”±ç»„ä»¶çš„æ¿€æ´»çŠ¶æ€ã€‚</li><li>å…·ä½“åå­—ï¼š<ol><li><code>activated</code>è·¯ç”±ç»„ä»¶è¢«æ¿€æ´»æ—¶è§¦å‘ã€‚</li><li><code>deactivated</code>è·¯ç”±ç»„ä»¶å¤±æ´»æ—¶è§¦å‘ã€‚</li></ol></li></ol><h3 id="12.è·¯ç”±å®ˆå«">12.è·¯ç”±å®ˆå«<a title="#12.è·¯ç”±å®ˆå«" href="#12.è·¯ç”±å®ˆå«"></a></h3><ol><li><p>ä½œç”¨ï¼šå¯¹è·¯ç”±è¿›è¡Œæƒé™æ§åˆ¶</p></li><li><p>åˆ†ç±»ï¼šå…¨å±€å®ˆå«ã€ç‹¬äº«å®ˆå«ã€ç»„ä»¶å†…å®ˆå«</p></li><li><p>å…¨å±€å®ˆå«:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å…¨å±€å‰ç½®å®ˆå«ï¼šåˆå§‹åŒ–æ—¶æ‰§è¡Œã€æ¯æ¬¡è·¯ç”±åˆ‡æ¢å‰æ‰§è¡Œ</span></span><br><span class="line">router.beforeEach(<span class="function">(<span class="params">to,<span class="keyword">from</span>,next</span>)=&gt;</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;beforeEach&#x27;</span>,to,<span class="keyword">from</span>)</span><br><span class="line"><span class="keyword">if</span>(to.meta.isAuth)&#123; <span class="comment">//åˆ¤æ–­å½“å‰è·¯ç”±æ˜¯å¦éœ€è¦è¿›è¡Œæƒé™æ§åˆ¶</span></span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">localStorage</span>.getItem(<span class="string">&#x27;school&#x27;</span>) === <span class="string">&#x27;atguigu&#x27;</span>)&#123; <span class="comment">//æƒé™æ§åˆ¶çš„å…·ä½“è§„åˆ™</span></span><br><span class="line">next() <span class="comment">//æ”¾è¡Œ</span></span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">alert(<span class="string">&#x27;æš‚æ— æƒé™æŸ¥çœ‹&#x27;</span>)</span><br><span class="line"><span class="comment">// next(&#123;name:&#x27;guanyu&#x27;&#125;)</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">next() <span class="comment">//æ”¾è¡Œ</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//å…¨å±€åç½®å®ˆå«ï¼šåˆå§‹åŒ–æ—¶æ‰§è¡Œã€æ¯æ¬¡è·¯ç”±åˆ‡æ¢åæ‰§è¡Œ</span></span><br><span class="line">router.afterEach(<span class="function">(<span class="params">to,<span class="keyword">from</span></span>)=&gt;</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;afterEach&#x27;</span>,to,<span class="keyword">from</span>)</span><br><span class="line"><span class="keyword">if</span>(to.meta.title)&#123; </span><br><span class="line"><span class="built_in">document</span>.title = to.meta.title <span class="comment">//ä¿®æ”¹ç½‘é¡µçš„title</span></span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="built_in">document</span>.title = <span class="string">&#x27;vue_test&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>ç‹¬äº«å®ˆå«:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">beforeEnter(to,<span class="keyword">from</span>,next)&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;beforeEnter&#x27;</span>,to,<span class="keyword">from</span>)</span><br><span class="line"><span class="keyword">if</span>(to.meta.isAuth)&#123; <span class="comment">//åˆ¤æ–­å½“å‰è·¯ç”±æ˜¯å¦éœ€è¦è¿›è¡Œæƒé™æ§åˆ¶</span></span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">localStorage</span>.getItem(<span class="string">&#x27;school&#x27;</span>) === <span class="string">&#x27;atguigu&#x27;</span>)&#123;</span><br><span class="line">next()</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">alert(<span class="string">&#x27;æš‚æ— æƒé™æŸ¥çœ‹&#x27;</span>)</span><br><span class="line"><span class="comment">// next(&#123;name:&#x27;guanyu&#x27;&#125;)</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">next()</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ç»„ä»¶å†…å®ˆå«ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¿›å…¥å®ˆå«ï¼šé€šè¿‡è·¯ç”±è§„åˆ™ï¼Œè¿›å…¥è¯¥ç»„ä»¶æ—¶è¢«è°ƒç”¨</span></span><br><span class="line">beforeRouteEnter (to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">//ç¦»å¼€å®ˆå«ï¼šé€šè¿‡è·¯ç”±è§„åˆ™ï¼Œç¦»å¼€è¯¥ç»„ä»¶æ—¶è¢«è°ƒç”¨</span></span><br><span class="line">beforeRouteLeave (to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h3 id="13.è·¯ç”±å™¨çš„ä¸¤ç§å·¥ä½œæ¨¡å¼">13.è·¯ç”±å™¨çš„ä¸¤ç§å·¥ä½œæ¨¡å¼<a title="#13.è·¯ç”±å™¨çš„ä¸¤ç§å·¥ä½œæ¨¡å¼" href="#13.è·¯ç”±å™¨çš„ä¸¤ç§å·¥ä½œæ¨¡å¼"></a></h3><ol><li>å¯¹äºä¸€ä¸ªurlæ¥è¯´ï¼Œä»€ä¹ˆæ˜¯hashå€¼ï¼Ÿâ€”â€” #åŠå…¶åé¢çš„å†…å®¹å°±æ˜¯hashå€¼ã€‚</li><li>hashå€¼ä¸ä¼šåŒ…å«åœ¨ HTTP è¯·æ±‚ä¸­ï¼Œå³ï¼šhashå€¼ä¸ä¼šå¸¦ç»™æœåŠ¡å™¨ã€‚</li><li>hashæ¨¡å¼ï¼š<ol><li>åœ°å€ä¸­æ°¸è¿œå¸¦ç€#å·ï¼Œä¸ç¾è§‚ ã€‚</li><li>è‹¥ä»¥åå°†åœ°å€é€šè¿‡ç¬¬ä¸‰æ–¹æ‰‹æœºappåˆ†äº«ï¼Œè‹¥appæ ¡éªŒä¸¥æ ¼ï¼Œåˆ™åœ°å€ä¼šè¢«æ ‡è®°ä¸ºä¸åˆæ³•ã€‚</li><li>å…¼å®¹æ€§è¾ƒå¥½ã€‚</li></ol></li><li>historyæ¨¡å¼ï¼š<ol><li>åœ°å€å¹²å‡€ï¼Œç¾è§‚ ã€‚</li><li>å…¼å®¹æ€§å’Œhashæ¨¡å¼ç›¸æ¯”ç•¥å·®ã€‚</li><li>åº”ç”¨éƒ¨ç½²ä¸Šçº¿æ—¶éœ€è¦åç«¯äººå‘˜æ”¯æŒï¼Œè§£å†³åˆ·æ–°é¡µé¢æœåŠ¡ç«¯404çš„é—®é¢˜ã€‚</li></ol></li></ol>]]></content>
    
    
    <summary type="html">&lt;p&gt;å°šç¡…è°· å¼ å¤©ç¦¹è€å¸ˆvue2ç¬”è®°ï¼ˆæ–¹ä¾¿è‡ªå·±æŸ¥é˜…ï¼‰&lt;/p&gt;</summary>
    
    
    
    <category term="ç¬”è®°" scheme="https://pinkpeachabc.cn/categories/%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="vue" scheme="https://pinkpeachabc.cn/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>Daily Life 2</title>
    <link href="https://pinkpeachabc.cn/%E6%97%A5%E5%B8%B8%E5%B0%8F%E8%AE%B0.html"/>
    <id>https://pinkpeachabc.cn/%E6%97%A5%E5%B8%B8%E5%B0%8F%E8%AE%B0.html</id>
    <published>2021-04-20T15:21:02.000Z</published>
    <updated>2021-04-22T03:43:12.335Z</updated>
    
    <content type="html"><![CDATA[<p>å¤±è¸ªäººå£å›æ¥å•¦ğŸ¤—ï¼Œå‰ä¸€ç¯‡è¿˜æ˜¯å…ƒæ—¦è½¬çœ¼å·²ç»å°†è¿‘äº”ä¸ªæœˆæ²¡å†™åšå®¢äº†ï¼Œå¯ä»¥è¯´æ˜¯ç»ˆæé¸½å­ğŸ•Šæ€ªäº†ã€‚<a id="more"></a></p><h2 id="æ¶ˆå¤±">æ¶ˆå¤±<a title="#æ¶ˆå¤±" href="#æ¶ˆå¤±"></a></h2><p>å¹´å‘³åˆšè¿‡æˆ‘çš„ä¸“å‡æœ¬è€ƒè¯•å°±æä¸Šäº†æ—¥ç¨‹ï¼Œè¿™å‡ ä¸ªæœˆçš„æ—¶é—´éƒ½åœ¨å¤‡è€ƒå½“ä¸­ã€‚æ„Ÿè§‰æ¯ä¸€å¤©éƒ½åœ¨è¿˜é«˜ä¸­çš„å€ºï¼Œè¿™ä¸‰å¹´å…‰é˜´çš„å¯¹æˆ‘æ¥è¯´å¯ä»¥è¯´æ®µç¬å³é€ï¼Œä»å¤§ä¸€çš„æ’æ–¥åˆ°æœ€åçš„é‡Šç„¶ã€‚ä¸€ä¸ªæˆé•¿çš„è¿‡ç¨‹ï¼Œè·¯ç¨‹æ€»æ˜¯è‰°è¾›ã€‚ç›´åˆ°ä»Šå¹´ä¸‰æœˆåº•æˆ‘ç»ˆäºå®Œæˆæˆ‘ä¸‰å¹´çš„ç›¼æœ›çš„ä¸€å¤©ï¼Œå¯ä»¥æ¾å£æ°”ç¡ä¸ªè§‰æ‰“ä¸ªæ¸¸æˆäº†ã€‚è€ƒå‰ä¸€å¤©è¿˜å’ŒåŒå­¦åœ¨æ—…é¦†æ‰“è¶£è¯´å¿…å®šä¸Šå²¸æ¢ä¸ªå¥½åœ°æ–¹çº¦å ä¸Šç½‘ï¼Œè¿˜è®°çš„åˆšå¼€å§‹æœ‰è®¸å¤šåŒå­¦åœ¨ä¸€èµ·åšæŒï¼Œæœ€åæˆ‘çš„å°åœˆå­åªå‰©ä¸€ä¸ªäººé™ªåœ¨èº«è¾¹äº†ï¼Œæœ‰äº›äººä¸çŸ¥ä¸è§‰ä¸­<strong>æ¶ˆå¤±</strong>äº†ã€‚</p><h2 id="é™¤è‰">é™¤è‰<a title="#é™¤è‰" href="#é™¤è‰"></a></h2><p>éš¾å¾—ä¼‘æ†©çš„æ—¥å­ï¼Œä¹Ÿæ²¡æœ‰å»æ‰¾ä¸ªå…¼èŒ<s>ä¸»è¦æ˜¯æ‡’</s>ã€‚è¿™ä¸¤å¤©ä¸€ç›´å—åˆ°æœåŠ¡å™¨å’ŒåŸŸååˆ°æœŸçš„é€šçŸ¥ï¼Œä¸€æ‹è„‘é—¨å·²ç»æŠŠåšå®¢æ”¾çš„é•¿æ»¡ç»¿æ¯›äº†ã€‚çˆ¶äº²åœ¨æ¥¼ä¸‹åœ°ä¸Šç§çš„ç“œæœè”¬èœéœ€è¦ç¿»åœ°ï¼Œå…»åˆ†æ‰èƒ½å‡åŒ€æ›´ä½•å†µåšå®¢äº†ã€‚é™¤è‰æœºä¹Ÿéœ€è¦å¼€å‡ ä¸‹äº†ã€‚</p><ul><li>å…¨ç«™æ›¿æ¢ Httpsï¼Œç»­è´¹åŸŸåã€‚</li><li>ä¸»é¢˜æ›´æ–°åˆ°äº†æœ€æ–°ç‰ˆæœ¬ï¼š<a href="https://github.com/ikeq/hexo-theme-inside/releases/tag/2.7.0-beta.13" target="_blank">2.7.0-beta.13</a>ã€‚</li><li>ç”±äºé˜¿é‡Œäº‘æœåŠ¡å™¨ 5 æœˆåˆ†åˆ°æœŸï¼Œä¸åœ¨ç»§ç»­ç»­è´¹æ”¹ç”¨ Vercel ä½œä¸ºæ‰˜ç®¡ã€‚</li><li>ä¸€ç›´åœ¨ç”¨ç¬”è®°æœ¬ 15.6 å¯¸ï¼Œåšå®¢æœªèƒ½å¾ˆå¥½é€‚é…å¤šåˆ†è¾¨ç‡çš„æ˜¾ç¤ºæ•ˆæœä¼˜åŒ–äº†æ˜¾ç¤ºèŒƒå›´ã€‚</li></ul><h2 id="ä¼‘é—²">ä¼‘é—²<a title="#ä¼‘é—²" href="#ä¼‘é—²"></a></h2><p>è¿™ä¸¤å¤©è¿·ä¸Šäº†åˆé‡æ–°å…¥å‘çš„ç‚‰çŸ³ä¼ è¯´<s>æˆ˜ä»¤å¤ªé¦™äº†</s>ï¼Œä½†æ˜¯æ—¶é—´ä¸å¦‚è®¸é«˜å¼ºåº¦æ·¦å°æ—¶æ•°ã€‚çµæœºä¸€åŠ¨ä½¿ç”¨è„šæœ¬æ¥åˆ·ï¼Œæ‰¾äº†å¥½ä¹…å‘ç°å°±åªæœ‰ä¸€æ¬¾å« Hearthbuddy çš„è„šæœ¬è½¯ä»¶ã€‚è„šæœ¬ç”¨ C# æ¥å†™æˆ˜æ–—ç­–ç•¥é…åˆ AI è®¡ç®—å®ç°æŒ‚æœºï¼Œä¸€ç›´ä»¥æ¥å¯¹è„šæœ¬çš„å°è±¡éƒ½æ˜¯å‘†ç¬¨çš„ï¼Œä»ç°åœ¨èµ·æˆ‘æ­£å¼å‘ AI é“æ­‰ã€‚ä»…ä»…å†æ—¶ä¸¤ä¸ªæ™šä¸Šï¼Œä¸€è·¯ä»é’é“œå†²åˆ°ä½ä¿<s>æ¨ä¸å¾—æ²¡æ—©ç”¨</s>ã€‚<img src="https://cdn.jsdelivr.net/gh/pinkpeachabc/images/Blog-imgs/image-20210422111257984.png" alt="image-20210422111257984"></p><h2 id="å­¦ä¹ ">å­¦ä¹ <a title="#å­¦ä¹ " href="#å­¦ä¹ "></a></h2><p>èººçš„ä¹…äº†éš¾å…æˆä¸ºåºŸäººï¼Œå…³äºæŠ€æœ¯æ ˆè¿™ä¸€æ–¹é¢å·²ç»æç½®å°åŠå¹´æ²¡æœ‰å­¦ä¹ äº†ã€‚æçš„è¶Šä¹…å¿˜çš„è¶Šå¤šï¼Œä¹‹åçš„æ—¥å­ä»æ–°å¼€å§‹å¿«é€Ÿå­¦ä¹ ã€‚ä¼šæ›´æ–°ä¸€äº›å­¦ä¹ ç¬”è®°å’Œæ—¥å¸¸ç”Ÿæ´»ã€‚<img src="https://cdn.jsdelivr.net/gh/pinkpeachabc/images/Blog-imgs/Java%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF.png" alt="Javaåç«¯å¼€å‘å­¦ä¹ è·¯çº¿"></p><hr><blockquote><p>æ—¶é—´æµé€ï¼Œå²æœˆä¸é¥¶äººã€‚æ¯ä¸ªäººéƒ½é€‰æ‹©äº†çš„è‡ªå·±ç”Ÿæ´»çš„æ–¹å‘ï¼Œå‘å°è¿™æ˜ŸæœŸä¹Ÿè¦ç»“å©šäº†ã€‚åŒå­¦æœ‰çš„ä¹Ÿé™†ç»­å¼€å§‹å·¥ä½œäº†ï¼Œè€ƒç ”çš„ä¹Ÿéƒ½å·²ç»åœ¨å‡†å¤‡äº†ã€‚<em>è™½ä¸–æ®Šäº‹å¼‚ï¼Œæ‰€ä»¥å…´æ€€ï¼Œå…¶è‡´ä¸€ä¹Ÿ</em>ã€‚æˆ‘æƒ³å¤§å®¶éƒ½å¦‚æ­¤å§ï¼Œæ„¿ä»ŠååŠ æ²¹ä¸€åˆ‡é¡ºåˆ©ã€‚ğŸ˜Š</p></blockquote>]]></content>
    
    
    <summary type="html">&lt;p&gt;å¤±è¸ªäººå£å›æ¥å•¦ğŸ¤—ï¼Œå‰ä¸€ç¯‡è¿˜æ˜¯å…ƒæ—¦è½¬çœ¼å·²ç»å°†è¿‘äº”ä¸ªæœˆæ²¡å†™åšå®¢äº†ï¼Œå¯ä»¥è¯´æ˜¯ç»ˆæé¸½å­ğŸ•Šæ€ªäº†ã€‚</summary>
    
    
    
    <category term="æ‚è®°" scheme="https://pinkpeachabc.cn/categories/%E6%9D%82%E8%AE%B0/"/>
    
    
    <category term="é—²èŠ" scheme="https://pinkpeachabc.cn/tags/%E9%97%B2%E8%81%8A/"/>
    
  </entry>
  
  <entry>
    <title>Happy New Year</title>
    <link href="https://pinkpeachabc.cn/2021.html"/>
    <id>https://pinkpeachabc.cn/2021.html</id>
    <published>2020-12-31T13:25:07.000Z</published>
    <updated>2021-04-20T11:15:03.845Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æ–°å¹´å¿«ä¹">æ–°å¹´å¿«ä¹<a title="#æ–°å¹´å¿«ä¹" href="#æ–°å¹´å¿«ä¹"></a></h2><p>ä»å‰å‡ å¤©å¼€å§‹ï¼Œæ‰‹æœºä¸Šå°±å¼€å§‹ä¸æ–­æ¨é€å„å®¶çš„<strong>å¹´ç»ˆæ€»ç»“</strong>ã€‚æœ¬æƒ³ç€å°±ç€å¹´æœ«ä¹Ÿå†™ä¸€ç¯‡è‡ªå·±çš„å¹´ç»ˆæ€»ç»“ï¼Œä½†æ‰‹æŒ‡æ”¾åˆ°é”®ç›˜æ‰å‘ç°è‡ªå·±åªæ˜¯<strong>å¹³æ·¡</strong>çš„è¿‡å®Œè¿™ä¸€æ•´å¹´ï¼ŒåŸºæœ¬ä¸Šè¿™ä¸€å¹´å¤§éƒ¨åˆ†æ—¶å…‰éƒ½æ˜¯åœ¨å®¶ä¸­åº¦è¿‡çš„ã€‚</p><blockquote><p><strong>ç–«æƒ…</strong></p></blockquote><p>2020çš„ç¬¬ä¸€å¤©ï¼Œçªå¦‚å…¶æ¥çš„ç–«æƒ…ï¼Œæ‰“ç ´çš„æˆ‘åŸæœ¬ä¸ºä»Šå¹´å®šå¥½çš„è®¡åˆ’ã€‚å› ä¸ºç–«æƒ…çš„å½±å“ä»æœˆåˆå°±è¢«<strong>å›°</strong>åœ¨å®¶é‡Œï¼Œæ¥å—çš„æ„‰å¿«çš„ç½‘è¯¾<s>æ°´è¯¾</s>ç”Ÿæ´»ã€‚æ—¥å­ä¸€å¤©å¤©è¿‡å»ï¼Œç–«æƒ…ä¹Ÿæ¸æ¸å¥½è½¬ã€‚</p><blockquote><p><strong>è¶£äº‹</strong></p></blockquote><p>åœ¨ä¸€ä¸ªæ¸…æ™¨ï¼Œè¢«è­¦å¯ŸğŸ‘®å”å”æ‰¾ä¸Šé—¨ã€‚äººç”Ÿç¬¬ä¸€æ¬¡è¢«è­¦å¯Ÿå”å”æ‰¾ä¸Šé—¨ï¼Œè¿˜ä»¥ä¸ºè‡ªå·±çŠ¯äº†ä»€ä¹ˆé”™è¯¯ã€‚åŸæ¥æ˜¯æ¥è°ƒæŸ¥ç½‘ç«™çš„ç”¨é€”å’Œæœ‰æ— å®‰å…¨æªæ–½ï¼Œå¡«äº†å¼ è¡¨å°±é€èµ°äº†ã€‚å¿ƒé‡Œè¿˜æ˜¯æœ‰ç‚¹å°ç´§å¼ ï¼Œç°åœ¨çš„ç›‘ç®¡çœŸçš„å¾ˆä¸¥æ ¼ï¼Œç»™ğŸ‘®â€ç‚¹èµã€‚</p><blockquote><p><strong>å­¦ä¹ </strong></p></blockquote><p>å¿™å®Œäº†å­¦æ ¡çš„ä»»åŠ¡ï¼Œä»Šå¹´çš„ä¸‹åŠå¹´åŸºæœ¬éƒ½åœ¨ç´§å¼ çš„å¤ä¹ å’Œå¤‡è€ƒä¸­ï¼Œæƒ³è¦åœ¨è®¡ç®—æœºè¡Œä¸šç«™ä½æ²¡æœ‰èƒ½åŠ›å’Œå­¦å†<s>å„è¡Œå„ä¸šéƒ½ä¸€æ ·</s>ç»å¯¹æ˜¯è¡Œä¸é€šçš„ï¼ŒæœŸæœ›ä¸“ä¸šè¯¾æœ‰ä¸ªå¥½æˆç»©ã€‚</p><blockquote><p><strong>è®¡åˆ’</strong></p></blockquote><p>ä»Šå¹´åœ¨æŠ€èƒ½æ–¹é¢åŸºæœ¬æ˜¯å¤„äºä¸€ä¸ªåœæ»çš„çŠ¶æ€ï¼ŒåŒæ—¶ä¹Ÿåœ¨è€ƒè™‘ä»Šåçš„å‘å±•ï¼Œå’Œç›®å‰çš„èƒ½åŠ›é€‚åˆé€‰æ‹©ä»€ä¹ˆæ ·çš„æ–¹å‘ã€‚çœ¼çœ‹æ¯”è‡ªå·±å°ä¸€å±Šçš„å­¦å¼Ÿå·²ç»å¯ä»¥ç‹¬ç«‹å¼€å‘é¡¹ç›®ä¸Šçº¿ï¼Œå¹¶åœ¨å›½èµ›å–çš„ä¼˜å¼‚çš„æˆç»©äº†ã€‚è‡ªå·±è¿˜æ˜¯å¹³å¹³æ— å¥‡ï¼ŒæœŸæœ›ä¸€åˆ‡é¡ºåˆ©ï¼Œè®¡åˆ’åœ¨å¼€å‘æ–¹å‘å†²ä¸€å†²ã€‚ä¹Ÿæ˜¯æ—¶å€™çœ‹çœ‹è‡ªå·±çš„æé™åœ¨å“ªé‡Œã€‚</p><hr><p>å…³äºåšå®¢çš„æ›´æ–°ï¼Œå“ˆå“ˆå¯èƒ½è¿˜è¦ç»§ç»­<strong>é¸½</strong>ä¸‹å»ã€‚ä½†æˆ‘æƒ³æ—¶é—´ä¸ä¼šå¤ªä¹…ï¼Œä¹Ÿç¥æ„¿å°ä¼™ä¼´ä»¬<strong>æ–°å¹´å¿«ä¹</strong>ï¼</p>]]></content>
    
    
    <summary type="html">æ—¥å¸¸ç”Ÿæ´»</summary>
    
    
    
    <category term="æ‚è®°" scheme="https://pinkpeachabc.cn/categories/%E6%9D%82%E8%AE%B0/"/>
    
    
  </entry>
  
  <entry>
    <title>Daily life</title>
    <link href="https://pinkpeachabc.cn/%E5%B0%8F%E8%AE%B0.html"/>
    <id>https://pinkpeachabc.cn/%E5%B0%8F%E8%AE%B0.html</id>
    <published>2020-09-09T15:26:33.000Z</published>
    <updated>2021-04-20T11:00:18.656Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æ›´æ–°">æ›´æ–°<a title="#æ›´æ–°" href="#æ›´æ–°"></a></h2><p>ç”±äº hexo å·²ç»å‡çº§åˆ°äº† 5.x.x ç‰ˆæœ¬ï¼Œinsideä¸»é¢˜ä¼šå‡ºç°ä¸€äº›æœªçŸ¥çš„ bugã€‚æœ¬æ¬¡å·²ç»å‡çº§åˆ° hexo 5.1.1ï¼Œä¸»é¢˜æ›´æ–°åˆ°äº†æœ€æ–°ç‰ˆæœ¬ï¼š2.7.0-beta.3ã€‚</p><p>å¦å¤–åœ¨ä¹‹å‰çš„è®¾ç½®çš„ valine çš„é‚®ç®±å›å¤ï¼Œä¼šå‡ºç°æœªèƒ½å”¤é†’çš„ç°è±¡ <strong>â€œå› æµæ§åŸå› ï¼Œé€šè¿‡å®šæ—¶ä»»åŠ¡å”¤é†’ä½“éªŒç‰ˆå®ä¾‹å¤±è´¥ï¼Œå»ºè®®å‡çº§è‡³æ ‡å‡†ç‰ˆäº‘å¼•æ“å®ä¾‹é¿å…ä¼‘çœ â€</strong>ã€‚æœ¬æ¬¡é€šç”¨ <strong>Github Action</strong> ä¿®å¤äº†è¿™ä¸ªå”¤é†’å¤±è´¥çš„é”™è¯¯ã€‚</p><h2 id="è¯´æ˜">è¯´æ˜<a title="#è¯´æ˜" href="#è¯´æ˜"></a></h2><p>ç”±äºå‡†å¤‡è€ƒè¯•ï¼Œä»Šåçš„ä¸€ä¸ªæœˆä¸ä¼šæ›´åšï¼Œç›®å‰çš„ blog æ•´ä½“åº¦å·²ç»å¾ˆé«˜äº†ã€‚ä¸ä¼šå†æŠ˜è…¾äº†<s>ä»¥åè¯´ä¸å®š</s>ã€‚æ€»ä¹‹è¦å¤±è¸ªä¸€é˜µå­äº†ã€‚</p><hr><p>ä»Šåäº‰å–å†™ä¼˜è´¨çš„åŸåˆ›æ–‡ç« ã€å¬å‡ é¦–å¥½å¬çš„éŸ³ä¹ã€è€ƒä¸€ä¸ªç†æƒ³çš„åˆ†æ•°â€”â€”2020å¹´9æœˆ9æ—¥</p>]]></content>
    
    
    <summary type="html">æ—¥å¸¸ç”Ÿæ´»</summary>
    
    
    
    <category term="æ‚è®°" scheme="https://pinkpeachabc.cn/categories/%E6%9D%82%E8%AE%B0/"/>
    
    
  </entry>
  
  <entry>
    <title>Valineè¯„è®ºçš„é‚®ç®±æé†’</title>
    <link href="https://pinkpeachabc.cn/Valine%E8%AF%84%E8%AE%BA%E7%9A%84%E9%82%AE%E7%AE%B1%E6%8F%90%E9%86%92.html"/>
    <id>https://pinkpeachabc.cn/Valine%E8%AF%84%E8%AE%BA%E7%9A%84%E9%82%AE%E7%AE%B1%E6%8F%90%E9%86%92.html</id>
    <published>2020-08-06T05:21:28.000Z</published>
    <updated>2021-04-20T10:59:50.547Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>åšå®¢æ­å»ºäº†å¾ˆä¹…äº†ï¼Œå‰ä¸¤å¤©é—²æ¥æ— äº‹å»é€›åˆ«äººåšå®¢æ—¶å‘ç°äº†åˆ«äººç»™æˆ‘å‘è¯„è®ºæ˜¯å¯ä»¥ç”¨ç¬¬ä¸‰æ–¹é‚®ä»¶æé†’ã€‚çªç„¶æƒ³èµ·æ¥è‡ªå·±çš„åšå®¢è¯„è®ºå´æ²¡æœ‰è¿™ä¸ªåŠŸèƒ½ï¼Œæœ€æ—©ä¹‹å‰ç”¨è¿‡æ¥å¿…åŠ›å¾ˆå¯æƒœåŠ è½½<strong>é¾Ÿé€Ÿ</strong><s>æœåŠ¡å™¨ä¸åœ¨å›½å†…</s>ï¼Œå¦‚ä»Šä½¿ç”¨çš„æ˜¯æ— åç«¯çš„Valineï¼Œç²¾ç®€å¿«æ·ã€‚ä»Šå¤©å°±ç»™å®ƒè®¾ç½®ä¸ªç¬¬ä¸‰æ–¹é‚®ä»¶æé†’å§ã€‚</p></blockquote><p><img src="https://s1.ax1x.com/2020/08/06/ac7DiD.png" alt="ac7DiD.png" class="Ï†bs"></p><h2 id="ç®€ä»‹">ç®€ä»‹<a title="#ç®€ä»‹" href="#ç®€ä»‹"></a></h2><blockquote><p>æ­¤é¡¹ç›®æ˜¯ä¸€ä¸ªå¯¹ <a href="https://valine.js.org/" target="_blank">Valine</a> è¯„è®ºç³»ç»Ÿçš„æ‹“å±•åº”ç”¨ï¼Œå¯å¢å¼º <code>Valine</code> çš„é‚®ä»¶é€šçŸ¥åŠŸèƒ½ã€‚åŸºäº Leancloud çš„äº‘å¼•æ“ä¸äº‘å‡½æ•°ã€‚å¯ä»¥æä¾›é‚®ä»¶ <code>é€šçŸ¥ç«™é•¿</code> å’Œ <code>@ é€šçŸ¥</code> çš„åŠŸèƒ½ï¼Œè€Œä¸”è¿˜æ”¯æŒè‡ªå®šä¹‰é‚®ä»¶é€šçŸ¥æ¨¡æ¿ã€‚</p></blockquote><p><a href="https://github.com/zhaojun1998/Valine-Admin" target="_blank">Valine Admin</a></p><h2 id="é…ç½®">é…ç½®<a title="#é…ç½®" href="#é…ç½®"></a></h2><ul><li>é¦–å…ˆè¿›å…¥<a href="https://leancloud.cn/" target="_blank">Leancloud</a> ä¸­ï¼Œåœ¨<strong>è®¾ç½®-é‚®ä»¶æ¨¡æ¿-ç”¨äºé‡ç½®å¯†ç </strong>çš„é‚®ä»¶ä¸»é¢˜ä¸­ä¿®æ”¹ä¸ºï¼š</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Hi, &#123;&#123;username&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">ä½ åœ¨ &#123;&#123;appname&#125;&#125; çš„è¯„è®ºæ”¶åˆ°äº†æ–°çš„å›å¤ï¼Œè¯·ç‚¹å‡»æŸ¥çœ‹ï¼š</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;ä½ çš„ç½‘å€é¦–é¡µé“¾æ¥&quot;</span> <span class="attr">style</span>=<span class="string">&quot;display: inline-block; padding: 10px 20px; border-radius: 4px; background-color: #3090e4; color: #fff; text-decoration: none;&quot;</span>&gt;</span>é©¬ä¸ŠæŸ¥çœ‹<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://s1.ax1x.com/2020/08/06/acqVRe.png" alt="acqVRe.png" class="Ï†bs"></p><ul><li>éƒ¨ç½²Valine-Adminï¼Œåœ¨<strong>äº‘å¼•æ“-éƒ¨ç½²-Gitéƒ¨ç½²</strong>ä¸­è¾“å…¥ <a href="https://github.com/zhaojun1998/Valine-Admin">https://github.com/zhaojun1998/Valine-Admin</a> ï¼Œå¹¶åœ¨<strong>åˆ†æ”¯æˆ–æäº¤</strong>ä¸­è¾“å…¥masterç‚¹å‡»éƒ¨ç½²ã€‚</li></ul><p><img src="https://s1.ax1x.com/2020/08/06/acqnsA.png" alt="acqnsA.png" class="Ï†bs"></p><ul><li>æ¥ä¸‹æ¥æ˜¯é…ç½®é¡¹ï¼Œåœ¨<strong>äº‘å¼•æ“-è®¾ç½®-è‡ªå®šä¹‰ç¯å¢ƒå˜é‡</strong>ä¸­ï¼Œ<strong>æ·»åŠ æ–°å˜é‡</strong>ï¼Œå¦‚è¡¨æ‰€ç¤ºï¼š</li></ul><div class="Ï†bt"><div class="Ï†bv"><table><thead><tr><th>å˜é‡</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>SITE_NAME</td><td>[å¿…å¡«] ç½‘ç«™åç§°</td></tr><tr><td>SITE_URL</td><td>[å¿…å¡«] ç½‘ç«™åœ°å€ï¼Œ<strong>æœ€åä¸è¦åŠ  <code>/</code></strong></td></tr><tr><td>SMTP_SERVICE</td><td>[å¿…å¡«] é‚®ä»¶æœåŠ¡æä¾›å•†ï¼Œæ”¯æŒ QQã€163ã€126ã€Gmail ä»¥åŠ <a href="https://nodemailer.com/smtp/well-known/#supported-services" target="_blank">æ›´å¤š</a>ã€‚ â€” <em>å¦‚è¿™é‡Œæ²¡æœ‰ä½ ä½¿ç”¨çš„é‚®ä»¶æä¾›å•†ï¼Œè¯·æŸ¥çœ‹<a href="https://blog.csdn.net/%E9%AB%98%E7%BA%A7%E9%85%8D%E7%BD%AE.md#%E8%87%AA%E5%AE%9A%E4%B9%89%E9%82%AE%E4%BB%B6%E6%9C%8D%E5%8A%A1%E5%99%A8" target="_blank">è‡ªå®šä¹‰é‚®ä»¶æœåŠ¡å™¨</a></em></td></tr><tr><td>SMTP_USER</td><td>[å¿…å¡«] SMTPç™»å½•ç”¨æˆ·ï¼Œä¸€èˆ¬ä¸ºé‚®ç®±åœ°å€</td></tr><tr><td>SMTP_PASS</td><td>[å¿…å¡«] SMTPç™»å½•å¯†ç ï¼Œä¸€èˆ¬ä¸ºæˆæƒç ï¼Œ<strong>è€Œä¸æ˜¯é‚®ç®±çš„ç™»é™†å¯†ç </strong>ï¼Œè¯·è‡ªè¡ŒæŸ¥è¯¢å¯¹åº”é‚®ä»¶æœåŠ¡å•†çš„è·å–æ–¹å¼</td></tr><tr><td>SENDER_NAME</td><td>[å¯é€‰] å‘ä»¶äºº</td></tr><tr><td>ADMIN_URL</td><td>[å»ºè®®] Webä¸»æœºäºŒçº§åŸŸåï¼Œç”¨äºè‡ªåŠ¨å”¤é†’</td></tr><tr><td>TO_EMAIL</td><td>[å¯é€‰] æŒ‡å®šç«™é•¿æ”¶ä¿¡é‚®ç®±ï¼Œé»˜è®¤å€¼ä¸º<code>SITE_USER</code>ã€‚ç”¨äº SMTP å‘ä»¶äººä¸ç«™é•¿æ”¶ä»¶äººä¸ä¸€è‡´çš„æƒ…å†µä¸‹ä½¿ç”¨ã€‚</td></tr><tr><td>TEMPLATE_NAME</td><td>[å¯é€‰] é€šçŸ¥é‚®ä»¶çš„æ¨¡æ¿ï¼ˆdefaultå’Œrainbowï¼‰ï¼Œå‚è€ƒé«˜çº§åŠŸèƒ½</td></tr></tbody></table></div></div><p><img src="https://s1.ax1x.com/2020/08/06/acq8JS.png" alt="acq8JS.png" class="Ï†bs"></p><blockquote><p>å…³äºå‡ ç‚¹æ³¨æ„ï¼šSMTPç™»å½•å¯†ç ï¼ˆä¾‹å¦‚qqï¼‰ï¼Œä¸æ˜¯qqå¯†ç è€Œæ˜¯æˆæƒç ã€‚è‡ªå®šä¹‰ç¯å¢ƒå˜é‡ä¿å­˜å®Œåªæœ‰é‡å¯éƒ¨ç½²æ‰æœ‰ç”¨ã€‚</p></blockquote><p><img src="https://s1.ax1x.com/2020/08/06/acqlIf.png" alt="acqlIf.png" class="Ï†bs"></p><h2 id="åå°è¯„è®ºç®¡ç†">åå°è¯„è®ºç®¡ç†<a title="#åå°è¯„è®ºç®¡ç†" href="#åå°è¯„è®ºç®¡ç†"></a></h2><ul><li>åœ¨<strong>è®¾ç½®-åŸŸåç»‘å®š-äº‘å¼•æ“ã€ClientEngine åŸŸå</strong>ä¸­ï¼Œæ·»åŠ ä¸€ä¸ªäºŒçº§åŸŸåã€‚</li></ul><p><img src="https://s1.ax1x.com/2020/08/06/acqZxH.png" alt="acqZxH.png" class="Ï†bs"></p><ul><li>åœ¨<strong>å‚¨å­˜-ç»“æ„åŒ–æ•°æ®-_User</strong>ä¸­ï¼Œç‚¹å‡»<strong>æ·»åŠ è¡Œ</strong>ã€‚åªéœ€è¦å¡«å†™ <code>email</code>ã€<code>password</code>ã€<code>username</code>ï¼Œè¿™ä¸‰ä¸ªå­—æ®µå³å¯, ä½¿ç”¨ <code>email</code> ä½œä¸ºè´¦å·ç™»é™†å³å¯ã€‚</li></ul><p><img src="https://s1.ax1x.com/2020/08/06/acqmMd.png" alt="acqmMd.png" class="Ï†bs"></p><ul><li>åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ä½ ç»‘å®šçš„webåŸŸåï¼Œæ—¢å¯ä»¥è®¿é—®åˆ°åå°è¯„è®ºã€‚</li></ul><p><img src="https://s1.ax1x.com/2020/08/06/acjDB9.png" alt="acjDB9.png" class="Ï†bs"></p><h4 id="leancloud-è‡ªå¸¦å®šæ—¶å™¨[æ¨è]">LeanCloud è‡ªå¸¦å®šæ—¶å™¨[æ¨è]<a title="#leancloud-è‡ªå¸¦å®šæ—¶å™¨[æ¨è]" href="#leancloud-è‡ªå¸¦å®šæ—¶å™¨[æ¨è]"></a></h4><ul><li>é¦–å…ˆéœ€è¦æ·»åŠ ç¯å¢ƒå˜é‡ï¼Œ<code>ADMIN_URL</code>ï¼š<code>Web ä¸»æœºåŸŸå</code>ï¼Œå¦‚å›¾æ‰€ç¤ºï¼ˆæ·»åŠ åé‡å¯å®¹å™¨æ‰ä¼šç”Ÿæ•ˆï¼‰ï¼š</li></ul><p><img src="https://s1.ax1x.com/2020/08/06/acvXPx.png" alt="acvXPx.png" class="Ï†bs"></p><ul><li>ç„¶ååœ¨<strong>äº‘å¼•æ“-å®šæ—¶ä»»åŠ¡-åˆ›å»ºå®šæ—¶ä»»åŠ¡</strong>ä¸­ï¼Œæ–°å¢å®šæ—¶å™¨ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</li></ul><p><img src="https://s1.ax1x.com/2020/08/06/acquqI.png" alt="acquqI.png" class="Ï†bs"></p><blockquote><p>æ³¨æ„, LeanCloud æœ€è¿‘æ›´æ–°äº†å®šæ—¶å™¨æ ¡éªŒè§„åˆ™, éœ€è¦å°† Cron è¡¨è¾¾å¼å†™ä¸º: <code>0 */20 7-23 * * ?</code></p></blockquote><h2 id="æµ‹è¯•">æµ‹è¯•<a title="#æµ‹è¯•" href="#æµ‹è¯•"></a></h2><p>ç”¨å…¶ä»–é‚®ç®±åœ¨è‡ªå·±çš„åšå®¢ç•™è¨€æ¿å‡ºç•™è¨€ï¼Œè¿›å…¥é‚®ç®±çœ‹æ˜¯å¦æ”¶åˆ°æé†’ã€‚</p><p><img src="https://s1.ax1x.com/2020/08/06/aczZkR.png" alt="aczZkR.png" class="Ï†bs"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;åšå®¢æ­å»ºäº†å¾ˆä¹…äº†ï¼Œå‰ä¸¤å¤©é—²æ¥æ— äº‹å»é€›åˆ«äººåšå®¢æ—¶å‘ç°äº†åˆ«äººç»™æˆ‘å‘è¯„è®ºæ˜¯å¯ä»¥ç”¨ç¬¬ä¸‰æ–¹é‚®ä»¶æé†’ã€‚çªç„¶æƒ³èµ·æ¥è‡ªå·±çš„åšå®¢è¯„è®ºå´æ²¡æœ‰è¿™ä¸ªåŠŸèƒ½ï¼Œæœ€æ—©ä¹‹å‰ç”¨è¿‡æ¥å¿…åŠ›å¾ˆå¯æƒœåŠ è½½&lt;strong&gt;é¾Ÿé€Ÿ&lt;/strong&gt;&lt;s&gt;æœåŠ¡å™¨ä¸åœ¨å›½å†…&lt;/s&gt;ï¼Œå¦‚ä»Šä½¿ç”¨çš„æ˜¯æ— åç«¯çš„V</summary>
      
    
    
    
    <category term="åšå®¢" scheme="https://pinkpeachabc.cn/categories/%E5%8D%9A%E5%AE%A2/"/>
    
    
    <category term="hexo" scheme="https://pinkpeachabc.cn/tags/hexo/"/>
    
    <category term="Valineè¯„è®º" scheme="https://pinkpeachabc.cn/tags/Valine%E8%AF%84%E8%AE%BA/"/>
    
  </entry>
  
  <entry>
    <title>å…¥æ‰‹Y7000 &amp; é»‘è‹¹æœä½“éªŒ</title>
    <link href="https://pinkpeachabc.cn/%E9%BB%91%E8%8B%B9%E6%9E%9C%E4%BD%93%E9%AA%8C.html"/>
    <id>https://pinkpeachabc.cn/%E9%BB%91%E8%8B%B9%E6%9E%9C%E4%BD%93%E9%AA%8C.html</id>
    <published>2020-07-24T04:02:18.000Z</published>
    <updated>2021-04-20T11:17:55.344Z</updated>
    
    <content type="html"><![CDATA[<p>heyï¼Œæˆ‘å›æ¥æ›´åšå•¦ğŸ˜ã€‚æœ€è¿‘åœ¨æ‰‹å¤´ä¸€å¼€å§‹å¿™ç–«æƒ…å¼€å­¦çš„äº‹æƒ…ä¸€æ—¶æŠ½ä¸å¼€æ—¶é—´ï¼Œ<s>å·æ‡’</s>ä¹Ÿæ˜¯åœ¨ä¹åœ¨å…¶ä¸­çš„å“ˆå“ˆã€‚æœ€è¿‘åˆšåˆšç¨³å®šä¸‹æ¥å‡†å¤‡æ˜å¹´çš„è€ƒè¯•äº†ï¼Œä»Šå¤©é—²ä¸‹æ¥ååœ¨ç”µè„‘è¾¹æ—¶çªç„¶æƒ³åˆ°æˆ‘è¿˜æœ‰ä¸ªè¢«é—å¿˜çš„Macç³»ç»Ÿï¼Œäºæ˜¯å°±æœ‰äº†ä»Šå¤©çš„æ›´æ–°<s>ç–¯ç‹‚çŒæ°´</s>ã€‚</p><a id="more"></a><h2 id="ç¬¬ä¸€å°ç¬”è®°æœ¬ç”µè„‘">ç¬¬ä¸€å°ç¬”è®°æœ¬ç”µè„‘<a title="#ç¬¬ä¸€å°ç¬”è®°æœ¬ç”µè„‘" href="#ç¬¬ä¸€å°ç¬”è®°æœ¬ç”µè„‘"></a></h2><p>ä½œä¸ºä¸€ä¸ªè®¡ç®—æœºä¸“ä¸šï¼Œè€Œä¸”æœ¬èº«å¯¹ç¡¬ä»¶æœ‰æ‰€äº†è§£çš„ä¸€ä¸ªå¤§å­¦ç”Ÿï¼Œå¯¹ç”µå­è®¾å¤‡çš„é€‰æ‹©å¾€å¾€æ˜¯æœ€çº ç»“çš„ã€‚</p><p>å¦‚ä»Šçš„ç¬”ç”µå¸‚åœºä¸Šï¼Œè™½ç„¶è¯´æœºå‹æ˜¯éåœ°å¼€èŠ±ï¼Œä½†çœŸè¦è¯´å€¼å¾—ä¹°çš„å´åªæœ‰å¯¥å¯¥å‡ ç§æœºå‹ã€‚åšä¸ºä¸€ä¸ªå­¦ç”Ÿå¯èƒ½çœ‹é‡çš„å¯èƒ½å°±æ˜¯ã€Œæ€§ä»·æ¯”ã€äº†ï¼Œæˆ‘ä¹Ÿä¸ä¾‹å¤–å¯¹äºå­¦ç”Ÿå…šæ¥è¯´ä¸€ä¸ªä¸é”™çš„ä»·æ ¼âœšä¸€ä¸ªä¸é”™é…ç½®å¯è°“æ˜¯æœ€å¥½çš„é€‰æ‹©ã€‚è¿™æ—¶å€™ä½ å¯èƒ½ä¼šå¤§å–Š<s>ç¥èˆŸ</s>å¤§æ³•å¥½ï¼Œå¯è¿™ä½ å°±é”™äº†ã€‚</p><p>ç›¸æ¯”äºæ¸¸æˆæœ¬æˆ‘æ›´å–œæ¬¢å•†åŠ¡æœ¬ï¼Œå½“ç„¶å¹¶ä¸æ˜¯æˆ‘çš„é€‰æ‹©è¦Passæ‰æ¸¸æˆæœ¬ï¼Œæ¯•ç«Ÿæ¸¸æˆå°±ç›®å‰æ¥è¯´ä¹Ÿæ˜¯ç”Ÿæ´»çš„ä¸€éƒ¨åˆ†<s>csgo</s>ã€‚è¨€å½’æ­£ä¼ ï¼Œåœ¨å•†åŠ¡æœ¬ä¸­èƒ½å¤Ÿæˆ‘æƒ³çš„è¿˜æ˜¯ä¸‰å¤§æ ‡æ†XPSã€è‹è²ã€MBPã€‚æˆ‘ä¸€åº¦ç–¯ç‹‚è¿·æ‹XPSæˆ‘è§‰å¾—è¿™æ˜¯Windowsç«¯å”¯ä¸€å’Œè‹¹æœæŠ—è¡¡çš„ç¬”ç”µäº†ã€‚</p><p>å½“ç„¶ä½ ä¹Ÿè®¸æˆ‘ä¼šé€‰æ‹©XPSï¼Œä½†æœ€ç»ˆç»¼åˆè€ƒè™‘ä¸ªäººéœ€æ±‚ï¼Œç»è¿‡å¯¹æ¯”ï¼Œæˆ‘é€‰æ‹©äº†y7000ã€‚</p><h2 id="ä¸ºä»€ä¹ˆä¼šæ˜¯y7000ï¼Ÿ">ä¸ºä»€ä¹ˆä¼šæ˜¯Y7000ï¼Ÿ<a title="#ä¸ºä»€ä¹ˆä¼šæ˜¯y7000ï¼Ÿ" href="#ä¸ºä»€ä¹ˆä¼šæ˜¯y7000ï¼Ÿ"></a></h2><p>æˆ‘æœ€ç»ˆè¿˜æ˜¯è´¥ç»™äº†ã€Œè´µã€ï¼ŒåŒæ ·çš„æˆ‘ä¹Ÿæƒ³è¦æ—¥å¸¸çš„æ¸¸æˆæ€§èƒ½ã€‚äºæ˜¯å¦ä¸€æ¬¾ç¬”ç”µå°±è¿›å…¥çš„æˆ‘çš„çœ¼å¸˜â€”â€”y7000ã€‚ç”±äºé¢„ç®—æœ‰é™æˆ‘è´­å…¥çš„ä¸ºé«˜è‰²åŸŸi5+GTX1650çš„ç‰ˆæœ¬ï¼Œå…¶å®å¯¹äºæ¸¸æˆç©å®¶æˆ‘è¿˜æœ‰ä¸ªèº«ä»½è‹¹æœç²‰ï¼Œæˆ‘ä¸€å¿ƒæƒ³ä½“éªŒMacosï¼Œä½†ä»·æ ¼ç›®å‰æ˜¯è¶Šä¸è¿‡çš„é¸¿æ²Ÿã€‚æˆ‘è½¬å¿µä¸€æƒ³æˆ‘ä¸ºä½•ä¸é€‰ä¸€æ¬¾å¯¹é»‘è‹¹æœå‹å¥½çš„æ¸¸æˆæœ¬ï¼Œè¿™ä¹Ÿå°±æ˜¯æˆ‘åœ¨è¿™ä¸ªä»·ä½å±å¹•ã€æ¨¡å…·ã€æ€§èƒ½ã€æ•£çƒ­ç­‰é¢†åŸŸä¸­é€‰æ‹©çš„æœ€ä½³ã€‚</p><h2 id="å®‰è£…é»‘è‹¹æœ">å®‰è£…é»‘è‹¹æœ<a title="#å®‰è£…é»‘è‹¹æœ" href="#å®‰è£…é»‘è‹¹æœ"></a></h2><p>è¯ä¸å¤šè¯´ï¼Œæ–°æœºåˆ°æ‰‹ï¼Œå…ˆè£…ç³»ç»Ÿã€‚ç›®å‰ä¸ºWin10å’ŒMacOS CatalinaåŒç³»ç»Ÿã€‚å°±ç›®å‰çš„çŠ¶å†µæ¥çœ‹åŸºæœ¬è¾¾åˆ°äº†99%çš„å®Œç¾ã€‚æˆ‘ä½¿ç”¨çš„EFIæ˜¯<a href="https://github.com/xiaoMGitHub/LEGION_Y7000Series_Hackintosh" target="_blank">xiaoMGitHub</a>çš„ç‰ˆæœ¬ï¼Œç›®å‰é™¤äº†å£°å¡å¶å°”æ‰å…¶ä»–æ²¡æœ‰ä»»ä½•é—®é¢˜ã€‚ç›®å‰æ”¯æŒçš„åŠŸèƒ½ï¼ˆéœ€è¦æ›´å¤šè¯·å‰å¾€Githubï¼‰ï¼š</p><ul><li>UEFIé€šè¿‡ Clover/OC å¯åŠ¨</li><li>æ”¯æŒä»»æ„ç‰ˆæœ¬ç³»ç»ŸOTAå‡çº§åˆ°æœ€æ–°ç³»ç»Ÿ</li><li>å†…ç½®é”®ç›˜ä»¥åŠæ•°å­—é”®ç›˜</li><li>åŸç”ŸUSB3.0/USB2.0</li><li>AppleHDAåŸç”ŸéŸ³é¢‘ï¼ŒåŒ…æ‹¬è€³æœº</li><li>å†…ç½®æ‘„åƒå¤´</li><li>åŸç”Ÿç”µæºç®¡ç†</li><li>ç”µæ± çŠ¶æ€</li><li>èƒŒå…‰æ§åˆ¶</li><li>èƒŒå…‰é”®ç›˜</li><li>æ ¸æ˜¾é©±åŠ¨ï¼ˆç‹¬æ˜¾å·²ç» hotpatch å±è”½ï¼‰</li><li>æœ‰çº¿ä»¥å¤ªç½‘å¡</li><li>Mac App Storeæ­£å¸¸è¿è¡Œ</li><li>CPUå˜é¢‘</li><li>ç¡çœ å”¤é†’ï¼ˆé¼ æ ‡ï¼Œé”®ç›˜ã€ç”µæºé”®å”¤é†’å‡æ­£å¸¸ï¼‰</li><li>æ— çº¿ç½‘ç»œï¼ˆæ›´æ¢ç™½æœå¡BCM943602csï¼‰</li><li>è“ç‰™ï¼ˆæ›´æ¢ç™½æœå¡BCM943602csï¼‰</li><li>è§¦æ§æ¿ (éƒ¨åˆ†ä½é…æœºå‹ä¸æ”¯æŒå¤šæŒ‡æ“ä½œ)</li><li>éšèˆªï¼ˆæœ‰çº¿/æ— çº¿ï¼‰</li><li>4K å±å¹•ï¼ˆ<a href="https://github.com/xiaoMGitHub/LEGION_Y7000Series_Hackintosh/tree/master/4K_Display_Config" target="_blank">æ•™ç¨‹</a>ï¼‰</li><li>iMessage/FaceTime</li></ul><p><img src="https://s1.ax1x.com/2020/07/24/UjJrz8.jpg" alt="UjJrz8.jpg" class="Ï†bs"></p><h2 id="é»‘è‹¹æœä½“éªŒ">é»‘è‹¹æœä½“éªŒ<a title="#é»‘è‹¹æœä½“éªŒ" href="#é»‘è‹¹æœä½“éªŒ"></a></h2><p>ä»19å¹´è´­å…¥ä»¥æ¥ï¼Œæˆ‘ä¹Ÿæ¸æ¸ä½¿ç”¨äº†å°†è¿‘ä¸€å¹´çš„é»‘è‹¹æœã€‚ç»™æˆ‘æ„Ÿè§‰æœ€å¤§çš„æ˜¯ç”Ÿæ€çš„ä¼˜ç§€å’Œå¯¹ç¨‹åºå‘˜çš„å‹å¥½ï¼Œä¼˜åŠ£æ€»æ˜¯å¹¶å­˜çš„ï¼ŒMacå¯¹åŸç”Ÿ4kçš„æ”¯æŒæ˜¯éå¸¸å¥½çš„ï¼Œä½†æ™®é€šç¬”ç”µ15.6å¯¸å±å¹•çš„æ•ˆæœå°±ä¼šç•¥æ˜¾æ¨¡ç³Šã€‚æœªæ›´æ¢ç™½æœç½‘å¡å°†ä¸ä¼šé©±åŠ¨wifiå’Œè“ç‰™ï¼ˆIntelç½‘å¡éƒ¨åˆ†ç°åœ¨å·²ç»é©±åŠ¨ï¼‰ï¼Œåœ¨æœŸé—´ä¹Ÿæ˜¯é€›éäº†è¿œæ™¯å’ŒGithubåœ¨ç»å†äº†å‡ æ¬¡å¤±è´¥åï¼Œç»ˆäºè¾¾åˆ°äº†å‡ ä¹å®Œç¾çš„çŠ¶æ€ã€‚</p><h2 id="æˆ‘å¸è½½æ‰äº†é»‘è‹¹æœ">æˆ‘å¸è½½æ‰äº†é»‘è‹¹æœ<a title="#æˆ‘å¸è½½æ‰äº†é»‘è‹¹æœ" href="#æˆ‘å¸è½½æ‰äº†é»‘è‹¹æœ"></a></h2><p>2020å¹´7æœˆ24æ—¥ä¹Ÿå°±æ˜¯ä»Šå¤©ï¼Œæˆ‘åœ¨é•¿æ—¶é—´ä¸ä½¿ç”¨é»‘è‹¹æœæƒ…å†µä¸‹ï¼Œå†æ¬¡è¿›å…¥é»‘æœï¼Œæˆ‘å¿½ç„¶è§‰å¾—æˆ‘æ˜¯æ—¶å€™å’Œå®ƒè¯´å†è§äº†ã€‚æˆ‘æ˜¯ä½¿ç”¨cloveræ¥å¼•å¯¼çš„ï¼Œç”¨cloveræ¥å¼•å¯¼è¿›å…¥æ—¥å¸¸çš„Windowsç«¯å…¶å®ä¼šæœ‰æˆ–å¤šæˆ–å°‘çš„æ€§èƒ½æŸè€—ï¼Œé•¿æ—¶é—´ä¸ç”¨åˆæ¬¡è¿›å…¥å¼€æœºä¹Ÿæ˜¯å¾ˆç¼“æ…¢çš„ã€‚</p><p>ç¡¬ç›˜çš„è¯æˆ‘æ˜¯ç”¨è¥¿æ•°SN720ï¼Œæœ¬æƒ³åœ¨ä¹°ä¸ªç¡¬ç›˜è£…ä¸Šå„å¸å…¶èŒï¼Œä½†å‡ºäºç»æµè€ƒè™‘è¿˜æ˜¯æ²¡æœ‰è´­ä¹°<s>ç©·</s>ã€‚äºæ˜¯ä¸€ä¸ªç¡¬ç›˜å®‰è£…äº†åŒç³»ç»Ÿï¼Œä¸çŸ¥é“æ˜¯ä»€ä¹ˆåŸå› åœ¨æ¸©æ§éƒ½æ­£å¸¸çš„æƒ…å†µä¸‹ï¼Œåœ¨macç¯å¢ƒä¸‹ç¡¬ç›˜çš„æ¸©åº¦å’Œå™ªéŸ³éƒ½åœ¨Windowsä¹‹ä¸Šã€‚</p><p>ä¸ºä»€ä¹ˆæƒ³å¸è½½æ‰è¿™ä¸ªç³»ç»Ÿäº†å‘¢ï¼Œå…¶å®æœ€å¤§çš„åŸå› è¿˜æ˜¯æŠ˜è…¾ã€‚å³ä½¿ä»–çœ‹èµ·æ¥å¾ˆå®Œç¾ï¼Œä½†å®é™…ä¸Šæ€»ä¼šæœ‰ä¸€äº›å°é—®é¢˜ï¼Œå°±åƒç¡è§‰æ—¶å€™ä¸€ç›´æœ‰ä¸ªèšŠå­åœ¨è„‘è¢‹æ—è½¬ï¼Œè½¬çš„æ¬¡æ•°å¤šäº†ä¹Ÿå°±çƒ¦äº†ã€‚å½“ç„¶äº†åœ¨æ•²ä»£ç è¿™æ–¹é¢å’Œç¯å¢ƒé…ç½®è¿™ç‚¹æˆ‘è§‰å¾—macè¿˜æ˜¯æœ‰ç»å¯¹ä¼˜åŠ¿çš„ï¼Œæœ€ä¸»è¦çš„æ˜¯ç¾è§‚å’Œç®€æ´ï¼Œä½ å¯ä»¥å…¨å¿ƒå…¨æ„çš„å¹²ä½ æƒ³åšçš„äº‹æƒ…åœ¨è¿™ä¸ªç³»ç»Ÿä¸‹ã€‚</p><h2 id="è£…é»‘è‹¹æœå»ºè®®">è£…é»‘è‹¹æœå»ºè®®<a title="#è£…é»‘è‹¹æœå»ºè®®" href="#è£…é»‘è‹¹æœå»ºè®®"></a></h2><p>è¯´ä½ å¥½å’Œå†è§ä¸è¿‡ä¸€å¹´ä¹‹ä¹…ï¼Œå³ä½¿ä¸åœ¨ä½¿ç”¨å®ƒï¼Œæˆ‘è¿˜æ˜¯å¯¹è¿™ä¸ªç³»ç»Ÿä¿æŒç€çƒ­æƒ…å’Œå–œçˆ±ï¼Œå¸Œæœ›ä»¥åè´­å…¥ä¸€å°MBPæ¥çœŸæ­£ä½“éªŒä¸€ä¸‹ç™½è‹¹æœç»™äººçš„æ„Ÿè§‰ã€‚åŒæ—¶å¯¹äºåˆæ¥ä¹åˆ°æƒ³å®‰è£…å¹¶ä½“éªŒé»‘è‹¹æœçš„æœ‹å‹ï¼Œæˆ‘å»ºè®®å¤§å®¶åœ¨æœ‰ç²¾åŠ›å’Œèƒ½åŠ›çš„åŸºç¡€ä¸Šéƒ½å»ºè®®å°è¯•ä¸€ä¸‹è¿™ç§æ„Ÿè§‰ï¼Œä¸ä»…ä»…æ˜¯macç³»ç»Ÿç»™ä½ å¸¦æ¥çš„å¿«ä¹ï¼Œè¿˜æœ‰å®‰è£…è¿‡ç¨‹ä¸­å¸¦æ¥é—®é¢˜å’ŒæƒŠå–œã€‚å¦‚æœä½ æ­£åœ¨è€ƒè™‘ç»™ä½ çš„æœºå™¨è£…é»‘è‹¹æœï¼Œä¸å¦¨å»è¿œæ™¯è®ºå›å’ŒGithubæ‰¾æ‰¾æ˜¯å¦æœ‰å’Œä½ é…ç½®ç›¸ä¼¼çš„EFIï¼Œæ„¿ä½ æœ€åä¹Ÿèƒ½åƒä¸Šè‹¹æœï¼</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;heyï¼Œæˆ‘å›æ¥æ›´åšå•¦ğŸ˜ã€‚æœ€è¿‘åœ¨æ‰‹å¤´ä¸€å¼€å§‹å¿™ç–«æƒ…å¼€å­¦çš„äº‹æƒ…ä¸€æ—¶æŠ½ä¸å¼€æ—¶é—´ï¼Œ&lt;s&gt;å·æ‡’&lt;/s&gt;ä¹Ÿæ˜¯åœ¨ä¹åœ¨å…¶ä¸­çš„å“ˆå“ˆã€‚æœ€è¿‘åˆšåˆšç¨³å®šä¸‹æ¥å‡†å¤‡æ˜å¹´çš„è€ƒè¯•äº†ï¼Œä»Šå¤©é—²ä¸‹æ¥ååœ¨ç”µè„‘è¾¹æ—¶çªç„¶æƒ³åˆ°æˆ‘è¿˜æœ‰ä¸ªè¢«é—å¿˜çš„Macç³»ç»Ÿï¼Œäºæ˜¯å°±æœ‰äº†ä»Šå¤©çš„æ›´æ–°&lt;s&gt;ç–¯ç‹‚çŒæ°´&lt;/s&gt;ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="æ‚è®°" scheme="https://pinkpeachabc.cn/categories/%E6%9D%82%E8%AE%B0/"/>
    
    
    <category term="é»‘è‹¹æœ" scheme="https://pinkpeachabc.cn/tags/%E9%BB%91%E8%8B%B9%E6%9E%9C/"/>
    
  </entry>
  
  <entry>
    <title>Springæ¡†æ¶è¯¦è§£</title>
    <link href="https://pinkpeachabc.cn/IOC%20%E5%92%8C%20DI%20%E7%9A%84%E6%A6%82%E8%BF%B0.html"/>
    <id>https://pinkpeachabc.cn/IOC%20%E5%92%8C%20DI%20%E7%9A%84%E6%A6%82%E8%BF%B0.html</id>
    <published>2020-04-21T03:02:12.000Z</published>
    <updated>2021-04-20T11:20:25.914Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>è·ç¦»ä¸Šä¸€æ¬¡æ›´æ–°å·²ç»æœ‰ä¸€ä¸ªæœˆçš„æ—¶é—´äº†ï¼ŒğŸ˜€å…¶å®æœ¬æ”¹æŠŠ Jdbc çš„ç¬”è®°è¡¥å®Œï¼Œä½†æ˜¯è¿™äº›å¤©äº‹æƒ…å¤ªå¤š<s>å¿™ç€æ‰“csgo</s>å¯¼è‡´äº†åšå®¢è¿™æ®µæ—¶é—´æ²¡æœ‰æ›´æ–°ã€‚ä»Šå¤©çªç„¶åœ¨ç½‘ä¸Šæ‰¾åˆ°äº†ä¸€ç¯‡å…³äºSpringæ¶æ„è®ºè¿°å¾ˆå¥½çš„æ–‡ç« ï¼Œæ­£å¥½ä¹Ÿæ˜¯å¾—æ›´æ–°ä¸€ä¸‹ã€‚</p><p>åŸæ–‡åœ°å€ï¼š<a href="https://cruii.io/archives/2019111907160329543#top" target="_blank">Springæ¡†æ¶è¯¦è§£</a></p></blockquote><h1 id="ioc-å’Œ-di-çš„æ¦‚è¿°">IOC å’Œ DI çš„æ¦‚è¿°<a title="#ioc-å’Œ-di-çš„æ¦‚è¿°" href="#ioc-å’Œ-di-çš„æ¦‚è¿°"></a></h1><h2 id="ioc(inversion-of-controll)">IOC(Inversion of Controll)<a title="#ioc(inversion-of-controll)" href="#ioc(inversion-of-controll)"></a></h2><p><strong>æ€æƒ³æ˜¯åè½¬èµ„æºè·å–çš„æ–¹å‘</strong>ï¼Œä¼ ç»Ÿçš„èµ„æºæŸ¥æ‰¾æ–¹å¼è¦æ±‚ç»„ä»¶å‘å®¹å™¨å‘èµ·è¯·æ±‚æŸ¥æ‰¾èµ„æºã€‚ä½œä¸ºå›åº”ï¼Œå®¹å™¨é€‚æ—¶çš„è¿”å›èµ„æºã€‚è€Œåº”ç”¨äº†IOCä¹‹åï¼Œåˆ™æ˜¯<strong>å®¹å™¨ä¸»åŠ¨çš„å°†èµ„æºæ¨é€ç»™å®ƒæ‰€ç®¡ç†çš„ç»„ä»¶ï¼Œç»„ä»¶æ‰€è¦åšçš„ä»…æ˜¯é€‰æ‹©ä¸€ç§åˆé€‚çš„æ–¹å¼æ¥æ¥æ”¶èµ„æº</strong></p><h2 id="di(dependency-injection)">DI(Dependency Injection)<a title="#di(dependency-injection)" href="#di(dependency-injection)"></a></h2><p>æ˜¯IOCçš„å¦ä¸€ç§è¡¨è¿°æ–¹å¼ï¼Œå³<strong>ç»„ä»¶ä»¥ä¸€äº›é¢„å…ˆå®šä¹‰å¥½çš„æ–¹å¼(å¦‚ï¼šgetteræ–¹æ³•)æ¥æ¥æ”¶æ¥è‡ªå®¹å™¨çš„èµ„æºæ³¨å…¥</strong></p><h1 id="springé…ç½®">Springé…ç½®<a title="#springé…ç½®" href="#springé…ç½®"></a></h1><p>åœ¨SpringIOCå®¹å™¨è¯»å–beané…ç½®åˆ›å»ºbeanå®ä¾‹ä¹‹å‰ï¼Œå¿…é¡»å¯¹å®ƒè¿›è¡Œå®ä¾‹åŒ–ã€‚åªæœ‰åœ¨å®¹å™¨å®ä¾‹åŒ–åï¼Œæ‰å¯ä»¥ä»IOCå®¹å™¨é‡Œè·å–beanå®ä¾‹å¹¶ä½¿ç”¨</p><p>Springæä¾›äº†ä¸¤ç§ç±»å‹çš„IOCå®¹å™¨å®ç°</p><ul><li><strong>BeanFactoryï¼šIOCå®¹å™¨çš„åŸºæœ¬å®ç°ï¼Œåœ¨è°ƒç”¨getBean()æ–¹æ³•æ—¶æ‰ä¼šå®ä¾‹åŒ–å¯¹è±¡</strong></li><li><strong>ApplicationContextï¼šæä¾›äº†æ›´å¤šçš„é«˜çº§ç‰¹æ€§ï¼Œåœ¨åŠ è½½é…ç½®æ–‡ä»¶åå°±ä¼šå®ä¾‹åŒ–å¯¹è±¡ã€‚æ˜¯BeanFactoryçš„å­æ¥å£</strong></li></ul><p><code>BeanFactory</code>æ˜¯Springæ¡†æ¶çš„åŸºç¡€è®¾æ–½ï¼Œé¢å‘Springæœ¬èº«</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ApplicationContext&#96;é¢å‘ä½¿ç”¨Springæ¡†æ¶çš„å¼€å‘è€…ï¼Œå‡ ä¹æ‰€æœ‰çš„åº”ç”¨åœºåˆéƒ½ç›´æ¥ä½¿ç”¨&#96;ApplicationContext&#96;è€Œéåº•å±‚çš„&#96;BeanFactory</span><br></pre></td></tr></table></figure><p><strong>æ— è®ºä½¿ç”¨ä½•ç§æ–¹å¼ï¼Œé…ç½®æ–‡ä»¶æ—¶éƒ½æ˜¯ç›¸åŒçš„</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- é…ç½®bean --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- class: beançš„å…¨ç±»åï¼Œé€šè¿‡åå°„çš„æ–¹å¼åœ¨IOCå®¹å™¨ä¸­åˆ›å»ºbeanï¼Œæ‰€ä»¥è¦æ±‚beanä¸­å¿…é¡»æœ‰æ— å‚æ„é€ å™¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;people&quot;</span> <span class="attr">class</span>=<span class="string">&quot;learningspring.ioc.examples.People&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Chen&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">public class People &#123;</span><br><span class="line">    private String name;</span><br><span class="line"></span><br><span class="line">    public People() &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getName() &#123;</span><br><span class="line">        return name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setName(String name) &#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public String toString() &#123;</span><br><span class="line">        return &quot;People&#123;&quot; +</span><br><span class="line">                &quot;name=&#x27;&quot; + name + &#x27;\&#x27;&#x27; +</span><br><span class="line">                &#x27;&#125;&#x27;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">@Test</span><br><span class="line">public void test()&#123;</span><br><span class="line">    // åˆ›å»ºIOCå®¹å™¨</span><br><span class="line">    ApplicationContext ctx = new FileSystemXmlApplicationContext(&quot;F:\\Projects\\IdeaProjects\\LearningSpring\\src\\main\\java\\learningspring\\ioc\\examples\\applicationContext.xml&quot;);</span><br><span class="line"></span><br><span class="line">    // ä»IOCå®¹å™¨ä¸­è·å–beanå®ä¾‹</span><br><span class="line">    People people = (People) ctx.getBean(&quot;people&quot;);</span><br><span class="line"></span><br><span class="line">    System.out.println(people);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="applicationcontext">ApplicationContext<a title="#applicationcontext" href="#applicationcontext"></a></h2><p><code>ApplicationContext</code>æœ‰ä¸¤ä¸ªå®ç°ç±»ï¼š</p><ul><li><code>ClassPathXmlApplicationContext</code>ï¼šåŠ è½½ç±»è·¯å¾„é‡Œçš„é…ç½®æ–‡ä»¶</li><li><code>FileSystemXmlApplicationContext</code>ï¼šåŠ è½½æ–‡ä»¶ç³»ç»Ÿé‡Œçš„é…ç½®æ–‡ä»¶</li></ul><h2 id="beançš„ç›¸å…³é…ç½®">Beançš„ç›¸å…³é…ç½®<a title="#beançš„ç›¸å…³é…ç½®" href="#beançš„ç›¸å…³é…ç½®"></a></h2><h3 id="beanæ ‡ç­¾çš„idå’Œnameçš„é…ç½®">beanæ ‡ç­¾çš„idå’Œnameçš„é…ç½®<a title="#beanæ ‡ç­¾çš„idå’Œnameçš„é…ç½®" href="#beanæ ‡ç­¾çš„idå’Œnameçš„é…ç½®"></a></h3><ul><li><code>id</code>ï¼šä½¿ç”¨äº†çº¦æŸä¸­çš„å”¯ä¸€çº¦æŸã€‚ä¸èƒ½æœ‰ç‰¹æ®Šå­—ç¬¦</li><li><code>name</code>ï¼šæ²¡æœ‰ä½¿ç”¨çº¦æŸä¸­çš„å”¯ä¸€çº¦æŸï¼ˆç†è®ºä¸Šå¯ä»¥é‡å¤ï¼Œä½†æ˜¯å®é™…å¼€å‘ä¸­ä¸èƒ½å‡ºç°ï¼‰ã€‚å¯ä»¥æœ‰ç‰¹æ®Šå­—ç¬¦</li></ul><h3 id="beançš„ç”Ÿå‘½å‘¨æœŸçš„é…ç½®">beançš„ç”Ÿå‘½å‘¨æœŸçš„é…ç½®<a title="#beançš„ç”Ÿå‘½å‘¨æœŸçš„é…ç½®" href="#beançš„ç”Ÿå‘½å‘¨æœŸçš„é…ç½®"></a></h3><ul><li><code>init-method</code>ï¼šbeanè¢«åˆå§‹åŒ–çš„æ—¶å€™æ‰§è¡Œçš„æ–¹æ³•</li><li><code>destroy-method</code>ï¼šbeanè¢«é”€æ¯çš„æ—¶å€™æ‰§è¡Œçš„æ–¹æ³•ï¼Œå‰ææ˜¯beanæ˜¯å•ä¾‹çš„ï¼Œå·¥å‚å…³é—­</li></ul><h3 id="beançš„ä½œç”¨èŒƒå›´çš„é…ç½®">beançš„ä½œç”¨èŒƒå›´çš„é…ç½®<a title="#beançš„ä½œç”¨èŒƒå›´çš„é…ç½®" href="#beançš„ä½œç”¨èŒƒå›´çš„é…ç½®"></a></h3><ul><li>scope: beançš„ä½œç”¨èŒƒå›´</li><li><strong>singletonï¼šå•ä¾‹æ¨¡å¼ï¼Œé»˜è®¤çš„ä½œç”¨åŸŸã€‚</strong></li><li><strong>prototypeï¼šå¤šä¾‹æ¨¡å¼ã€‚</strong></li><li>requestï¼šåº”ç”¨åœ¨Webé¡¹ç›®ä¸­ï¼ŒSpringåˆ›å»ºè¿™ä¸ªç±»åï¼Œå°†è¿™ä¸ªç±»å­˜å…¥åˆ°requestèŒƒå›´ä¸­ã€‚</li><li>sessionï¼šåº”ç”¨åœ¨Webé¡¹ç›®ä¸­ï¼ŒSpringåˆ›å»ºè¿™ä¸ªç±»åï¼Œå°†è¿™ä¸ªç±»å­˜å…¥åˆ°sessionèŒƒå›´ä¸­ã€‚</li><li>globalsessionï¼šåº”ç”¨åœ¨Webé¡¹ç›®ä¸­ï¼Œå¿…é¡»åœ¨porletç¯å¢ƒä¸‹ä½¿ç”¨ã€‚ä½†æ˜¯å¦‚æœæ²¡æœ‰è¿™ç§ç¯å¢ƒï¼Œç›¸å½“äºsessionã€‚</li></ul><h2 id="springçš„beanç®¡ç†é…ç½®">Springçš„Beanç®¡ç†é…ç½®<a title="#springçš„beanç®¡ç†é…ç½®" href="#springçš„beanç®¡ç†é…ç½®"></a></h2><h3 id="springçš„beançš„å®ä¾‹åŒ–æ–¹å¼">Springçš„Beançš„å®ä¾‹åŒ–æ–¹å¼<a title="#springçš„beançš„å®ä¾‹åŒ–æ–¹å¼" href="#springçš„beançš„å®ä¾‹åŒ–æ–¹å¼"></a></h3><h4 id="æ— å‚æ„é€ æ–¹å¼ï¼ˆé»˜è®¤ï¼‰">æ— å‚æ„é€ æ–¹å¼ï¼ˆé»˜è®¤ï¼‰<a title="#æ— å‚æ„é€ æ–¹å¼ï¼ˆé»˜è®¤ï¼‰" href="#æ— å‚æ„é€ æ–¹å¼ï¼ˆé»˜è®¤ï¼‰"></a></h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * //TODO</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Chen Rui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Dog</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer length;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getLength</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> length;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setLength</span><span class="params">(Integer length)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.length = length;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Dog&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, length=&quot;</span> + length +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="line">&lt;beans xmlns=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="line">       xmlns:xsi=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="line">       xsi:schemaLocation=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- Spring Beançš„å®ä¾‹åŒ–æ–¹å¼--&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- æ— å‚æ„é€ çš„æ–¹å¼ --&gt;</span><br><span class="line">    &lt;bean id=<span class="string">&quot;dog&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;learningspring.ioc.examples.demo3.Dog&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure><h4 id="é™æ€å·¥å‚å®ä¾‹åŒ–æ–¹å¼">é™æ€å·¥å‚å®ä¾‹åŒ–æ–¹å¼<a title="#é™æ€å·¥å‚å®ä¾‹åŒ–æ–¹å¼" href="#é™æ€å·¥å‚å®ä¾‹åŒ–æ–¹å¼"></a></h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Chen Rui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Car</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Double price;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Car</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Car</span><span class="params">(String name, Double price)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.price = price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Car&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, price=&quot;</span> + price +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">package</span> learningspring.ioc.examples.demo3;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Chen Rui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CarFactory</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Car <span class="title">createCar</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Car();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="line">&lt;beans xmlns=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="line">       xmlns:xsi=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="line">       xsi:schemaLocation=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- Spring Beançš„å®ä¾‹åŒ–æ–¹å¼--&gt;</span><br><span class="line">    &lt;!-- é™æ€å·¥å‚çš„æ–¹å¼ --&gt;</span><br><span class="line">    &lt;bean id=<span class="string">&quot;car&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;learningspring.ioc.examples.demo3.CarFactory&quot;</span> factory-method=<span class="string">&quot;createCar&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure><h4 id="å®ä¾‹å·¥å‚å®ä¾‹åŒ–æ–¹å¼">å®ä¾‹å·¥å‚å®ä¾‹åŒ–æ–¹å¼<a title="#å®ä¾‹å·¥å‚å®ä¾‹åŒ–æ–¹å¼" href="#å®ä¾‹å·¥å‚å®ä¾‹åŒ–æ–¹å¼"></a></h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * //TODO</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Chen Rui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Dog</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer length;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getLength</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> length;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setLength</span><span class="params">(Integer length)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.length = length;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Dog&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, length=&quot;</span> + length +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * //TODO</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Chen Rui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DogFactory</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Dog <span class="title">createDog</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Dog();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="line">&lt;beans xmlns=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="line">       xmlns:xsi=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="line">       xsi:schemaLocation=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- Spring Beançš„å®ä¾‹åŒ–æ–¹å¼--&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- å®ä¾‹å·¥å‚çš„æ–¹å¼ --&gt;</span><br><span class="line">    &lt;bean id=<span class="string">&quot;dogFactory&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;learningspring.ioc.examples.demo3.DogFactory&quot;</span>/&gt;</span><br><span class="line">    &lt;bean id=<span class="string">&quot;dog2&quot;</span> factory-bean=<span class="string">&quot;dogFactory&quot;</span> factory-method=<span class="string">&quot;createDog&quot;</span>/&gt;</span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure><h3 id="springçš„å±æ€§æ³¨å…¥æ–¹å¼">Springçš„å±æ€§æ³¨å…¥æ–¹å¼<a title="#springçš„å±æ€§æ³¨å…¥æ–¹å¼" href="#springçš„å±æ€§æ³¨å…¥æ–¹å¼"></a></h3><h4 id="æ„é€ æ–¹æ³•æ–¹å¼çš„å±æ€§æ³¨å…¥">æ„é€ æ–¹æ³•æ–¹å¼çš„å±æ€§æ³¨å…¥<a title="#æ„é€ æ–¹æ³•æ–¹å¼çš„å±æ€§æ³¨å…¥" href="#æ„é€ æ–¹æ³•æ–¹å¼çš„å±æ€§æ³¨å…¥"></a></h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æ„é€ æ–¹æ³•æ–¹å¼çš„å±æ€§æ³¨å…¥--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;car&quot;</span> <span class="attr">class</span>=<span class="string">&quot;learningspring.ioc.examples.demo3.Car&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;BWM&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;price&quot;</span> <span class="attr">value</span>=<span class="string">&quot;800000&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="setæ–¹æ³•æ–¹å¼çš„å±æ€§æ³¨å…¥">Setæ–¹æ³•æ–¹å¼çš„å±æ€§æ³¨å…¥<a title="#setæ–¹æ³•æ–¹å¼çš„å±æ€§æ³¨å…¥" href="#setæ–¹æ³•æ–¹å¼çš„å±æ€§æ³¨å…¥"></a></h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--Setæ–¹æ³•æ–¹å¼çš„å±æ€§æ³¨å…¥--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dog&quot;</span> <span class="attr">class</span>=<span class="string">&quot;learningspring.ioc.examples.demo3.Dog&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Golden&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;length&quot;</span> <span class="attr">value</span>=<span class="string">&quot;100&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="ä¸ºbeanæ³¨å…¥å¼•ç”¨ç±»å‹çš„æ•°æ®">ä¸ºBeanæ³¨å…¥å¼•ç”¨ç±»å‹çš„æ•°æ®<a title="#ä¸ºbeanæ³¨å…¥å¼•ç”¨ç±»å‹çš„æ•°æ®" href="#ä¸ºbeanæ³¨å…¥å¼•ç”¨ç±»å‹çš„æ•°æ®"></a></h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æ„é€ æ–¹æ³•æ–¹å¼çš„å±æ€§æ³¨å…¥--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;car&quot;</span> <span class="attr">class</span>=<span class="string">&quot;learningspring.ioc.examples.demo3.Car&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;BWM&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;price&quot;</span> <span class="attr">value</span>=<span class="string">&quot;800000&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--Setæ–¹æ³•æ–¹å¼çš„å±æ€§æ³¨å…¥--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dog&quot;</span> <span class="attr">class</span>=<span class="string">&quot;learningspring.ioc.examples.demo3.Dog&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Golden&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;length&quot;</span> <span class="attr">value</span>=<span class="string">&quot;100&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--ä¸ºBeanæ³¨å…¥å¯¹è±¡å±æ€§--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æ„é€ æ–¹æ³•æ–¹å¼ä¸€æ ·å¯è¡Œ--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;employee&quot;</span> <span class="attr">class</span>=<span class="string">&quot;learningspring.ioc.examples.demo3.Employee&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Chen&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;car&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;car&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dog&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dog&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="påç§°ç©ºé—´çš„å±æ€§æ³¨å…¥ï¼ˆspring2.5ï¼‰">Påç§°ç©ºé—´çš„å±æ€§æ³¨å…¥ï¼ˆSpring2.5ï¼‰<a title="#påç§°ç©ºé—´çš„å±æ€§æ³¨å…¥ï¼ˆspring2.5ï¼‰" href="#påç§°ç©ºé—´çš„å±æ€§æ³¨å…¥ï¼ˆspring2.5ï¼‰"></a></h4><ul><li>é€šè¿‡å¼•å…¥påç§°ç©ºé—´å®Œæˆå±æ€§æ³¨å…¥<ul><li>æ™®é€šå±æ€§ï¼šp:å±æ€§å=â€œå€¼â€</li><li>å¯¹è±¡å±æ€§ï¼šp:å±æ€§å-ref=â€œå€¼â€</li></ul></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:p</span>=<span class="string">&quot;http://www.springframework.org/schema/p&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--Påç§°ç©ºé—´çš„å±æ€§æ³¨å…¥--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;cat&quot;</span> <span class="attr">class</span>=<span class="string">&quot;learningspring.ioc.examples.demo3.Cat&quot;</span> <span class="attr">p:name</span>=<span class="string">&quot;Orange&quot;</span> <span class="attr">p:length</span>=<span class="string">&quot;100&quot;</span>/&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!--ä¸ºBeanæ³¨å…¥å¯¹è±¡å±æ€§--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;employee&quot;</span> <span class="attr">class</span>=<span class="string">&quot;learningspring.ioc.examples.demo3.Employee&quot;</span> <span class="attr">p:cat-ref</span>=<span class="string">&quot;cat&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Chen&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;car&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;car&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dog&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dog&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="spelæ–¹å¼çš„å±æ€§æ³¨å…¥ï¼ˆspring3ï¼‰">SpELæ–¹å¼çš„å±æ€§æ³¨å…¥ï¼ˆSpring3ï¼‰<a title="#spelæ–¹å¼çš„å±æ€§æ³¨å…¥ï¼ˆspring3ï¼‰" href="#spelæ–¹å¼çš„å±æ€§æ³¨å…¥ï¼ˆspring3ï¼‰"></a></h4><p>SpELï¼šSpring Expresssion Language çš„è¡¨è¾¾å¼è¯­è¨€</p><p>è¯­æ³•ï¼š#{è¡¨è¾¾å¼}</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:p</span>=<span class="string">&quot;http://www.springframework.org/schema/p&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--SpELè¡¨è¾¾å¼æ³¨å…¥--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;cat2&quot;</span> <span class="attr">class</span>=<span class="string">&quot;learningspring.ioc.examples.demo4.Cat&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--å­—ç¬¦ä¸²è¦åŠ å•å¼•å·--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--ä¹Ÿå¯ä»¥é€šè¿‡#&#123;beanName.å±æ€§åæˆ–æ–¹æ³•å&#125;æ¥é€šè¿‡å…¶ä»–beançš„å±æ€§æˆ–è€…æ–¹æ³•æ¥æ³¨å…¥--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;#&#123;&#x27;Orange&#x27;&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;length&quot;</span> <span class="attr">value</span>=<span class="string">&quot;#&#123;101&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="æ³¨å…¥é›†åˆç±»å‹çš„æ•°æ®">æ³¨å…¥é›†åˆç±»å‹çš„æ•°æ®<a title="#æ³¨å…¥é›†åˆç±»å‹çš„æ•°æ®" href="#æ³¨å…¥é›†åˆç±»å‹çš„æ•°æ®"></a></h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ³¨å…¥é›†åˆç±»å‹çš„æ•°æ®æµ‹è¯•</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Chen Rui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CollectionBean</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String[] strs;</span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; list;</span><br><span class="line">    <span class="keyword">private</span> Set&lt;String&gt; set;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, String&gt; map;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setStrs</span><span class="params">(String[] strs)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.strs = strs;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setList</span><span class="params">(List&lt;String&gt; list)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.list = list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSet</span><span class="params">(Set&lt;String&gt; set)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.set = set;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMap</span><span class="params">(Map&lt;String, String&gt; map)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.map = map;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;CollectionBean&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;strs=&quot;</span> + Arrays.toString(strs) +</span><br><span class="line">                <span class="string">&quot;, list=&quot;</span> + list +</span><br><span class="line">                <span class="string">&quot;, set=&quot;</span> + set +</span><br><span class="line">                <span class="string">&quot;, map=&quot;</span> + map +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="line">&lt;beans xmlns=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="line">       xmlns:xsi=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="line">       xsi:schemaLocation=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--Springçš„é›†åˆå±æ€§çš„æ³¨å…¥--&gt;</span><br><span class="line">    &lt;!--æ³¨å…¥æ•°ç»„ç±»å‹--&gt;</span><br><span class="line">    &lt;bean id=<span class="string">&quot;collectionBean&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;learningspring.ioc.examples.demo4.CollectionBean&quot;</span>&gt;</span><br><span class="line">        &lt;!-- æ³¨å…¥æ•°ç»„ç±»å‹ --&gt;</span><br><span class="line">        &lt;property name=<span class="string">&quot;strs&quot;</span>&gt;</span><br><span class="line">            &lt;list&gt;</span><br><span class="line">                &lt;value&gt;Tom&lt;/value&gt;</span><br><span class="line">                &lt;value&gt;Jack&lt;/value&gt;</span><br><span class="line">            &lt;/list&gt;</span><br><span class="line">        &lt;/property&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!-- æ³¨å…¥Listé›†åˆ --&gt;</span><br><span class="line">        &lt;property name=<span class="string">&quot;list&quot;</span>&gt;</span><br><span class="line">            &lt;list&gt;</span><br><span class="line">                &lt;value&gt;Lucy&lt;/value&gt;</span><br><span class="line">                &lt;value&gt;Lily&lt;/value&gt;</span><br><span class="line">            &lt;/list&gt;</span><br><span class="line">        &lt;/property&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!-- æ³¨å…¥Seté›†åˆ --&gt;</span><br><span class="line">        &lt;property name=<span class="string">&quot;set&quot;</span>&gt;</span><br><span class="line">            &lt;set&gt;</span><br><span class="line">                &lt;value&gt;aaa&lt;/value&gt;</span><br><span class="line">                &lt;value&gt;bbb&lt;/value&gt;</span><br><span class="line">                &lt;value&gt;ccc&lt;/value&gt;</span><br><span class="line">            &lt;/set&gt;</span><br><span class="line">        &lt;/property&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!-- æ³¨å…¥Mapé›†åˆ --&gt;</span><br><span class="line">        &lt;property name=<span class="string">&quot;map&quot;</span>&gt;</span><br><span class="line">            &lt;map&gt;</span><br><span class="line">                &lt;entry key=<span class="string">&quot;a&quot;</span> value=<span class="string">&quot;1&quot;</span>/&gt;</span><br><span class="line">                &lt;entry key=<span class="string">&quot;b&quot;</span> value=<span class="string">&quot;2&quot;</span>/&gt;</span><br><span class="line">            &lt;/map&gt;</span><br><span class="line">        &lt;/property&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure><h3 id="springåˆ†æ¨¡å—å¼€å‘çš„é…ç½®">Springåˆ†æ¨¡å—å¼€å‘çš„é…ç½®<a title="#springåˆ†æ¨¡å—å¼€å‘çš„é…ç½®" href="#springåˆ†æ¨¡å—å¼€å‘çš„é…ç½®"></a></h3><ul><li>åŠ è½½é…ç½®æ–‡ä»¶æ—¶ï¼Œç›´æ¥åŠ è½½å¤šä¸ªé…ç½®æ–‡ä»¶</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ApplicationContext ctx = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">&quot;applicationContext1.xml&quot;</span>, <span class="string">&quot;applicationContext2.xml&quot;</span>);</span><br></pre></td></tr></table></figure><ul><li>åœ¨ä¸€ä¸ªé…ç½®æ–‡ä»¶ä¸­å¼•å…¥å¤šä¸ªé…ç½®æ–‡ä»¶</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--å¼•å…¥é…ç½®æ–‡ä»¶--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">&quot;applicationContext2.xml&quot;</span>/&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="springå¼€å‘ä¸­çš„å¸¸ç”¨æ³¨è§£">Springå¼€å‘ä¸­çš„å¸¸ç”¨æ³¨è§£<a title="#springå¼€å‘ä¸­çš„å¸¸ç”¨æ³¨è§£" href="#springå¼€å‘ä¸­çš„å¸¸ç”¨æ³¨è§£"></a></h1><h2 id="@component">@Component<a title="#@component" href="#@component"></a></h2><p>è¯¥æ³¨è§£åœ¨ç±»ä¸Šä½¿ç”¨ï¼Œä½¿ç”¨è¯¥æ³¨è§£å°±ç›¸å½“äºåœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®äº†ä¸€ä¸ªBeanï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component(&quot;userDao&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDaoImpl</span> <span class="keyword">implements</span> <span class="title">UserDao</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;UserDaoImpl.save&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç›¸å½“äºä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;learningspring.ioc.examplesannotation.demo1.UserDaoImpl&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¯¥æ³¨è§£æœ‰3ä¸ªè¡ç”Ÿæ³¨è§£ï¼š</p><ul><li><strong>@Controllerï¼šä¿®é¥°Web å±‚ç±»</strong></li><li><strong>@Serviceï¼šä¿®é¥°Serviceå±‚ç±»</strong></li><li><strong>@Repositoryï¼šä¿®é¥°Daoå±‚ç±»</strong></li></ul><h2 id="@value">@Value<a title="#@value" href="#@value"></a></h2><p>è¯¥æ³¨è§£ç”¨äºç»™å±æ€§æ³¨å…¥å€¼ï¼Œæœ‰2ç§ç”¨æ³•</p><ul><li>å¦‚æœæœ‰setæ–¹æ³•ï¼Œåˆ™éœ€è¦å°†è¯¥æ³¨è§£æ·»åŠ åˆ°setæ–¹æ³•ä¸Š</li><li>å¦‚æœæ²¡æœ‰setæ–¹æ³•ï¼Œåˆ™éœ€è¦å°†è¯¥æ³¨è§£æ·»åŠ åˆ°å±æ€§ä¸Š</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Value æ³¨è§£ç”¨äºå±æ€§æ³¨å…¥</span></span><br><span class="line"><span class="comment"> * å½“ç±»æœ‰æä¾›setæ–¹æ³•æ—¶æ·»åŠ åœ¨setæ–¹æ³•ä¸Š</span></span><br><span class="line"><span class="comment"> * å¦‚æœæ²¡æœ‰ï¼Œåˆ™æ·»åŠ åˆ°å±æ€§ä¸Š</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Chen Rui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Component(&quot;dog&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Dog</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;100&quot;)</span> <span class="comment">// æ³¨å…¥å±æ€§å€¼</span></span><br><span class="line">    <span class="keyword">private</span> Double length;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Dog</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Dog</span><span class="params">(String name, Double length)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.length = length;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;Golden&quot;)</span> <span class="comment">// æ³¨å…¥å±æ€§å€¼</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Dog&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, length=&quot;</span> + length +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="@autowired">@Autowired<a title="#@autowired" href="#@autowired"></a></h2><p><code>@Value</code> é€šå¸¸ç”¨äºæ™®é€šå±æ€§çš„æ³¨å…¥ã€‚</p><p><code>@Autowired</code> é€šå¸¸ç”¨äºä¸ºå¯¹è±¡ç±»å‹çš„å±æ€§æ³¨å…¥å€¼ï¼Œä½†æ˜¯æŒ‰ç…§<strong>ç±»å‹</strong>å®Œæˆå±æ€§æ³¨å…¥</p><p>ä¹ æƒ¯æ˜¯æŒ‰ç…§<strong>åç§°</strong>å®Œæˆå±æ€§æ³¨å…¥ï¼Œæ‰€ä»¥å¿…é¡»è®©<code>@Autowired</code>æ³¨è§£å’Œ<code>@Qualifier</code>æ³¨è§£<strong>ä¸€åŒä½¿ç”¨</strong>ã€‚</p><p>ï¼ˆå¦‚æœæ²¡æœ‰<code>@Qualifier</code>æ³¨è§£ï¼Œä¿®æ”¹ä»¥ä¸‹ä¾‹å­ä¸­<code>@Repository</code>æ³¨è§£çš„å€¼ï¼Œä¹Ÿèƒ½ç¼–è¯‘æˆåŠŸï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service(&quot;userService&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="meta">@Qualifier(&quot;userDao&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;UserServiceImpl.save&quot;</span>);</span><br><span class="line">        userDao.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Repository(&quot;userDao&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDaoImpl</span> <span class="keyword">implements</span> <span class="title">UserDao</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;UserDaoImpl.save&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="@resource">@Resource<a title="#@resource" href="#@resource"></a></h2><p>è¯¥æ³¨è§£ä¹Ÿå¯ä»¥ç”¨äºå±æ€§æ³¨å…¥ï¼Œé€šå¸¸æƒ…å†µä¸‹ä½¿ç”¨**@Resourceæ³¨è§£**ï¼Œé»˜è®¤æŒ‰ç…§<strong>åç§°</strong>å®Œæˆå±æ€§æ³¨å…¥ã€‚</p><p>è¯¥æ³¨è§£ç”±J2EEæä¾›ï¼Œéœ€è¦å¯¼å…¥åŒ…<code>javax.annotation.Resource</code>ã€‚</p><p><code>@Resource</code>æœ‰ä¸¤ä¸ªé‡è¦çš„å±æ€§ï¼š<code>name</code>å’Œ<code>type</code>ï¼Œè€ŒSpringå°†<code>@Resource</code>æ³¨è§£çš„<code>name</code>å±æ€§è§£æä¸ºbeançš„åå­—ï¼Œè€Œ<code>type</code>å±æ€§åˆ™è§£æä¸ºbeançš„ç±»å‹ã€‚æ‰€ä»¥ï¼Œå¦‚æœä½¿ç”¨<code>name</code>å±æ€§ï¼Œåˆ™ä½¿ç”¨byNameçš„è‡ªåŠ¨æ³¨å…¥ç­–ç•¥ï¼Œè€Œä½¿ç”¨<code>type</code>å±æ€§æ—¶åˆ™ä½¿ç”¨byTypeè‡ªåŠ¨æ³¨å…¥ç­–ç•¥ã€‚å¦‚æœæ—¢ä¸åˆ¶å®š<code>name</code>ä¹Ÿä¸åˆ¶å®š<code>type</code>å±æ€§ï¼Œè¿™æ—¶å°†é€šè¿‡åå°„æœºåˆ¶ä½¿ç”¨byNameè‡ªåŠ¨æ³¨å…¥ç­–ç•¥ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * UserController</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Chen Rui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@Controller(&quot;userController&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Resource(name = &quot;userService&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService; </span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * UserServiceå®ç°ç±»</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Chen Rui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Service(&quot;userService&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Resource(name = &quot;userDao&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;UserServiceImpl.save&quot;</span>);</span><br><span class="line">        userDao.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * UserDaoå®ç°ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Chen Rui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Component(&quot;userDao&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDaoImpl</span> <span class="keyword">implements</span> <span class="title">UserDao</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;UserDaoImpl.save&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="@postconstruct-å’Œ-@predestroy">@PostConstruct å’Œ @PreDestroy<a title="#@postconstruct-å’Œ-@predestroy" href="#@postconstruct-å’Œ-@predestroy"></a></h2><p><code>@PostConstruct</code>å’Œ<code>@PreDestroy</code>æ³¨è§£ï¼Œå‰è€…ä¸ºBeanç”Ÿå‘½å‘¨æœŸç›¸å…³çš„æ³¨è§£ï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œä½¿ç”¨åˆ°äº†i<code>nit-method</code>å‚æ•°æ¥é…ç½®Beanåˆå§‹åŒ–ä¹‹å‰è¦æ‰§è¡Œçš„æ–¹æ³•ï¼Œè¯¥æ³¨è§£ä¹Ÿæ˜¯åŒæ ·çš„ä½œç”¨ã€‚å°†è¯¥æ³¨è§£æ·»åŠ åˆ°æƒ³åœ¨åˆå§‹åŒ–ä¹‹å‰æ‰§è¡Œçš„ç›®æ ‡æ–¹æ³•ä¸Šï¼Œå°±å¯ä»¥å®ç°è¯¥åŠŸèƒ½ï¼Œè€Œåè€…åˆ™æ˜¯Beanç”Ÿå‘½å‘¨æœŸä¸­<code>destroy-method</code>ç›®æ ‡æ–¹æ³•ï¼Œä½¿ç”¨è¯¥æ³¨è§£åœ¨æŒ‡å®šæ–¹æ³•ä¸Šï¼Œå³å¯å®ç°åœ¨Beané”€æ¯ä¹‹å‰æ‰§è¡Œè¯¥æ–¹æ³•ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * UserDaoå®ç°ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Chen Rui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Component(&quot;userDao&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDaoImpl</span> <span class="keyword">implements</span> <span class="title">UserDao</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@PostConstruct</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;UserDaoImpl.init&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;UserDaoImpl.save&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@PreDestroy</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;UserDaoImpl.destroy&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="@scope">@Scope<a title="#@scope" href="#@scope"></a></h2><p>Beançš„ä½œç”¨èŒƒå›´çš„æ³¨è§£ï¼Œé»˜è®¤ä¸ºsingletonï¼ˆå•ä¾‹ï¼‰</p><p>å¯é€‰å€¼ï¼š</p><ul><li>singleton</li><li>prototype</li><li>request</li><li>session</li><li>globalsession</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * UserDaoå®ç°ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Chen Rui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Component(&quot;userDao&quot;)</span></span><br><span class="line"><span class="meta">@Scope</span> <span class="comment">// é»˜è®¤ä¸ºsingleton</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDaoImpl</span> <span class="keyword">implements</span> <span class="title">UserDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostConstruct</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;UserDaoImpl.init&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;UserDaoImpl.save&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PreDestroy</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;UserDaoImpl.destroy&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åŸºäºxmlé…ç½®å’ŒåŸºäºæ³¨è§£é…ç½®çš„å¯¹æ¯”">åŸºäºXMLé…ç½®å’ŒåŸºäºæ³¨è§£é…ç½®çš„å¯¹æ¯”<a title="#åŸºäºxmlé…ç½®å’ŒåŸºäºæ³¨è§£é…ç½®çš„å¯¹æ¯”" href="#åŸºäºxmlé…ç½®å’ŒåŸºäºæ³¨è§£é…ç½®çš„å¯¹æ¯”"></a></h2><div class="Ï†bt"><div class="Ï†bv"><table><thead><tr><th style="padding:0"></th><th>åŸºäºXMLçš„é…ç½®</th><th>åŸºäºæ³¨è§£çš„é…ç½®</th></tr></thead><tbody><tr><td>Beançš„å®šä¹‰</td><td><bean id="Beançš„id" class="ç±»çš„å…¨è·¯å¾„"/></td><td>@Componentæˆ–è¡ç”Ÿæ³¨è§£@Controllerï¼Œ@Serviceå’Œ@Repository</td></tr><tr><td>Beançš„åç§°</td><td>é€šè¿‡idæˆ–nameæŒ‡å®š</td><td>@Component(â€œBeançš„idâ€)</td></tr><tr><td>Beançš„å±æ€§æ³¨å…¥</td><td><property>æˆ–è€…é€šè¿‡på‘½åç©ºé—´</td><td>é€šè¿‡æ³¨è§£@Autowired æŒ‰ç±»å‹æ³¨å…¥ é€šè¿‡@QualifieræŒ‰åç§°æ³¨å…¥</td></tr><tr><td>Beançš„ç”Ÿå‘½å‘¨æœŸ</td><td>init-methodæŒ‡å®šBeanåˆå§‹åŒ–å‰æ‰§è¡Œçš„æ–¹æ³•ï¼Œdestroy-methodæŒ‡å®šBeané”€æ¯å‰æ‰§è¡Œçš„æ–¹æ³•</td><td>@PostConstruct å¯¹åº”äºint-method @PreDestroy å¯¹åº”äºdestroy-method</td></tr><tr><td>Beançš„ä½œç”¨åŸŸ</td><td>åœ¨beanæ ‡ç­¾ä¸­é…ç½®scopeå±æ€§</td><td>@Scope, é»˜è®¤æ˜¯singleton é…ç½®å¤šä¾‹å¯ä»¥åœ¨ç›®æ ‡ç±»ä¸Šä½¿ç”¨@Scope(â€œprototypeâ€)</td></tr><tr><td>ä½¿ç”¨åœºæ™¯</td><td>Beanæ¥è‡ªç¬¬ä¸‰æ–¹ï¼Œå¯ä»¥ä½¿ç”¨åœ¨ä»»ä½•åœºæ™¯</td><td>Beançš„å®ç°ç±»ç”±è‡ªå·±ç»´æŠ¤</td></tr></tbody></table></div></div><p>XMLå¯ä»¥é€‚ç”¨äºä»»ä½•åœºæ™¯ï¼Œå°±ç®—Beanæ¥è‡ªç¬¬ä¸‰æ–¹ä¹Ÿå¯ä»¥é€‚ç”¨XMLæ–¹å¼æ¥ç®¡ç†ã€‚è€Œæ³¨è§£æ–¹å¼å°±æ— æ³•åœ¨æ­¤åœºæ™¯ä¸‹ä½¿ç”¨ï¼Œæ³¨è§£æ–¹å¼å¯ä»¥è®©å¼€å‘çš„è¿‡ç¨‹æ›´åŠ æ–¹ä¾¿ï¼Œä½†å‰ææ˜¯Beanç”±è‡ªå·±ç»´æŠ¤ï¼Œè¿™æ ·æ‰èƒ½åœ¨æºç ä¸­æ·»åŠ æ³¨è§£ã€‚</p><p>æ‰€ä»¥å¯ä»¥ä½¿ç”¨<strong>ä¸¤è€…æ··åˆ</strong>çš„æ–¹å¼æ¥å¼€å‘é¡¹ç›®ï¼Œä½¿ç”¨<strong>XMLé…ç½®æ–‡ä»¶æ¥ç®¡ç†Beanï¼Œä½¿ç”¨æ³¨è§£æ¥è¿›è¡Œå±æ€§æ³¨å…¥</strong></p><h1 id="spring-aop">Spring AOP<a title="#spring-aop" href="#spring-aop"></a></h1><h2 id="aopçš„æ¦‚è¿°">AOPçš„æ¦‚è¿°<a title="#aopçš„æ¦‚è¿°" href="#aopçš„æ¦‚è¿°"></a></h2><p>å³<strong>é¢å‘åˆ‡é¢ç¼–ç¨‹</strong>ï¼Œé€šè¿‡<strong>é¢„ç¼–è¯‘</strong>æ–¹å¼å’Œè¿è¡ŒæœŸåŠ¨æ€ä»£ç†å®ç°ç¨‹åºåŠŸèƒ½çš„ç»Ÿä¸€ç»´æŠ¤çš„ä¸€ç§æŠ€æœ¯ã€‚åˆ©ç”¨AOPå¯ä»¥å¯¹ä¸šåŠ¡é€»è¾‘çš„å„ä¸ªéƒ¨åˆ†è¿›è¡Œ<strong>éš”ç¦»</strong>ï¼Œä»è€Œä½¿å¾—ä¸šåŠ¡é€»è¾‘å„éƒ¨åˆ†ä¹‹é—´çš„<strong>è€¦åˆåº¦é™ä½</strong>ï¼Œæé«˜ç¨‹åºçš„<strong>å¯é‡ç”¨æ€§</strong>ï¼ŒåŒæ—¶æé«˜äº†å¼€å‘çš„æ•ˆç‡ã€‚</p><h2 id="aopçš„æ¡ˆä¾‹ï¼ˆåº”ç”¨åœºæ™¯ï¼‰">AOPçš„æ¡ˆä¾‹ï¼ˆåº”ç”¨åœºæ™¯ï¼‰<a title="#aopçš„æ¡ˆä¾‹ï¼ˆåº”ç”¨åœºæ™¯ï¼‰" href="#aopçš„æ¡ˆä¾‹ï¼ˆåº”ç”¨åœºæ™¯ï¼‰"></a></h2><p>èƒŒæ™¯ï¼šæŸé¡¹ç›®å·²ç»å†™å¥½äº†ä¿å­˜åˆ°æ•°æ®åº“çš„æ–¹æ³•ã€‚å‡è®¾ç°åœ¨éœ€è¦æ·»åŠ ä¸€ä¸ªæ–°çš„åŠŸèƒ½ï¼Œä¾‹å¦‚æƒé™æ ¡éªŒï¼Œåœ¨ä¿å­˜åˆ°æ•°æ®åº“ä¹‹å‰è¦å¯¹ç”¨æˆ·æƒé™è¿›è¡Œæ ¡éªŒã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDaoImpl</span> <span class="keyword">implements</span> <span class="title">UserDao</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span></span>&#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨éœ€è¦å¤šåŠ ä¸€ä¸ªéœ€æ±‚ï¼Œåœ¨ç”¨æˆ·å°†æ•°æ®ä¿å­˜åˆ°æ•°æ®åº“ä¹‹å‰ï¼Œè¿›è¡Œæƒé™æ ¡éªŒã€‚</p><p>æ­¤æ—¶é€šå¸¸å°±ä¼šåœ¨è¯¥æ–¹æ³•ä¸­æ·»åŠ ä¸€ä¸ªæ–¹æ³•æ¥è¿›è¡Œæƒé™æ ¡éªŒç„¶ååœ¨saveæ–¹æ³•ä¸­è°ƒç”¨ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDaoImpl</span> <span class="keyword">implements</span> <span class="title">UserDao</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span></span>&#123;</span><br><span class="line">        checkPri();</span><br><span class="line">        <span class="comment">// ä¿å­˜åˆ°æ•°æ®åº“</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">checkPri</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">// æƒé™æ ¡éªŒ</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç”¨è¿™æ ·çš„æ–¹æ³•æ¥å®ç°ï¼Œå¼Šç«¯å°±æ˜¯åªèƒ½åœ¨è¿™ä¸€ä¸ªç±»ä¸­ä½¿ç”¨ï¼Œé€šå¸¸ä¸€ä¸ªé¡¹ç›®ä¸­æœ‰è®¸å¤šçš„æ–¹æ³•éƒ½å¯èƒ½éœ€è¦æ‰§è¡Œæƒé™æ ¡éªŒï¼Œæ­¤æ—¶å°±è¦åœ¨æ¯ä¸ªç±»ä¸­ç¼–å†™åŒæ ·çš„ä»£ç ï¼Œæ‰€ä»¥è¯¥æ–¹æ³•å¹¶ä¸ç§‘å­¦ã€‚</p><p>æ­¤æ—¶å°±æœ‰äº†ä¸€ä¸ªæ›´å¥½çš„æ–¹æ³•ï¼Œå³<strong>çºµå‘ç»§æ‰¿</strong>ã€‚</p><p>å®šä¹‰ä¸€ä¸ªé€šç”¨çš„Daoï¼Œåœ¨é€šç”¨çš„Daoä¸­ç¼–å†™æƒé™æ ¡éªŒçš„æ–¹æ³•ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BaseDao</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">checkPri</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">// æƒé™æ ¡éªŒ</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åæ¯ä¸€ä¸ªä¸åŒçš„ç±»éƒ½å»ç»§æ‰¿è¿™ä¸ªç±»ï¼Œå†è°ƒç”¨è¯¥æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDaoImpl</span> <span class="keyword">extends</span> <span class="title">BaseDao</span> <span class="keyword">implements</span> <span class="title">UserDao</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span></span>&#123;</span><br><span class="line">        checkPri();</span><br><span class="line">        <span class="comment">// ä¿å­˜åˆ°æ•°æ®åº“</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶å°±åªéœ€è¦ç»´æŠ¤<code>BaseDao</code>ä¸­çš„ä¸€ä»½ä»£ç å°±å¯ä»¥ï¼Œå¤§å¤§å‡è½»äº†å·¥ä½œé‡ï¼Œæé«˜äº†æ•ˆç‡ã€‚</p><p>ä½†AOPçš„æ€æƒ³æ›´é«˜ä¸€æ­¥ï¼Œä¸é‡‡ç”¨çºµå‘ç»§æ‰¿ï¼Œè€Œé‡‡ç”¨<strong>æ¨ªå‘æŠ½å–</strong>æ¥å–ä»£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDaoImpl</span> <span class="keyword">implements</span> <span class="title">UserDao</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">// ä¿å­˜åˆ°æ•°æ®åº“</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¨ªå‘æŠ½å–æœºåˆ¶å®è´¨ä¸Šå°±æ˜¯<strong>ä»£ç†æœºåˆ¶</strong>ï¼Œé€šè¿‡åˆ›å»º<code>UserDaoImpl</code>ç±»çš„ä»£ç†ç±»ï¼Œé€šè¿‡ä»£ç†ç±»æ¥è°ƒç”¨æƒé™æ ¡éªŒçš„æ–¹æ³•ã€‚</p><h2 id="aopåº•å±‚å®ç°åŸç†">AOPåº•å±‚å®ç°åŸç†<a title="#aopåº•å±‚å®ç°åŸç†" href="#aopåº•å±‚å®ç°åŸç†"></a></h2><p>AOPçš„å®ç°ä½¿ç”¨äº†åŠ¨æ€ä»£ç†æŠ€æœ¯ï¼ŒåŠ¨æ€ä»£ç†åˆ†ä¸ºä¸¤ç§</p><ul><li>JDKåŠ¨æ€ä»£ç†ï¼šåªèƒ½å¯¹å®ç°äº†æ¥å£çš„ç±»äº§ç”Ÿä»£ç†</li><li>CglibåŠ¨æ€ä»£ç†ï¼ˆç±»ä¼¼äºjavassistçš„ç¬¬ä¸‰æ–¹ä»£ç†æŠ€æœ¯ï¼‰ï¼šå¯¹æ²¡æœ‰å®ç°æ¥å£çš„ç±»äº§ç”Ÿä»£ç†å¯¹è±¡ï¼Œå³ç”Ÿæˆå­ç±»å¯¹è±¡ã€‚</li></ul><h3 id="jdkåŠ¨æ€ä»£ç†">JDKåŠ¨æ€ä»£ç†<a title="#jdkåŠ¨æ€ä»£ç†" href="#jdkåŠ¨æ€ä»£ç†"></a></h3><h4 id="jdkåŠ¨æ€ä»£ç†æ¡ˆä¾‹">JDKåŠ¨æ€ä»£ç†æ¡ˆä¾‹<a title="#jdkåŠ¨æ€ä»£ç†æ¡ˆä¾‹" href="#jdkåŠ¨æ€ä»£ç†æ¡ˆä¾‹"></a></h4><p>è¯¥æ¡ˆä¾‹å®ç°ä¸€ä¸ªè®¡ç®—å™¨çš„æ—¥å¿—åŠŸèƒ½</p><p>é¦–å…ˆåˆ›å»ºä¸€ä¸ªæ¥å£<code>Calculator</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è®¡ç®—å™¨æ¥å£</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Chen Rui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Calculator</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åŠ æ³•</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> a å®æ•°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> b å®æ•°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> ç›¸åŠ ç»“æœ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‡æ³•</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> a å®æ•°,è¢«å‡æ•°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> b å®æ•°,å‡æ•°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> ç›¸å‡ç»“æœ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">sub</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¹˜æ³•</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> a å®æ•°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> b å®æ•°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> ç›¸ä¹˜ç»“æœ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">mul</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é™¤æ³•</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> a å®æ•°,è¢«é™¤æ•°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> b å®æ•°,é™¤æ•°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> ç›¸é™¤ç»“æœ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">div</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ç€åˆ›å»ºä¸€ä¸ªç±»<code>CalculatorImpl</code>æ¥å®ç°è¯¥æ¥å£å¹¶é‡å†™æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è®¡ç®—å™¨å®ç°ç±»</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Chen Rui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CalculatorImpl</span> <span class="keyword">implements</span> <span class="title">Calculator</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> a + b;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">sub</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> a - b;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">mul</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> a * b;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">div</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (b == <span class="number">0</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;é™¤æ•°ä¸èƒ½ä¸º0&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span>  a / b;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨æµ‹è¯•ç±»ä¸­æµ‹è¯•è¯¥è®¡ç®—å™¨ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Chen Rui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AppTest</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Calculator target = <span class="keyword">new</span> CalculatorImpl();</span><br><span class="line">        <span class="keyword">int</span> a = <span class="number">10</span>;</span><br><span class="line">        <span class="keyword">int</span> b = <span class="number">10</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;res --&gt; &quot;</span> + target.add(a, b));</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;res --&gt; &quot;</span> + target.mul(a, b));</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;res --&gt; &quot;</span> + target.sub(a, b));</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;res --&gt; &quot;</span> + target.div(a, b));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶æ§åˆ¶å°çš„è¾“å‡ºç»“æœä¸ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">res --&gt; 20</span><br><span class="line">res --&gt; 100</span><br><span class="line">res --&gt; 0</span><br><span class="line">res --&gt; 1</span><br></pre></td></tr></table></figure><p>ç°åœ¨ä¸ºè¯¥è®¡ç®—å™¨å¢åŠ <strong>æ‰“å°æ—¥å¿—</strong>çš„åŠŸèƒ½</p><p>åˆ›å»ºä¸€ä¸ªè®¡ç®—å™¨çš„ä»£ç†ç±»<code>CalculatorLoggingProxy</code>ï¼Œåœ¨ç±»ä¸­é¦–å…ˆå®šä¹‰è¢«ä»£ç†çš„ç›®æ ‡å¯¹è±¡targetï¼Œå¹¶é€šè¿‡æ„é€ å‡½æ•°è¿›è¡Œèµ‹å€¼ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.reflect.InvocationHandler;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Proxy;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è®¡ç®—å™¨ä»£ç†ç±»</span></span><br><span class="line"><span class="comment"> * å®ç°æ‰©å±•æ‰“å°æ—¥å¿—åŠŸèƒ½</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Chen Rui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CalculatorProxy</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¢«ä»£ç†çš„å¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Calculator target;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CalculatorProxy</span><span class="params">(Calculator target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.target = target;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Calculator <span class="title">createProxy</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Calculator proxy;</span><br><span class="line"></span><br><span class="line">        ClassLoader classLoader = target.getClass().getClassLoader();</span><br><span class="line"></span><br><span class="line">        Class[] interfaces = <span class="keyword">new</span> Class[]&#123;Calculator.class&#125;;</span><br><span class="line"></span><br><span class="line">        InvocationHandler handler = <span class="keyword">new</span> InvocationHandler() &#123;</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             * <span class="doctag">@param</span> proxy     æ­£åœ¨è¿”å›çš„ä»£ç†å¯¹è±¡ï¼Œä¸€èˆ¬åœ¨invokeæ–¹æ³•ä¸­éƒ½ä¸ä½¿ç”¨è¯¥å¯¹è±¡</span></span><br><span class="line"><span class="comment">             *                  å¦‚æœä½¿ç”¨è¯¥å¯¹è±¡ï¼Œåˆ™ä¼šå¼•å‘æ ˆå†…å­˜æº¢å‡ºã€‚å› ä¸ºä¼šå¾ªç¯è°ƒç”¨invokeæ–¹æ³•ã€‚</span></span><br><span class="line"><span class="comment">             * <span class="doctag">@param</span> method    æ­£åœ¨è¢«è°ƒç”¨çš„æ–¹æ³•</span></span><br><span class="line"><span class="comment">             * <span class="doctag">@param</span> args      è°ƒç”¨æ–¹å¼æ—¶ä¼ å…¥çš„å‚æ•°</span></span><br><span class="line"><span class="comment">             * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">             * <span class="doctag">@throws</span> Throwable</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">                <span class="comment">// è·å–æ–¹æ³•å</span></span><br><span class="line">                String methodName = method.getName();</span><br><span class="line">                <span class="comment">// è¾“å‡ºæ—¥å¿—é€»è¾‘</span></span><br><span class="line">                System.out.println(<span class="keyword">new</span> Date() + <span class="string">&quot;: The method &quot;</span> + methodName + <span class="string">&quot; begins with &quot;</span> + Arrays.asList(args));</span><br><span class="line">                <span class="comment">// æ‰§è¡Œæ–¹æ³•</span></span><br><span class="line">                Object result = method.invoke(target, args);</span><br><span class="line">                <span class="comment">// è¾“å‡ºæ—¥å¿—é€»è¾‘</span></span><br><span class="line">                System.out.println(<span class="keyword">new</span> Date() + <span class="string">&quot;: The method &quot;</span> + methodName + <span class="string">&quot; ends with &quot;</span> + result);</span><br><span class="line">                <span class="keyword">return</span> result;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        proxy = (Calculator) Proxy.newProxyInstance(classLoader,interfaces,handler);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> proxy;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶é‡æ–°ç¼–å†™æµ‹è¯•æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Chen Rui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AppTest</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Calculator target = <span class="keyword">new</span> CalculatorImpl();</span><br><span class="line">        <span class="comment">// åˆ›å»ºä»£ç†å¯¹è±¡</span></span><br><span class="line">        Calculator proxy = <span class="keyword">new</span> CalculatorProxy(target).createProxy();</span><br><span class="line">        <span class="keyword">int</span> a = <span class="number">10</span>;</span><br><span class="line">        <span class="keyword">int</span> b = <span class="number">10</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;res --&gt; &quot;</span> + proxy.add(a, b));</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;res --&gt; &quot;</span> + proxy.mul(a, b));</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;res --&gt; &quot;</span> + proxy.sub(a, b));</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;res --&gt; &quot;</span> + proxy.div(a, b));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ°æ­¤å°±å®Œæˆäº†åœ¨ä¸æ”¹å˜<code>CalculatorImpl</code>ç±»çš„æºä»£ç çš„æƒ…å†µä¸‹ï¼Œå®ç°å¯¹è®¡ç®—å™¨çš„åŠŸèƒ½å¢åŠ ï¼Œå®ç°äº†æ—¥å¿—æ‰“å°çš„åŠŸèƒ½ã€‚æ­¤æ—¶æ§åˆ¶å°çš„æ‰“å°å†…å®¹ä¸º</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Sun Mar 17 20:36:26 CST 2019: The method add begins with [10, 10]</span><br><span class="line">Sun Mar 17 20:36:26 CST 2019: The method add ends with 20</span><br><span class="line">res --&gt; 20</span><br><span class="line">Sun Mar 17 20:36:26 CST 2019: The method mul begins with [10, 10]</span><br><span class="line">Sun Mar 17 20:36:26 CST 2019: The method mul ends with 100</span><br><span class="line">res --&gt; 100</span><br><span class="line">Sun Mar 17 20:36:26 CST 2019: The method sub begins with [10, 10]</span><br><span class="line">Sun Mar 17 20:36:26 CST 2019: The method sub ends with 0</span><br><span class="line">res --&gt; 0</span><br><span class="line">Sun Mar 17 20:36:26 CST 2019: The method div begins with [10, 10]</span><br><span class="line">Sun Mar 17 20:36:26 CST 2019: The method div ends with 1</span><br><span class="line">res --&gt; 1</span><br></pre></td></tr></table></figure><h3 id="cglibåŠ¨æ€ä»£ç†">CglibåŠ¨æ€ä»£ç†<a title="#cglibåŠ¨æ€ä»£ç†" href="#cglibåŠ¨æ€ä»£ç†"></a></h3><h4 id="cglibåŠ¨æ€ä»£ç†æ¡ˆä¾‹">CglibåŠ¨æ€ä»£ç†æ¡ˆä¾‹<a title="#cglibåŠ¨æ€ä»£ç†æ¡ˆä¾‹" href="#cglibåŠ¨æ€ä»£ç†æ¡ˆä¾‹"></a></h4><p>åŒæ ·æ¥å®ç°ä¸€ä¸ªå¯¹è®¡ç®—å™¨æ¥å¢åŠ æ‰“å°æ—¥å¿—åŠŸèƒ½</p><p>é¦–å…ˆåˆ›å»ºè®¡ç®—å™¨ç±»<code>Calculator</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è®¡ç®—å™¨ç±»</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Chen Rui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Calculator</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> a + b;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">sub</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> a - b;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">mul</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> a * b;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">div</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (b == <span class="number">0</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;é™¤æ•°ä¸èƒ½ä¸º0&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span>  a / b;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶éœ€è¦å¯¼å…¥cglibçš„jaråŒ…ï¼Œåœ¨mavenä¸­æ·»åŠ ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cglib<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>cglib<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ¥ç€åˆ›å»ºè®¡ç®—å™¨çš„ä»£ç†ç±»<code>CalculatorProxy</code>å¹¶ä¸”å®ç°<code>MethodInterceptor</code>æ¥å£å¹¶é‡å†™<code>intercept</code>æ–¹æ³•ã€‚</p><p>åœ¨ç±»ä¸­é¦–å…ˆå®šä¹‰è¢«ä»£ç†çš„ç›®æ ‡å¯¹è±¡ï¼Œå¹¶é€šè¿‡æ„é€ å‡½æ•°è¿›è¡Œèµ‹å€¼ã€‚ç„¶ååˆ›å»º<code>createProxy()</code>æ–¹æ³•è¿”å›è¢«å¢å¼ºçš„è®¡ç®—å™¨å¯¹è±¡ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è®¡ç®—å™¨ä»£ç†ç±»</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Chen Rui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CalculatorProxy</span> <span class="keyword">implements</span> <span class="title">MethodInterceptor</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¢«ä»£ç†çš„å¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Calculator target;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CalculatorProxy</span><span class="params">(Calculator target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.target = target;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Calculator <span class="title">createProxy</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1.åˆ›å»ºcglibçš„æ ¸å¿ƒç±»å¯¹è±¡</span></span><br><span class="line">        Enhancer enhancer = <span class="keyword">new</span> Enhancer();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.è®¾ç½®çˆ¶ç±»</span></span><br><span class="line">        enhancer.setSuperclass(target.getClass());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.è®¾ç½®å›è°ƒï¼ˆç±»ä¼¼äºjdkåŠ¨æ€ä»£ç†ä¸­çš„InvocationHandlerå¯¹è±¡ï¼‰</span></span><br><span class="line">        enhancer.setCallback(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4.åˆ›å»ºä»£ç†å¯¹è±¡</span></span><br><span class="line">        Calculator proxy = (Calculator) enhancer.create();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> proxy;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">intercept</span><span class="params">(Object proxy, Method method, Object[] args, MethodProxy methodProxy)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        <span class="comment">// è·å–æ–¹æ³•å</span></span><br><span class="line">        String methodName = method.getName();</span><br><span class="line">        <span class="comment">// è¾“å‡ºæ—¥å¿—é€»è¾‘</span></span><br><span class="line">        System.out.println(<span class="keyword">new</span> Date() + <span class="string">&quot;: The method &quot;</span> + methodName + <span class="string">&quot; begins with &quot;</span> + Arrays.asList(args));</span><br><span class="line">        <span class="comment">// æ‰§è¡Œæ–¹æ³•</span></span><br><span class="line">        Object result = methodProxy.invokeSuper(proxy, args);</span><br><span class="line">        <span class="comment">// è¾“å‡ºæ—¥å¿—é€»è¾‘</span></span><br><span class="line">        System.out.println(<span class="keyword">new</span> Date() + <span class="string">&quot;: The method &quot;</span> + methodName + <span class="string">&quot; ends with &quot;</span> + result);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="springä¸­çš„aopå®ç°â€”â€”aspectj">Springä¸­çš„AOPå®ç°â€”â€”AspectJ<a title="#springä¸­çš„aopå®ç°â€”â€”aspectj" href="#springä¸­çš„aopå®ç°â€”â€”aspectj"></a></h2><h3 id="aopå¼€å‘ä¸­çš„ç›¸å…³æœ¯è¯­">AOPå¼€å‘ä¸­çš„ç›¸å…³æœ¯è¯­<a title="#aopå¼€å‘ä¸­çš„ç›¸å…³æœ¯è¯­" href="#aopå¼€å‘ä¸­çš„ç›¸å…³æœ¯è¯­"></a></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDao</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">query</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>joinpoint(è¿æ¥ç‚¹) ï¼š å¯ä»¥è¢«æ‹¦æˆªåˆ°çš„ç‚¹ã€‚save(), query(),update(),delete()æ–¹æ³•éƒ½å¯ä»¥å¢å¼ºï¼Œè¿™äº›æ–¹æ³•å°±å¯ä»¥ç§°ä¸ºè¿æ¥ç‚¹ã€‚</li><li>pointcut(åˆ‡å…¥ç‚¹)ï¼šçœŸæ­£è¢«æ‹¦æˆªåˆ°çš„ç‚¹ã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼Œå¯ä»¥åªå¯¹save()æ–¹æ³•è¿›è¡Œå¢å¼ºï¼Œé‚£ä¹ˆsave()æ–¹æ³•å°±æ˜¯åˆ‡å…¥ç‚¹ã€‚</li><li>advice(å¢å¼º)ï¼šæ–¹æ³•å±‚é¢çš„å¢å¼ºï¼Œç°åœ¨å¯ä»¥å¯¹save()æ–¹æ³•è¿›è¡Œæƒé™æ ¡éªŒï¼Œæƒé™æ ¡éªŒ(checkPri())çš„æ–¹æ³•ç§°ä¸ºå¢å¼ºã€‚</li><li>introduction(å¼•ä»‹)ï¼šç±»å±‚é¢çš„å¢å¼ºã€‚</li><li>target(ç›®æ ‡)ï¼šè¢«å¢å¼ºçš„å¯¹è±¡ã€‚</li><li>weaving(ç»‡å…¥)ï¼šå°†å¢å¼º(advice)åº”ç”¨åˆ°ç›®æ ‡(target)çš„è¿‡ç¨‹</li><li>proxy(ä»£ç†)ï¼šä»£ç†å¯¹è±¡ï¼Œè¢«å¢å¼ºä»¥åçš„ä»£ç†å¯¹è±¡</li><li>aspect(åˆ‡é¢)ï¼šå¤šä¸ªå¢å¼º(advice)å’Œå¤šä¸ªåˆ‡å…¥ç‚¹(pointcut)çš„ç»„åˆ</li></ul><h3 id="aspectjçš„xmlé…ç½®æ¡ˆä¾‹">AspectJçš„XMLé…ç½®æ¡ˆä¾‹<a title="#aspectjçš„xmlé…ç½®æ¡ˆä¾‹" href="#aspectjçš„xmlé…ç½®æ¡ˆä¾‹"></a></h3><p>é¦–å…ˆåˆ›å»ºä¸€ä¸ªæ¥å£<code>ProductDao</code>ï¼Œåœ¨é‡Œé¢å®šä¹‰æ·»åŠ å•†å“ï¼ŒæŸ¥è¯¢å•†å“ï¼Œä¿®æ”¹å•†å“ï¼Œåˆ é™¤å•†å“æ–¹æ³•ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ProductDao</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Chen Rui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ProductDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ·»åŠ å•†å“</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">save</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ é™¤å•†å“</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">delete</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¿®æ”¹å•†å“</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">modify</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢å•†å“</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">query</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ç€åˆ›å»ºä¸€ä¸ªç±»<code>ProductDaoImpl</code>æ¥å®ç°è¯¥æ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ProductDaoçš„å®ç°ç±»</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Chen Rui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProductDaoImpl</span> <span class="keyword">implements</span> <span class="title">ProductDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ·»åŠ å•†å“&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;åˆ é™¤å•†å“&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">modify</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä¿®æ”¹å•†å“&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">query</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æŸ¥è¯¢å•†å“&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨ç›®çš„å°±æ˜¯ç»™<code>save()</code>æ–¹æ³•è¿›è¡Œå¢å¼ºï¼Œä½¿å¾—åœ¨è°ƒç”¨<code>save()</code>æ–¹æ³•å‰è¿›è¡Œæƒé™æ ¡éªŒã€‚</p><p>è¦å®ç°æ­¤åŠŸèƒ½ï¼Œå…ˆåˆ›å»ºä¸€ä¸ª<strong>å¢å¼ºç±»</strong>ï¼Œæˆ–è€…å«<strong>åˆ‡é¢ç±»</strong>ã€‚é‡Œé¢ç¼–å†™è¦å¢å¼ºçš„åŠŸèƒ½ï¼Œä¾‹å¦‚æƒé™æ ¡éªŒã€‚</p><p>åˆ›å»ºå¢å¼ºç±»<code>ProductEnhancer</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ProductDaoçš„å¢å¼ºç±»(åˆ‡é¢ç±»)</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Chen Rui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProductEnhancer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">checkPri</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ã€å‰ç½®å¢å¼ºã€‘æƒé™æ ¡éªŒ&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶ååˆ›å»ºé…ç½®æ–‡ä»¶<code>aspectj-xml.xml</code>æ¥é…ç½®ï¼Œè¯¥æ–‡ä»¶åæ­¤æ¡ˆä¾‹ä»…ç”¨äºæ¼”ç¤ºï¼Œå®é™…å¼€å‘ä¸­ä¸è¦é‡‡å–æ­¤åï¼Œä¾æ®å®é™…éœ€æ±‚ç¼–å†™ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">    http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="tag"><span class="string">    http://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®ç›®æ ‡å¯¹è±¡ï¼Œå³è¢«å¢å¼ºçš„å¯¹è±¡ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;productDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;learningspring.aop.aspectj.xml.demo2.ProductDaoImpl&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å°†å¢å¼ºç±»(åˆ‡é¢ç±»)äº¤ç»™Springç®¡ç† --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;productEnhancer&quot;</span> <span class="attr">class</span>=<span class="string">&quot;learningspring.aop.aspectj.xml.demo2.ProductEnhancer&quot;</span>/&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- é€šè¿‡å¯¹AOPçš„é…ç½®å®Œæˆå¯¹ç›®æ ‡å¯¹è±¡äº§ç”Ÿä»£ç† --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- è¡¨è¾¾å¼é…ç½®å“ªäº›ç±»çš„å“ªäº›æ–¹æ³•éœ€è¦è¿›è¡Œå¢å¼º --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å¯¹ProductDaoImplç±»ä¸­çš„saveæ–¹æ³•è¿›è¡Œå¢å¼º --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        â€œ*â€ è¡¨ç¤ºä»»æ„è¿”å›å€¼ç±»å‹</span></span><br><span class="line"><span class="comment">        â€œ..â€ è¡¨ç¤ºä»»æ„å‚æ•°</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;pointcut1&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* learningspring.aop.aspectj.xml.demo2.ProductDaoImpl.save(..))&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- é…ç½®åˆ‡é¢ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">ref</span>=<span class="string">&quot;productEnhancer&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- å‰ç½®å¢å¼º --&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- å®ç°åœ¨è°ƒç”¨saveæ–¹æ³•ä¹‹å‰è°ƒç”¨checkPriæ–¹æ³•æ¥è¿›è¡Œæƒé™æ ¡éªŒ--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">aop:before</span> <span class="attr">method</span>=<span class="string">&quot;checkPri&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointcut1&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è‡³æ­¤åˆ‡å…¥ç‚¹åŠåˆ‡é¢éƒ½å·²é…ç½®å®Œæˆï¼Œç¼–å†™æµ‹è¯•ç±»å’Œæ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.junit.runner.RunWith;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.ContextConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringJUnit4ClassRunner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * AspectJçš„XMLæ–¹å¼é…ç½®æµ‹è¯•ç±»</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Chen Rui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class="line"><span class="meta">@ContextConfiguration(&quot;classpath:aspectj-xml.xml&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AppTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource(name = &quot;productDao&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> ProductDao productDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">// å¯¹saveæ–¹æ³•è¿›è¡Œå¢å¼º</span></span><br><span class="line">        productDao.save();</span><br><span class="line"></span><br><span class="line">        productDao.delete();</span><br><span class="line">        </span><br><span class="line">        productDao.modify();</span><br><span class="line">        </span><br><span class="line">        productDao.query();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œ<code>test()</code>æ–¹æ³•ï¼Œæ§åˆ¶å°æ‰“å°ç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ã€å‰ç½®å¢å¼ºã€‘æƒé™æ ¡éªŒ</span><br><span class="line">æ·»åŠ å•†å“</span><br><span class="line">åˆ é™¤å•†å“</span><br><span class="line">ä¿®æ”¹å•†å“</span><br><span class="line">æŸ¥è¯¢å•†å“</span><br></pre></td></tr></table></figure><p>è‡³æ­¤å°±å®ç°äº†åœ¨ä¸ä¿®æ”¹<code>ProductDaoImpl</code>ç±»çš„æƒ…å†µä¸‹ï¼Œå¯¹å…¶ä¸­çš„<code>save()</code>æ–¹æ³•è¿›è¡Œå¢å¼ºã€‚</p><h3 id="springä¸­å¸¸ç”¨çš„å¢å¼ºç±»å‹">Springä¸­å¸¸ç”¨çš„å¢å¼ºç±»å‹<a title="#springä¸­å¸¸ç”¨çš„å¢å¼ºç±»å‹" href="#springä¸­å¸¸ç”¨çš„å¢å¼ºç±»å‹"></a></h3><h4 id="å‰ç½®å¢å¼º">å‰ç½®å¢å¼º<a title="#å‰ç½®å¢å¼º" href="#å‰ç½®å¢å¼º"></a></h4><p>åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œä¹‹å‰æ‰§è¡Œï¼Œå¯ä»¥è·å¾—åˆ‡å…¥ç‚¹çš„ä¿¡æ¯</p><p>ä¿®æ”¹ä¹‹å‰çš„<code>ProductEnhancer</code>ç±»çš„<code>checkPri()</code>æ–¹æ³•çš„å‚æ•°ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.aspectj.lang.JoinPoint;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ProductDaoçš„å¢å¼ºç±»(åˆ‡é¢ç±»)</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Chen Rui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProductEnhancer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">checkPri</span><span class="params">(JoinPoint joinPoint)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ã€å‰ç½®å¢å¼ºã€‘æƒé™æ ¡éªŒ&quot;</span> + joinPoint);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œæµ‹è¯•æ–¹æ³•ï¼Œæ§åˆ¶å°è¾“å‡º</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ã€å‰ç½®å¢å¼ºã€‘æƒé™æ ¡éªŒexecution(void learningspring.aop.aspectj.xml.demo2.ProductDao.save())</span><br><span class="line">æ·»åŠ å•†å“</span><br><span class="line">åˆ é™¤å•†å“</span><br><span class="line">ä¿®æ”¹å•†å“</span><br><span class="line">æŸ¥è¯¢å•†å“</span><br></pre></td></tr></table></figure><h4 id="åç½®å¢å¼º">åç½®å¢å¼º<a title="#åç½®å¢å¼º" href="#åç½®å¢å¼º"></a></h4><p>åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œä¹‹åæ‰§è¡Œï¼Œå¯ä»¥è·å¾—æ–¹æ³•çš„è¿”å›å€¼</p><p>é¦–å…ˆä¿®æ”¹<code>ProductDao</code>ä¸­çš„<code>delete()</code>æ–¹æ³•çš„è¿”å›å€¼ç±»å‹ï¼Œæ”¹æˆString</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ProductDao</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Chen Rui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ProductDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ·»åŠ å•†å“</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">save</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ é™¤å•†å“</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">String <span class="title">delete</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¿®æ”¹å•†å“</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">modify</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢å•†å“</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">query</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å†ä¿®æ”¹<code>ProductDaoImpl</code>ä¸­çš„<code>delete()</code>æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ProductDaoçš„å®ç°ç±»</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Chen Rui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProductDaoImpl</span> <span class="keyword">implements</span> <span class="title">ProductDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ·»åŠ å•†å“&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">delete</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;åˆ é™¤å•†å“&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Date().toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">modify</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä¿®æ”¹å•†å“&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">query</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æŸ¥è¯¢å•†å“&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹<code>ProductEnhancer</code>ç±»ï¼Œæ·»åŠ <code>writeLog()</code>æ–¹æ³•ï¼Œå®ç°å†™æ—¥å¿—åŠŸèƒ½</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ProductDaoçš„å¢å¼ºç±»(åˆ‡é¢ç±»)</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Chen Rui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProductEnhancer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‰ç½®å¢å¼ºæ¡ˆä¾‹</span></span><br><span class="line"><span class="comment">     * åœ¨è°ƒç”¨saveæ–¹æ³•ä¹‹å‰è¿›è¡Œæƒé™æ ¡éªŒ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> joinPoint åˆ‡å…¥ç‚¹å¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">checkPri</span><span class="params">(JoinPoint joinPoint)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ã€å‰ç½®å¢å¼ºã€‘æƒé™æ ¡éªŒ&quot;</span> + joinPoint);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åç½®å¢å¼ºæ¡ˆä¾‹</span></span><br><span class="line"><span class="comment">     * åœ¨è°ƒç”¨deleteæ–¹æ³•ä¹‹åï¼Œå†™å…¥æ—¥å¿—è®°å½•æ“ä½œæ—¶é—´</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> result ç›®æ ‡æ–¹æ³•è¿”å›çš„å¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">writeLog</span><span class="params">(Object result)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ã€åç½®å¢å¼ºã€‘å†™å…¥æ—¥å¿— æ“ä½œæ—¶é—´ï¼š&quot;</span> + result.toString());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åä¿®æ”¹<code>aspectj.xml</code>é…ç½®æ–‡ä»¶ï¼Œé…ç½®æ–°çš„<strong>åˆ‡å…¥ç‚¹</strong>å’Œ<strong>åˆ‡é¢</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">    http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="tag"><span class="string">    http://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®ç›®æ ‡å¯¹è±¡ï¼Œå³è¢«å¢å¼ºçš„å¯¹è±¡ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;productDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;learningspring.aop.aspectj.xml.demo2.ProductDaoImpl&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å°†å¢å¼ºç±»(åˆ‡é¢ç±»)äº¤ç»™Springç®¡ç† --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;productEnhancer&quot;</span> <span class="attr">class</span>=<span class="string">&quot;learningspring.aop.aspectj.xml.demo2.ProductEnhancer&quot;</span>/&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- é€šè¿‡å¯¹AOPçš„é…ç½®å®Œæˆå¯¹ç›®æ ‡å¯¹è±¡äº§ç”Ÿä»£ç† --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- è¡¨è¾¾å¼é…ç½®å“ªäº›ç±»çš„å“ªäº›æ–¹æ³•éœ€è¦è¿›è¡Œå¢å¼º --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å¯¹ProductDaoImplç±»ä¸­çš„saveæ–¹æ³•è¿›è¡Œå¢å¼º --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        â€œ*â€ è¡¨ç¤ºä»»æ„è¿”å›å€¼ç±»å‹</span></span><br><span class="line"><span class="comment">        â€œ..â€ è¡¨ç¤ºä»»æ„å‚æ•°</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å‰ç½®å¢å¼ºçš„åˆ‡å…¥ç‚¹é…ç½® --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;pointcut1&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* learningspring.aop.aspectj.xml.demo2.ProductDaoImpl.save(..))&quot;</span>/&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!-- åç½®å¢å¼ºçš„åˆ‡å…¥ç‚¹é…ç½® --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;pointcut2&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* learningspring.aop.aspectj.xml.demo2.ProductDaoImpl.delete(..))&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- é…ç½®åˆ‡é¢ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">ref</span>=<span class="string">&quot;productEnhancer&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- å‰ç½®å¢å¼º --&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- å®ç°åœ¨è°ƒç”¨saveæ–¹æ³•ä¹‹å‰è°ƒç”¨checkPriæ–¹æ³•æ¥è¿›è¡Œæƒé™æ ¡éªŒ--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">aop:before</span> <span class="attr">method</span>=<span class="string">&quot;checkPri&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointcut1&quot;</span>/&gt;</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment">&lt;!-- åç½®å¢å¼º --&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- returningé‡Œé¢çš„å€¼å¿…é¡»å’ŒwriteLog()æ–¹æ³•é‡Œçš„å‚æ•°åç›¸åŒï¼Œæœ¬æ¡ˆä¾‹ä¸ºresult--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">aop:after-returning</span> <span class="attr">method</span>=<span class="string">&quot;writeLog&quot;</span> <span class="attr">returning</span>=<span class="string">&quot;result&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointcut2&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ‰§è¡Œæµ‹è¯•æ–¹æ³•ï¼Œæ§åˆ¶å°æ‰“å°ç»“æœ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ã€å‰ç½®å¢å¼ºã€‘æƒé™æ ¡éªŒexecution(void learningspring.aop.aspectj.xml.demo2.ProductDao.save())</span><br><span class="line">æ·»åŠ å•†å“</span><br><span class="line">åˆ é™¤å•†å“</span><br><span class="line">ã€åç½®å¢å¼ºã€‘å†™å…¥æ—¥å¿— æ“ä½œæ—¶é—´ï¼šTue Mar 19 15:59:48 CST 2019</span><br><span class="line">ä¿®æ”¹å•†å“</span><br><span class="line">æŸ¥è¯¢å•†å“</span><br></pre></td></tr></table></figure><h4 id="ç¯ç»•å¢å¼º">ç¯ç»•å¢å¼º<a title="#ç¯ç»•å¢å¼º" href="#ç¯ç»•å¢å¼º"></a></h4><p>åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œä¹‹å‰å’Œä¹‹åéƒ½æ‰§è¡Œ</p><p>åˆ©ç”¨ç¯ç»•å¢å¼ºæ¥å®ç°åœ¨è°ƒç”¨<code>modify()</code>æ–¹æ³•å‰åè¿›è¡Œæ€§èƒ½ç›‘æ§</p><p>é¦–å…ˆä¿®æ”¹<code>ProductEnhancer</code>ç±»ï¼Œæ·»åŠ <code>monitor()</code>æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ProductDaoçš„å¢å¼ºç±»(åˆ‡é¢ç±»)</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Chen Rui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProductEnhancer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‰ç½®å¢å¼ºæ¡ˆä¾‹</span></span><br><span class="line"><span class="comment">     * åœ¨è°ƒç”¨saveæ–¹æ³•ä¹‹å‰è¿›è¡Œæƒé™æ ¡éªŒ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> joinPoint åˆ‡å…¥ç‚¹å¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">checkPri</span><span class="params">(JoinPoint joinPoint)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ã€å‰ç½®å¢å¼ºã€‘æƒé™æ ¡éªŒ&quot;</span> + joinPoint);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åç½®å¢å¼ºæ¡ˆä¾‹</span></span><br><span class="line"><span class="comment">     * åœ¨è°ƒç”¨deleteæ–¹æ³•ä¹‹åï¼Œå†™å…¥æ—¥å¿—è®°å½•æ“ä½œæ—¶é—´</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> result ç›®æ ‡æ–¹æ³•è¿”å›çš„å¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">writeLog</span><span class="params">(Object result)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ã€åç½®å¢å¼ºã€‘å†™å…¥æ—¥å¿— æ“ä½œæ—¶é—´ï¼š&quot;</span> + result.toString());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç¯ç»•å¢å¼º</span></span><br><span class="line"><span class="comment">     * åœ¨è°ƒç”¨modifyæ–¹æ³•å‰åï¼Œæ˜¾ç¤ºæ€§èƒ½å‚æ•°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> joinPoint åˆ‡å…¥ç‚¹å¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Throwable å¯æŠ›å‡ºçš„å¼‚å¸¸</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">monitor</span><span class="params">(ProceedingJoinPoint joinPoint)</span> <span class="keyword">throws</span> Throwable</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ã€ç¯ç»•å¢å¼ºã€‘å½“å‰ç©ºé—²å†…å­˜&quot;</span> + Runtime.getRuntime().freeMemory()/(<span class="number">1024</span> * <span class="number">1024</span>) + <span class="string">&quot;MB&quot;</span>);</span><br><span class="line">        Object obj = joinPoint.proceed();</span><br><span class="line">        System.out.println(<span class="string">&quot;ã€ç¯ç»•å¢å¼ºã€‘å½“å‰ç©ºé—²å†…å­˜&quot;</span> + Runtime.getRuntime().freeMemory()/(<span class="number">1024</span> * <span class="number">1024</span>) + <span class="string">&quot;MB&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> obj;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åå†ä¿®æ”¹<code>aspectj.xml</code>é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ æ–°çš„<strong>åˆ‡å…¥ç‚¹</strong>å’Œ<strong>åˆ‡é¢</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">    http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="tag"><span class="string">    http://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®ç›®æ ‡å¯¹è±¡ï¼Œå³è¢«å¢å¼ºçš„å¯¹è±¡ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;productDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;learningspring.aop.aspectj.xml.demo2.ProductDaoImpl&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å°†å¢å¼ºç±»(åˆ‡é¢ç±»)äº¤ç»™Springç®¡ç† --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;productEnhancer&quot;</span> <span class="attr">class</span>=<span class="string">&quot;learningspring.aop.aspectj.xml.demo2.ProductEnhancer&quot;</span>/&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- é€šè¿‡å¯¹AOPçš„é…ç½®å®Œæˆå¯¹ç›®æ ‡å¯¹è±¡äº§ç”Ÿä»£ç† --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- è¡¨è¾¾å¼é…ç½®å“ªäº›ç±»çš„å“ªäº›æ–¹æ³•éœ€è¦è¿›è¡Œå¢å¼º --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å¯¹ProductDaoImplç±»ä¸­çš„saveæ–¹æ³•è¿›è¡Œå¢å¼º --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        â€œ*â€ è¡¨ç¤ºä»»æ„è¿”å›å€¼ç±»å‹</span></span><br><span class="line"><span class="comment">        â€œ..â€ è¡¨ç¤ºä»»æ„å‚æ•°</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å‰ç½®å¢å¼ºçš„åˆ‡å…¥ç‚¹é…ç½® --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;pointcut1&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* learningspring.aop.aspectj.xml.demo2.ProductDaoImpl.save(..))&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- åç½®å¢å¼ºçš„åˆ‡å…¥ç‚¹é…ç½® --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;pointcut2&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* learningspring.aop.aspectj.xml.demo2.ProductDaoImpl.delete(..))&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- ç¯ç»•å¢å¼ºçš„åˆ‡å…¥ç‚¹é…ç½® --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;pointcut3&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* learningspring.aop.aspectj.xml.demo2.ProductDaoImpl.modify(..))&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- é…ç½®åˆ‡é¢ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">ref</span>=<span class="string">&quot;productEnhancer&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- å‰ç½®å¢å¼º --&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- å®ç°åœ¨è°ƒç”¨saveæ–¹æ³•ä¹‹å‰è°ƒç”¨checkPriæ–¹æ³•æ¥è¿›è¡Œæƒé™æ ¡éªŒ--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">aop:before</span> <span class="attr">method</span>=<span class="string">&quot;checkPri&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointcut1&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- åç½®å¢å¼º --&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- returningé‡Œé¢çš„å€¼å¿…é¡»å’ŒwriteLog()æ–¹æ³•é‡Œçš„å‚æ•°åç›¸åŒï¼Œæœ¬æ¡ˆä¾‹ä¸ºresult--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">aop:after-returning</span> <span class="attr">method</span>=<span class="string">&quot;writeLog&quot;</span> <span class="attr">returning</span>=<span class="string">&quot;result&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointcut2&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- ç¯ç»•å¢å¼º --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">aop:around</span> <span class="attr">method</span>=<span class="string">&quot;monitor&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointcut3&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿è¡Œæµ‹è¯•æ–¹æ³•ï¼Œæ§åˆ¶å°æ‰“å°ç»“æœï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ã€å‰ç½®å¢å¼ºã€‘æƒé™æ ¡éªŒexecution(void learningspring.aop.aspectj.xml.demo2.ProductDao.save())</span><br><span class="line">æ·»åŠ å•†å“</span><br><span class="line">åˆ é™¤å•†å“</span><br><span class="line">ã€åç½®å¢å¼ºã€‘å†™å…¥æ—¥å¿— æ“ä½œæ—¶é—´ï¼šTue Mar 19 15:58:49 CST 2019</span><br><span class="line">ã€ç¯ç»•å¢å¼ºã€‘å½“å‰ç©ºé—²å†…å­˜185MB</span><br><span class="line">ä¿®æ”¹å•†å“</span><br><span class="line">ã€ç¯ç»•å¢å¼ºã€‘å½“å‰ç©ºé—²å†…å­˜185MB</span><br><span class="line">æŸ¥è¯¢å•†å“</span><br></pre></td></tr></table></figure><h4 id="å¼‚å¸¸æŠ›å‡ºå¢å¼º">å¼‚å¸¸æŠ›å‡ºå¢å¼º<a title="#å¼‚å¸¸æŠ›å‡ºå¢å¼º" href="#å¼‚å¸¸æŠ›å‡ºå¢å¼º"></a></h4><p>åœ¨ç¨‹åºå‡ºç°å¼‚å¸¸æ—¶æ‰§è¡Œ</p><p>åˆ©ç”¨å¼‚å¸¸æŠ›å‡ºå¢å¼ºæ¥å®ç°è·å–å¼‚å¸¸ä¿¡æ¯çš„åŠŸèƒ½</p><p>é¦–å…ˆä¿®æ”¹<code>ProductDaoImpl</code>ä¸­çš„<code>query()</code>æ–¹æ³•ï¼Œä½¿è¯¥æ–¹æ³•æŠ›å‡ºå¼‚å¸¸</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ProductDaoçš„å®ç°ç±»</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Chen Rui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProductDaoImpl</span> <span class="keyword">implements</span> <span class="title">ProductDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ·»åŠ å•†å“&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">query</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æŸ¥è¯¢å•†å“&quot;</span>);</span><br><span class="line">        <span class="keyword">int</span> a = <span class="number">1</span>/<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">modify</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä¿®æ”¹å•†å“&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">delete</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;åˆ é™¤å•†å“&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Date().toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ç€ä¿®æ”¹<code>ProductEnhancer</code>ç±»ï¼Œæ·»åŠ <code>exception()</code>æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ProductDaoçš„å¢å¼ºç±»(åˆ‡é¢ç±»)</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Chen Rui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProductEnhancer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‰ç½®å¢å¼ºæ¡ˆä¾‹</span></span><br><span class="line"><span class="comment">     * åœ¨è°ƒç”¨saveæ–¹æ³•ä¹‹å‰è¿›è¡Œæƒé™æ ¡éªŒ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> joinPoint åˆ‡å…¥ç‚¹å¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">checkPri</span><span class="params">(JoinPoint joinPoint)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ã€å‰ç½®å¢å¼ºã€‘æƒé™æ ¡éªŒ&quot;</span> + joinPoint);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åç½®å¢å¼ºæ¡ˆä¾‹</span></span><br><span class="line"><span class="comment">     * åœ¨è°ƒç”¨deleteæ–¹æ³•ä¹‹åï¼Œå†™å…¥æ—¥å¿—è®°å½•æ“ä½œæ—¶é—´</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> result ç›®æ ‡æ–¹æ³•è¿”å›çš„å¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">writeLog</span><span class="params">(Object result)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ã€åç½®å¢å¼ºã€‘å†™å…¥æ—¥å¿— æ“ä½œæ—¶é—´ï¼š&quot;</span> + result.toString());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç¯ç»•å¢å¼º</span></span><br><span class="line"><span class="comment">     * åœ¨è°ƒç”¨modifyæ–¹æ³•å‰åï¼Œæ˜¾ç¤ºæ€§èƒ½å‚æ•°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> joinPoint åˆ‡å…¥ç‚¹å¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Throwable å¯æŠ›å‡ºçš„å¼‚å¸¸</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">monitor</span><span class="params">(ProceedingJoinPoint joinPoint)</span> <span class="keyword">throws</span> Throwable</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ã€ç¯ç»•å¢å¼ºã€‘å½“å‰ç©ºé—²å†…å­˜&quot;</span> + Runtime.getRuntime().freeMemory()/(<span class="number">1024</span> * <span class="number">1024</span>) + <span class="string">&quot;MB&quot;</span>);</span><br><span class="line">        Object obj = joinPoint.proceed();</span><br><span class="line">        System.out.println(<span class="string">&quot;ã€ç¯ç»•å¢å¼ºã€‘å½“å‰ç©ºé—²å†…å­˜&quot;</span> + Runtime.getRuntime().freeMemory()/(<span class="number">1024</span> * <span class="number">1024</span>) + <span class="string">&quot;MB&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> obj;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¼‚å¸¸æŠ›å‡ºå¢å¼º</span></span><br><span class="line"><span class="comment">     * åœ¨è°ƒç”¨queryæ—¶è‹¥æŠ›å‡ºå¼‚å¸¸åˆ™æ‰“å°å¼‚å¸¸ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ex å¼‚å¸¸å¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">exception</span><span class="params">(Throwable ex)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ã€å¼‚å¸¸æŠ›å‡ºå¢å¼ºã€‘&quot;</span> + <span class="string">&quot;å¼‚å¸¸ä¿¡æ¯ï¼š&quot;</span> +ex.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åå†ä¿®æ”¹<code>aspectj-xml.xml</code>é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ æ–°çš„<strong>åˆ‡å…¥ç‚¹</strong>å’Œ<strong>åˆ‡é¢</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">    http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="tag"><span class="string">    http://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®ç›®æ ‡å¯¹è±¡ï¼Œå³è¢«å¢å¼ºçš„å¯¹è±¡ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;productDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;learningspring.aop.aspectj.xml.demo2.ProductDaoImpl&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å°†å¢å¼ºç±»(åˆ‡é¢ç±»)äº¤ç»™Springç®¡ç† --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;productEnhancer&quot;</span> <span class="attr">class</span>=<span class="string">&quot;learningspring.aop.aspectj.xml.demo2.ProductEnhancer&quot;</span>/&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- é€šè¿‡å¯¹AOPçš„é…ç½®å®Œæˆå¯¹ç›®æ ‡å¯¹è±¡äº§ç”Ÿä»£ç† --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- è¡¨è¾¾å¼é…ç½®å“ªäº›ç±»çš„å“ªäº›æ–¹æ³•éœ€è¦è¿›è¡Œå¢å¼º --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å¯¹ProductDaoImplç±»ä¸­çš„saveæ–¹æ³•è¿›è¡Œå¢å¼º --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        â€œ*â€ è¡¨ç¤ºä»»æ„è¿”å›å€¼ç±»å‹</span></span><br><span class="line"><span class="comment">        â€œ..â€ è¡¨ç¤ºä»»æ„å‚æ•°</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å‰ç½®å¢å¼ºçš„åˆ‡å…¥ç‚¹é…ç½® --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;pointcut1&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* learningspring.aop.aspectj.xml.demo2.ProductDaoImpl.save(..))&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- åç½®å¢å¼ºçš„åˆ‡å…¥ç‚¹é…ç½® --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;pointcut2&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* learningspring.aop.aspectj.xml.demo2.ProductDaoImpl.delete(..))&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- ç¯ç»•å¢å¼ºçš„åˆ‡å…¥ç‚¹é…ç½® --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;pointcut3&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* learningspring.aop.aspectj.xml.demo2.ProductDaoImpl.modify(..))&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- å¼‚å¸¸æŠ›å‡ºå¢å¼ºçš„åˆ‡å…¥ç‚¹é…ç½® --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;pointcut4&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* learningspring.aop.aspectj.xml.demo2.ProductDaoImpl.query(..))&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- é…ç½®åˆ‡é¢ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">ref</span>=<span class="string">&quot;productEnhancer&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- å‰ç½®å¢å¼º --&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- å®ç°åœ¨è°ƒç”¨saveæ–¹æ³•ä¹‹å‰è°ƒç”¨checkPriæ–¹æ³•æ¥è¿›è¡Œæƒé™æ ¡éªŒ--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">aop:before</span> <span class="attr">method</span>=<span class="string">&quot;checkPri&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointcut1&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- åç½®å¢å¼º --&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- returningé‡Œé¢çš„å€¼å¿…é¡»å’ŒwriteLog()æ–¹æ³•é‡Œçš„å‚æ•°åç›¸åŒï¼Œæœ¬æ¡ˆä¾‹ä¸ºresult--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">aop:after-returning</span> <span class="attr">method</span>=<span class="string">&quot;writeLog&quot;</span> <span class="attr">returning</span>=<span class="string">&quot;result&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointcut2&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- ç¯ç»•å¢å¼º --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">aop:around</span> <span class="attr">method</span>=<span class="string">&quot;monitor&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointcut3&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- å¼‚å¸¸æŠ›å‡ºå¢å¼º --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">aop:after-throwing</span> <span class="attr">method</span>=<span class="string">&quot;exception&quot;</span> <span class="attr">throwing</span>=<span class="string">&quot;ex&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointcut4&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æœ€åæ‰§è¡Œæµ‹è¯•æ–¹æ³•ï¼Œæ§åˆ¶å°è¾“å‡ºç»“æœï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ã€å‰ç½®å¢å¼ºã€‘æƒé™æ ¡éªŒexecution(void learningspring.aop.aspectj.xml.demo2.ProductDao.save())</span><br><span class="line">æ·»åŠ å•†å“</span><br><span class="line">åˆ é™¤å•†å“</span><br><span class="line">ã€åç½®å¢å¼ºã€‘å†™å…¥æ—¥å¿— æ“ä½œæ—¶é—´ï¼šTue Mar 19 15:58:16 CST 2019</span><br><span class="line">ã€ç¯ç»•å¢å¼ºã€‘å½“å‰ç©ºé—²å†…å­˜183MB</span><br><span class="line">ä¿®æ”¹å•†å“</span><br><span class="line">ã€ç¯ç»•å¢å¼ºã€‘å½“å‰ç©ºé—²å†…å­˜183MB</span><br><span class="line">æŸ¥è¯¢å•†å“</span><br><span class="line">ã€å¼‚å¸¸æŠ›å‡ºå¢å¼ºã€‘å¼‚å¸¸ä¿¡æ¯ï¼š&#x2F; by zero</span><br></pre></td></tr></table></figure><h4 id="æœ€ç»ˆå¢å¼º">æœ€ç»ˆå¢å¼º<a title="#æœ€ç»ˆå¢å¼º" href="#æœ€ç»ˆå¢å¼º"></a></h4><p>æ— è®ºä»£ç æ˜¯å¦æœ‰å¼‚å¸¸æœ€ç»ˆéƒ½ä¼šæ‰§è¡Œ</p><p>ç»§ç»­åœ¨å¼‚å¸¸æŠ›å‡ºå¢å¼ºçš„ä»£ç ä¿®æ”¹ï¼Œå®ç°æ— è®ºæ˜¯å¦æŠ›å‡ºå¼‚å¸¸éƒ½ä¼šæ‰“å°å½“å‰æ—¶é—´ä¿¡æ¯</p><p>é¦–å…ˆä¿®æ”¹<code>ProductEnhancer</code>ç±»ï¼Œæ·»åŠ <code>finallyAdvice()</code>æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ProductDaoçš„å¢å¼ºç±»(åˆ‡é¢ç±»)</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Chen Rui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProductEnhancer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‰ç½®å¢å¼ºæ¡ˆä¾‹</span></span><br><span class="line"><span class="comment">     * åœ¨è°ƒç”¨saveæ–¹æ³•ä¹‹å‰è¿›è¡Œæƒé™æ ¡éªŒ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> joinPoint åˆ‡å…¥ç‚¹å¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">checkPri</span><span class="params">(JoinPoint joinPoint)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ã€å‰ç½®å¢å¼ºã€‘æƒé™æ ¡éªŒ&quot;</span> + joinPoint);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åç½®å¢å¼ºæ¡ˆä¾‹</span></span><br><span class="line"><span class="comment">     * åœ¨è°ƒç”¨deleteæ–¹æ³•ä¹‹åï¼Œå†™å…¥æ—¥å¿—è®°å½•æ“ä½œæ—¶é—´</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> result ç›®æ ‡æ–¹æ³•è¿”å›çš„å¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">writeLog</span><span class="params">(Object result)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ã€åç½®å¢å¼ºã€‘å†™å…¥æ—¥å¿— æ“ä½œæ—¶é—´ï¼š&quot;</span> + result.toString());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç¯ç»•å¢å¼º</span></span><br><span class="line"><span class="comment">     * åœ¨è°ƒç”¨modifyæ–¹æ³•å‰åï¼Œæ˜¾ç¤ºæ€§èƒ½å‚æ•°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> joinPoint åˆ‡å…¥ç‚¹å¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Throwable å¯æŠ›å‡ºçš„å¼‚å¸¸</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">monitor</span><span class="params">(ProceedingJoinPoint joinPoint)</span> <span class="keyword">throws</span> Throwable</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ã€ç¯ç»•å¢å¼ºã€‘å½“å‰ç©ºé—²å†…å­˜&quot;</span> + Runtime.getRuntime().freeMemory()/(<span class="number">1024</span> * <span class="number">1024</span>) + <span class="string">&quot;MB&quot;</span>);</span><br><span class="line">        Object obj = joinPoint.proceed();</span><br><span class="line">        System.out.println(<span class="string">&quot;ã€ç¯ç»•å¢å¼ºã€‘å½“å‰ç©ºé—²å†…å­˜&quot;</span> + Runtime.getRuntime().freeMemory()/(<span class="number">1024</span> * <span class="number">1024</span>) + <span class="string">&quot;MB&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> obj;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¼‚å¸¸æŠ›å‡ºå¢å¼º</span></span><br><span class="line"><span class="comment">     * åœ¨è°ƒç”¨queryæ—¶è‹¥æŠ›å‡ºå¼‚å¸¸åˆ™æ‰“å°å¼‚å¸¸ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ex å¼‚å¸¸å¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">exception</span><span class="params">(Throwable ex)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ã€å¼‚å¸¸æŠ›å‡ºå¢å¼ºã€‘&quot;</span> + <span class="string">&quot;å¼‚å¸¸ä¿¡æ¯ï¼š&quot;</span> +ex.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æœ€ç»ˆå¢å¼º</span></span><br><span class="line"><span class="comment">     * æ— è®ºqueryæ–¹æ³•æ˜¯å¦æŠ›å‡ºå¼‚å¸¸éƒ½æ‰“å°å½“å‰æ—¶é—´</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">finallyAdvice</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ã€æœ€ç»ˆå¢å¼ºã€‘&quot;</span> + <span class="keyword">new</span> Date().toString());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹<code>aspectj.xml</code>é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ æ–°çš„<strong>åˆ‡é¢</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">    http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="tag"><span class="string">    http://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®ç›®æ ‡å¯¹è±¡ï¼Œå³è¢«å¢å¼ºçš„å¯¹è±¡ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;productDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;learningspring.aop.aspectj.xml.demo2.ProductDaoImpl&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å°†å¢å¼ºç±»(åˆ‡é¢ç±»)äº¤ç»™Springç®¡ç† --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;productEnhancer&quot;</span> <span class="attr">class</span>=<span class="string">&quot;learningspring.aop.aspectj.xml.demo2.ProductEnhancer&quot;</span>/&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- é€šè¿‡å¯¹AOPçš„é…ç½®å®Œæˆå¯¹ç›®æ ‡å¯¹è±¡äº§ç”Ÿä»£ç† --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- è¡¨è¾¾å¼é…ç½®å“ªäº›ç±»çš„å“ªäº›æ–¹æ³•éœ€è¦è¿›è¡Œå¢å¼º --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å¯¹ProductDaoImplç±»ä¸­çš„saveæ–¹æ³•è¿›è¡Œå¢å¼º --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        â€œ*â€ è¡¨ç¤ºä»»æ„è¿”å›å€¼ç±»å‹</span></span><br><span class="line"><span class="comment">        â€œ..â€ è¡¨ç¤ºä»»æ„å‚æ•°</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å‰ç½®å¢å¼ºçš„åˆ‡å…¥ç‚¹é…ç½® --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;pointcut1&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* learningspring.aop.aspectj.xml.demo2.ProductDaoImpl.save(..))&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- åç½®å¢å¼ºçš„åˆ‡å…¥ç‚¹é…ç½® --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;pointcut2&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* learningspring.aop.aspectj.xml.demo2.ProductDaoImpl.delete(..))&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- ç¯ç»•å¢å¼ºçš„åˆ‡å…¥ç‚¹é…ç½® --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;pointcut3&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* learningspring.aop.aspectj.xml.demo2.ProductDaoImpl.modify(..))&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- å¼‚å¸¸æŠ›å‡ºå¢å¼ºçš„åˆ‡å…¥ç‚¹é…ç½® --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;pointcut4&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* learningspring.aop.aspectj.xml.demo2.ProductDaoImpl.query(..))&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- é…ç½®åˆ‡é¢ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">ref</span>=<span class="string">&quot;productEnhancer&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- å‰ç½®å¢å¼º --&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- å®ç°åœ¨è°ƒç”¨saveæ–¹æ³•ä¹‹å‰è°ƒç”¨checkPriæ–¹æ³•æ¥è¿›è¡Œæƒé™æ ¡éªŒ--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">aop:before</span> <span class="attr">method</span>=<span class="string">&quot;checkPri&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointcut1&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- åç½®å¢å¼º --&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- returningé‡Œé¢çš„å€¼å¿…é¡»å’ŒwriteLog()æ–¹æ³•é‡Œçš„å‚æ•°åç›¸åŒï¼Œæœ¬æ¡ˆä¾‹ä¸ºresult--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">aop:after-returning</span> <span class="attr">method</span>=<span class="string">&quot;writeLog&quot;</span> <span class="attr">returning</span>=<span class="string">&quot;result&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointcut2&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- ç¯ç»•å¢å¼º --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">aop:around</span> <span class="attr">method</span>=<span class="string">&quot;monitor&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointcut3&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- å¼‚å¸¸æŠ›å‡ºå¢å¼º --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">aop:after-throwing</span> <span class="attr">method</span>=<span class="string">&quot;exception&quot;</span> <span class="attr">throwing</span>=<span class="string">&quot;ex&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointcut4&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- æœ€ç»ˆå¢å¼º --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">aop:after</span> <span class="attr">method</span>=<span class="string">&quot;finallyAdvice&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointcut4&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æœ€åè¿è¡Œæµ‹è¯•ä»£ç ï¼Œæ§åˆ¶å°è¾“å‡ºç»“æœï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ã€å‰ç½®å¢å¼ºã€‘æƒé™æ ¡éªŒexecution(void learningspring.aop.aspectj.xml.demo2.ProductDao.save())</span><br><span class="line">æ·»åŠ å•†å“</span><br><span class="line">åˆ é™¤å•†å“</span><br><span class="line">ã€åç½®å¢å¼ºã€‘å†™å…¥æ—¥å¿— æ“ä½œæ—¶é—´ï¼šTue Mar 19 15:57:01 CST 2019</span><br><span class="line">ã€ç¯ç»•å¢å¼ºã€‘å½“å‰ç©ºé—²å†…å­˜183MB</span><br><span class="line">ä¿®æ”¹å•†å“</span><br><span class="line">ã€ç¯ç»•å¢å¼ºã€‘å½“å‰ç©ºé—²å†…å­˜183MB</span><br><span class="line">æŸ¥è¯¢å•†å“</span><br><span class="line">ã€æœ€ç»ˆå¢å¼ºã€‘Tue Mar 19 15:57:01 CST 2019</span><br><span class="line">ã€å¼‚å¸¸æŠ›å‡ºå¢å¼ºã€‘å¼‚å¸¸ä¿¡æ¯ï¼š&#x2F; by zero</span><br></pre></td></tr></table></figure><h3 id="aopåˆ‡å…¥ç‚¹è¡¨è¾¾å¼è¯­æ³•">AOPåˆ‡å…¥ç‚¹è¡¨è¾¾å¼è¯­æ³•<a title="#aopåˆ‡å…¥ç‚¹è¡¨è¾¾å¼è¯­æ³•" href="#aopåˆ‡å…¥ç‚¹è¡¨è¾¾å¼è¯­æ³•"></a></h3><p>AOPåˆ‡å…¥ç‚¹è¡¨è¾¾å¼æ˜¯åŸºäºexecutionçš„å‡½æ•°å®Œæˆçš„</p><p>è¯­æ³•ï¼š<strong>[è®¿é—®ä¿®é¥°ç¬¦] æ–¹æ³•è¿”å›å€¼ åŒ…å.ç±»å.æ–¹æ³•å(å‚æ•°)</strong></p><p>â€œ*â€ è¡¨ç¤ºä»»æ„è¿”å›å€¼ç±»å‹ â€œâ€¦â€ è¡¨ç¤ºä»»æ„å‚æ•°</p><ul><li><code>public void learningspring.aop.aspectj.xml.demo2.ProductDaoImpl.save(..)</code>ï¼šå…·ä½“åˆ°æŸä¸ªå¢å¼ºçš„æ–¹æ³•</li><li><code>* *.*.*.*Dao.save(..)</code>ï¼šæ‰€æœ‰åŒ…ä¸‹çš„æ‰€æœ‰ä»¥Daoç»“å°¾çš„ç±»ä¸­çš„saveæ–¹æ³•éƒ½ä¼šè¢«å¢å¼º</li><li><code>* learningspring.aop.aspectj.xml.demo2.ProductDaoImpl+.save(..)</code>ï¼šProductDaoImplåŠå…¶å­ç±»çš„saveæ–¹æ³•éƒ½ä¼šè¢«å¢å¼º</li><li><code>* learningspring.aop.aspectj.xml..*.*(..)</code>ï¼šxmlåŒ…åŠå…¶å­åŒ…çš„æ‰€æœ‰ç±»çš„æ–¹æ³•éƒ½ä¼šè¢«å¢å¼º</li></ul><h3 id="aspectjçš„æ³¨è§£é…ç½®æ¡ˆä¾‹">AspectJçš„æ³¨è§£é…ç½®æ¡ˆä¾‹<a title="#aspectjçš„æ³¨è§£é…ç½®æ¡ˆä¾‹" href="#aspectjçš„æ³¨è§£é…ç½®æ¡ˆä¾‹"></a></h3><p>é¦–å…ˆä¹Ÿæ˜¯åˆ›å»ºä¸€ä¸ªæ¥å£<code>ProductDao</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ProductDaoæ¥å£</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Chen Rui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ProductDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ·»åŠ å•†å“</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">save</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢å•†å“</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">query</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¿®æ”¹å•†å“</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">modify</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ é™¤å•†å“</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">String <span class="title">delete</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶ååˆ›å»ºä¸€ä¸ªDaoå®ç°ç±»<code>ProductDaoImpl</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ProductDaoçš„å®ç°ç±»</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Chen Rui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProductDaoImpl</span> <span class="keyword">implements</span> <span class="title">ProductDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ·»åŠ å•†å“&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">delete</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;åˆ é™¤å•†å“&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Date().toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">modify</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä¿®æ”¹å•†å“&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">query</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æŸ¥è¯¢å•†å“&quot;</span>);</span><br><span class="line">        <span class="keyword">int</span> a = <span class="number">1</span>/<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ç€åˆ›å»º<strong>å¢å¼ºç±»</strong><code>ProductEnhancer</code>ï¼Œåœ¨è¯¥ç±»é‡Œé¢ä½¿ç”¨æ³¨è§£</p><p>ä½¿ç”¨<code>@Pointcut</code>æ³¨è§£å¯ä»¥é…ç½®åˆ‡å…¥ç‚¹ä¿¡æ¯ï¼Œåœ¨è¾ƒå¤šçš„æ–¹æ³•éƒ½è¦ä½¿ç”¨åŒä¸€ä¸ªå¢å¼ºæ—¶ï¼Œå°±å¯ä»¥é…ç½®ä¸€ä¸ªåˆ‡å…¥ç‚¹è®©ç›®æ ‡æ–¹æ³•éƒ½å»å¼•ç”¨</p><p><code>@Before</code>ï¼šå‰ç½®å¢å¼º</p><p><code>@AfterReturning</code>ï¼šåç½®å¢å¼ºï¼Œå…¶ä¸­çš„returningçš„å€¼å¿…é¡»å’Œæ–¹æ³•ä¼ å…¥çš„å‚æ•°åç›¸åŒ</p><p><code>@Around</code>ï¼šç¯ç»•å¢å¼º</p><p><code>@AfterThrowing</code>ï¼šå¼‚å¸¸æŠ›å‡ºå¢å¼ºï¼Œå…¶ä¸­çš„throwingçš„å€¼å¿…é¡»å’Œæ–¹æ³•ä¼ å…¥çš„å‚æ•°åç›¸åŒ</p><p><code>@After</code>ï¼šæœ€ç»ˆå¢å¼º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ProductDaoçš„å¢å¼ºç±»(åˆ‡é¢ç±»)</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Chen Rui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProductEnhancer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ‡å…¥ç‚¹é…ç½®</span></span><br><span class="line"><span class="comment">     * å¯¹ProductDaoImplé‡Œçš„æ–¹æ³•éƒ½å¢å¼º</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Pointcut(value = &quot;execution(* learningspring.aop.aspectj.annotation.demo2.ProductDaoImpl.*(..))&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">pointcut1</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‰ç½®å¢å¼ºæ¡ˆä¾‹</span></span><br><span class="line"><span class="comment">     * åœ¨è°ƒç”¨saveæ–¹æ³•ä¹‹å‰è¿›è¡Œæƒé™æ ¡éªŒ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> joinPoint åˆ‡å…¥ç‚¹å¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Before(value = &quot;execution(* learningspring.aop.aspectj.annotation.demo2.ProductDaoImpl.save())&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">checkPri</span><span class="params">(JoinPoint joinPoint)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ã€å‰ç½®å¢å¼ºã€‘æƒé™æ ¡éªŒ&quot;</span> + joinPoint);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åç½®å¢å¼ºæ¡ˆä¾‹</span></span><br><span class="line"><span class="comment">     * åœ¨è°ƒç”¨deleteæ–¹æ³•ä¹‹åï¼Œå†™å…¥æ—¥å¿—è®°å½•æ“ä½œæ—¶é—´</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> result ç›®æ ‡æ–¹æ³•è¿”å›çš„å¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@AfterReturning(returning = &quot;result&quot;, value = &quot;execution(* learningspring.aop.aspectj.annotation.demo2.ProductDaoImpl.delete())&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">writeLog</span><span class="params">(Object result)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ã€åç½®å¢å¼ºã€‘å†™å…¥æ—¥å¿— æ“ä½œæ—¶é—´ï¼š&quot;</span> + result.toString());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç¯ç»•å¢å¼º</span></span><br><span class="line"><span class="comment">     * åœ¨è°ƒç”¨modifyæ–¹æ³•å‰åï¼Œæ˜¾ç¤ºæ€§èƒ½å‚æ•°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> joinPoint åˆ‡å…¥ç‚¹å¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Throwable å¯æŠ›å‡ºçš„å¼‚å¸¸</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Around(value = &quot;execution(* learningspring.aop.aspectj.annotation.demo2.ProductDaoImpl.modify())&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">monitor</span><span class="params">(ProceedingJoinPoint joinPoint)</span> <span class="keyword">throws</span> Throwable</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ã€ç¯ç»•å¢å¼ºã€‘å½“å‰ç©ºé—²å†…å­˜&quot;</span> + Runtime.getRuntime().freeMemory()/(<span class="number">1024</span> * <span class="number">1024</span>) + <span class="string">&quot;MB&quot;</span>);</span><br><span class="line">        Object obj = joinPoint.proceed();</span><br><span class="line">        System.out.println(<span class="string">&quot;ã€ç¯ç»•å¢å¼ºã€‘å½“å‰ç©ºé—²å†…å­˜&quot;</span> + Runtime.getRuntime().freeMemory()/(<span class="number">1024</span> * <span class="number">1024</span>) + <span class="string">&quot;MB&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> obj;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¼‚å¸¸æŠ›å‡ºå¢å¼º</span></span><br><span class="line"><span class="comment">     * åœ¨è°ƒç”¨queryæ—¶è‹¥æŠ›å‡ºå¼‚å¸¸åˆ™æ‰“å°å¼‚å¸¸ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ex å¼‚å¸¸å¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@AfterThrowing(throwing = &quot;ex&quot;, value = &quot;execution(* learningspring.aop.aspectj.annotation.demo2.ProductDaoImpl.query())&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">exception</span><span class="params">(Throwable ex)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ã€å¼‚å¸¸æŠ›å‡ºå¢å¼ºã€‘&quot;</span> + <span class="string">&quot;å¼‚å¸¸ä¿¡æ¯ï¼š&quot;</span> +ex.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æœ€ç»ˆå¢å¼º</span></span><br><span class="line"><span class="comment">     * æ— è®ºProductDaoImplé‡Œçš„æ¯ä¸ªæ–¹æ³•æ˜¯å¦æŠ›å‡ºå¼‚å¸¸éƒ½æ‰“å°å½“å‰æ—¶é—´</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@After(value = &quot;pointcut1()&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">finallyAdvice</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ã€æœ€ç»ˆå¢å¼ºã€‘&quot;</span> + <span class="keyword">new</span> Date().toString());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¼–å†™æµ‹è¯•æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * AspectJçš„æ³¨è§£æ–¹å¼é…ç½®æµ‹è¯•ç±»</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Chen Rui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class="line"><span class="meta">@ContextConfiguration(&quot;classpath:aspectj-annotation.xml&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AppTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource(name = &quot;productDao&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> ProductDao productDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        productDao.save();</span><br><span class="line"></span><br><span class="line">        productDao.delete();</span><br><span class="line"></span><br><span class="line">        productDao.modify();</span><br><span class="line"></span><br><span class="line">        productDao.query();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œï¼Œæ§åˆ¶å°è¾“å‡º</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">ã€å‰ç½®å¢å¼ºã€‘æƒé™æ ¡éªŒexecution(void learningspring.aop.aspectj.annotation.demo2.ProductDao.save())</span><br><span class="line">æ·»åŠ å•†å“</span><br><span class="line">ã€æœ€ç»ˆå¢å¼ºã€‘Tue Mar 19 16:01:06 CST 2019</span><br><span class="line">åˆ é™¤å•†å“</span><br><span class="line">ã€æœ€ç»ˆå¢å¼ºã€‘Tue Mar 19 16:01:06 CST 2019</span><br><span class="line">ã€åç½®å¢å¼ºã€‘å†™å…¥æ—¥å¿— æ“ä½œæ—¶é—´ï¼šTue Mar 19 16:01:06 CST 2019</span><br><span class="line">ã€ç¯ç»•å¢å¼ºã€‘å½“å‰ç©ºé—²å†…å­˜186MB</span><br><span class="line">ä¿®æ”¹å•†å“</span><br><span class="line">ã€ç¯ç»•å¢å¼ºã€‘å½“å‰ç©ºé—²å†…å­˜186MB</span><br><span class="line">ã€æœ€ç»ˆå¢å¼ºã€‘Tue Mar 19 16:01:06 CST 2019</span><br><span class="line">æŸ¥è¯¢å•†å“</span><br><span class="line">ã€æœ€ç»ˆå¢å¼ºã€‘Tue Mar 19 16:01:06 CST 2019</span><br><span class="line">ã€å¼‚å¸¸æŠ›å‡ºå¢å¼ºã€‘å¼‚å¸¸ä¿¡æ¯ï¼š&#x2F; by zero</span><br></pre></td></tr></table></figure><h1 id="spring-jdbc-template">Spring JDBC Template<a title="#spring-jdbc-template" href="#spring-jdbc-template"></a></h1><p>Springæä¾›äº†æä¾›äº†å¤šç§æŒä¹…å±‚æŠ€æœ¯çš„æ¨¡æ¿ç±»</p><div class="Ï†bt"><div class="Ï†bv"><table><thead><tr><th>ORMæŒä¹…åŒ–æŠ€æœ¯</th><th>æ¨¡æ¿ç±»</th></tr></thead><tbody><tr><td>JDBC</td><td>org.springframework.jdbc.core.JdbcTemplate</td></tr><tr><td>Hibernate3.0</td><td>org.springframework.orm.hibernate3.HibernateTemplate</td></tr><tr><td>IBatis(Mybatis)</td><td>org.springframework.orm.ibatis.SqlMapClientTemplate</td></tr><tr><td>JPA</td><td>org.springframework.orm.jpa.JpaTemplate</td></tr></tbody></table></div></div><h2 id="jdbc-templateçš„å…¥é—¨">JDBC Templateçš„å…¥é—¨<a title="#jdbc-templateçš„å…¥é—¨" href="#jdbc-templateçš„å…¥é—¨"></a></h2><p>é¦–å…ˆå¼•å…¥jaråŒ…ï¼Œåœ¨<code>pom.xml</code>æ–‡ä»¶ä¸­åŠ å…¥<code>spring-jdbc</code>ï¼Œ<code>spring-tx</code>ï¼Œ<code>mysql-connector-java</code>ï¼ˆæœ¬æ¡ˆä¾‹ä½¿ç”¨çš„æ˜¯MySQL8ï¼‰ä¸‰ä¸ªä¾èµ–ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.14.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-tx<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.14.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.15<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç„¶ååˆ›å»ºæ•°æ®åº“è¡¨ï¼Œæœ¬ä¾‹ä½¿ç”¨çš„MySQL8</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">create table account</span><br><span class="line">(</span><br><span class="line">id int auto_increment</span><br><span class="line">primary key,</span><br><span class="line">name varchar(8) not null,</span><br><span class="line">money double default 0</span><br><span class="line">)</span><br><span class="line">comment &#39;è´¦æˆ·è¡¨&#39;;</span><br></pre></td></tr></table></figure><h3 id="åŸºæœ¬ä½¿ç”¨">åŸºæœ¬ä½¿ç”¨<a title="#åŸºæœ¬ä½¿ç”¨" href="#åŸºæœ¬ä½¿ç”¨"></a></h3><p>æœ€åŸºæœ¬çš„ä½¿ç”¨ï¼Œä¸ä¾èµ–äºSpring çš„ç®¡ç†ï¼Œæ‰‹åŠ¨åˆ›å»ºå¯¹è±¡ï¼Œé‡‡ç”¨ç¡¬ç¼–ç çš„æ–¹å¼è¿›è¡Œå±æ€§æ³¨å…¥ã€‚ä¸æ¨èä½¿ç”¨è¯¥æ–¹æ³•ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AppTest</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç¡¬ç¼–ç </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºè¿æ¥æ± </span></span><br><span class="line">        DriverManagerDataSource dataSource = <span class="keyword">new</span> DriverManagerDataSource();</span><br><span class="line">        dataSource.setDriverClassName(<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);</span><br><span class="line">        dataSource.setUrl(<span class="string">&quot;jdbc:mysql://localhost:3306/springjdbc?useUnicode=true&amp;characterEncoding=utf-8&amp;serverTimezone=Asia/Shanghai&amp;useSSL=false &quot;</span>);</span><br><span class="line">        dataSource.setUsername(<span class="string">&quot;root&quot;</span>);</span><br><span class="line">        dataSource.setPassword(<span class="string">&quot;123456&quot;</span>);</span><br><span class="line">        <span class="comment">// åˆ›å»ºJDBC Template</span></span><br><span class="line">        JdbcTemplate jdbcTemplate = <span class="keyword">new</span> JdbcTemplate(dataSource);</span><br><span class="line">        <span class="keyword">int</span> i = jdbcTemplate.update(<span class="string">&quot;INSERT INTO account VALUES (null ,?,?)&quot;</span>, <span class="string">&quot;Tom&quot;</span>, <span class="number">20000d</span>);</span><br><span class="line">        <span class="keyword">if</span> (i &gt; <span class="number">0</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Update Successful&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥ä½¿ç”¨ç¬¬äºŒç§æ–¹æ³•ï¼ŒæŠŠè¿æ¥æ± å¯¹è±¡å’Œæ¨¡æ¿(Template)éƒ½äº¤ç»™Springæ¥ç®¡ç†</p><p>åˆ›å»º<code>spring-jdbc.xml</code>è¯¥æ–‡ä»¶ç”¨æ¥ç®¡ç†Bean</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®æ•°æ®åº“è¿æ¥æ±  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/springjdbc?useUnicode=true<span class="symbol">&amp;amp;</span>characterEncoding=utf-8<span class="symbol">&amp;amp;</span>serverTimezone=Asia/Shanghai<span class="symbol">&amp;amp;</span>useSSL=false&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123456&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®Spring JDBC Template --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;jdbcTemplate&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.core.JdbcTemplate&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åœ¨æµ‹è¯•ç±»ä¸­åŠ å…¥ç›¸åº”çš„æ³¨è§£ï¼Œä»¥åŠé…ç½®æ–‡ä»¶ä¿¡æ¯ï¼Œç¼–å†™æ–°çš„æµ‹è¯•æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Spring JDBC Templateçš„ä½¿ç”¨</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Chen Rui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class="line"><span class="meta">@ContextConfiguration(&quot;classpath:spring-jdbc.xml&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AppTest</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Spring é…ç½®æ–‡ä»¶æ–¹å¼</span></span><br><span class="line"><span class="comment">     * æŠŠè¿æ¥æ± å’Œæ¨¡æ¿(Template)éƒ½äº¤ç»™springç®¡ç†</span></span><br><span class="line"><span class="comment">     * æ—¥å¿—ä¿¡æ¯ï¼šLoaded JDBC driver: com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="comment">     * æ˜¯ä½¿ç”¨çš„é»˜è®¤çš„è¿æ¥æ± </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Resource(name = &quot;jdbcTemplate&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i = jdbcTemplate.update(<span class="string">&quot;INSERT INTO account VALUES (null ,?,?)&quot;</span>, <span class="string">&quot;Jack&quot;</span>, <span class="number">30000d</span>);</span><br><span class="line">        <span class="keyword">if</span> (i &gt; <span class="number">0</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Update Successful&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡<code>@Resource</code>æ³¨è§£ä»IOCå®¹å™¨ä¸­è·å–åˆ°æ¨¡æ¿å¯¹è±¡ï¼Œç„¶åé€šè¿‡è¯¥æ¨¡æ¿å¯¹è±¡æ¥æ“ä½œæ•°æ®åº“ã€‚</p><p>è¿™æ ·å°±å®Œæˆäº†Spring JDBC Templateçš„æœ€åŸºæœ¬ä½¿ç”¨</p><h3 id="æ•°æ®åº“è¿æ¥æ± ">æ•°æ®åº“è¿æ¥æ± <a title="#æ•°æ®åº“è¿æ¥æ± " href="#æ•°æ®åº“è¿æ¥æ± "></a></h3><p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œå¯èƒ½å¹¶ä¸ä¼šä½¿ç”¨é»˜è®¤çš„è¿æ¥æ± ï¼Œè€Œæ˜¯å»ä½¿ç”¨ä¸€äº›å¼€æºçš„æ•°æ®åº“è¿æ¥æ± ï¼Œåœ¨è¯¥ä¾‹ä¸­ä»‹ç»ä¸¤ç§æ•°æ®åº“è¿æ¥æ± DBCPå’ŒC3P0</p><h4 id="dbcpè¿æ¥æ± çš„é…ç½®">DBCPè¿æ¥æ± çš„é…ç½®<a title="#dbcpè¿æ¥æ± çš„é…ç½®" href="#dbcpè¿æ¥æ± çš„é…ç½®"></a></h4><p>é¦–å…ˆåˆ›å»ºè¿æ¥æ•°æ®åº“çš„é…ç½®æ–‡ä»¶<code>db.properties</code>ï¼Œæ³¨æ„ï¼Œä¸åŒçš„MySQLç‰ˆæœ¬å¯èƒ½urlä¿¡æ¯ä¼šä¸åŒï¼Œæ¯”å¦‚MySQL8å°±éœ€è¦æ·»åŠ <code>serverTimezone</code>å‚æ•°ã€‚</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">jdbc.driverClassName</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="meta">jdbc.url</span>=<span class="string">jdbc:mysql://localhost:3306/springjdbc?useUnicode=true&amp;characterEncoding=utf-8&amp;serverTimezone=Asia/Shanghai&amp;useSSL=false </span></span><br><span class="line"><span class="meta">jdbc.username</span>=<span class="string">root</span></span><br><span class="line"><span class="meta">jdbc.password</span>=<span class="string">123456</span></span><br></pre></td></tr></table></figure><p>æ¥ç€åˆ›å»ºä¸€ä¸ªæ–°çš„é…ç½®æ–‡ä»¶<code>spring-dbcp.xml</code>å’Œå‰é¢çš„é…ç½®æ–‡ä»¶åšåŒºåˆ†ã€‚</p><p>åˆ©ç”¨<code>context:property-placeholder</code>æ ‡ç­¾å¼•å…¥<code>db.properties</code>é…ç½®æ–‡ä»¶ï¼Œé€šè¿‡<code>$&#123;key&#125;</code>çš„æ–¹å¼æ¥è·å–å¯¹åº”çš„valueã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥æ•°æ®åº“é…ç½®æ–‡ä»¶ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;db.properties&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®DBCPè¿æ¥æ±  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.apache.commons.dbcp2.BasicDataSource&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driverClassName&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®Spring JDBC Template --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;jdbcTemplateDBCP&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.core.JdbcTemplate&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç¼–å†™æµ‹è¯•æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Spring JDBC Templateçš„ä½¿ç”¨</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Chen Rui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class="line"><span class="meta">@ContextConfiguration(&quot;classpath:spring-dbcp.xml&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AppTest</span> </span>&#123;</span><br><span class="line">    <span class="comment">//ä½¿ç”¨å¼€æºçš„æ•°æ®åº“è¿æ¥æ± è¿›è¡Œé…ç½®</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä½¿ç”¨DBCPè¿æ¥æ± </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Resource(name = &quot;jdbcTemplateDBCP&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> JdbcTemplate jdbcTemplateDBCP;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test3</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i = jdbcTemplateDBCP.update(<span class="string">&quot;INSERT INTO account VALUES (null ,?,?)&quot;</span>, <span class="string">&quot;Lucy&quot;</span>, <span class="number">40000d</span>);</span><br><span class="line">        <span class="keyword">if</span> (i &gt; <span class="number">0</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Update Successful&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="c3p0è¿æ¥æ± é…ç½®">C3P0è¿æ¥æ± é…ç½®<a title="#c3p0è¿æ¥æ± é…ç½®" href="#c3p0è¿æ¥æ± é…ç½®"></a></h4><p>åŒæ ·æ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„é…ç½®æ–‡ä»¶<code>spring-c3p0.xml</code>ï¼Œä»¥ä½œåŒºåˆ†ï¼ŒåŒæ—¶ä¹Ÿè¦å¼•å…¥æ•°æ®åº“é…ç½®æ–‡ä»¶<code>db.properties</code></p><p>è¦æ³¨æ„<code>property</code>æ ‡ç­¾çš„<code>name</code>å±æ€§å’Œå‰é¢çš„é…ç½®æ–‡ä»¶<strong>ç¨æœ‰ä¸åŒ</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥æ•°æ®åº“é…ç½®æ–‡ä»¶ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;db.properties&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®C3P0è¿æ¥æ±  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClass&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driverClassName&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;jdbcUrl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®Spring JDBC Template --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;jdbcTemplateC3P0&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.core.JdbcTemplate&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç¼–å†™æµ‹è¯•æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Spring JDBC Templateçš„ä½¿ç”¨</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Chen Rui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class="line"><span class="meta">@ContextConfiguration(&quot;classpath:spring-*.xml&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AppTest</span> </span>&#123;</span><br><span class="line">    <span class="comment">//ä½¿ç”¨å¼€æºçš„æ•°æ®åº“è¿æ¥æ± è¿›è¡Œé…ç½®</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä½¿ç”¨C3P0è¿æ¥æ± </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Resource(name = &quot;jdbcTemplateC3P0&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> JdbcTemplate jdbcTemplateC3P0;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test4</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i = jdbcTemplateC3P0.update(<span class="string">&quot;INSERT INTO account VALUES (null ,?,?)&quot;</span>, <span class="string">&quot;Lily&quot;</span>, <span class="number">50000d</span>);</span><br><span class="line">        <span class="keyword">if</span> (i &gt; <span class="number">0</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Update Successful&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å®ŒæˆåŸºæœ¬çš„crudæ“ä½œ">å®ŒæˆåŸºæœ¬çš„CRUDæ“ä½œ<a title="#å®ŒæˆåŸºæœ¬çš„crudæ“ä½œ" href="#å®ŒæˆåŸºæœ¬çš„crudæ“ä½œ"></a></h3><p>ä»¥ä¸‹å†…å®¹éƒ½æ˜¯ä½¿ç”¨çš„<strong>C3P0è¿æ¥æ± </strong>ï¼Œå¹¶ä¸”é€šè¿‡<code>@Resource</code>æ³¨è§£ä»IOCå®¹å™¨ä¸­è·å–äº†<code>jdbcTemplateC3P0</code>å¯¹è±¡</p><h4 id="æ’å…¥æ“ä½œ">æ’å…¥æ“ä½œ<a title="#æ’å…¥æ“ä½œ" href="#æ’å…¥æ“ä½œ"></a></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ’å…¥æ“ä½œ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i = jdbcTemplateC3P0.update(<span class="string">&quot;INSERT INTO account VALUES (null ,?,?)&quot;</span>, <span class="string">&quot;Lily&quot;</span>, <span class="number">50000d</span>);</span><br><span class="line">    <span class="keyword">if</span> (i &gt; <span class="number">0</span>)&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Update Successful&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ä¿®æ”¹æ“ä½œ">ä¿®æ”¹æ“ä½œ<a title="#ä¿®æ”¹æ“ä½œ" href="#ä¿®æ”¹æ“ä½œ"></a></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä¿®æ”¹æ“ä½œ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i = jdbcTemplateC3P0.update(<span class="string">&quot;UPDATE account SET name = ? WHERE id = ?&quot;</span>, <span class="string">&quot;Bob&quot;</span>, <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">if</span> (i &gt; <span class="number">0</span>)&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Update Successful&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åˆ é™¤æ“ä½œ">åˆ é™¤æ“ä½œ<a title="#åˆ é™¤æ“ä½œ" href="#åˆ é™¤æ“ä½œ"></a></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åˆ é™¤æ“ä½œ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i = jdbcTemplateC3P0.update(<span class="string">&quot;DELETE FROM account WHERE id = ?&quot;</span>, <span class="number">2</span>);</span><br><span class="line">    <span class="keyword">if</span> (i &gt; <span class="number">0</span>)&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Delete Successful&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æŸ¥è¯¢æ“ä½œ">æŸ¥è¯¢æ“ä½œ<a title="#æŸ¥è¯¢æ“ä½œ" href="#æŸ¥è¯¢æ“ä½œ"></a></h4><h5 id="æŸ¥è¯¢æŸä¸ªå±æ€§">æŸ¥è¯¢æŸä¸ªå±æ€§<a title="#æŸ¥è¯¢æŸä¸ªå±æ€§" href="#æŸ¥è¯¢æŸä¸ªå±æ€§"></a></h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æŸ¥è¯¢æ“ä½œ</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * æŸ¥è¯¢å•ä¸ªå­—ç¬¦ä¸²ç»“æœ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">    String result = jdbcTemplateC3P0.queryForObject(<span class="string">&quot;SELECT name FROM account WHERE id = ?&quot;</span>, String.class, <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">if</span> (result != <span class="keyword">null</span>)&#123;</span><br><span class="line">        System.out.println(result);</span><br><span class="line">    &#125; <span class="keyword">else</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;NULL&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç»Ÿè®¡æŸ¥è¯¢</span></span><br><span class="line"><span class="comment"> * è¿”å›æ•°æ®è¡¨ä¸­çš„è®°å½•æ•°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Long result = jdbcTemplateC3P0.queryForObject(<span class="string">&quot;SELECT COUNT(*) FROM account&quot;</span>, Long.class);</span><br><span class="line">    System.out.println(result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æŸ¥è¯¢è¿”å›å•ä¸ªå¯¹è±¡">æŸ¥è¯¢è¿”å›å•ä¸ªå¯¹è±¡<a title="#æŸ¥è¯¢è¿”å›å•ä¸ªå¯¹è±¡" href="#æŸ¥è¯¢è¿”å›å•ä¸ªå¯¹è±¡"></a></h5><p>è¦å®ç°æŸ¥è¯¢çš„æ•°æ®å°è£…æˆä¸€ä¸ªå¯¹è±¡çš„è¯ï¼ŒæŸ¥è¯¢<code>queryForObject</code>çš„å‚æ•°åˆ—è¡¨å¯çŸ¥éœ€è¦ä¸€ä¸ª<code>rowMapper</code>çš„å‚æ•°ã€‚æ‰€ä»¥éœ€è¦åˆ›å»ºä¸€ä¸ªæ‰§è¡Œæ•°æ®å°è£…çš„ç±»æ¥å®ç°<code>RowMapper</code>æ¥å£é‡Œçš„<code>mapRow</code>æ–¹æ³•ï¼Œåœ¨è¿™ä¸ªæ–¹æ³•é‡Œè¿›è¡Œæ•°æ®å¯¹è±¡çš„å°è£…ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ•°æ®å°è£…ç±»</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Chen Rui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyRowMapper</span> <span class="keyword">implements</span> <span class="title">RowMapper</span>&lt;<span class="title">Account</span>&gt; </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Account <span class="title">mapRow</span><span class="params">(ResultSet rs, <span class="keyword">int</span> rowNum)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        Account account = <span class="keyword">new</span> Account();</span><br><span class="line">        account.setId(rs.getInt(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">        account.setName(rs.getString(<span class="string">&quot;name&quot;</span>));</span><br><span class="line">        account.setMoney(rs.getDouble(<span class="string">&quot;money&quot;</span>));</span><br><span class="line">        <span class="keyword">return</span> account;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¼–å†™æµ‹è¯•æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å°†æŸ¥è¯¢çš„ç»“æœå°è£…æˆå¯¹è±¡</span></span><br><span class="line"><span class="comment"> * è¦åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰rowMapperæ¥å®ç°RowMapperæ¥å£</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Account account = jdbcTemplateC3P0.queryForObject(<span class="string">&quot;SELECT * FROM account WHERE id = ?&quot;</span>, <span class="keyword">new</span> MyRowMapper(), <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">if</span> (account != <span class="keyword">null</span>)&#123;</span><br><span class="line">        System.out.println(account);</span><br><span class="line">    &#125; <span class="keyword">else</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;NULL&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æŸ¥è¯¢è¿”å›å¯¹è±¡é›†åˆ">æŸ¥è¯¢è¿”å›å¯¹è±¡é›†åˆ<a title="#æŸ¥è¯¢è¿”å›å¯¹è±¡é›†åˆ" href="#æŸ¥è¯¢è¿”å›å¯¹è±¡é›†åˆ"></a></h5><p>è¦å®ç°æŸ¥è¯¢è¿”å›å¯¹è±¡é›†åˆä¾ç„¶éœ€è¦è‡ªå®šä¹‰ç±»å®ç°<code>RowMapper</code>æ¥å£ï¼Œè°ƒç”¨çš„æ˜¯<code>query</code>æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æŸ¥è¯¢å¤šæ¡è®°å½•</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test10</span><span class="params">()</span></span>&#123;</span><br><span class="line">    List&lt;Account&gt; accounts = jdbcTemplateC3P0.query(<span class="string">&quot;SELECT * FROM account&quot;</span>, <span class="keyword">new</span> MyRowMapper());</span><br><span class="line">    accounts.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="springäº‹åŠ¡ç®¡ç†">Springäº‹åŠ¡ç®¡ç†<a title="#springäº‹åŠ¡ç®¡ç†" href="#springäº‹åŠ¡ç®¡ç†"></a></h1><h2 id="ä»€ä¹ˆæ˜¯äº‹åŠ¡">ä»€ä¹ˆæ˜¯äº‹åŠ¡<a title="#ä»€ä¹ˆæ˜¯äº‹åŠ¡" href="#ä»€ä¹ˆæ˜¯äº‹åŠ¡"></a></h2><p>äº‹åŠ¡ï¼šé€»è¾‘ä¸Šçš„ä¸€ç»„æ“ä½œï¼Œç»„æˆè¿™ç»„æ“ä½œçš„å„ä¸ªå•å…ƒï¼Œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ã€‚</p><h2 id="äº‹åŠ¡çš„ç‰¹æ€§">äº‹åŠ¡çš„ç‰¹æ€§<a title="#äº‹åŠ¡çš„ç‰¹æ€§" href="#äº‹åŠ¡çš„ç‰¹æ€§"></a></h2><ul><li>åŸå­æ€§ï¼šäº‹åŠ¡ä¸å¯åˆ†å‰²</li><li>ä¸€è‡´æ€§ï¼šäº‹åŠ¡æ‰§è¡Œå‰åæ•°æ®å®Œæ•´æ€§ä¿æŒä¸€è‡´</li><li>éš”ç¦»æ€§ï¼šä¸€ä¸ªäº‹åŠ¡çš„æ‰§è¡Œä¸åº”è¯¥å—åˆ°å…¶ä»–äº‹åŠ¡çš„å¹²æ‰°</li><li>æŒä¹…æ€§ï¼šä¸€æ—¦äº‹åŠ¡ç»“æŸï¼Œæ•°æ®å°±æŒä¹…åŒ–åˆ°æ•°æ®åº“</li></ul><h2 id="ä¸è€ƒè™‘éš”ç¦»æ€§å¼•å‘çš„å®‰å…¨æ€§é—®é¢˜">ä¸è€ƒè™‘éš”ç¦»æ€§å¼•å‘çš„å®‰å…¨æ€§é—®é¢˜<a title="#ä¸è€ƒè™‘éš”ç¦»æ€§å¼•å‘çš„å®‰å…¨æ€§é—®é¢˜" href="#ä¸è€ƒè™‘éš”ç¦»æ€§å¼•å‘çš„å®‰å…¨æ€§é—®é¢˜"></a></h2><ul><li>è¯»é—®é¢˜<ul><li>è„è¯»ï¼šAäº‹åŠ¡è¯»åˆ°Bäº‹åŠ¡æœªæäº¤çš„æ•°æ®</li><li>ä¸å¯é‡å¤è¯»ï¼šBäº‹åŠ¡åœ¨Aäº‹åŠ¡ä¸¤æ¬¡è¯»å–æ•°æ®ä¹‹é—´ï¼Œä¿®æ”¹äº†æ•°æ®ï¼Œå¯¼è‡´Aäº‹åŠ¡ä¸¤æ¬¡è¯»å–ç»“æœä¸ä¸€è‡´</li><li>å¹»è¯»/è™šè¯»ï¼šBäº‹åŠ¡åœ¨Aäº‹åŠ¡æ‰¹é‡ä¿®æ”¹æ•°æ®æ—¶ï¼Œæ’å…¥äº†ä¸€æ¡æ–°çš„æ•°æ®ï¼Œå¯¼è‡´æ•°æ®åº“ä¸­ä»æœ‰ä¸€æ¡æ•°æ®æœªè¢«ä¿®æ”¹ã€‚</li></ul></li><li>å†™é—®é¢˜<ul><li>ä¸¢å¤±æ›´æ–°ï¼š</li></ul></li></ul><h2 id="è§£å†³è¯»é—®é¢˜">è§£å†³è¯»é—®é¢˜<a title="#è§£å†³è¯»é—®é¢˜" href="#è§£å†³è¯»é—®é¢˜"></a></h2><ul><li>è®¾ç½®äº‹åŠ¡çš„éš”ç¦»çº§åˆ«<ul><li><code>Read uncommitted</code>ï¼šæœªæäº¤è¯»ï¼Œä»»ä½•è¯»é—®é¢˜éƒ½è§£å†³ä¸äº†</li><li><code>Read committed</code>ï¼šå·²æäº¤è¯»ï¼Œè§£å†³è„è¯»ï¼Œä½†æ˜¯ä¸å¯é‡å¤è¯»å’Œå¹»è¯»æœ‰å¯èƒ½å‘ç”Ÿ</li><li><code>Repeatable read</code>ï¼šé‡å¤è¯»ï¼Œè§£å†³è„è¯»å’Œä¸å¯é‡å¤è¯»ï¼Œä½†æ˜¯å¹»è¯»æœ‰å¯èƒ½å‘ç”Ÿ</li><li><code>Serializable</code>ï¼šè§£å†³æ‰€æœ‰è¯»é—®é¢˜ï¼Œå› ä¸ºç¦æ­¢å¹¶è¡Œæ‰§è¡Œ</li></ul></li></ul><h2 id="springäº‹åŠ¡ç®¡ç†api">Springäº‹åŠ¡ç®¡ç†API<a title="#springäº‹åŠ¡ç®¡ç†api" href="#springäº‹åŠ¡ç®¡ç†api"></a></h2><ul><li><p><code>PlatformTransactionManager</code>ï¼šå¹³å°äº‹åŠ¡ç®¡ç†å™¨</p><ul><li><code>DataSourceTransactionManager</code>ï¼šåº•å±‚ä½¿ç”¨JDBCç®¡ç†äº‹åŠ¡</li></ul></li><li><p><code>TransactionDefinition</code>ï¼šäº‹åŠ¡å®šä¹‰ä¿¡æ¯</p><p>ç”¨äºå®šä¹‰äº‹åŠ¡ç›¸å…³çš„ä¿¡æ¯ï¼Œéš”ç¦»çº§åˆ«ï¼Œè¶…æ—¶ä¿¡æ¯ï¼Œä¼ æ’­è¡Œä¸ºï¼Œæ˜¯å¦åªè¯»â€¦â€¦</p></li><li><p><code>TransactionStatus</code>ï¼šäº‹åŠ¡çš„çŠ¶æ€</p><p>ç”¨äºè®°å½•åœ¨äº‹åŠ¡ç®¡ç†è¿‡ç¨‹ä¸­ï¼Œäº‹åŠ¡çš„çŠ¶æ€</p></li></ul><p>APIçš„å…³ç³»ï¼š</p><p>Springåœ¨è¿›è¡Œäº‹åŠ¡ç®¡ç†çš„æ—¶å€™ï¼Œé¦–å…ˆ<strong>å¹³å°äº‹åŠ¡ç®¡ç†å™¨</strong>æ ¹æ®<strong>äº‹åŠ¡å®šä¹‰ä¿¡æ¯</strong>è¿›è¡Œäº‹åŠ¡çš„ç®¡ç†ï¼Œåœ¨äº‹åŠ¡ç®¡ç†è¿‡ç¨‹ä¸­ï¼Œäº§ç”Ÿå„ç§çŠ¶æ€ï¼Œå°†è¿™äº›çŠ¶æ€ä¿¡æ¯è®°å½•åˆ°<strong>äº‹åŠ¡çŠ¶æ€å¯¹è±¡</strong></p><h2 id="springäº‹åŠ¡çš„ä¼ æ’­è¡Œä¸º">Springäº‹åŠ¡çš„ä¼ æ’­è¡Œä¸º<a title="#springäº‹åŠ¡çš„ä¼ æ’­è¡Œä¸º" href="#springäº‹åŠ¡çš„ä¼ æ’­è¡Œä¸º"></a></h2><p>é¦–å…ˆå‡è®¾ä¸€ä¸ªèƒŒæ™¯ï¼ŒService1é‡Œçš„x()æ–¹æ³•å·²ç»å®šä¹‰äº†ä¸€ä¸ªäº‹åŠ¡ï¼ŒService2é‡Œçš„y()æ–¹æ³•ä¹Ÿæœ‰ä¸€ä¸ªäº‹åŠ¡ï¼Œä½†ç°åœ¨æ–°å¢ä¸€è¡Œä»£ç åœ¨Service2çš„y()æ–¹æ³•ä¸­è¦å…ˆè°ƒç”¨Service1é‡Œçš„x()æ–¹æ³•ç„¶åå†æ‰§è¡Œæœ¬èº«çš„æ–¹æ³•ã€‚è¿™æ—¶å°±æ¶‰åŠåˆ°<strong>äº‹åŠ¡çš„ä¼ æ’­è¡Œä¸º</strong>ã€‚</p><p><img src="https://blogpictrue-1251547651.cos.ap-chengdu.myqcloud.com/blog/20190321110709.png" alt="img" class="Ï†bs"></p><p>Springä¸­æä¾›äº†7ç§ä¼ æ’­è¡Œä¸º</p><p><strong>å‡è®¾x()æ–¹æ³•ç§°ä¸ºAï¼Œy()æ–¹æ³•ç§°ä¸ºB</strong></p><ul><li>ä¿è¯å¤šä¸ªæ“ä½œåœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­<ul><li><strong><code>PROPAGATION_REQUIRED</code></strong>(*)ï¼šSpringäº‹åŠ¡éš”ç¦»çº§åˆ«çš„é»˜è®¤å€¼ã€‚å¦‚æœAä¸­æœ‰äº‹åŠ¡ï¼Œåˆ™ä½¿ç”¨Aä¸­çš„äº‹åŠ¡ã€‚å¦‚æœæ²¡æœ‰ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„äº‹åŠ¡ï¼Œå°†æ“ä½œåŒ…å«è¿›æ¥ã€‚</li><li><code>PROPAGATION_SUPPORTS</code>ï¼šæ”¯æŒäº‹åŠ¡ã€‚å¦‚æœAä¸­æœ‰äº‹åŠ¡ï¼Œä½¿ç”¨Aä¸­çš„äº‹åŠ¡ã€‚å¦‚æœAæ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™ä¸ä½¿ç”¨äº‹åŠ¡ã€‚</li><li><code>PROPAGATION_MANDATORY</code>ï¼šå¦‚æœAä¸­æœ‰äº‹åŠ¡ï¼Œä½¿ç”¨Aä¸­çš„äº‹åŠ¡ã€‚å¦‚æœæ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ã€‚</li></ul></li><li>ä¿è¯å¤šä¸ªäº‹åŠ¡ä¸åœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­<ul><li><strong><code>PROPAGATION_REQUIRES_NEW</code></strong>(*)ï¼šå¦‚æœAä¸­æœ‰äº‹åŠ¡ï¼Œå°†Açš„äº‹åŠ¡æŒ‚èµ·ï¼Œåˆ›å»ºæ–°äº‹åŠ¡ï¼ŒåªåŒ…å«è‡ªèº«æ“ä½œã€‚å¦‚æœAä¸­æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ›å»ºä¸€ä¸ªæ–°äº‹ç‰©ï¼ŒåŒ…å«è‡ªèº«æ“ä½œã€‚</li><li><code>PROPAGATION_NOT_SUPPORTED</code>ï¼šå¦‚æœAä¸­æœ‰äº‹åŠ¡ï¼Œå°†Açš„äº‹åŠ¡æŒ‚èµ·ï¼Œä¸ä½¿ç”¨äº‹åŠ¡ã€‚</li><li><code>PROPAGATION_NEVER</code>ï¼šå¦‚æœAä¸­æœ‰äº‹åŠ¡ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ã€‚</li></ul></li><li>åµŒå¥—å¼äº‹åŠ¡<ul><li><strong><code>PROPAGATION_NESTED</code></strong>(*)ï¼šåµŒå¥—äº‹åŠ¡ï¼Œå¦‚æœAä¸­æœ‰äº‹åŠ¡ï¼Œåˆ™æŒ‰ç…§Açš„äº‹åŠ¡æ‰§è¡Œï¼Œæ‰§è¡Œå®Œæˆåï¼Œè®¾ç½®ä¸€ä¸ªä¿å­˜ç‚¹ï¼Œå†æ‰§è¡ŒBä¸­çš„æ“ä½œï¼Œå¦‚æœæ— å¼‚å¸¸ï¼Œåˆ™æ‰§è¡Œé€šè¿‡ï¼Œå¦‚æœæœ‰å¼‚å¸¸ï¼Œåˆ™å¯ä»¥é€‰æ‹©å›æ»šåˆ°åˆå§‹ä½ç½®æˆ–è€…ä¿å­˜ç‚¹ã€‚</li></ul></li></ul><h2 id="springäº‹åŠ¡ç®¡ç†æ¡ˆä¾‹â€”â€”è½¬è´¦æƒ…æ™¯">Springäº‹åŠ¡ç®¡ç†æ¡ˆä¾‹â€”â€”è½¬è´¦æƒ…æ™¯<a title="#springäº‹åŠ¡ç®¡ç†æ¡ˆä¾‹â€”â€”è½¬è´¦æƒ…æ™¯" href="#springäº‹åŠ¡ç®¡ç†æ¡ˆä¾‹â€”â€”è½¬è´¦æƒ…æ™¯"></a></h2><h3 id="è½¬è´¦æƒ…æ™¯å®ç°">è½¬è´¦æƒ…æ™¯å®ç°<a title="#è½¬è´¦æƒ…æ™¯å®ç°" href="#è½¬è´¦æƒ…æ™¯å®ç°"></a></h3><p>é¦–å…ˆåˆ›å»ºæ¥å£<code>AccountDao</code>ï¼Œå®šä¹‰ä¸¤ä¸ªæ–¹æ³•åˆ†åˆ«æ˜¯<code>out</code>å’Œ<code>in</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * AccountDao</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Chen Rui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">AccountDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è½¬å‡º</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> from  è½¬å‡ºè´¦æˆ·</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> money è½¬å‡ºé‡‘é¢</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">out</span><span class="params">(String from, <span class="keyword">double</span> money)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è½¬å…¥</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> to    è½¬å…¥è´¦æˆ·</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> money è½¬å…¥é‡‘é¢</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">in</span><span class="params">(String to, <span class="keyword">double</span> money)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ç€åˆ›å»ºå®ç°ç±»<code>AccountDaoImpl</code>å®ç°<code>out</code>å’Œ<code>in</code>æ–¹æ³•å¹¶ä¸”ç»§æ‰¿<code>JdbcSupport</code>ç±»ã€‚è¿™æ ·å°±å¯ä»¥ç›´æ¥ä½¿ç”¨çˆ¶ç±»çš„<code>JDBCTemplate</code>å¯¹è±¡ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * AccountDaoå®ç°ç±»</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Chen Rui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountDaoImpl</span> <span class="keyword">extends</span> <span class="title">JdbcDaoSupport</span> <span class="keyword">implements</span> <span class="title">AccountDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">out</span><span class="params">(String from, <span class="keyword">double</span> money)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.getJdbcTemplate().update(<span class="string">&quot;UPDATE account SET money = money - ? WHERE name = ?&quot;</span>, money, from);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">in</span><span class="params">(String to, <span class="keyword">double</span> money)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.getJdbcTemplate().update(<span class="string">&quot;UPDATE account SET money = money + ? WHERE name = ?&quot;</span>, money, to);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶ååˆ›å»ºæ¥å£<code>AccountrService</code>ï¼Œå®šä¹‰<code>transfer</code>æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * AccountService</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Chen Rui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">AccountService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è½¬è´¦</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> from è½¬å‡ºè´¦æˆ·</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> to è½¬å…¥è´¦æˆ·</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> money äº¤æ˜“é‡‘é¢</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">transfer</span><span class="params">(String from, String to, Double money)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å†åˆ›å»ºç±»<code>AccountServiceImpl</code>å®ç°è¯¥æ¥å£ï¼Œå¹¶å£°æ˜<code>AccountDao</code>å¼•ç”¨å¹¶åˆ›å»º<code>set</code>æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * AccountServiceå®ç°ç±»</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Chen Rui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title">AccountService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> AccountDao accountDao;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAccountDao</span><span class="params">(AccountDao accountDao)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.accountDao = accountDao;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">transfer</span><span class="params">(String from, String to, Double money)</span> </span>&#123;</span><br><span class="line">        accountDao.out(from, money);</span><br><span class="line">        accountDao.in(to, money);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€ååˆ›å»ºé…ç½®æ–‡ä»¶<code>spring-tx-programmatic.xml</code>ï¼Œç”¨æ¥ç®¡ç†Beanã€‚</p><p>å¼•å…¥æ•°æ®åº“è¿æ¥æ–‡ä»¶ï¼Œé…ç½®æ•°æ®æºï¼Œåˆ›å»ºBeanå¯¹è±¡<code>accountDao</code>å°†æ•°æ®æº<code>dataSource</code>æ³¨å…¥åˆ°<code>accountDao</code>ä¸­ï¼Œå†åˆ›å»ºBeanå¯¹è±¡<code>accountService</code>ï¼Œå°†<code>accountDao</code>æ³¨å…¥ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:tx</span>=<span class="string">&quot;http://www.springframework.org/schema/tx&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;                                             </span></span></span><br><span class="line"><span class="tag"><span class="string">            http://www.springframework.org/schema/beans  </span></span></span><br><span class="line"><span class="tag"><span class="string">            http://www.springframework.org/schema/beans/spring-beans.xsd  </span></span></span><br><span class="line"><span class="tag"><span class="string">            http://www.springframework.org/schema/context   </span></span></span><br><span class="line"><span class="tag"><span class="string">            http://www.springframework.org/schema/context/spring-context.xsd  </span></span></span><br><span class="line"><span class="tag"><span class="string">            http://www.springframework.org/schema/tx </span></span></span><br><span class="line"><span class="tag"><span class="string">            http://www.springframework.org/schema/tx/spring-tx.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">            http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="tag"><span class="string">            http://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- ç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†é…ç½®æ–‡ä»¶ --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®Service --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;accountService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;learningspring.transaction.programmatic.AccountServiceImpl&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;accountDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;accountDao&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®Dao --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;accountDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;learningspring.transaction.programmatic.AccountDaoImpl&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥æ•°æ®åº“é…ç½®æ–‡ä»¶ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;db.properties&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®C3P0è¿æ¥æ±  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClass&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driverClassName&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;jdbcUrl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åˆ°æ­¤ä¸€ä¸ªè½¬è´¦æ¨¡æ‹Ÿä¸šåŠ¡å°±å®ç°äº†ï¼Œæ•°æ®åº“è¡¨ä¾ç„¶ä½¿ç”¨å‰é¢åˆ›å»ºçš„<code>account</code>è¡¨ï¼Œå…ˆæŸ¥è¯¢å½“å‰æ•°æ®åº“çš„æ•°æ®ã€‚</p><p><img src="https://blogpictrue-1251547651.cos.ap-chengdu.myqcloud.com/blog/20190321124514.png" alt="img" class="Ï†bs"></p><p>ç¼–å†™æµ‹è¯•æ–¹æ³•ï¼Œå®ç°è®©å§“åä¸ºBobçš„è´¦æˆ·å‘Jackè½¬è´¦1000å…ƒã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç¼–ç¨‹å¼äº‹åŠ¡æµ‹è¯•ç±»</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Chen Rui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class="line"><span class="meta">@ContextConfiguration(value = &quot;classpath:spring-tx-programmatic.xml&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AppTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource(name = &quot;accountService&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> AccountService accountService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">        accountService.transfer(<span class="string">&quot;Bob&quot;</span>,<span class="string">&quot;Jack&quot;</span>,<span class="number">1000d</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœ</p><p><img src="https://blogpictrue-1251547651.cos.ap-chengdu.myqcloud.com/blog/20190321124630.png" alt="img" class="Ï†bs"></p><p>ç°åœ¨å¯¹ç±»<code>AccountServiceImpl</code>é‡Œçš„<code>transfer</code>æ–¹æ³•è¿›è¡Œä¿®æ”¹ï¼Œè®©å…¶å‘ç”Ÿå¼‚å¸¸ï¼Œå†è§‚å¯Ÿç»“æœ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * AccountServiceå®ç°ç±»</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Chen Rui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title">AccountService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> AccountDao accountDao;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAccountDao</span><span class="params">(AccountDao accountDao)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.accountDao = accountDao;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">transfer</span><span class="params">(String from, String to, Double money)</span> </span>&#123;</span><br><span class="line">        accountDao.out(from, money);</span><br><span class="line">        <span class="comment">// æŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">1</span>/<span class="number">0</span>;</span><br><span class="line">        accountDao.in(to, money);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æŸ¥è¯¢æ•°æ®åº“æ•°æ®</p><p><img src="https://blogpictrue-1251547651.cos.ap-chengdu.myqcloud.com/blog/20190321125027.png" alt="img" class="Ï†bs"></p><p>è¿™æ—¶Bobè´¦æˆ·çš„é’±å°±å°‘äº†1000å…ƒï¼Œè€ŒJackè´¦æˆ·ä¹Ÿæ²¡æœ‰å¢åŠ 1000å…ƒã€‚</p><p>æ‰€ä»¥å°±éœ€è¦äº‹åŠ¡æ¥è¿›è¡Œç®¡ç†ã€‚</p><h3 id="ç¼–ç¨‹å¼äº‹åŠ¡">ç¼–ç¨‹å¼äº‹åŠ¡<a title="#ç¼–ç¨‹å¼äº‹åŠ¡" href="#ç¼–ç¨‹å¼äº‹åŠ¡"></a></h3><p>æ‰€è°“ç¼–ç¨‹å¼äº‹åŠ¡ï¼Œå°±æ˜¯è¦åœ¨æºç ä¸­ç¼–å†™äº‹åŠ¡ç›¸å…³çš„ä»£ç ã€‚å®ç°ç¼–ç¨‹å¼äº‹åŠ¡ï¼Œé¦–å…ˆè¦åœ¨<code>AccountServiceImpl</code>ä¸­å£°æ˜<code>TransactionTemplate</code>å¯¹è±¡ï¼Œå¹¶åˆ›å»ºsetæ–¹æ³•ã€‚ç„¶åä¿®æ”¹<code>transfer</code>å‚æ•°åˆ—è¡¨æ‰€æœ‰å‚æ•°éƒ½ç”¨<code>final</code>(å› ä¸ºä½¿ç”¨äº†åŒ¿åå†…éƒ¨ç±»)ä¿®é¥°ï¼Œå¹¶ä¿®æ”¹æ–¹æ³•ä½“å†…å®¹ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * AccountServiceå®ç°ç±»</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Chen Rui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title">AccountService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> AccountDao accountDao;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> TransactionTemplate transactionTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAccountDao</span><span class="params">(AccountDao accountDao)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.accountDao = accountDao;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTransactionTemplate</span><span class="params">(TransactionTemplate transactionTemplate)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.transactionTemplate = transactionTemplate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">transfer</span><span class="params">(<span class="keyword">final</span> String from, <span class="keyword">final</span> String to, <span class="keyword">final</span> Double money)</span> </span>&#123;</span><br><span class="line">        transactionTemplate.execute(<span class="keyword">new</span> TransactionCallbackWithoutResult() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doInTransactionWithoutResult</span><span class="params">(TransactionStatus status)</span> </span>&#123;</span><br><span class="line">                accountDao.out(from, money);</span><br><span class="line">                <span class="comment">// æŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">                <span class="keyword">int</span> i = <span class="number">1</span>/<span class="number">0</span>;</span><br><span class="line">                accountDao.in(to,money);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åä¿®æ”¹<code>spring-tx-programmatic.xml</code>æ–‡ä»¶ï¼Œåˆ›å»ºBeanå¯¹è±¡<code>transactionManager</code>å’Œ<code>transactionTemplate</code>ï¼Œå¹¶å°†<code>transactionTemplate</code>æ³¨å…¥åˆ°<code>accountService</code>ä¸­ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:tx</span>=<span class="string">&quot;http://www.springframework.org/schema/tx&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;                                             </span></span></span><br><span class="line"><span class="tag"><span class="string">            http://www.springframework.org/schema/beans  </span></span></span><br><span class="line"><span class="tag"><span class="string">            http://www.springframework.org/schema/beans/spring-beans.xsd  </span></span></span><br><span class="line"><span class="tag"><span class="string">            http://www.springframework.org/schema/context   </span></span></span><br><span class="line"><span class="tag"><span class="string">            http://www.springframework.org/schema/context/spring-context.xsd  </span></span></span><br><span class="line"><span class="tag"><span class="string">            http://www.springframework.org/schema/tx </span></span></span><br><span class="line"><span class="tag"><span class="string">            http://www.springframework.org/schema/tx/spring-tx.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">            http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="tag"><span class="string">            http://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- ç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†é…ç½®æ–‡ä»¶ --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®Service --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;accountService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;learningspring.transaction.programmatic.AccountServiceImpl&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;accountDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;accountDao&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;transactionTemplate&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;transactionTemplate&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®Dao --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;accountDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;learningspring.transaction.programmatic.AccountDaoImpl&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥æ•°æ®åº“é…ç½®æ–‡ä»¶ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;db.properties&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®C3P0è¿æ¥æ±  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClass&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driverClassName&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;jdbcUrl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®äº‹åŠ¡ç®¡ç†å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;transactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®æ¨¡æ¿ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;transactionTemplate&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.transaction.support.TransactionTemplate&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;transactionManager&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;transactionManager&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ­¤æ—¶å¼‚å¸¸ä¾ç„¶å­˜åœ¨ï¼Œæ•°æ®åº“æ•°æ®ä»ç„¶æ˜¯ä¸Šæ¬¡æ‰§è¡Œçš„ç»“æœçŠ¶æ€</p><p><img src="https://blogpictrue-1251547651.cos.ap-chengdu.myqcloud.com/blog/20190321125027.png" alt="img" class="Ï†bs"></p><p>å†æ¬¡è¿è¡Œæµ‹è¯•æ–¹æ³•ï¼Œå¹¶æŸ¥è¯¢ç»“æœï¼Œè§‚å¯Ÿæ˜¯å¦å‘ç”Ÿå˜åŒ–</p><p><img src="https://blogpictrue-1251547651.cos.ap-chengdu.myqcloud.com/blog/20190321130039.png" alt="img" class="Ï†bs"></p><p>ç°åœ¨å°±å®ç°äº†ç¼–ç¨‹å¼äº‹åŠ¡ï¼Œå½“å‡ºç°å¼‚å¸¸æ—¶ï¼Œæ•°æ®åº“çš„æ•°æ®å°±ä¸ä¼šè¢«ä¿®æ”¹ã€‚</p><h3 id="å£°æ˜å¼äº‹åŠ¡">å£°æ˜å¼äº‹åŠ¡<a title="#å£°æ˜å¼äº‹åŠ¡" href="#å£°æ˜å¼äº‹åŠ¡"></a></h3><h4 id="xmlé…ç½®æ–¹å¼">XMLé…ç½®æ–¹å¼<a title="#xmlé…ç½®æ–¹å¼" href="#xmlé…ç½®æ–¹å¼"></a></h4><p>å£°æ˜å¼äº‹åŠ¡å³é€šè¿‡é…ç½®æ–‡ä»¶å®ç°ï¼Œåˆ©ç”¨çš„å°±æ˜¯Springçš„AOP</p><p>ä¿®æ”¹ç±»<code>AccountServiceImpl</code>ï¼Œåˆ é™¤<code>TransactionTemplate</code>å¯¹è±¡ï¼Œå¹¶ä¿®æ”¹<code>transfer</code>æ–¹æ³•ï¼Œä¿ç•™å¼‚å¸¸ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * AccountServiceå®ç°ç±»</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Chen Rui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title">AccountService</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> AccountDao accountDao;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAccountDao</span><span class="params">(AccountDao accountDao)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.accountDao = accountDao;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">transfer</span><span class="params">(String from, String to, Double money)</span> </span>&#123;</span><br><span class="line">        accountDao.out(from, money);</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">1</span>/<span class="number">0</span>;</span><br><span class="line">        accountDao.in(to,money);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶ååˆ›å»ºé…ç½®æ–‡ä»¶<code>spring-tx-declarative.xml</code>ï¼Œé…ç½®æ•°æ®æºå³Beanå¯¹è±¡ï¼Œç„¶åé…ç½®äº‹åŠ¡ç®¡ç†å™¨ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:tx</span>=<span class="string">&quot;http://www.springframework.org/schema/tx&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="tag"><span class="string">            http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">            http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">            http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">            http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">            http://www.springframework.org/schema/tx</span></span></span><br><span class="line"><span class="tag"><span class="string">            http://www.springframework.org/schema/tx/spring-tx.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">            http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="tag"><span class="string">            http://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å£°æ˜å¼äº‹åŠ¡ç®¡ç†é…ç½®æ–‡ä»¶ --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®Service --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;accountService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;learningspring.transaction.declarative.AccountServiceImpl&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;accountDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;accountDao&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®Dao --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;accountDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;learningspring.transaction.declarative.AccountDaoImpl&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥æ•°æ®åº“é…ç½®æ–‡ä»¶ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;db.properties&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®C3P0è¿æ¥æ±  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClass&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driverClassName&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;jdbcUrl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®äº‹åŠ¡ç®¡ç†å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;transactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ¥ç€å°±é…ç½®äº‹åŠ¡çš„å¢å¼ºï¼Œé…ç½®æ–‡ä»¶ä¸­åŠ å…¥ä»¥ä¸‹é…ç½®</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- é…ç½®äº‹åŠ¡çš„å¢å¼º --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">&quot;txAdvice&quot;</span> <span class="attr">transaction-manager</span>=<span class="string">&quot;transactionManager&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- é…ç½®äº‹åŠ¡çš„è§„åˆ™ æ ¹æ®å®é™…ä¸šåŠ¡ä¿®æ”¹--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;*&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- AOPçš„é…ç½® --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;pointcut1&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* learningspring.transaction.declarative.AccountServiceImpl.*(..))&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;txAdvice&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointcut1&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å…ˆæŸ¥çœ‹å½“å‰æ•°æ®åº“æ•°æ®</p><p><img src="https://blogpictrue-1251547651.cos.ap-chengdu.myqcloud.com/blog/20190321130039.png" alt="img" class="Ï†bs"></p><p>ç¼–å†™æµ‹è¯•æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å£°æ˜å¼äº‹åŠ¡é…ç½®æµ‹è¯•ç±»</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Chen Rui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class="line"><span class="meta">@ContextConfiguration(value = &quot;classpath:spring-tx-declarative.xml&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AppTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource(name = &quot;accountService&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> AccountService accountService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">        accountService.transfer(<span class="string">&quot;Bob&quot;</span>,<span class="string">&quot;Jack&quot;</span>,<span class="number">1000d</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡ŒæŸ¥çœ‹ç»“æœï¼Œæ˜¯å¦å˜åŒ–</p><p><img src="https://blogpictrue-1251547651.cos.ap-chengdu.myqcloud.com/blog/20190321132512.png" alt="img" class="Ï†bs"></p><p>è‡³æ­¤å°±å®ç°äº†å£°æ˜å¼äº‹åŠ¡XMLæ–¹å¼çš„é…ç½®ã€‚</p><h4 id="æ³¨è§£é…ç½®æ–¹å¼">æ³¨è§£é…ç½®æ–¹å¼<a title="#æ³¨è§£é…ç½®æ–¹å¼" href="#æ³¨è§£é…ç½®æ–¹å¼"></a></h4><p>Springçš„äº‹åŠ¡é…ç½®ä»ç„¶æ”¯æŒæ³¨è§£é…ç½®</p><p>ç»§ç»­æ²¿ç”¨<code>spring-tx-declarative.xml</code>æ–‡ä»¶ï¼ŒæŠŠäº‹åŠ¡å¢å¼ºå’ŒAOPç›¸å…³çš„é…ç½®æ³¨é‡Šï¼Œå¹¶å¼€å¯æ³¨è§£äº‹åŠ¡ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:tx</span>=<span class="string">&quot;http://www.springframework.org/schema/tx&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="tag"><span class="string">            http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">            http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">            http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">            http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">            http://www.springframework.org/schema/tx</span></span></span><br><span class="line"><span class="tag"><span class="string">            http://www.springframework.org/schema/tx/spring-tx.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">            http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="tag"><span class="string">            http://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å£°æ˜å¼äº‹åŠ¡ç®¡ç†é…ç½®æ–‡ä»¶ --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®Service --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;accountService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;learningspring.transaction.declarative.AccountServiceImpl&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;accountDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;accountDao&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®Dao --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;accountDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;learningspring.transaction.declarative.AccountDaoImpl&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥æ•°æ®åº“é…ç½®æ–‡ä»¶ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;db.properties&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®C3P0è¿æ¥æ±  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClass&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driverClassName&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;jdbcUrl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®äº‹åŠ¡ç®¡ç†å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;transactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®äº‹åŠ¡çš„å¢å¼º --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&lt;tx:advice id=&quot;txAdvice&quot; transaction-manager=&quot;transactionManager&quot;&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;tx:attributes&gt;--&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- é…ç½®äº‹åŠ¡çš„è§„åˆ™ --&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--&lt;tx:method name=&quot;*&quot; propagation=&quot;REQUIRED&quot;/&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;/tx:attributes&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&lt;/tx:advice&gt;--&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- AOPçš„é…ç½® --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&lt;aop:config&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;aop:pointcut id=&quot;pointcut1&quot; expression=&quot;execution(* learningspring.transaction.declarative.AccountServiceImpl.*(..))&quot;/&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;aop:advisor advice-ref=&quot;txAdvice&quot; pointcut-ref=&quot;pointcut1&quot;/&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&lt;/aop:config&gt;--&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:annotation-driven</span> <span class="attr">transaction-manager</span>=<span class="string">&quot;transactionManager&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥å°±å¯ä»¥åœ¨ä¸šåŠ¡å±‚ç±»ä¸Šä½¿ç”¨äº‹åŠ¡ç®¡ç†çš„æ³¨è§£äº†ã€‚ä¿®æ”¹<code>AccountServiceImpl</code>ç±»ï¼Œæ·»åŠ <code>@Transactional</code>æ³¨è§£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * AccountServiceå®ç°ç±»</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Chen Rui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@Transactional(rollbackFor = Exception.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title">AccountService</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> AccountDao accountDao;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAccountDao</span><span class="params">(AccountDao accountDao)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.accountDao = accountDao;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">transfer</span><span class="params">(String from, String to, Double money)</span> </span>&#123;</span><br><span class="line">        accountDao.out(from, money);</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">1</span>/<span class="number">0</span>;</span><br><span class="line">        accountDao.in(to,money);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å†æ¬¡è¿è¡Œæµ‹è¯•æ–¹æ³•ï¼Œæ•°æ®åº“ä¹Ÿä¸ä¼šå‘ç”Ÿæ”¹å˜ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;è·ç¦»ä¸Šä¸€æ¬¡æ›´æ–°å·²ç»æœ‰ä¸€ä¸ªæœˆçš„æ—¶é—´äº†ï¼ŒğŸ˜€å…¶å®æœ¬æ”¹æŠŠ Jdbc çš„ç¬”è®°è¡¥å®Œï¼Œä½†æ˜¯è¿™äº›å¤©äº‹æƒ…å¤ªå¤š&lt;s&gt;å¿™ç€æ‰“csgo&lt;/s&gt;å¯¼è‡´äº†åšå®¢è¿™æ®µæ—¶é—´æ²¡æœ‰æ›´æ–°ã€‚ä»Šå¤©çªç„¶åœ¨ç½‘ä¸Šæ‰¾åˆ°äº†ä¸€ç¯‡å…³äºSpringæ¶æ„è®ºè¿°å¾ˆå¥½çš„æ–‡ç« ï¼Œæ­£å¥½ä¹Ÿæ˜¯å¾—æ›´æ–°ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;åŸæ–‡</summary>
      
    
    
    
    <category term="JavaWeb" scheme="https://pinkpeachabc.cn/categories/JavaWeb/"/>
    
    
    <category term="IOC" scheme="https://pinkpeachabc.cn/tags/IOC/"/>
    
    <category term="AOP" scheme="https://pinkpeachabc.cn/tags/AOP/"/>
    
    <category term="Spring" scheme="https://pinkpeachabc.cn/tags/Spring/"/>
    
  </entry>
  
  <entry>
    <title>ELä¸JSTL</title>
    <link href="https://pinkpeachabc.cn/EL%E4%B8%8EJSTL.html"/>
    <id>https://pinkpeachabc.cn/EL%E4%B8%8EJSTL.html</id>
    <published>2020-03-08T13:18:24.000Z</published>
    <updated>2020-07-18T13:08:53.737Z</updated>
    
    <content type="html"><![CDATA[<p>ç»å†è¿‡äº† JSPï¼Œå‘ç°æ—¢èƒ½å†™ Html åˆèƒ½å†™ Java ä»£ç ç¡®å®å¾ˆæ–¹ä¾¿ï¼Œä½†æ˜¯å¯¹äºJSP å†…éƒ¨è„šæœ¬çš„ç¼–å†™ï¼Œå´æ˜¯å¾ˆä¸å‹å¥½ğŸ˜­ ä»Šå¤©æ¥ä»‹ç»èƒ½å¤Ÿæ›¿ä»£ JSP é¡µé¢ä¸­çš„è„šæœ¬â€”â€”EL ä¸ JSTL</p><h2 id="elè¡¨è¾¾å¼">ELè¡¨è¾¾å¼<a title="#elè¡¨è¾¾å¼" href="#elè¡¨è¾¾å¼"></a></h2><p><strong>ä½œç”¨</strong></p><blockquote><p>ELæœ€ä¸»è¦çš„ä½œç”¨æ˜¯è·å¾—å››å¤§åŸŸä¸­çš„æ•°æ®</p></blockquote><p><strong>ä»å››å¤§åŸŸå½“ä¸­å–æ•°æ®</strong></p><p>pageContext</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$&#123;pageScope.key&#125;;</span><br></pre></td></tr></table></figure><p>request</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$&#123;requestScope.key&#125;</span><br></pre></td></tr></table></figure><p>session</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$&#123;sessionScope.key&#125;</span><br></pre></td></tr></table></figure><p>application</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$&#123;applicationScope.key&#125;</span><br></pre></td></tr></table></figure><p><strong>ç®€å†™</strong></p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$&#123;ELè¡¨è¾¾å¼&#125;</span><br></pre></td></tr></table></figure><blockquote><p>EL ä»å››ä¸ªåŸŸä¸­è·å¾—æŸä¸ªå€¼ ${key}ï¼Œä¾æ¬¡ä» pageContext åŸŸï¼Œrequest åŸŸï¼Œsession åŸŸï¼Œapplication åŸŸä¸­ï¼Œè·å–å±æ€§åœ¨æŸä¸ªåŸŸä¸­è·å–åå°†ä¸åœ¨å‘åå¯»æ‰¾ã€‚</p></blockquote><p><strong>EL å†…ç½® 11 å¯¹è±¡</strong></p><p><em>pageScope</em><br>è·å– JSP ä¸­ pageScope åŸŸä¸­çš„æ•°æ®</p><p><em>requestScope</em><br>è·å– JSP ä¸­ requestScope åŸŸä¸­çš„æ•°æ®</p><p><em>sessionScope</em><br>è·å– JSP ä¸­ sessionScope åŸŸä¸­çš„æ•°æ®</p><p>applicationScope<br>è·å– JSP ä¸­ applicationScope åŸŸä¸­çš„æ•°æ®</p><p><em>param</em><br><code>request.getParameter()</code></p><p><em>paramValues</em><br><code>rquest.getParameterValues()</code></p><p><em>header</em><br><code>request.getHeader(name)</code></p><p><em>headerValues</em><br><code>request.getHeaderValues()</code></p><p><em>initParam</em><br><code>this.getServletContext().getInitParameter(name)</code></p><p><em>cookie</em><br><code>request.getCookies()---cookie.getName()---cookie.getValue()</code></p><p><em>pageContext</em><br>pageContext è·å¾—å…¶ä»–å…«å¤§å¯¹è±¡ï¼Œè·å–å½“å‰é¡¹ç›®çš„åç§°<br><code>$&#123;pageContext.request.contextPath&#125;</code></p><p><strong>EL æ‰§è¡Œè¡¨è¾¾å¼</strong></p><blockquote><p>å†…éƒ¨å¯ä»¥è¿›è¡Œè¿ç®—ï¼Œåªè¦æœ‰ç»“æœ</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$&#123;<span class="number">1</span>+<span class="number">1</span>&#125;</span><br><span class="line">$&#123;empty user&#125;</span><br><span class="line">$&#123;user==<span class="keyword">null</span>?<span class="keyword">true</span>:<span class="keyword">false</span>&#125;</span><br></pre></td></tr></table></figure><h2 id="jstl">JSTL<a title="#jstl" href="#jstl"></a></h2><p><strong>ä»€ä¹ˆæ˜¯JSTL</strong></p><blockquote><p>JSTLï¼ˆJSP Standard Tag Library)ï¼ŒJSP æ ‡å‡†æ ‡ç­¾åº“ã€‚å¯ä»¥åµŒå…¥åœ¨ jsp é¡µé¢ä¸­ä½¿ç”¨æ ‡ç­¾çš„å½¢å¼å®Œæˆä¸šåŠ¡é€»è¾‘ç­‰åŠŸèƒ½ï¼Œjstl å‡ºç°çš„ç›®çš„åŒelä¸€æ ·ä¹Ÿæ˜¯è¦ä»£æ›¿ jsp é¡µé¢ä¸­çš„è„šæœ¬ä»£ç ã€‚</p></blockquote><p><strong>å¯¼åŒ…å’Œå¼•å…¥</strong></p><p>ä½¿ç”¨ jstl éœ€è¦å…ˆæŠŠ jar åŒ…å¼•å…¥å·¥ç¨‹å½“ä¸­ (jstl-1.2.jar)ï¼Œç„¶åå¼•å…¥æ ‡ç­¾åº“æ‰èƒ½å¤Ÿç»§ç»­ä½¿ç”¨ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> prefix=<span class="string">&quot;c&quot;</span>%&gt;</span><br></pre></td></tr></table></figure><p><strong>if æ ‡ç­¾</strong></p><p><code>&lt;c:if test=&quot;$&#123;1==1 &#125;&quot;&gt;</code>æ»¡è¶³æ¡ä»¶æ—¶ï¼Œä¸­é—´çš„å†…å®¹æ‰ä¼šæ˜¾ç¤ºå‡ºæ¥<code>&lt;/c:if&gt;</code></p><blockquote><p>é€šè¿‡æ˜¯ç»“åˆ EL è¡¨è¾¾å¼ä¸€èµ·ä½¿ç”¨ï¼ŒEL ä»åŸŸä¸­å–æ•°æ®ï¼Œä½¿ç”¨JSTLè¿›è¡Œåˆ¤æ–­æˆ–è€…éå†</p></blockquote><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;%request.setAttribute(<span class="string">&quot;money&quot;</span>, <span class="number">3</span>);%&gt;</span><br><span class="line">&lt;c:if test=&quot;$&#123;money &gt; 50&#125;&quot;&gt;é‡‘é¢å¤§äºï¼š50&lt;/c:if&gt;</span><br><span class="line">&lt;c:if test=&quot;$&#123;money &lt; 50&#125;&quot;&gt;é‡‘é¢å°äºï¼š50&lt;/c:if&gt;</span><br></pre></td></tr></table></figure><p>åšä¸€ä¸ª if æ ‡ç­¾çš„ä½¿ç”¨ï¼Œ<strong>éœ€æ±‚ï¼šç”¨æˆ·ç™»å½•æˆåŠŸæ—¶ï¼Œ è¿›å…¥é¦–é¡µä¸­ï¼Œæ˜¾ç¤ºç”¨æˆ·åã€‚</strong></p><blockquote><p>1.ç™»å½•æˆåŠŸæ—¶ï¼ŒæŠŠç”¨æˆ·å†™åˆ° session åŸŸå½“ä¸­ã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æœ‰å€¼</span></span><br><span class="line"><span class="keyword">if</span>(u != <span class="keyword">null</span>)&#123;</span><br><span class="line">    response.getWriter().write(<span class="string">&quot;ç™»å½•æˆåŠŸ&quot;</span>);</span><br><span class="line">    <span class="comment">//æŠŠç”¨æˆ·å­˜åœ¨sessionå½“ä¸­</span></span><br><span class="line">    HttpSession session = request.getSeesion();</span><br><span class="line">    session.setAttribute(<span class="string">&quot;user&quot;</span>,u);</span><br><span class="line">    <span class="comment">//è·³è½¬åˆ°ç™»å½•</span></span><br><span class="line">    response.setHeader(<span class="string">&quot;refresh&quot;</span>,<span class="string">&quot;3;url=/é¡¹ç›®åœ°å€/index.jsp&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>2.åœ¨é¦–é¡µå½“ä¸­è¿›è¡Œåˆ¤æ–­ï¼Œä» session åŸŸå½“ä¸­å–æ•°æ®ã€‚</p><p>3.é€šè¿‡ELç»“åˆJSTLè¿›è¡Œåˆ¤æ–­</p></blockquote><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;c:<span class="keyword">if</span> test=<span class="string">&quot;$&#123;empty user&#125;&quot;</span>&gt;</span><br><span class="line">&lt;a href=&quot;Login.jsp&quot;&gt;ç™»å½•&lt;/a&gt;</span><br><span class="line">&lt;a href=&quot;regist.jsp&quot;&gt;å…è´¹æ³¨å†Œ&lt;/a&gt;</span><br><span class="line">&lt;/c:if&gt;</span><br><span class="line">    </span><br><span class="line">&lt;c:<span class="keyword">if</span> test=<span class="string">&quot;$&#123;ï¼empty user&#125;&quot;</span>&gt;</span><br><span class="line">æ¬¢è¿ï¼š$&#123;user.username&#125;</span><br><span class="line">&lt;a href=&quot;#&quot;&gt;é€€å‡º&lt;/a&gt;</span><br><span class="line">&lt;/c:if&gt;</span><br></pre></td></tr></table></figure><p><strong>foreach æ ‡ç­¾</strong></p><blockquote><p>æ™®é€šå¾ªç¯</p></blockquote><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- ä»åŸŸå½“ä¸­å–æ•°æ® è‡ªåŠ¨æŠŠæ•°æ®å­˜å‚¨ pageScope --&gt;</span><br><span class="line">&lt;c:forEach begin=<span class="string">&quot;0&quot;</span> end=<span class="string">&quot;5&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;i&quot;</span>&gt;</span><br><span class="line">$&#123;i&#125;&lt;br/&gt;</span><br><span class="line">&lt;/c:forEach&gt;</span><br></pre></td></tr></table></figure><blockquote><p>å¢åŠ  for å¾ªç¯</p></blockquote><p>éå†å­—ç¬¦ä¸²é›†åˆ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">    list&lt;String&gt; strList = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">strList.add(<span class="string">&quot;aaa&quot;</span>);</span><br><span class="line">strList.add(<span class="string">&quot;aaa&quot;</span>);</span><br><span class="line">strList.add(<span class="string">&quot;aaa&quot;</span>);</span><br><span class="line"> %&gt;</span><br><span class="line">   &lt;!--ä¼šè‡ªåŠ¨æŠŠå–å‡ºæ¥çš„å€¼æ”¾å…¥åˆ°pageScopeåŸŸå½“ä¸­--&gt;</span><br><span class="line">&lt;c:forEach items=<span class="string">&quot;$&#123;strList&#125;&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;str&quot;</span>&gt;</span><br><span class="line">    $&#123;str&#125;</span><br><span class="line">&lt;/c:forEach&gt;</span><br><span class="line">     </span><br></pre></td></tr></table></figure><p>éå†å¯¹è±¡é›†åˆ</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">    list&lt;User&gt; userList = <span class="keyword">new</span> ArrayList&lt;User&gt;();</span><br><span class="line">User u1 = <span class="keyword">new</span> User();</span><br><span class="line">u1.setUsername(<span class="string">&quot;æå››&quot;</span>);</span><br><span class="line"></span><br><span class="line">User u2 = <span class="keyword">new</span> User();</span><br><span class="line">u2.setUsername(<span class="string">&quot;ç‹äº”&quot;</span>);</span><br><span class="line">userList.add(u1);</span><br><span class="line">userList.add(u2);</span><br><span class="line">session.setAttribute(<span class="string">&quot;userList&quot;</span>,userList);</span><br><span class="line"> %&gt;</span><br><span class="line">&lt;c:forEach items=<span class="string">&quot;$&#123;userList&#125;&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;user&quot;</span>&gt;</span><br><span class="line">  $&#123;user.username&#125;</span><br><span class="line">&lt;/c:forEach&gt;</span><br></pre></td></tr></table></figure><p>éå† map</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">Map&lt;String,String&gt; strMap = <span class="keyword">new</span> HashMap&lt;String,String&gt;();</span><br><span class="line">strMap.put(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;æå››&quot;</span>);</span><br><span class="line">strMap.put(<span class="string">&quot;age&quot;</span>,<span class="string">&quot;28&quot;</span>);</span><br><span class="line">strMap.put(<span class="string">&quot;addr&quot;</span>,<span class="string">&quot;å¤©æ´¥&quot;</span>);</span><br><span class="line">session.setAttribute(<span class="string">&quot;me&quot;</span>,strMap);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;:forEach items=<span class="string">&quot;$&#123;me&#125;&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;entry&quot;</span>&gt;</span><br><span class="line">$&#123;entry.key&#125;:$&#123;entry.value&#125;</span><br><span class="line">&lt;/:forEach&gt;</span><br></pre></td></tr></table></figure><hr><p>åƒæ˜¯ jstl çš„æ ‡ç­¾åº“è¿˜æœ‰å¾ˆå¤šï¼Œè¿™é‡Œåªä»‹ç»äº†ä¸¤ä¸ªæ ‡ç­¾ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ç»å†è¿‡äº† JSPï¼Œå‘ç°æ—¢èƒ½å†™ Html åˆèƒ½å†™ Java ä»£ç ç¡®å®å¾ˆæ–¹ä¾¿ï¼Œä½†æ˜¯å¯¹äºJSP å†…éƒ¨è„šæœ¬çš„ç¼–å†™ï¼Œå´æ˜¯å¾ˆä¸å‹å¥½ğŸ˜­ ä»Šå¤©æ¥ä»‹ç»èƒ½å¤Ÿæ›¿ä»£ JSP é¡µé¢ä¸­çš„è„šæœ¬â€”â€”EL ä¸ JSTL&lt;/p&gt;
&lt;h2 id=&quot;elè¡¨è¾¾å¼&quot;&gt;ELè¡¨è¾¾å¼&lt;a title=&quot;#elè¡¨è¾¾å¼&quot; h</summary>
      
    
    
    
    <category term="JavaWeb" scheme="https://pinkpeachabc.cn/categories/JavaWeb/"/>
    
    
    <category term="EL" scheme="https://pinkpeachabc.cn/tags/EL/"/>
    
    <category term="JSTL" scheme="https://pinkpeachabc.cn/tags/JSTL/"/>
    
  </entry>
  
  <entry>
    <title>JSPçš„åŸºæœ¬è¯­æ³•</title>
    <link href="https://pinkpeachabc.cn/JSP%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95.html"/>
    <id>https://pinkpeachabc.cn/JSP%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95.html</id>
    <published>2020-03-04T06:42:17.000Z</published>
    <updated>2020-08-16T13:30:21.449Z</updated>
    
    <content type="html"><![CDATA[<h2 id="jsp-ç®€ä»‹">JSP ç®€ä»‹<a title="#jsp-ç®€ä»‹" href="#jsp-ç®€ä»‹"></a></h2><blockquote><p>å‰ä¸¤ç« å†™çš„å“åº”å’Œ sessionï¼Œè¿™æ¬¡æˆ‘æ¥è¯´ä¸€ä¸‹ jsp ğŸ˜€</p></blockquote><p><strong>ä»€ä¹ˆæ˜¯ JSP</strong></p><p>JSP å…¨åä¸º Java Server Pagesï¼Œä¸­æ–‡åå« java æœåŠ¡å™¨é¡µé¢ã€‚åœ¨ä¼ ç»Ÿçš„ç½‘é¡µHTMLæ–‡ä»¶(<em>.htm,</em>.html)ä¸­æ’å…¥ Java ç¨‹åºæ®µå’Œ JSP æ ‡è®°ï¼Œç¼€åä¸º(*.jsp)ã€‚</p><p><strong>ä¸ºä»€ä¹ˆè¦æœ‰ JSP</strong></p><p>ç›´æ¥ä½¿ç”¨ Html æ–‡ä»¶æ˜¯æ²¡æœ‰åŠæ³•è¾“å‡º Java å½“ä¸­çš„ä¿¡æ¯ï¼Œä½¿ç”¨ servlet æ¥å»è¾“å‡ºä¸€ä¸ªç½‘é¡µéå¸¸çš„éº»çƒ¦ã€‚äºæ˜¯å°±å‡ºç°äº†jspï¼Œåˆèƒ½å†™ htmlï¼Œåˆèƒ½å†™ Java ä»£ç </p><p><strong>JSP çš„ç»„æˆéƒ¨åˆ†</strong></p><p>é™æ€æ•°æ®ï¼Œå¦‚ HTML</p><p>JSP è„šæœ¬å…ƒç´ å’Œå˜é‡</p><p>JSP æŒ‡ä»¤ï¼Œå¦‚ include æŒ‡ä»¤</p><p>JSP æ ‡ç­¾åŠ¨ä½œ</p><p>ç”¨æˆ·è‡ªå®šä¹‰æ ‡ç­¾</p><h2 id="jspè„šæœ¬å…ƒç´ å’Œå˜é‡">JSPè„šæœ¬å…ƒç´ å’Œå˜é‡<a title="#jspè„šæœ¬å…ƒç´ å’Œå˜é‡" href="#jspè„šæœ¬å…ƒç´ å’Œå˜é‡"></a></h2><p><strong>åœ¨ JSP å½“ä¸­å†™ Java ä»£ç </strong></p><p><code>&lt;%javaä»£ç %&gt;</code>å†…éƒ¨çš„ java ä»£ç ç¿»è¯‘åˆ° service æ–¹æ³•çš„å†…éƒ¨<br><code>&lt;%=javaå˜é‡æˆ–è¡¨è¾¾å¼&gt;</code>ä¼šè¢«ç¿»è¯‘æˆ service æ–¹æ³•å†…éƒ¨ <code>out.print()</code><br><code>&lt;%!javaä»£ç %&gt;</code>ä¼šè¢«ç¿»è¯‘æˆ servlet çš„æˆå‘˜çš„å†…å®¹<br><strong>JSP æ³¨é‡Š</strong></p><p>HTML æ³¨é‡Šï¼š<code>&lt;!--æ³¨é‡Šå†…å®¹--&gt;</code><br>å¯è§èŒƒå›´ jsp æºç ã€ç¿»è¯‘åçš„ servletã€é¡µé¢<br><strong>Java æ³¨é‡Š</strong></p><p><code>//å•è¡Œæ³¨é‡Š  /*å¤šè¡Œæ³¨é‡Š*/</code><br>å¯è§èŒƒå›´ jsp æºç  ç¿»è¯‘åçš„ servlet,é¡µé¢ä¸­çœ‹ä¸åˆ°<br><strong>Jsp æ³¨é‡Š</strong></p><p><code>&lt;%--æ³¨é‡Šå†…å®¹--%&gt;</code><br>å¯è§èŒƒå›´ jsp æºç å¯è§</p><h2 id="jsp-æŒ‡ä»¤">JSP æŒ‡ä»¤<a title="#jsp-æŒ‡ä»¤" href="#jsp-æŒ‡ä»¤"></a></h2><p><strong>ä»€ä¹ˆæ˜¯æŒ‡ä»¤</strong></p><blockquote><p>JSP æŒ‡ä»¤ç”¨äºè®¾ç½®æ•´ä¸ª JSP é¡µé¢çš„ç›¸å…³ä¿¡æ¯ï¼Œä»¥åŠç”¨äº JSP é¡µé¢ä¸å…¶å®ƒå®¹å™¨ä¹‹é—´çš„é€šä¿¡ã€‚</p></blockquote><p><strong>æœ‰å“ªäº›æŒ‡ä»¤</strong></p><blockquote><p>page æŒ‡ä»¤include æŒ‡ä»¤taglib æŒ‡ä»¤</p></blockquote><p><strong>page æŒ‡ä»¤</strong></p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%<span class="meta">@page</span> <span class="string">&quot;æŒ‡ä»¤&quot;</span> %&gt;</span><br></pre></td></tr></table></figure><p>ç”¨äºè®¾å®šæ•´ä¸ª JSP é¡µé¢çš„å±æ€§å’Œç›¸å…³åŠŸèƒ½ï¼Œå¤šä¸ªå±æ€§ä¹‹é—´ä½¿ç”¨ç©ºæ ¼éš”å¼€ã€‚page æŒ‡ä»¤å…±æœ‰ 11 ä¸ªå±æ€§åˆ†åˆ«æ˜¯ï¼š</p><p>â€‹<em>contentType</em><br>â€‹contentType å±æ€§æŒ‡å®š JSP é¡µé¢çš„ MIME å’Œç¼–ç æ ¼å¼</p><p>â€‹<em>buffer</em><br>â€‹ç”¨æ¥è®¾ç½®è¾“å‡ºæµç¼“å†²åŒº,ç¼“å†²åŒºçš„ä½œç”¨å°±æ˜¯ä¸ºäº†æé«˜ IO æ€§èƒ½,ä¹Ÿå°±æ˜¯è¯´å‡å°‘ write çš„æ¬¡æ•°</p><p>â€‹<em>language å±æ€§</em><br>â€‹æŒ‡å®šé¡µé¢ä¸­ä½¿ç”¨çš„è„šæœ¬è¯­è¨€ç§ç±»,ç›®å‰åªæ”¯æŒ java</p><p>â€‹isErrorPage<br>â€‹å…è®¸æŒ‡å®šçš„ JSP é¡µé¢ä¸ºé”™è¯¯å¤„ç†é¡µé¢</p><p>â€‹<em>autoFlush</em><br>â€‹ç”¨æ¥æŒ‡å®šå½“è¾“å‡ºæµç¼“å†²åŒºæ»¡äº†çš„æ—¶å€™ï¼Œæ˜¯å¦è‡ªåŠ¨åˆ·æ–°ç¼“å†²åŒº</p><p>â€‹<em>errorPage</em><br>â€‹å¦‚æœå½“å‰é¡µé¢å‘ç”Ÿå¼‚å¸¸,ç½‘é¡µä¼šé‡å®šå‘åˆ° errorPage æ‰€æŒ‡å®šçš„é¡µé¢è¿›è¡Œå¤„ç†</p><p>â€‹<em>extends</em><br>â€‹ç”¨äºæŒ‡å®šè¯¥ JSP ç”Ÿæˆçš„ servlet ç»§æ‰¿è‡ªå“ªä¸ªçˆ¶ç±»,å¿…é¡»æŒ‡å®šåŒ…ååŠ ç±»å</p><p>â€‹<em>session</em><br>â€‹æŒ‡å®šå½“å‰é¡µé¢æ˜¯å¦èƒ½è·å¾—å½“å‰ç”¨æˆ·çš„ session å¯¹è±¡,ç¼ºçœæ˜¯ true<br>â€‹å¦‚æœæŒ‡å®šä¸º false,é‚£ä¹ˆåœ¨è¯¥é¡µé¢ä¸­æ— æ³•ä½¿ç”¨ sessionï¼Œä½¿ç”¨çš„è¯ä¼šæç¤º500é”™è¯¯</p><p>â€‹<em>import</em><br>â€‹åœ¨ JSP ä¸­å¼•å…¥ Java çš„åŒ…å’Œç±»ï¼Œå¤šä¸ªåŒ…ä¹‹é—´ä»¥é€—å·éš”å¼€</p><p>â€‹<em>info</em><br>â€‹ç”¨æ¥è®¾ç½®è¯¥ jsp æ–‡ä»¶çš„ä»‹ç»ä¿¡æ¯</p><p>â€‹<em>pageEncoding</em><br>â€‹pageEncoding å±æ€§ç”¨æ¥æŒ‡å®š JSP æ–‡ä»¶çš„ç¼–ç æ ¼å¼</p><p>â€‹<em>isELIgnored</em><br>â€‹ç”¨æ¥æ ‡ç¤ºæ˜¯å¦æ”¯æŒ EL è¡¨è¾¾å¼</p><p>â€‹<em>isThreadSafe</em><br>â€‹ç¼ºçœå€¼ä¸º true<br>â€‹æŒ‡å®šè¯¥ JSP æ–‡ä»¶æ˜¯å¦æ”¯æŒå¤šçº¿ç¨‹è®¿é—®</p><p><strong>includeæŒ‡ä»¤</strong></p><p>è¡¨ç¤ºåœ¨JSPç¼–è¯‘æ—¶æ’å…¥ä¸€ä¸ªåŒ…å«æ–‡ä»¶æˆ–è€…ä»£ç çš„æ–‡ä»¶ï¼Œinclude æŒ‡ä»¤æ‰€åŒ…å«çš„æ–‡ä»¶åä¸èƒ½æ˜¯ä¸€ä¸ªå˜é‡ url,åªèƒ½æ˜¯é™æ€çš„æ–‡ä»¶åã€‚</p><blockquote><p>é™æ€åŒ…å«</p></blockquote><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;%<span class="meta">@include</span> file=<span class="string">&quot;header.jsp&quot;</span>%&gt;</span><br><span class="line">&lt;%<span class="meta">@include</span> file=<span class="string">&quot;footer.jsp&quot;</span>%&gt;</span><br></pre></td></tr></table></figure><p>å°†ä¸¤ä¸ª jsp é¡µé¢æ¥ç€åˆ°ä¸€èµ·ï¼Œ ç„¶åå†ç¿»è¯‘æˆ servlet</p><p><strong>taglibæŒ‡ä»¤</strong></p><p>å£°æ˜ JSP æ–‡ä»¶ä½¿ç”¨äº†æ ‡ç­¾åº“</p><blockquote><p>æœ‰å“ªäº›æ ‡ç­¾åº“</p></blockquote><p>JSP æ ‡å‡†æ ‡ç­¾åº“ï¼Œç¬¬ä¸‰æ–¹æ ‡ç­¾åº“ï¼Œè‡ªå®šä¹‰æ ‡ç­¾åº“</p><h2 id="jsp-æ ‡ç­¾åŠ¨ä½œ">JSP æ ‡ç­¾åŠ¨ä½œ<a title="#jsp-æ ‡ç­¾åŠ¨ä½œ" href="#jsp-æ ‡ç­¾åŠ¨ä½œ"></a></h2><p><strong>é¡µé¢åŒ…å«</strong></p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:include page=&quot;è¢«åŒ…å«çš„é¡µé¢&quot;&gt;&lt;/jsp:include&gt;</span><br></pre></td></tr></table></figure><blockquote><p>åŠ¨æ€åŒ…å«</p></blockquote><p>å„è‡ªç¿»è¯‘è‡ªå·±çš„é¡µé¢ï¼Œç„¶åå†å¼•å…¥</p><p><strong>è¯·æ±‚è½¬å‘</strong></p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:forward page=&quot;è¦è½¬å‘çš„èµ„æº&quot;&gt;&lt;/jsp:forward&gt;</span><br></pre></td></tr></table></figure><h2 id="jsp-éšå¼å¯¹è±¡">JSP éšå¼å¯¹è±¡<a title="#jsp-éšå¼å¯¹è±¡" href="#jsp-éšå¼å¯¹è±¡"></a></h2><p><em>out</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//outçš„ç±»å‹ï¼šJspWriter</span></span><br><span class="line"><span class="comment">//outä½œç”¨å°±æ˜¯æƒ³å®¢æˆ·ç«¯è¾“å‡ºå†…å®¹ out.write()</span></span><br><span class="line"><span class="comment">//outç¼“å†²åŒºé»˜è®¤8kb</span></span><br><span class="line"><span class="comment">//å¯ä»¥è®¾ç½®æˆ0 ä»£è¡¨å…³é—­outç¼“å†²åŒºå†…å®¹ç›´æ¥å†™åˆ°responsç¼“å†²åŒº</span></span><br><span class="line"><span class="comment">//outå†™çš„å†…å®¹å†™åˆ°outç¼“å†²åŒºå½“ä¸­</span></span><br><span class="line"><span class="comment">//æœ€åå†æŠŠoutç¼“å†²åŒºå½“ä¸­çš„å†…å®¹åˆå¹¶åˆ°responseç¼“å†²åŒºå½“ä¸­</span></span><br></pre></td></tr></table></figure><p><em>request</em><br>å¾—åˆ°ç”¨æˆ·è¯·æ±‚ä¿¡æ¯å¯¹è±¡</p><p><em>response</em><br>æœåŠ¡å™¨å‘å®¢æˆ·ç«¯çš„å“åº”å¯¹è±¡</p><p><em>config</em><br>æœåŠ¡å™¨é…ç½®ï¼Œå¯ä»¥å–å¾—åˆå§‹åŒ–å‚æ•°</p><p><em>session</em><br>ç”¨æ¥ä¿å­˜ç”¨æˆ·ä¼šè¯çš„ä¿¡æ¯</p><p><em>application</em><br>æ‰€æœ‰ç”¨æˆ·çš„å…±äº«ä¿¡æ¯ï¼Œå°±æ˜¯ servletContext</p><p><em>page</em><br>æŒ‡å½“å‰é¡µé¢è½¬æ¢åçš„ Servlet ç±»çš„å®ä¾‹</p><p><em>pageContext</em><br>jsp é¡µé¢çš„ä¸Šä¸‹æ–‡å¯¹è±¡</p><blockquote><p>æ˜¯ä¸€ä¸ªåŸŸå¯¹è±¡</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">setAttribute(String name,Object obj)</span><br><span class="line">getAttribute(String name)</span><br><span class="line">removeAttrbute(String name)</span><br></pre></td></tr></table></figure><blockquote><p>å¯ä»¥å‘æŒ‡å®šçš„å…¶ä»–åŸŸä¸­å­˜å–æ•°æ®</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">setAttribute(String name,Object obj,<span class="keyword">int</span> scope)</span><br><span class="line">setAttribute(â€œnameâ€,<span class="string">&quot;lk&quot;</span>,PageContext.REQUEST_SCOPE);</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">getAttribute(String name,<span class="keyword">int</span> scope)</span><br><span class="line">getAttribute(<span class="string">&quot;lk&quot;</span>,PageContext.REQUEST_SCOPE)</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">removeAttrbute(String name,<span class="keyword">int</span> scope)</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">findAttribute(String name)</span><br><span class="line"><span class="comment">//è‡ªåŠ¨åˆ°æ‰€æœ‰çš„åŸŸå½“ä¸­æ‰¾æ•°æ®</span></span><br><span class="line"><span class="comment">//ä»å°åˆ°å¤§çš„èŒƒå›´æœç´¢æ•°æ®</span></span><br><span class="line"><span class="comment">//ä¾æ¬¡ä» pageContext åŸŸï¼Œrequest åŸŸï¼Œsession åŸŸï¼Œapplication åŸŸä¸­è·å–å±æ€§</span></span><br><span class="line"><span class="comment">//åœ¨æŸä¸ªåŸŸä¸­è·å–åå°†ä¸åœ¨å‘åå¯»æ‰¾</span></span><br></pre></td></tr></table></figure><blockquote><p>å¯ä»¥è·å¾—å…¶ä»– 8 å¤§éšå¼å¯¹è±¡</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pageContext.getRequest()</span><br><span class="line">pageContext.getSession()</span><br></pre></td></tr></table></figure><p><em>exception</em><br>è¡¨ç¤º JSP é¡µé¢æ‰€å‘ç”Ÿçš„å¼‚å¸¸ï¼Œåœ¨é”™è¯¯é¡µä¸­æ‰èµ·ä½œç”¨<br>åªæœ‰æ˜¯é”™è¯¯é¡µé¢çš„æ—¶å€™ï¼Œæ‰ä¼šæœ‰è¯¥å¯¹è±¡</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;jsp-ç®€ä»‹&quot;&gt;JSP ç®€ä»‹&lt;a title=&quot;#jsp-ç®€ä»‹&quot; href=&quot;#jsp-ç®€ä»‹&quot;&gt;&lt;/a&gt;&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;å‰ä¸¤ç« å†™çš„å“åº”å’Œ sessionï¼Œè¿™æ¬¡æˆ‘æ¥è¯´ä¸€ä¸‹ jsp ğŸ˜€&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;stro</summary>
      
    
    
    
    <category term="JavaWeb" scheme="https://pinkpeachabc.cn/categories/JavaWeb/"/>
    
    
    <category term="JSP" scheme="https://pinkpeachabc.cn/tags/JSP/"/>
    
  </entry>
  
  <entry>
    <title>cookieä¸Session</title>
    <link href="https://pinkpeachabc.cn/JavaWeb-%E4%BC%9A%E8%AF%9D.html"/>
    <id>https://pinkpeachabc.cn/JavaWeb-%E4%BC%9A%E8%AF%9D.html</id>
    <published>2020-02-27T12:33:57.000Z</published>
    <updated>2020-08-16T13:30:25.537Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä¼šè¯æ¦‚è¿°">ä¼šè¯æ¦‚è¿°<a title="#ä¼šè¯æ¦‚è¿°" href="#ä¼šè¯æ¦‚è¿°"></a></h2><blockquote><p>ä»€ä¹ˆæ˜¯ä¼šè¯:ä»æ‰“å¼€æµè§ˆå™¨,åˆ°è®¿é—®ç½‘é¡µ,åˆ°æœ€ç»ˆå…³é—­æµè§ˆå™¨,æ•´ä¸ªè¿‡ç¨‹å°±æ˜¯ä¸€æ¬¡ä¼šè¯ã€‚</p></blockquote><p><strong>ä¼šè¯çš„ç‰¹ç‚¹</strong></p><p>åŒ…å«å¤šä¸ªè¯·æ±‚,ä¸€æ¬¡å®Œæ•´çš„ä¼šè¯é’ˆå¯¹ä¸€ä¸ªç”¨æˆ·ã€‚</p><p><strong>ä¼šè¯ç®¡ç†æŠ€æœ¯</strong></p><ul><li>ç¬¬ä¸€ç§: cookie æŠ€æœ¯,å®¢æˆ·ç«¯æŠ€æœ¯</li><li>ç¬¬äºŒç§: session æŠ€æœ¯,æœåŠ¡ç«¯æŠ€æœ¯</li></ul><p><strong>è´­ç‰©è½¦æ¡ˆåˆ—</strong></p><blockquote><p>ä¹°å®Œå•†å“å,åŠ å…¥è´­å…¥è½¦,ä¹°çš„å•†å“å­˜åˆ°ä»€ä¹ˆå¯¹è±¡æ¯”è¾ƒåˆé€‚?</p></blockquote><ul><li><p>ä½¿ç”¨ request åŸŸå¯¹è±¡ä¿å­˜å•†å“ä¿¡æ¯<br>ç»“è®º:ä½¿ç”¨ request ä¿å­˜å•†å“ä¿¡æ¯ä¸å¯ä»¥,å› ä¸ºæ¯æ¬¡å‘é€è¯·æ±‚,éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„è¯·æ±‚å¯¹è±¡</p></li><li><p>ä½¿ç”¨ ServletContext åŸŸå¯¹è±¡ä¿å­˜å•†å“ä¿¡æ¯<br>ç»“è®º:ä½¿ç”¨ ServletContextå¯¹è±¡ä¿å­˜å•†å“ä¿¡æ¯,å¯ä»¥,ä½†æ˜¯ä¸åˆç†</p></li></ul><p>æ‰€ä»¥åœ¨å¼€å‘ä¸­,ä¿å­˜ä¼šè¯è¿‡ç¨‹ä¸­äº§ç”Ÿçš„æ•°æ®,é‡‡ç”¨ä¼šè¯ç®¡ç†æŠ€æœ¯,ä¹Ÿå°±æ˜¯ä½¿ç”¨ cookie å’Œ  session æŠ€æœ¯æ¥ä¿å­˜ä¼šè¯è¿‡ç¨‹äº§ç”Ÿçš„æ•°æ®ã€‚</p><h2 id="cookie">Cookie<a title="#cookie" href="#cookie"></a></h2><blockquote><p>æœåŠ¡å™¨æ€æ ·æŠŠ cookie å‘ç»™å®¢æˆ·ç«¯</p></blockquote><p><strong>åˆ›å»º Cookie</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Cookie cookie = <span class="keyword">new</span> Cookie(String cookieName,String cookieValue);</span><br></pre></td></tr></table></figure><p><strong>å‘å®¢æˆ·ç«¯å‘é€ cookie</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">response.addCookie(cookie);</span><br></pre></td></tr></table></figure><p><strong>è®¿é—®</strong></p><blockquote><p>ç¬¬ä¸€æ¬¡è®¿é—®æ—¶,è¯·æ±‚å¤´å½“ä¸­æ²¡æœ‰ cookie</p><p>ç¬¬ä¸€æ¬¡è®¿é—®æ—¶, å“åº”å½“ä¸­ä¼šçœ‹åˆ° set-cookie</p><p>å†ä¸€æ¬¡è®¿é—®æ—¶,è¯·æ±‚å¤´å½“ä¸­å°±èƒ½å¤Ÿçœ‹åˆ° cookie ä¿¡æ¯</p></blockquote><p>è®¿é—®æœåŠ¡å™¨çš„ä»»ä½•èµ„æºï¼Œä¸€èˆ¬æƒ…å†µä¸‹éƒ½ä¼šæŠŠ cookie å¸¦å»è¿‡ã€‚</p><p><strong>Cookie é»˜è®¤å­˜å‚¨æ—¶é—´</strong></p><blockquote><p>é»˜è®¤ cookie çš„æ˜¯ä¼šè¯çº§åˆ«</p></blockquote><p>æ‰“å¼€æµè§ˆå™¨ï¼Œå…³é—­æµè§ˆå™¨ä¸ºä¸€æ¬¡ä¼šè¯ï¼Œå¦‚æœä¸è®¾ç½®æŒä¹…åŒ–æ—¶é—´ï¼Œcookie ä¼šå­˜å‚¨åœ¨æµè§ˆå™¨çš„å†…å­˜ä¸­ï¼Œæµè§ˆå™¨å…³é—­ cookie ä¿¡æ¯é”€æ¯ã€‚</p><p><strong>è®¾ç½® Cookie åœ¨å®¢æˆ·ç«¯çš„å­˜å‚¨æ—¶é—´</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cookie.setMaxAge(<span class="keyword">int</span> seconds);</span><br></pre></td></tr></table></figure><p>è®¾ç½®çš„æ—¶é—´ä¸ºç§’ï¼Œå¦‚æœè®¾ç½®æŒä¹…åŒ–æ—¶é—´ï¼Œcookie ä¿¡æ¯ä¼šè¢«æŒä¹…åŒ–åˆ°æµè§ˆå™¨çš„ç£ç›˜æ–‡ä»¶é‡Œï¼Œè¿‡æœŸä¼šè‡ªåŠ¨åˆ é™¤ã€‚</p><p><strong>Cookie çš„æºå¸¦è·¯å¾„</strong></p><blockquote><p>è®¿é—®æŸä¸€ä¸ªèµ„æºæ—¶ï¼Œè¦ä¸è¦å¸¦ cookie ä¿¡æ¯ã€‚å¦‚æœæ¯ä¸€å¤–èµ„æºéƒ½æºå¸¦ï¼Œä¼šå½±å“ä¼ è¾“é€Ÿåº¦ ã€‚å¦‚æœä¸è®¾ç½®æºå¸¦è·¯å¾„ï¼Œé»˜è®¤æƒ…å†µä¸‹ä¼šåœ¨è®¿é—®åˆ›å»º cookie çš„ web èµ„æºç›¸åŒçš„è·¯å¾„éƒ½æºå¸¦ cookie ä¿¡æ¯ã€‚</p></blockquote><p>åœ¨ myxq/CookieServlet ä¸‹åˆ›å»ºçš„ cookie</p><p>åœ¨ myxq/ä¸‹çš„index.jsp è®¿é—®æ—¶ä¼šæºå¸¦ cookie</p><p>ä¸æ˜¯åœ¨ myxq ä¸‹ï¼Œä¸ä¼šæºå¸¦ cookie</p><p><strong>è®¾ç½® Cookie æºå¸¦è·¯å¾„</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cookie.setPath(String path);</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cookie.setPath(<span class="string">&quot;/CookiePro/cookieServlet&quot;</span>);</span><br><span class="line"><span class="comment">//åªæœ‰è®¿é—® cookieServlet æ‰æºå¸¦ cookie ä¿¡æ¯</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cookie.setPath(<span class="string">&quot;/CookiePro&quot;</span>);</span><br><span class="line"><span class="comment">//è®¿é—®æŒ‡å®šçš„å·¥ç¨‹æ—¶ï¼Œéƒ½ä¼šæºå¸¦ cookie ä¿¡æ¯</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cookie.setPath(<span class="string">&quot;/&quot;</span>);</span><br><span class="line"><span class="comment">//è®¿é—®æœåŠ¡å™¨ä¸‹éƒ¨ç½²çš„æ‰€æœ‰å·¥ç¨‹æ—¶éƒ½ä¼šæºå¸¦ cookie ä¿¡æ¯</span></span><br></pre></td></tr></table></figure><p><strong>åˆ é™¤ Cookie</strong></p><blockquote><p>ä½¿ç”¨åŒååŒè·¯å¾„çš„æŒä¹…åŒ–æ—¶é—´ä¸º0çš„cookieè¿›è¡Œè¦†ç›–å³å¯</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cookie.setMaxAge(<span class="number">0</span>);</span><br></pre></td></tr></table></figure><p><strong>æœåŠ¡å™¨å¦‚ä½•è·å–å®¢æˆ·ç«¯æºå¸¦çš„ Cookie</strong></p><blockquote><p>é€šè¿‡ Request å¯¹è±¡çš„ getCookies() æ–¹æ³•,è·å–çš„æ˜¯æ‰€æœ‰çš„ cookie,è¦è¿›è¡Œéå†ï¼Œæ‰¾å‡ºè‡ªå·±åç§°çš„é‚£ä¸€ä¸ªã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.è·å–æ‰€æœ‰çš„cookieçš„å¯¹è±¡</span></span><br><span class="line">Cookie[] cookies = request.getCookies();</span><br><span class="line"><span class="comment">//2.è·å–çš„ç»“æœä¸ä¸ºç©º</span></span><br><span class="line"><span class="keyword">if</span>(cookies != <span class="keyword">null</span>)&#123;</span><br><span class="line">    <span class="comment">//3.éå†æ‰€æœ‰çš„cookie</span></span><br><span class="line">    <span class="keyword">for</span>(Cookie cookie:cookies)</span><br><span class="line">        <span class="comment">//éå†å‡ºæ¯ä¸€å°æ—¶ï¼Œå–å‡ºå¯¹åº”çš„åç§°</span></span><br><span class="line">        String name = cookie.getName();</span><br><span class="line">    <span class="comment">//åˆ¤æ–­åç§°æ˜¯å¦ä¸ºè‡ªå·±å‚¨å­˜çš„å“ªä¸€ä¸ª</span></span><br><span class="line">    <span class="keyword">if</span>(name.equals(<span class="string">&quot;pinkpeach&quot;</span>))&#123;</span><br><span class="line">            System.out.println(cookie.getValue());</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="sessionå¯¹è±¡">Sessionå¯¹è±¡<a title="#sessionå¯¹è±¡" href="#sessionå¯¹è±¡"></a></h2><p><strong>ä»€ä¹ˆæ˜¯ session</strong></p><p>session æ˜¯ä¸€ç§ä¼šè¯ç®¡ç†æŠ€æœ¯, session ç”¨æ¥ä¿å­˜ä¼šè¯è¿‡ç¨‹ä¸­çš„æ•°æ®,ä¿å­˜çš„æ•°æ®å­˜å‚¨åˆ°æœåŠ¡å™¨ç«¯ã€‚</p><p>session åŸç†:åŸºäº cookie å®ç°çš„,æ›´ç¡®åˆ‡çš„è¯´æ˜¯åŸºäºä¼šè¯çº§åˆ«çš„ cookie å®ç°çš„ã€‚</p><p><strong>HttpSession API</strong></p><blockquote><p>session å¸¸ç”¨æ–¹æ³•</p></blockquote><p>å¾—åˆ° session çš„id( JESSIONIDå¯¹åº”çš„å€¼): <code>getId();</code></p><p>è®¾ç½® session çš„ç”Ÿå‘½æ—¶é•¿: <code>setMaxInactiveInterval(int interval);</code></p><p>é”€æ¯ session: <code>invalidate();</code></p><p>å¾—åˆ° sessIon: <code>HttpSession session = request.getsession();</code></p><p><strong>session åŸŸå¯¹è±¡</strong></p><blockquote><p>ä½œç”¨èŒƒå›´ä¸€æ¬¡å®Œæ•´çš„ä¼šè¯(åŒ…å«å¤šä¸ªè¯·æ±‚)</p></blockquote><p>å­˜å€¼: <code>setAttribute(String key, Object obj);</code></p><p>å–å€¼: <code>Object obj= getAttribute(String key);</code></p><p>ç§»é™¤: <code>removeAttribute(String key);</code></p><p>æ€»ç»“åŸŸå¯¹è±¡: request åŸŸå¯¹è±¡  session åŸŸå¯¹è±¡ servletContext åŸŸå¯¹è±¡,ä½œç”¨èŒƒå›´ä»¥æ¬¡å˜å¤§</p><p><strong>Sessionè¶…æ—¶ç®¡ç†</strong></p><blockquote><p>sessionå¯¹è±¡æ˜¯ç”±ç”Ÿå‘½æ—¶é•¿,å®ƒçš„é»˜è®¤å­˜æ´»æ—¶é—´æ˜¯30åˆ†é’Ÿã€‚</p></blockquote><p>å…·ä½“é…ç½®æ‰¾ tomcat è½¯ä»¶çš„ conf ä¸‹çš„web.xmlæ–‡ä»¶</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">session-config</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">session-timeout</span>&gt;</span>30<span class="tag">&lt;/<span class="name">session-timeout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">session-config</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç«‹å³é”€æ¯ session å¯¹è±¡: <code>invalidate();</code></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;ä¼šè¯æ¦‚è¿°&quot;&gt;ä¼šè¯æ¦‚è¿°&lt;a title=&quot;#ä¼šè¯æ¦‚è¿°&quot; href=&quot;#ä¼šè¯æ¦‚è¿°&quot;&gt;&lt;/a&gt;&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;ä»€ä¹ˆæ˜¯ä¼šè¯:ä»æ‰“å¼€æµè§ˆå™¨,åˆ°è®¿é—®ç½‘é¡µ,åˆ°æœ€ç»ˆå…³é—­æµè§ˆå™¨,æ•´ä¸ªè¿‡ç¨‹å°±æ˜¯ä¸€æ¬¡ä¼šè¯ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;stro</summary>
      
    
    
    
    <category term="JavaWeb" scheme="https://pinkpeachabc.cn/categories/JavaWeb/"/>
    
    
    <category term="session" scheme="https://pinkpeachabc.cn/tags/session/"/>
    
    <category term="cookie" scheme="https://pinkpeachabc.cn/tags/cookie/"/>
    
    <category term="ä¼šè¯" scheme="https://pinkpeachabc.cn/tags/%E4%BC%9A%E8%AF%9D/"/>
    
  </entry>
  
  <entry>
    <title>JavaWebè¯·æ±‚å’Œå“åº”</title>
    <link href="https://pinkpeachabc.cn/%E5%93%8D%E5%BA%94%E5%A4%B4.html"/>
    <id>https://pinkpeachabc.cn/%E5%93%8D%E5%BA%94%E5%A4%B4.html</id>
    <published>2020-02-25T00:59:04.000Z</published>
    <updated>2020-07-18T13:09:00.225Z</updated>
    
    <content type="html"><![CDATA[<h2 id="request-è¯·æ±‚å¯¹è±¡ã€response-å“åº”å¯¹è±¡">request è¯·æ±‚å¯¹è±¡ã€response å“åº”å¯¹è±¡<a title="#request-è¯·æ±‚å¯¹è±¡ã€response-å“åº”å¯¹è±¡" href="#request-è¯·æ±‚å¯¹è±¡ã€response-å“åº”å¯¹è±¡"></a></h2><p>Â </p><h4 id="è¯·æ±‚å’Œå“åº”çš„æ¦‚è¿°">è¯·æ±‚å’Œå“åº”çš„æ¦‚è¿°<a title="#è¯·æ±‚å’Œå“åº”çš„æ¦‚è¿°" href="#è¯·æ±‚å’Œå“åº”çš„æ¦‚è¿°"></a></h4><p>ä»€ä¹ˆè¯·æ±‚: åœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥åœ°å€,ç‚¹å‡»å›è½¦è¯·æ±‚æœåŠ¡å™¨,è¿™ä¸ªè¿‡ç¨‹å°±æ˜¯ä¸€ä¸ªè¯·æ±‚è¿‡ç¨‹ã€‚</p><p>ä»€ä¹ˆå“åº”: æœåŠ¡å™¨æ ¹æ®æµè§ˆå™¨å‘é€çš„è¯·æ±‚,è¿”å›æ•°æ®åˆ°æµè§ˆå™¨åœ¨ç½‘é¡µä¸Šè¿›è¡Œæ˜¾ç¤º,è¿™ä¸ªè¿‡ç¨‹å°±ç§°ä¹‹ä¸ºå“åº”ã€‚<br>Â </p><h4 id="httpservletresponse-å¯¹è±¡">HttpServletResponse å¯¹è±¡<a title="#httpservletresponse-å¯¹è±¡" href="#httpservletresponse-å¯¹è±¡"></a></h4><p>HttpServletResponse æ˜¯ä¸€ä¸ªæ¥å£,å®ƒçš„çˆ¶æ¥å›—æ˜¯ ServletResponse ,åœ¨å¼€å‘ä¸­é€šå¸¸ä½¿ç”¨ï¼Œå“åº”ä¿¡æ¯åˆ†ä¸ºä¸‰éƒ¨åˆ†:å“åº”è¡Œã€å“åº”å¤´ã€å“åº”æ­£æ–‡(å“åº”ä½“)</p><p><strong>å‘é€çŠ¶æ€ç çš„ç›¸å…³æ–¹æ³•ï¼š</strong></p><p>è®¾ç½®çŠ¶æ€ç  setStatus(int sc):å‚æ•°å°±æ˜¯çŠ¶æ€ç </p><p>å¸¸è§çš„çŠ¶æ€ç :200 å“åº”æˆåŠŸ ã€302 é‡å®šå‘ ã€484 è¯·æ±‚èµ„æºæ‰¾ä¸åˆ° ã€500 æœåŠ¡å™¨ä»£ç å‡ºå¼‚å¸¸</p><p><strong>é”™è¯¯ä¿¡æ¯æ–¹æ³•ï¼š</strong><br>sendError(int sc):å‚æ•°çŠ¶æ€ç <br>setStatus(int sc, String sm):ç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºçŠ¶æ€ç ,ç¬¬äºŒä¸ªå‚æ•°å°±çŠ¶æ€ç çš„æè¿°ã€‚</p><p>Â </p><h2 id="å‘é€å“åº”æ¶ˆæ¯å¤´ç›¸å…³çš„æ–¹æ³•">å‘é€å“åº”æ¶ˆæ¯å¤´ç›¸å…³çš„æ–¹æ³•<a title="#å‘é€å“åº”æ¶ˆæ¯å¤´ç›¸å…³çš„æ–¹æ³•" href="#å‘é€å“åº”æ¶ˆæ¯å¤´ç›¸å…³çš„æ–¹æ³•"></a></h2><blockquote><p>å“åº”æ¶ˆæ¯å¤´çš„æ•°æ®æ ¼å¼:key- valueçš„å½¢å¼,æœ‰çš„æ˜¯ä¸€ä¸ªkey,ä¸€ä¸ª value,æœ‰çš„æ˜¯ä¸€ä¸ªkey,å¤šä¸ª valueã€‚</p></blockquote><ul><li><p>è®¾ç½®å“åº”æ¶ˆæ¯å¤´:</p><p>ä¸€ä¸ª key ,å¯¹åº”ä¸€ä¸ª  value<br><code>setHeader(String key, String value);</code></p><p>æ¯”å¦‚:</p><p><code>setHeader(&quot;aa&quot;,&quot;A&quot;);</code><br>å¦‚æœ:</p><p><code>setHeader(&quot;aa&quot;,&quot;AA&quot;);</code></p><p><code>setHeader(&quot;aa&quot;,&quot;BB&quot;);</code></p><p>æœ€ç»ˆçš„ç»“æœ: aa è¿™ä¸ªå¤´å¯¹åº”çš„å€¼å°±æ˜¯ BB</p><p>ä¸€ä¸ªkey,å¯¹åº”å¤šä¸ª value<br><code>addHeader(String key, String value);</code></p><p>æ¯”å¦‚:</p><p><code>addHeader(&quot;aa&quot;,&quot;AA&quot;);</code></p><p><code>addHeader(&quot;aa&quot;,&quot;BB&quot;);</code></p><p>æœ€ç»ˆçš„ç»“æœ: aa è¿™ä¸ªå¤´å¯¹åº”çš„å€¼ AA å’Œ BB</p></li><li><p>è®¾ç½®å“åº”æ•°æ®çš„é•¿åº¦:</p><p>setContentLength(int src) æ–¹æ³•</p></li><li><p>è®¾ç½®å¤„ç†ä¹±ç çš„æ–¹æ³•ï¼š<br>setCharacterEncoding(String a);å‚æ•°å°±æ˜¯ä¸€ä¸ªç è¡¨æ ¼å¼,æ¯”å¦‚:â€œutf-8â€<br>setContentType(String a);å‚æ•°ä»£è¡¨å“åº”æ•°æ®çš„ç±»å‹å’Œç è¡¨æ ¼å¼,æ¯”å¦‚:â€œtext/htm1; harset=utf-8â€</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">response.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br></pre></td></tr></table></figure></li></ul><p>Â </p><h2 id="å‘é€å“åº”ä½“ç›¸å…³çš„æ–¹æ³•">å‘é€å“åº”ä½“ç›¸å…³çš„æ–¹æ³•<a title="#å‘é€å“åº”ä½“ç›¸å…³çš„æ–¹æ³•" href="#å‘é€å“åº”ä½“ç›¸å…³çš„æ–¹æ³•"></a></h2><p>ç¬¬ä¸€ä¸ªæ–¹æ³•: <code>getOutputStream()</code>,é€šè¿‡ response å‘æµè§ˆå™¨è¿”å›å›¾ç‰‡ã€è§†é¢‘ç­‰äºŒè¿›åˆ¶æ•°æ®çš„æ–‡ä»¶,å½“ç„¶ä¹Ÿå¯ä»¥å‘æµè§ˆå™¨ã€è¿”å›æ–‡æœ¬æ•°æ®ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ServletOutputStream out = response.getOutputStream();</span><br><span class="line">String value = <span class="string">&quot;test&quot;</span>;</span><br><span class="line">out.write(value.getBytes());</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒä¸ªæ–¹æ³•: <code>getWriter()</code>,é€šå¸¸ response å‘æµè§ˆå™¨è¿”å›æ–‡æœ¬æ•°æ®,ä¸èƒ½å‘æµè§ˆå™¨è¿”å›å›¾ç‰‡ã€è§†é¢‘ç­‰äºŒè¿›åˆ¶æ–‡ä»¶ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">///å­—ç¬¦æµå‘æµè§ˆå™¨è¾“å‡ºæ•°æ®</span></span><br><span class="line">PrintWriter out = response.getWriter();</span><br><span class="line">out.print(<span class="string">&quot;hello world&quot;</span>);</span><br></pre></td></tr></table></figure><p>Â </p><h2 id="è§£å†³ä¸­æ–‡è¾“å‡ºçš„ä¹±ç é—®é¢˜">è§£å†³ä¸­æ–‡è¾“å‡ºçš„ä¹±ç é—®é¢˜<a title="#è§£å†³ä¸­æ–‡è¾“å‡ºçš„ä¹±ç é—®é¢˜" href="#è§£å†³ä¸­æ–‡è¾“å‡ºçš„ä¹±ç é—®é¢˜"></a></h2><p>ç¬¬ä¸€ç§æ–¹å¼:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">response.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">response.setHeader(<span class="string">&quot;Content-Type&quot;</span>,<span class="string">&quot;text/html; charset=utf-8);</span></span><br></pre></td></tr></table></figure><p>ç¬¬äºŒç§æ–¹å¼:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">response.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br></pre></td></tr></table></figure><p>Â </p><h2 id="å®ç°ç½‘é¡µçš„å®šæ—¶è·³è½¬å¹¶åˆ·æ–°">å®ç°ç½‘é¡µçš„å®šæ—¶è·³è½¬å¹¶åˆ·æ–°<a title="#å®ç°ç½‘é¡µçš„å®šæ—¶è·³è½¬å¹¶åˆ·æ–°" href="#å®ç°ç½‘é¡µçš„å®šæ—¶è·³è½¬å¹¶åˆ·æ–°"></a></h2><p>å®šæ—¶è·³è½¬:ä»ä¸€ä¸ªæ³¨å†Œé¡µé¢è·³è½¬åˆ°ç™»å½•é¡µé¢,è¾“å…¥ä¹‹å‰æ³¨å†Œçš„ç”¨æˆ·åå’Œå¯†ç ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.å®šæ—¶è·³è½¬:éœ€è¦ç”¨åˆ° Refreshå“åº”å¤´</span></span><br><span class="line">sponse.setHeader(<span class="string">&quot;Refresh&quot;</span>,<span class="string">&quot;5;URL=/chapter04/login.html&quot;</span>);</span><br></pre></td></tr></table></figure><p>å®šæ—¶åˆ·æ–°:åœ¨å½“å‰é¡µé¢çš„åœ°å€ä¸å‘ç”Ÿå˜åŒ–,ä½†æ˜¯å½“å‰é¡µé¢è‡ªå·±å®šæ—¶åˆ·æ–°,é¡µé¢æ•°æ®ä¼šå‘ç”Ÿå˜åŒ–ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">response.setHeader(<span class="string">&quot;Refresh&quot;</span>,<span class="string">&quot;5&quot;</span>);</span><br><span class="line">response.getwriter().print (<span class="keyword">new</span> Date());</span><br></pre></td></tr></table></figure><p>Â </p><h2 id="å®ç°é‡å®šå‘">å®ç°é‡å®šå‘<a title="#å®ç°é‡å®šå‘" href="#å®ç°é‡å®šå‘"></a></h2><p>Â </p><h4 id="å®ç°é‡å®šå‘çš„ç›¸å…³æ–¹æ³•ï¼š">å®ç°é‡å®šå‘çš„ç›¸å…³æ–¹æ³•ï¼š<a title="#å®ç°é‡å®šå‘çš„ç›¸å…³æ–¹æ³•ï¼š" href="#å®ç°é‡å®šå‘çš„ç›¸å…³æ–¹æ³•ï¼š"></a></h4><p>ç¬¬ä¸€ç§æ–¹å¼ï¼š302 å’Œ Location é…åˆä½¿ç”¨ï¼Œå®ç°é‡å®šå‘ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">response.setStatus(<span class="number">302</span>);</span><br><span class="line">response.setHeader(<span class="string">&quot;Location&quot;</span>,<span class="string">&quot;é¡¹ç›®åœ°å€/index.html&quot;</span>);</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒç§æ–¹å¼ï¼šsendRedirect(â€œé¡¹ç›®åœ°å€/index.htmlâ€);</p><p>é‡å®šå‘é€šè¿‡ç™»å½•æ¡ˆä¾‹æ¥å®Œæˆï¼š</p><p>éœ€æ±‚åˆ†æ:</p><p>åœ¨ç™»å½•é¡µé¢è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ,åœ¨ LoginServlet é‡Œé¢,åˆ¤æ–­ç”¨æˆ·åå’Œå¯†ç æ˜¯å¦æ­£ç¡®ã€‚å¦‚æœè¾“å…¥é”™è¯¯,ä¼šé‡æ–°å®šå‘åˆ°ç™»å½•ç•Œé¢,å¦‚æœæ­£ç¡®,è·³è½¬åˆ°æ¬¢è¿é¡µé¢ã€‚è·å–ç™»å½•é¡µé¢æäº¤çš„ç”¨æˆ·åå’Œå¯†ç : <code>request. getParameter()</code> æ–¹æ³•ã€‚</p><p>é‡å®šå‘çš„ç‰¹ç‚¹:</p><ul><li>æµè§ˆå™¨åœ°å€æ å‘ç”Ÿå˜åŒ–</li><li>å‘é€äº†ä¸¤æ¬¡è¯·æ±‚ã€‚éƒ½æ˜¯ç”±æµè§ˆå™¨å‘é€çš„è¯·æ±‚</li></ul><p>é‡å®šå‘çš„è·¯å¾„:</p><ul><li>ç”±äºæ˜¯æµè§ˆå™¨å‘é€å¾—åˆ°è¯·æ±‚,æ‰€ä»¥è·¯å¾„å¿…é¡»è¦å¸¦é¡¹ç›®åç§°ã€‚</li></ul><p>Â </p><h2 id="httpservletrequestè¯·æ±‚å¯¹è±¡">HttpServletRequestè¯·æ±‚å¯¹è±¡<a title="#httpservletrequestè¯·æ±‚å¯¹è±¡" href="#httpservletrequestè¯·æ±‚å¯¹è±¡"></a></h2><p>HttpServletRequest å®ƒæ˜¯ä¸€ä¸ªæŒ‰å£,å®ƒçš„çˆ¶æ¥å›— ServletRequest,åœ¨å¼€å‘ä¸­,å¸¸ç”¨çš„æ˜¯å¸¦åè®®çš„è¯·æ±‚å¯¹è±¡ã€‚è¯·æ±‚æ¶ˆæ¯:è¯·æ±‚è¡Œ,è¯·æ±‚å¤´,è¯·æ±‚å‚æ•°<br>Â </p><h4 id="è·å–è¯·æ±‚è¡Œæ¶ˆæ¯çš„ç›¸å…³æ–¹æ³•:">è·å–è¯·æ±‚è¡Œæ¶ˆæ¯çš„ç›¸å…³æ–¹æ³•:<a title="#è·å–è¯·æ±‚è¡Œæ¶ˆæ¯çš„ç›¸å…³æ–¹æ³•:" href="#è·å–è¯·æ±‚è¡Œæ¶ˆæ¯çš„ç›¸å…³æ–¹æ³•:"></a></h4><p>è·å–è¯·æ±‚æäº¤çš„æ–¹å¼: <code>getMethod();</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String method = request.getMethod();</span><br><span class="line">System.out.println(<span class="string">&quot;è¯·æ±‚æ–¹å¼ï¼š&quot;</span>+ method);</span><br></pre></td></tr></table></figure><p>è·å–è¯·æ±‚çš„åè®®: <code>getProtocol();</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String protocol = request.getProtocol();</span><br><span class="line">System.out.println(<span class="string">&quot;è¯·æ±‚çš„åè®®&quot;</span>+ protocol);</span><br></pre></td></tr></table></figure><p>è·å–é¡¹ç›®åç§°: <code>getContextPath();</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String contextPath = request.getContextPath();</span><br><span class="line">System.out.println(<span class="string">&quot;é¡¹ç›®è·¯å¾„ï¼š&quot;</span>+contextPath);</span><br></pre></td></tr></table></figure><p>è·å– servlet è·¯å¾„: <code>getServletPath();</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String servletPath = request.getServletPath();</span><br><span class="line">System.out.println(<span class="string">&quot;servletè·¯å¾„&quot;</span>+servletPath);</span><br></pre></td></tr></table></figure><p>è·å–è¯·æ±‚è·¯å¾„: <code>getRequsetURI();  getRequestURL();</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">String uri = request.getRequestURI();</span><br><span class="line">StringBuffer url = request.getRequestURL();</span><br><span class="line">System.out.println(<span class="string">&quot;uriå¯¹åº”çš„å€¼ï¼š&quot;</span> + uri + <span class="string">&quot;urlå¯¹åº”çš„å€¼&quot;</span> + url);</span><br></pre></td></tr></table></figure><p>url å¯¹åº”çš„å€¼:/é¡¹ç›®åç§°/servletè·¯å¾„<br>url å¯¹åº”çš„å€¼:<a href="http://localhost:8080/url">http://localhost:8080/url</a><br>Â </p><h4 id="è·å–è¯·æ±‚æ¶ˆæ¯å¤´ç›¸å…³çš„æ–¹æ³•">è·å–è¯·æ±‚æ¶ˆæ¯å¤´ç›¸å…³çš„æ–¹æ³•<a title="#è·å–è¯·æ±‚æ¶ˆæ¯å¤´ç›¸å…³çš„æ–¹æ³•" href="#è·å–è¯·æ±‚æ¶ˆæ¯å¤´ç›¸å…³çš„æ–¹æ³•"></a></h4><p>æ ¹æ®æ¶ˆæ¯å¤´,è·å–å€¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String value = request.getHeader(æ¶ˆæ¯å¤´çš„åç§°);</span><br></pre></td></tr></table></figure><p>è·å–æ‰€æœ‰çš„æ¶ˆæ¯å¤´</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Enumeration&lt;String&gt; headerNames = request.getHeaderNames();</span><br></pre></td></tr></table></figure><p>Â </p><h4 id="è·å–è¯·æ±‚å‚æ•°ç›¸å…³çš„æ–¹æ³•">è·å–è¯·æ±‚å‚æ•°ç›¸å…³çš„æ–¹æ³•<a title="#è·å–è¯·æ±‚å‚æ•°ç›¸å…³çš„æ–¹æ³•" href="#è·å–è¯·æ±‚å‚æ•°ç›¸å…³çš„æ–¹æ³•"></a></h4><p>æ ¹æ® name å±æ€§å€¼,è·å–ç”¨æˆ·è¾“å…¥çš„å€¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String value = getParameter(nameå±æ€§å¯¹åº”çš„å€¼);</span><br></pre></td></tr></table></figure><p>æ ¹æ® name å±æ€§å€¼,è·å–ç”¨æˆ·é€‰æ‹©çš„å€¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String[] vaules = getParametervalues(nameå±æ€§å¯¹åº”çš„å€¼);</span><br></pre></td></tr></table></figure><p>æ²¡æœ‰å‚æ•°,è·å–æ‰€æœ‰å€¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;String, String[]&gt; map = getparameterMap();</span><br></pre></td></tr></table></figure><p>Â </p><h4 id="è§£å†³è¯·æ±‚å‚æ•°çš„ä¸­æ–‡ä¹±ç é—®é¢˜:">è§£å†³è¯·æ±‚å‚æ•°çš„ä¸­æ–‡ä¹±ç é—®é¢˜:<a title="#è§£å†³è¯·æ±‚å‚æ•°çš„ä¸­æ–‡ä¹±ç é—®é¢˜:" href="#è§£å†³è¯·æ±‚å‚æ•°çš„ä¸­æ–‡ä¹±ç é—®é¢˜:"></a></h4><p>ä¸­æ–‡ä¹±ç å¤„ç†åˆ†ä¸¤ç§æƒ…å†µ</p><p>ç¬¬ä¸€ç§æƒ…å†µ:å¤„ç† get æ–¹å¼æäº¤çš„ä¸­æ–‡ä¹±ç </p><p>ä½¿ç”¨çš„ String çš„æ„é€ æ–¹æ³•è§£å†³çš„ä¸­æ–‡ä¹±ç : new String(å­—èŠ‚æ•°ç»„,ç¼–ç æ ¼å¼);</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String newvalue = <span class="keyword">new</span> String(<span class="function">value <span class="title">getBytes</span><span class="params">(<span class="string">&quot;IS08859-1&quot;</span>)</span>,&quot;utf-8&quot;)</span>;</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒç§æƒ…å†µ:å¤„ç† post è¯·æ±‚çš„ä¸­æ–‡ä¹±ç <br>postæäº¤,ä¼šæŠŠå‚æ•°é¦–å…ˆæäº¤åˆ° request å¯¹è±¡çš„ç¼“å†² åŒºä¸­,ç¼“å†²åŒºé»˜è®¤ç¼–ç æ˜¯ ISO8859-1,ä¸æ”¯æŒä¸­æ–‡<br>å¤„ç†æ–¹æ³•:æŠŠ request ç¼“å†²åŒºçš„ç¼–ç ç»™è®¾ç½®æˆæ”¯æŒä¸­æ–‡çš„ç è¡¨æ ¼å¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">request.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br></pre></td></tr></table></figure><p>Â </p><h4 id="é€šè¿‡-requsetå¯¹è±¡ä¼ é€’æ•°æ®">é€šè¿‡ Requsetå¯¹è±¡ä¼ é€’æ•°æ®<a title="#é€šè¿‡-requsetå¯¹è±¡ä¼ é€’æ•°æ®" href="#é€šè¿‡-requsetå¯¹è±¡ä¼ é€’æ•°æ®"></a></h4><p>ä»€ä¹ˆåŸŸå¯¹è±¡:åœ¨ä¸€å®šçš„èŒƒå›´å†…,å¯ä»¥å­˜å€¼å’Œå–å€¼ã€‚request åŸŸå¯¹è±¡:åœ¨ä¸€æ¬¡è¯·æ±‚ä¸­,å¯ä»¥å­˜å€¼å’Œå–å€¼ã€‚</p><p>å­˜å€¼: <code>setAttribute(String key, Object obj);</code></p><p>å–å€¼: <code>Object obj =  getAttribyte(String key);</code></p><p>ç§»é™¤: <code>removeAttribute(String key);</code><br>Â </p><h4 id="requestdispatcher-æ¥å£">RequestDispatcher æ¥å£<a title="#requestdispatcher-æ¥å£" href="#requestdispatcher-æ¥å£"></a></h4><p>åœ¨å¼€å‘ä¸­è®¿é—®åˆ°ä¸€ä¸ª web èµ„æºå,éœ€è¦æœåŠ¡å™¨è·³è½¬åˆ°å¦ä¸€ä¸ªèµ„æºå»å¤„ç†è¯·æ±‚,å¯ä»¥é€šè¿‡ sendRedirect é‡å®šå‘<br>æ–¹æ³•æ¥å®ç°,ä¹Ÿå¯ä»¥ RequestDispatcher è½¬å‘å¯¹è±¡çš„ forward æ–¹æ³•æ¥å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RequestDispatcher forwardobj = request. getRequestDispatcher(<span class="string">&quot;å¦ä¸€ä¸ªèµ„æºçš„è·¯å¾„&quot;</span>);</span><br></pre></td></tr></table></figure><p><strong>å¸¸ç”¨æ–¹æ³•:</strong></p><p>å®ç°è¯·æ±‚è½¬å‘: <code>forwardobj.forward(request,response);</code></p><p>å®ç°è¯·æ±‚åŒ…å«: <code>forwardobj.include(request,response);</code></p><p><strong>è¯·æ±‚è½¬å‘:</strong></p><p>ç‰¹ç‚¹:å‘é€äº†ä¸€æ¬¡è¯·æ±‚,å“åº”ä¸€æ¬¡,å’Œ request åŸŸå¯¹è±¡é…åˆä½¿ç”¨,å¯ä»¥å®ç°å€¼å¾—ä¼ é€’ã€‚</p><p>è½¬å‘è·¯å¾„:è½¬å‘åŠ¨ä½œæ˜¯åœ¨æœåŠ¡å™¨å†…éƒ¨å®ç°çš„,æ‰€ä»¥è½¬å‘è·¯å¾„ä¸è¦æºå¸¦é¡¹ç›®åç§°ã€‚</p><p><strong>è¯·æ±‚é‡å®šå‘:</strong></p><p>ç‰¹ç‚¹:å‘é€äº†ä¸¤æ¬¡è¯·æ±‚,å“åº”äº†ä¸¤æ¬¡,ä¸èƒ½å’Œ request åŸŸå¯¹è±¡é…åˆä½¿ç”¨ã€‚</p><p>é‡å®šå‘è·¯å¾„:é‡å®šå‘åŠ¨ä½œåœ¨æµè§ˆå™¨ç«¯æ‰§è¡Œçš„,æ‰€ä»¥è·¯å¾„éœ€è¦æºå¸¦é¡¹ç›®åç§°ã€‚</p><p><strong>è¯·æ±‚åŒ…å«:</strong></p><p>ç‰¹ç‚¹:å‘é€ä¸€æ¬¡è¯·æ±‚,è¯·æ±‚åŒ…å«æ˜¯ç”±æœåŠ¡å™¨å®Œæˆã€‚</p><p>è¯·æ±‚åŒ…å«è·¯å¾„:åœ¨æœåŠ¡å™¨å†…éƒ¨å®Œæˆçš„,è·¯å¾„ä¸éœ€è¦æºå¸¦é¡¹ç›®åç§°ã€‚</p><p><img src="https://tva1.sinaimg.cn/large/00831rSTly1gcd5gaqk3nj31400u0ndn.jpg" alt="é‡å®šå‘ä¸è½¬å‘" class="Ï†bs"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;request-è¯·æ±‚å¯¹è±¡ã€response-å“åº”å¯¹è±¡&quot;&gt;request è¯·æ±‚å¯¹è±¡ã€response å“åº”å¯¹è±¡&lt;a title=&quot;#request-è¯·æ±‚å¯¹è±¡ã€response-å“åº”å¯¹è±¡&quot; href=&quot;#request-è¯·æ±‚å¯¹è±¡ã€response-å“åº”å¯¹è±¡&quot;&gt;&lt;/a&gt;</summary>
      
    
    
    
    <category term="JavaWeb" scheme="https://pinkpeachabc.cn/categories/JavaWeb/"/>
    
    
    <category term="JavaWeb" scheme="https://pinkpeachabc.cn/tags/JavaWeb/"/>
    
    <category term="eclipse" scheme="https://pinkpeachabc.cn/tags/eclipse/"/>
    
  </entry>
  
  <entry>
    <title>Blogå®šä½æ–¹å‘å’Œä¸»é¢˜é€‰æ‹©</title>
    <link href="https://pinkpeachabc.cn/theme-change.html"/>
    <id>https://pinkpeachabc.cn/theme-change.html</id>
    <published>2020-02-08T07:40:13.000Z</published>
    <updated>2022-06-14T05:16:13.500Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å…³äºblog">å…³äºBlog<a title="#å…³äºblog" href="#å…³äºblog"></a></h2><blockquote><p>æœ¬ç«™å†å²</p></blockquote><p>åšå®¢ä»<ahref="http://localhost:4000/2019/12/29/%E8%A7%86%E5%9B%BE%E7%9A%84%E6%93%8D%E4%BD%9C"><strong>2019.8.11</strong></a>è‡³ä»Šå·²ç»è¿è¡Œ<span id="htmer_time" style="color: #90CAF9; font-weight: bold;"></span>ç”±äºç£•ç£•ç»Šç»Šåªèƒ½ä»19å¹´å¼€å§‹è®¡ç®—ğŸ˜</p><ul><li>2018.8æœˆå»ºç«‹ï¼Œä½¿ç”¨å¼€æºåšå®¢ç¨‹åºJekyllï¼Œæ‰˜ç®¡äºGIthub pagesï¼ŒåŸŸåä¸º<code>pinkpeachabc.githu.io</code></li><li>2018.12æœˆï¼Œæ›´æ¢ä¸ºå¼€æºåšå®¢ç¨‹åºhexoï¼Œæ‰˜ç®¡äºGIthub pages</li><li>2019.3æœˆï¼Œç”±äºè®¿é—®é€Ÿåº¦åŸå› ï¼Œå°†åšå®¢è¿ç§»é˜¿é‡Œäº‘ï¼ŒåŸŸåä¸º<code>pinkpeachabc.cn</code></li><li>2020.2æœˆï¼Œä¸»é¢˜ç”±<a href="https://github.com/fi3ework/hexo-theme-archer" target="_blank">Archer</a>æ¢ä¸º<a href="https://github.com/SumiMakito/hexo-theme-typography" target="_blank">Typography</a></li><li>2020.5æœˆï¼Œå¾ˆå¯æƒœ<a href="https://github.com/SumiMakito/hexo-theme-typography" target="_blank">Typography</a>å¯¹æ’ç‰ˆçš„æ”¯æŒå¾ˆå·®ï¼Œä¸å¾—å·²æŠ›å¼ƒï¼Œä¸»é¢˜æ¢ä¸º<a href="https://github.com/ikeq/hexo-theme-inside" target="_blank">inside</a>.</li></ul><h2 id="èµ·æ­¥">èµ·æ­¥<a title="#èµ·æ­¥" href="#èµ·æ­¥"></a></h2><blockquote><p>ğŸ“è®°å½•ä»åˆè¯†åˆ°ç†Ÿæ‚‰çš„è¿‡ç¨‹</p></blockquote><p>ç¬¬ä¸€æ¬¡æ­å»ºblogçš„å‡†ç¡®æ—¶é—´æ˜¯2018å¹´çš„8æœˆä»½ï¼Œå‡ºäºåˆ†äº«å’Œå†™ä½œã€‚æˆ‘åˆå»ºæ˜¯Github pages + Jekyllçš„ç»„åˆæ–¹å¼ã€‚</p><ul><li>åšå®¢ç‰ˆæœ¬ç®¡ç†</li><li>é™æ€åšå®¢ç½‘ç«™</li><li>ä¸éœ€è¦åƒWordPressé‚£æ ·ç¹ç(<s>å…¶å®æ˜¯æ¯”è¾ƒæ‡’</s>)</li><li>å¯ä»¥ç›´æ¥åœ¨githubç½‘é¡µç‰ˆä¸Šç¼–è¾‘å’Œå‘å¸ƒåšå®¢</li></ul><p>æ€»ä¹‹æ˜¯æŠŠåšå®¢æ­å»ºå¥½äº†ï¼Œå¯ä¹‹åçš„è¿‡ç¨‹æˆ‘å˜æ²¡åœ¨ç®¡è¿‡ã€‚ç”±äºå„å¼å„æ ·çš„åŸå› (<s>å°±æ˜¯ç©å»äº†</s>)ä¹Ÿä¸å†™æ–‡ç« ï¼Œäºæ˜¯æˆ‘çš„ç¬¬ä¸€ä¸ªåšå®¢ä¹Ÿå°±ç»è¿‡é•¿æ—¶é—´çš„åƒåœŸğŸ’¸ï¼Œç›´è‡³æˆ‘æœ€ç»ˆæŠŠå®ƒæŠ›å¼ƒã€‚</p><h2 id="å†æ¬¡èµ·æ­¥">å†æ¬¡èµ·æ­¥<a title="#å†æ¬¡èµ·æ­¥" href="#å†æ¬¡èµ·æ­¥"></a></h2><p><img src="https://tva1.sinaimg.cn/large/0082zybply1gbp30n0h1jj31ey0u0dqs.jpg" alt="åšå®¢" class="Ï†bs"></p><p>ç”±äºä¸Šä¸€æ¬¡çš„å¤±è´¥ï¼Œæˆ‘ä¾¿å¾ˆä¹…æ²¡æœ‰å†æ¬¡æ­å»ºåšå®¢çš„æƒ³æ³•äº†ã€‚ä½†æ˜¯æˆ‘æœ¬äººå–œæ¬¢çœ‹ç§‘æŠ€æ–‡ç« ï¼Œçœ‹çš„ä¹…äº†ä¹Ÿæƒ³è‡ªå·±å†™ç‚¹æŠŠè‡ªå·±çŸ¥é“çš„åˆ†äº«ç»™å…¶ä»–äººã€‚ç”±äºåˆšå¥½é‚£æ—¶å€™åœ¨å­¦ä¹ å‰ç«¯çš„ä¸œè¥¿ã€‚äºæ˜¯æˆ‘æƒ³ä¸å¦‚åœ¨æ­å»ºä¸€ä¸ªå§ã€‚é‚£æ—¶å€™æƒ³æƒ³å…¶å®å†™æ–‡ç« å‘å¸ƒåˆ°ç½‘ä¸Šçš„å¹³å°å¾ˆå¤šï¼Œæ²¡å¿…è¦å•ç‹¬è‡ªå·±æ­å»ºä¸€ä¸ªã€‚</p><ul><li>åšå®¢å›­</li><li>CSDN</li><li>ç®€ä¹¦</li><li>çŸ¥ä¹</li></ul><p>è¿˜æœ‰å¾ˆå¤šå¾ˆå¤šå°±ä¸å¤šèµ˜è¿°äº†ï¼Œå…¶å®çœŸæ­£å†æ¬¡æ­å»ºæ˜¯è§‰å¾—è‡ªå·±æ“ä½œå¯ä»¥å­¦ä¹ Gitå’Œå…¶ä»–æ–¹é¢çš„åªæ˜¯äºæ˜¯å°±å¼€å§‹äºŒæ¬¡èµ·æ­¥ã€‚</p><p>è¿™ä¸€æ¬¡ä½¿ç”¨çš„å’Œç¬¬äºŒæ¬¡ä¸åŒè¿™æ¬¡æ˜¯Github + hexoçš„ç»„åˆï¼Œæ­å»ºèµ·æ¥ä¹Ÿæ˜¯æ¯”è¾ƒè½»æ¾ã€‚ç›´æ¥æ”¾åˆ°äº†githubä¸Šé¢å–å<code>Pinkpeachabc.github.io</code>å¹¶é€‰æ‹©äº†<a href="https://github.com/fi3ework/hexo-theme-archer" target="_blank">Archer</a>ä½œä¸ºåšå®¢çš„ä¸»é¢˜ã€‚</p><p>å‡ºäºGithubçš„æœåŠ¡å™¨åœ¨å›½å¤–ï¼Œå›½å†…çš„è®¿é—®é€Ÿåº¦å¾ˆç¼“æ…¢ï¼ˆ<s>é¾Ÿé€Ÿ</s>ï¼‰ã€‚äºæ˜¯æˆ‘åœ¨é˜¿é‡Œäº‘è´­ä¹°äº†æœåŠ¡å™¨ï¼Œå¹¶ä¸”è´­ä¹°ç¬¬ä¸€ä¸ªåŸŸå<code>pinkpeachabc.cn</code>æˆ‘ä¹Ÿæ²¡è¾œè´Ÿä¹‹æ­»å»çš„åšå®¢ï¼Œä»å»ºç«™è‡³ä»Šæˆ‘è¿˜åœ¨æ›´æ–°ç€åšå®¢ï¼Œè™½ç„¶ç›®å‰æ²¡ä»€ä¹ˆæŠ€æœ¯å«é‡ã€‚èµ·ç ä¸ä¼šå†è®©å®ƒåƒåœŸäº†ğŸ˜</p><h2 id="è‡³ä»Š">è‡³ä»Š<a title="#è‡³ä»Š" href="#è‡³ä»Š"></a></h2><p>å¯ä»¥çœ‹åˆ°ç°åœ¨çš„ä¸»é¢˜å·²ç»æ›´æ¢ä¸º <a href="https://github.com/SumiMakito/hexo-theme-typography" target="_blank">Typography</a>å½“ç„¶äº†æˆ‘å¹¶ä¸æ˜¯å–œæ–°åŒæ—§ğŸŒ¶ï¼Œç»è¿‡è¿™å‡ ä¸ªæœˆçš„è¿è¥åšå®¢æ¥çœ‹ï¼Œæˆ‘å¤ªæ³¨é‡å¤–è§‚åè€Œç¼ºå°‘äº†å¯¹é˜…è¯»å’Œè§‚æ„Ÿä½“éªŒï¼ˆ<s>æ³¨é‡å›¾ç‰‡æ·»åŠ æ— ç”¨æ’ä»¶ç­‰ç­‰</s>ï¼‰ã€‚åŒæ ·çš„æˆ‘ä¹Ÿå¼€å§‹æƒ³èµ·å»ºåšå®¢çš„åˆè¡·ã€‚è¿™ä¸ªæ˜¯ä¸»é¢˜æ˜¯æˆ‘æ— æ„é—´çœ‹åˆ°äº†ç»™æˆ‘ç®€æ´è€Œä¸å¤±ç¾è§‚çš„æ„Ÿè§‰ã€‚æƒ³åˆè¡·çš„ä½œè€…ä¸€æ ·â€”â€”<strong>é‡æ–°å‘ç° æ–‡å­—ä¹‹ç¾</strong></p><p>å¾ˆå¯æƒœ<a href="https://github.com/SumiMakito/hexo-theme-typography" target="_blank">Typography</a>å¯¹äºæ’ç‰ˆä¸æ˜¯å¾ˆå‹å¥½ï¼Œå¹¶ä¸”ä¸æ”¯æŒç›®å½•ï¼Œæˆ‘ç›®å‰çš„èƒ½åŠ›æ²¡æœ‰åŠæ³•å®Œå–„ï¼Œåªèƒ½å¯¹å®ƒè¯´æŠ±æ­‰äº†ã€‚ç”±äºç–«æƒ…çš„åŸå› ï¼Œå­¦æ ¡ğŸ«ä¹Ÿæš‚æœªå¼€å­¦ã€‚è¿™æœŸé—´æˆ‘å¯¹åšå®¢ä»¥åçš„æ–¹å‘æ€è€ƒäº†å¾ˆå¤šï¼Œæˆ‘å°†ä¼šæŠŠå­¦ä¹ ä¸­çš„ç¬”è®°æ•´ç†å‘å¸ƒåœ¨åšå®¢ä¸­(å°½æœ€å¤§å¯èƒ½å†™ä¼˜è´¨)ï¼Œæˆ‘ä¹Ÿä¼šåˆ é™¤ä¸€äº›æˆ‘è‡ªè®¤ä¸º<s>æ— ç”¨</s>çš„æ–‡ç« ï¼Œè®©æ•´ä¸ªåšå®¢çœ‹èµ·æ¥æ›´é«˜æ•ˆä¼˜è´¨â€”â€”<strong>2020-5-20</strong></p><h2 id="è‡´è°¢">è‡´è°¢<a title="#è‡´è°¢" href="#è‡´è°¢"></a></h2><p>å¯¹äºä»¥ä¸Šçš„æ‰€æœ‰ä½œè€…æˆ‘ç”±è¡·çš„è¡¨ç¤ºæ„Ÿè°¢ï¼Œ<strong>å¼€æºåˆ†äº«ã€æŠ€æœ¯æ— ä»·</strong>ã€‚åŒæ—¶æœ¬æ¬¡åº”ç”¨çš„å¹¶ä¸æ˜¯åŸç‰ˆçš„<a href="https://github.com/SumiMakito/hexo-theme-typography" target="_blank">Typography</a>æœ¬æ˜¯åŸºäº<a href="https://imjad.cn/" target="_blank">journey.ad</a>ä¿®æ”¹è¿‡çš„ç‰ˆæœ¬ã€‚ç”±äºè¿™æ¬¡çš„ä¸»é¢˜<code>layout</code>é‡Œé¢æ˜¯<code>jade</code>å†™çš„æ‰€ä»¥ä¿®æ”¹èµ·æ¥å¯èƒ½æœ‰ç‚¹éš¾åº¦ï¼Œæ‰€ä»¥æˆ‘ç›´æ¥<s>æŠ„</s>å€Ÿé‰´äº†è¿‡æ¥ã€‚</p><script>function secondToDate(e){if(!e)return 0;var r=new Array(0,0,0,0,0);return e>=31536e3&&(r[0]=parseInt(e/31536e3),e%=31536e3),e>=86400&&(r[1]=parseInt(e/86400),e%=86400),e>=3600&&(r[2]=parseInt(e/3600),e%=3600),e>=60&&(r[3]=parseInt(e/60),e%=60),e>0&&(r[4]=e),r}function setTime(){var e=Math.round(new Date(Date.UTC(2019,8,11,18,37,16)).getTime()/1e3),r=Math.round(((new Date).getTime()+288e5)/1e3);currentTime=secondToDate(r-e),0==currentTime[0]?currentTimeHtml=currentTime[1]+"å¤©"+currentTime[2]+"æ—¶"+currentTime[3]+"åˆ†"+currentTime[4]+"ç§’":currentTimeHtml=currentTime[0]+"å¹´"+currentTime[1]+"å¤©"+currentTime[2]+"æ—¶"+currentTime[3]+"åˆ†"+currentTime[4]+"ç§’",document.getElementById("htmer_time")?document.getElementById("htmer_time").innerHTML=currentTimeHtml:clearInterval(timer)}var timer=setInterval(setTime,1e3);</script>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;å…³äºblog&quot;&gt;å…³äºBlog&lt;a title=&quot;#å…³äºblog&quot; href=&quot;#å…³äºblog&quot;&gt;&lt;/a&gt;&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;æœ¬ç«™å†å²&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;åšå®¢ä»&lt;ahref=&quot;http://localhost:4000</summary>
      
    
    
    
    <category term="åšå®¢" scheme="https://pinkpeachabc.cn/categories/%E5%8D%9A%E5%AE%A2/"/>
    
    
    <category term="å°è®°" scheme="https://pinkpeachabc.cn/tags/%E5%B0%8F%E8%AE%B0/"/>
    
    <category term="hexo" scheme="https://pinkpeachabc.cn/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>Macç»ˆç«¯é…ç½®ä»£ç†</title>
    <link href="https://pinkpeachabc.cn/Mac-terminal.html"/>
    <id>https://pinkpeachabc.cn/Mac-terminal.html</id>
    <published>2020-01-31T11:45:51.000Z</published>
    <updated>2020-06-06T13:01:13.585Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨ä½¿ç”¨ç»ˆç«¯æ—¶å€™éš¾å…ä¼šæµè§ˆå’Œä¸‹è½½å¢™å¤–çš„èµ„æ–™ï¼Œè¿™æ—¶å€™å°±è¦ç”¨åˆ°ä»£ç†ã€‚ä¸‹é¢æˆ‘æ¥ä¸ºå¤§å®¶ä»‹ç»ä¸€ä¸‹åœ¨Macç¯å¢ƒä¸‹ç»ˆç«¯çš„ä»£ç†æ–¹æ³•ã€‚</p><a id="more"></a><h3 id="å‡†å¤‡">å‡†å¤‡<a title="#å‡†å¤‡" href="#å‡†å¤‡"></a></h3><p>åœ¨æ“ä½œä»¥ä¸‹æ­¥éª¤ä¹‹å‰ï¼Œéœ€è¦é…ç½®å¥½ Shadowsocksã€‚</p><h3 id="æ–¹æ³•ä¸€ï¼š">æ–¹æ³•ä¸€ï¼š<a title="#æ–¹æ³•ä¸€ï¼š" href="#æ–¹æ³•ä¸€ï¼š"></a></h3><p>åœ¨ç»ˆç«¯ä¸­ä¾æ¬¡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤çš„å‰ä¸¤ä¸ªæˆ–è€…ç›´æ¥æ‰§è¡Œæœ€åä¸€ä¸ªå³å¯</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># é…ç½®httpè®¿é—®çš„</span><br><span class="line">export http_proxy&#x3D;socks5:&#x2F;&#x2F;127.0.0.1:1080</span><br><span class="line"># é…ç½®httpsè®¿é—®çš„</span><br><span class="line">export https_proxy&#x3D;socks5:&#x2F;&#x2F;127.0.0.1:1080</span><br><span class="line"># é…ç½®httpå’Œhttpsè®¿é—®</span><br><span class="line">export all_proxy&#x3D;socks5:&#x2F;&#x2F;127.0.0.1:1080</span><br></pre></td></tr></table></figure><blockquote><p>è¿™é‡Œçš„ç«¯å£å…·ä½“è¦çœ‹ä½¿ç”¨çš„å·¥å…·ï¼Œå…·ä½“å¦‚ä¸‹ã€‚</p></blockquote><p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1gbfzmadu91j30gg0nmjzh.jpg" alt="Xnip2020-01-31_19-52-00" class="Ï†bs"></p><p>è¿™é‡Œå°±è¦è¾“å…¥1086ç«¯å£ã€‚</p><p>è¿™ä¸ªåŠæ³•çš„å¥½å¤„æ˜¯ç®€å•ç›´æ¥ï¼Œå¹¶ä¸”å½±å“é¢å¾ˆå°ï¼ˆåªå¯¹å½“å‰ç»ˆç«¯æœ‰æ•ˆï¼‰ã€‚</p><p>è¾“å…¥<code>curl cip.cc</code>æ¥æŸ¥çœ‹ç»ˆç«¯æ˜¯å¦æˆåŠŸä»£ç†ã€‚</p><p><img src="https://tva1.sinaimg.cn/large/006tNbRwgy1gbfzrlu1ulj30kj0d9grz.jpg" alt="Xnip2020-01-31_19-56-20" class="Ï†bs"></p><h3 id="æ–¹æ³•äºŒï¼š">æ–¹æ³•äºŒï¼š<a title="#æ–¹æ³•äºŒï¼š" href="#æ–¹æ³•äºŒï¼š"></a></h3><p>æŠŠä»£ç†æœåŠ¡å™¨åœ°å€å†™å…¥ shell é…ç½®æ–‡ä»¶ <code>.bash_profile</code> æˆ–è€… <code>.zshrc</code>ã€‚</p><p>ç»ˆç«¯æ‰§è¡Œ <code>vim ~/.bash_profile</code> æˆ–è€… <code>vim ~/.zshrc</code> é…ç½®å…¨å±€ç¯å¢ƒå˜é‡ã€‚</p><p>ç›´æ¥åœ¨ <code>. bash_profile</code> æˆ–è€… <code>.zshrc</code> æ·»åŠ ä¸‹é¢å†…å®¹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"># ç»ˆç«¯è®¾ç½®ä»£ç†</span><br><span class="line"># -------------------------------</span><br><span class="line"># polipo proxy on&#x2F;off</span><br><span class="line"># ------------------------------</span><br><span class="line">function proxy_on() &#123;</span><br><span class="line">    # é…ç½®httpè®¿é—®çš„</span><br><span class="line">    export http_proxy&#x3D;socks5:&#x2F;&#x2F;127.0.0.1:1080</span><br><span class="line">    # é…ç½®httpsè®¿é—®çš„</span><br><span class="line">    export https_proxy&#x3D;socks5:&#x2F;&#x2F;127.0.0.1:1080</span><br><span class="line">    # é…ç½®httpå’Œhttpsè®¿é—®</span><br><span class="line">    export all_proxy&#x3D;socks5:&#x2F;&#x2F;127.0.0.1:1080</span><br><span class="line">    echo &#39;********   å¼€å¯å½“å‰ç»ˆç«¯ä»£ç†   ********&#39;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function proxy_off() &#123;</span><br><span class="line">    # ç§»é™¤ä»£ç†</span><br><span class="line">    unset http_proxy</span><br><span class="line">    unset https_proxy</span><br><span class="line">    unset all_proxy</span><br><span class="line">    echo &#39;********   å…³é—­å½“å‰ç»ˆç«¯ä»£ç†   ********&#39;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¼–è¾‘å®Œä¹‹åæ‰§è¡Œ <code>source ~/.bash_profile</code> æˆ–è€… <code>source ~/.zshrc</code> ï¼Œç¼–è¾‘çš„å“ªä¸ªæ‰§è¡Œå“ªä¸ªå°±è¡Œã€‚</p><p>ä½¿ç”¨æ—¶åœ¨ç»ˆç«¯æ‰§è¡Œ</p><blockquote><p>å¯åŠ¨ï¼š<code>proxy_on</code><br>å…³é—­ï¼š<code>proxy_off</code></p></blockquote><p>è¿™ä¸ªåŠæ³•çš„å¥½å¤„æ˜¯éšæ—¶ç”¨éšæ—¶å¼€å…³ï¼Œæ–¹ä¾¿å¿«æ·ï¼Œå¹¶ä¸”å½±å“é¢ä¹ŸåŒæ ·å¾ˆå°ï¼ˆåœ¨æ‰§è¡Œçš„ç»ˆç«¯è®¾ç½®ä»£ç†ï¼Œåªå¯¹æ‰§è¡Œçš„ç»ˆç«¯æœ‰æ•ˆï¼Œä¸å½±å“å…¶ä»–ç»ˆç«¯ï¼‰ã€‚</p><h3 id="æ–¹æ³•ä¸‰ï¼šï¼ˆé…ç½®å…¨å±€ä»£ç†-æ…ç”¨ï¼‰">æ–¹æ³•ä¸‰ï¼šï¼ˆé…ç½®å…¨å±€ä»£ç† <code>æ…ç”¨</code>ï¼‰<a title="#æ–¹æ³•ä¸‰ï¼šï¼ˆé…ç½®å…¨å±€ä»£ç†-æ…ç”¨ï¼‰" href="#æ–¹æ³•ä¸‰ï¼šï¼ˆé…ç½®å…¨å±€ä»£ç†-æ…ç”¨ï¼‰"></a></h3><h6 id="a.-è®¾ç½®ä»£ç†">a. è®¾ç½®ä»£ç†<a title="#a.-è®¾ç½®ä»£ç†" href="#a.-è®¾ç½®ä»£ç†"></a></h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global http.proxy &#39;socks5:&#x2F;&#x2F;127.0.0.1:1080&#39;</span><br><span class="line">git config --global https.proxy &#39;socks5:&#x2F;&#x2F;127.0.0.1:1080&#39;</span><br></pre></td></tr></table></figure><h6 id="b.-æŸ¥çœ‹ä¿¡æ¯-git-é…ç½®ä¿¡æ¯">b. æŸ¥çœ‹ä¿¡æ¯ git é…ç½®ä¿¡æ¯<a title="#b.-æŸ¥çœ‹ä¿¡æ¯-git-é…ç½®ä¿¡æ¯" href="#b.-æŸ¥çœ‹ä¿¡æ¯-git-é…ç½®ä¿¡æ¯"></a></h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global -l </span><br></pre></td></tr></table></figure><h6 id="c.-git-ç§»é™¤å…¨å±€é…ç½®ä»£ç†">c. git ç§»é™¤å…¨å±€é…ç½®ä»£ç†<a title="#c.-git-ç§»é™¤å…¨å±€é…ç½®ä»£ç†" href="#c.-git-ç§»é™¤å…¨å±€é…ç½®ä»£ç†"></a></h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global --unset http.proxy</span><br><span class="line">git config --global --unset https.proxy</span><br></pre></td></tr></table></figure><blockquote><p>å¦‚æœ git é…ç½®äº†å…¨å±€çš„ä»£ç†ä¼šå½±å“åˆ° sourcetree æˆ–è€…å…¶ä»–å‘½ä»¤ç»ˆç«¯çš„ git å‘½ä»¤ï¼Œè¯·å°å¿ƒä½¿ç”¨ï¼ï¼ï¼</p></blockquote><hr><h3 id="å‚è€ƒæ–‡ç« ">å‚è€ƒæ–‡ç« <a title="#å‚è€ƒæ–‡ç« " href="#å‚è€ƒæ–‡ç« "></a></h3><p><a href="http://www.imooc.com/article/285912" target="_blank">Macç»ˆç«¯é…ç½®ä»£ç†</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;åœ¨ä½¿ç”¨ç»ˆç«¯æ—¶å€™éš¾å…ä¼šæµè§ˆå’Œä¸‹è½½å¢™å¤–çš„èµ„æ–™ï¼Œè¿™æ—¶å€™å°±è¦ç”¨åˆ°ä»£ç†ã€‚ä¸‹é¢æˆ‘æ¥ä¸ºå¤§å®¶ä»‹ç»ä¸€ä¸‹åœ¨Macç¯å¢ƒä¸‹ç»ˆç«¯çš„ä»£ç†æ–¹æ³•ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="å®ç”¨çŸ¥è¯†" scheme="https://pinkpeachabc.cn/categories/%E5%AE%9E%E7%94%A8%E7%9F%A5%E8%AF%86/"/>
    
    
    <category term="ç»ˆç«¯" scheme="https://pinkpeachabc.cn/tags/%E7%BB%88%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>ä½ æ´»æˆä½ æƒ³è¦çš„æ ·å­äº†å—ï¼Ÿ</title>
    <link href="https://pinkpeachabc.cn/2020.01.17.html"/>
    <id>https://pinkpeachabc.cn/2020.01.17.html</id>
    <published>2020-01-17T02:56:06.000Z</published>
    <updated>2020-05-23T13:40:32.898Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>20å¹´çš„æ—¶å…‰æ‚„ç„¶è€Œé€ï¼Œç°åœ¨æˆ‘ä¹Ÿæ¸…æ¥šäº†é«˜ä¸­æ—¶åœ¨ä½œæ–‡çº¸ä¸Šå†™çš„å…‰é˜´ä¼¼ç®­ï¼Œæ—¥æœˆå¦‚æ¢­ã€‚å›å¤´æƒ³æƒ³ï¼Œæˆ‘ç°åœ¨çš„æ ·å­æ˜¯æˆ‘æ›¾ç»æƒ³è¦æˆä¸ºçš„æ ·å­å—ã€‚</p></blockquote><a id="more"></a><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=550 height=86 src="//music.163.com/outchain/player?type=2&id=227724&auto=1&height=66"></iframe><h2 id="æ—¥ç¨‹">æ—¥ç¨‹<a title="#æ—¥ç¨‹" href="#æ—¥ç¨‹"></a></h2><p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1gazddi8v60j30t30jqdo4.jpg" alt="Xnip2020-01-17_10-53-10" class="Ï†bs"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">- æ”¾å‡çš„ç¬¬10å¤©</span><br><span class="line">- å°å¹´</span><br><span class="line">- è·ç¦»é™¤å¤•7å¤©</span><br><span class="line"></span><br><span class="line">- å‡æœŸå€’è®¡æ—¶30å¤©</span><br><span class="line">- è®¤çœŸå­¦ä¹ </span><br><span class="line">- å¿«ä¹ç”Ÿæ´»</span><br><span class="line">- å®Œæˆä¸€ä¸ªé¡¹ç›®</span><br><span class="line">- å‹¤æ›´æ–°åšå®¢</span><br></pre></td></tr></table></figure><h2 id="è¿½èµ¶">è¿½èµ¶<a title="#è¿½èµ¶" href="#è¿½èµ¶"></a></h2><p><strong>æ²¡èƒ½æ´»æˆåˆ«äººæœŸå¾…çš„æ¨¡æ ·ï¼Œ</strong></p><p><strong>ä¹Ÿæ²¡æ´»æˆè‡ªå·±æƒ³è¦çš„æ ·å­ã€‚</strong></p><p>ä¸çŸ¥è§‰çš„è‡ªå·±çœ‹çœ‹æµå¤±çš„æ—¶é—´å›å¤´çœ‹çœ‹å·²ç»äºŒåä¸€äºŒå²ã€‚</p><p>æ…¢æ…¢ç‹¬ç«‹ï¼Œå¯¹è‡ªå·±çš„è¡Œä¸ºã€ç”Ÿæ´»è´Ÿè´£ã€‚</p><p>å›æƒ³èµ·é«˜ä¸­ååœ¨æ•™å®¤ä¸­çš„è‡ªå·±å¥‹ç¬”ç–¾ä¹¦çš„æ ·å­ï¼Œç°åœ¨ä¹Ÿè®¸ä¼šä¸€ç¬‘è€Œè¿‡ã€‚</p><p>é«˜è€ƒå¤±åˆ©å¯¹æˆ‘æ¥è¯´å¯ä»¥è¯´æ˜¯åœ¨æƒ…ç†ä¹‹ä¸­ï¼Œè¯´å®è¯ç°åœ¨æƒ³æƒ³é‚£æ—¶å€™è¿˜æŒºéš¾å—çš„ã€‚</p><p>æˆ‘è¿˜æ˜¯æ¥åˆ°äº†ç°åœ¨çš„å­¦æ ¡æŠ¥åˆ°äº†ï¼Œæˆ‘æ²¡æœ‰é€‰æ‹©å¤è¯»ã€‚ä¸€æ˜¯æ¡ä»¶éº»çƒ¦ã€äºŒæ˜¯å‹åŠ›å¤ªå¤§ï¼Œåˆå®³æ€•ç¬¬äºŒå¹´æ‰¿å—ä¸ä½äº²æˆšæœ‹å‹çš„â€œå…³æ€€â€ï¼Œç°åœ¨æƒ³æƒ³ä¹Ÿè®¸æ˜¯åè€…å§ã€‚</p><p>ç¬¬ä¸€å¹´çš„æ—¶å…‰ï¼Œæ…¢æ…¢è¿‡å»äº†ã€‚æˆ‘ä¹Ÿå°±è¿™ä»¶äº‹æ…¢æ…¢é‡Šç„¶äº†ï¼Œæœ‰æ—¶å€™æˆ‘è§‰å¾—è¿™æ ·ä¹Ÿå¥½åšç‚¹è‡ªå·±å–œæ¬¢çš„äº‹ï¼Œè®¤çœŸå­¦ä¹ ï¼Œå¥½å¥½çš„ç”Ÿæ´»ã€‚äº‰å–èƒ½å’Œä»¥å‰ä¸åŒã€‚</p><p>æˆ‘è¿˜æ˜¯å–œæ¬¢ä¸åŒå’Œæ–°é²œï¼Œåƒæ˜¯å¾ˆä¹…ä¸è§å†ç›¸é€¢ä¹‹åçš„é‚£ç§æ–°é²œï¼Œä½†åœ¨äº¤æµåå´è¿˜èƒ½ä¿æŒé‚£ç§ç†Ÿæ‚‰çš„å‘³é“ã€‚</p><p>16å¹´é«˜ä¸­ï¼Œæˆ‘è®°å¾—å½“æ—¶åœ¨ä¸€èµ·çœ‹è¿‡ç”µå½±ã€Šè°çš„é’æ˜¥ä¸è¿·èŒ«ã€‹ï¼Œåœ¨æ¯ç‡¥çš„æ ¡å›­ä¹Ÿç®—æ˜¯ä¸€ä¸ªå¼€å¿ƒäº‹ã€‚</p><p>å½“æ—¶æƒ³æƒ³ç°åœ¨çš„å¯¼æ¼”å¤©å¤©æ‹¿è¿™äº›IPåšå®£ä¼ ï¼Œæ‹ç”µå½±çœŸæ²¡æ–°æ„ã€‚æˆ‘ä¹Ÿä¸æ˜¯æ´»çš„å¥½å¥½ä¸å¦‚å¥½å¥½çš„ç¡ä¸€è§‰æƒ³æƒ³æ™šé¥­åƒä»€ä¹ˆã€‚</p><p>æ¸æ¸çš„æˆ‘ä¹Ÿå‡ºç°äº†è¿·èŒ«æœŸï¼Œé«˜ä¸‰æˆ‘æ‹¿ç€é‚£æ—¶å€™çš„æˆç»©å•ï¼Œçœ‹çœ‹åˆ†æ•°åœ¨çœ‹çœ‹è‡ªå·±ï¼Œä¹Ÿä¸è¿‡è½»å¹å£æ°”ç½¢äº†ã€‚</p><p>æˆ‘ä¹Ÿå¼€å§‹<strong>è¿½èµ¶</strong>çš„å¤§å®¶çš„è„šæ­¥ï¼Œé›†è…‹æˆè£˜ï¼Œç§¯æ²™æˆå¡”ã€‚è¿™ä¸¤ä¸ªä¹Ÿæ˜¯å½“æ—¶çš„è¯­æ–‡è€å¸ˆæ•™ç»™æˆ‘çš„ã€‚</p><p>ä¸€ç²’ç ‚åœŸï¼Œæˆ–è®¸å¤ªæ¸ºå°ï¼Œä½†å †ç§¯èµ·æ¥ï¼Œå´æ˜¯å¤§å±±çš„è„Šæ¢ã€‚</p><p>æˆ‘è™½ç„¶æ²¡æˆä¸ºè„Šæ¢ï¼Œä½†èµ·ç ä¸ä¼šè®©è‡ªå·±ä¸ºäº†åæ‚”è€ŒæŠ±æ€¨äº†ã€‚å› ä¸ºæˆ‘çŸ¥é“æˆ‘ç°åœ¨æ˜¯èµ·ç‚¹ï¼Œæˆ‘è¿˜æœ‰æ›´å¥½çš„é‡ç‚¹ç­‰ç€æˆ‘ã€‚</p><p>é«˜ä¸­çš„æˆ‘æ„Ÿè§‰æ—¶é—´è¿‡çš„çœŸçš„å¾ˆæ…¢ï¼Œä½ æ‰“ä¸ªçŒç¡ã€å·ä¸ªæ‡’ä¹Ÿä¸ä¼šå½±å“å½“æ—¶çš„è‡ªå·±ã€‚ç°åœ¨æƒ³æƒ³è‡ªå·±ä¹Ÿå¤ªå¯ç¬‘äº†ï¼Œçœ¼çœ‹å°±è¦å¤§ä¸‰äº†ï¼Œä¸“ä¸šè¯¾æ˜¯å¦å­¦çš„æ‰å®ï¼Œæ˜¯å¦èƒ½èƒœä»»ä¸€ä»½å¥½çš„å·¥ä½œã€‚</p><p>åœ¨è¿™é•¿æ²³ä¸­æœ‰å‡ åªèˆ¹åªï¼Œä¸¤åªï¼šä¸€åªä¸º<strong>å</strong>ï¼Œä¸€åªä¸º<strong>åˆ©</strong>ã€‚è¶Šé•¿å¤§è¶ŠçŸ¥é“é’±çš„ä½œç”¨ã€‚</p><p>æˆ‘æƒ³è¦å¿«ä¹ã€‚æˆ‘æƒ³è¦å¿«ä¹ã€‚æˆ‘æƒ³è¦å¿«ä¹ã€‚ç»†æƒ³ä¹‹ä¸‹æˆ‘å·²ç»å¾ˆä¹…æ²¡æœ‰çœŸè¯šåœ°å¿«ä¹è¿‡ï¼Œå§‹ç»ˆèƒŒç€ä¸çŸ¥ä½•å¤„æ¥çš„é‡æ‹…è¡Œèµ°åœ¨å†·å¤œé‡Œï¼Œæ‹…å­é‡Œæœ‰ç„¦è™‘ã€è‡ªæˆ‘åŒå¼ƒã€è´Ÿç½ªæ„Ÿã€è™šæ— æ„Ÿâ€¦â€¦å´©æºƒå’Œå“­æ³£ã€‚</p><p>äº²æˆšåƒé¥­ï¼Œå¸­é—´è¯è¯é¢˜è½åˆ°æˆ‘èº«ä¸Šï¼Œå˜˜å¯’é—®æš–ï¼Œæˆ‘å¾ˆå¼€å¿ƒï¼Œå¾ˆä¹Ÿè®¨åŒã€‚æˆ‘äº«å—äº²æƒ…çš„æ¸©æš–ä¹Ÿå®³æ€•è‡ªå·±çš„ä¸è¶³ã€‚æˆ‘ç¬‘ï¼Œå¿ƒé‡Œä¹Ÿè§‰å¾—å¥½ç¬‘ã€‚</p><p>æˆ‘ä¹Ÿä¼šå’Œä»¥å‰åšä¸ªè®°å·ï¼Œä¸ºä»¥å‰çš„ç”Ÿæ´»<code>Delete</code> æœ‰æ—¶å€™æœ‰çš„ç”Ÿæ´»æ˜¯ä¸éœ€è¦ä¿å­˜çš„ï¼Œå› ä¸ºæœŸå¾…æ€»åœ¨æ˜å¤©ã€‚</p><h2 id="å¥”è·‘ğŸƒ">å¥”è·‘ğŸƒ<a title="#å¥”è·‘ğŸƒ" href="#å¥”è·‘ğŸƒ"></a></h2><p>å¦‚ä»Šï¼Œæ˜¯æˆ‘ç¼“å£æ°”çš„æ—¥å­ã€‚ç„¶è€Œæˆ‘åˆå–œæ¬¢åˆå®³æ€•è¿™ç§ç”Ÿæ´»ï¼Œç¼“çš„æ°”çš„å¤šäº†ä¹Ÿä¼šå¾—ç—…ã€‚</p><p>ç¯å¢ƒé€ å°±äººæ²¡é”™ï¼Œæˆ‘ç›¸ä¿¡çœŸæ­£å½±å“è‡ªå·±çš„è¿˜æ˜¯è‡ªå·±ã€‚</p><p>è‡ªå·±ä¸ç›¸ä¿¡è‡ªå·±ç»ˆç©¶è¿˜æ˜¯ä¸è‡ªä¿¡ã€‚</p><p>æ”¹å˜éœ€è¦æ—¶é—´ä¹Ÿéœ€è¦å‹‡æ°”ï¼Œæˆ‘è¦æ”¹å˜çš„ä¸åªæ˜¯å¤–è§‚ï¼Œè¿˜æœ‰å†…åœ¨ã€‚</p><p>æˆ‘è®¨åŒè¿½èµ¶çš„æ—¥å­ï¼Œä¹Ÿè®¸ä½ å½“å¹´å¹¶æ²¡æœ‰æ‰é˜Ÿã€‚ä½ ä¸è¿‡æ˜¯æ²¡æœ‰è¿½èµ¶çš„æ–¹å‘ï¼Œä½ å«‰å¦’å’Œä½ ä¸€èµ·çš„æœ‹å‹åŒå­¦è€ƒä¸Šçš„æ›´å¥½çš„å­¦æ ¡ã€‚</p><p>ç°åœ¨æˆ‘å–œæ¬¢ä¸Šäº†å°†è‡ªå·±å†™åœ¨æ–‡å­—é‡Œï¼Œå³ä½¿æ²¡æœ‰æ–‡ç¬”ï¼Œæˆ‘ä¹Ÿç‰¹åˆ«å–œæ¬¢è¿™ç§æ„Ÿè§‰ã€‚</p><p>è¡¨è¿°åªæ˜¯ä¸€ç§æ–¹å¼ï¼Œå¸Œæœ›ä½ èƒ½æ‰¾åˆ°ä½ çš„wayã€‚</p><p>æ„¿ä½ å†æ¬¡è§æˆ‘çš„æ—¶å€™ä¸æ˜¯åœ¨è¿½èµ¶ï¼Œè€Œæ˜¯åœ¨<strong>å¥”è·‘</strong>ã€‚</p><hr><blockquote><p>æœ€åæˆ‘å°†è¿™ç¯‡æ–‡ç« ç”±Text2Imageè½¬åŒ–æˆçš„å›¾ç‰‡ï¼Œè´´é™„æ–‡ç« åº•éƒ¨ã€‚</p></blockquote><p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1gazqnua20dj30mk3mzu0y.jpg" alt="Untitled" class="Ï†bs"></p>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;20å¹´çš„æ—¶å…‰æ‚„ç„¶è€Œé€ï¼Œç°åœ¨æˆ‘ä¹Ÿæ¸…æ¥šäº†é«˜ä¸­æ—¶åœ¨ä½œæ–‡çº¸ä¸Šå†™çš„å…‰é˜´ä¼¼ç®­ï¼Œæ—¥æœˆå¦‚æ¢­ã€‚å›å¤´æƒ³æƒ³ï¼Œæˆ‘ç°åœ¨çš„æ ·å­æ˜¯æˆ‘æ›¾ç»æƒ³è¦æˆä¸ºçš„æ ·å­å—ã€‚&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="æ‚è®°" scheme="https://pinkpeachabc.cn/categories/%E6%9D%82%E8%AE%B0/"/>
    
    
    <category term="å°è®°" scheme="https://pinkpeachabc.cn/tags/%E5%B0%8F%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>åœ¨Macä¸Šä¸ºå›¾ç‰‡æ·»åŠ é˜´å½±ï¼Œè®©æˆªå›¾æ›´å¥½çœ‹</title>
    <link href="https://pinkpeachabc.cn/%E6%88%AA%E5%9B%BE%E5%B7%A5%E5%85%B7.html"/>
    <id>https://pinkpeachabc.cn/%E6%88%AA%E5%9B%BE%E5%B7%A5%E5%85%B7.html</id>
    <published>2020-01-15T09:19:59.000Z</published>
    <updated>2020-05-23T13:45:04.014Z</updated>
    
    <content type="html"><![CDATA[<p>å¯¹äºç»å¸¸å†™æ–‡ç« ç¨¿ä»¶ç±»çš„å·¥ä½œè€…æ¥è¯´ï¼Œæ’ç‰ˆå†³å®šç»™è¯»è€…çš„ç¬¬ä¸€å°è±¡ã€‚è™½ç„¶Macæœ¬èº«å°±è‡ªå¸¦ä¸ºå›¾ç‰‡åŠ é˜´å½±çš„åŠŸèƒ½ï¼Œä½†å´ä»…ä»…äºæ­¤ã€‚ä¸‹é¢ä¸ºå¤§å®¶å¸¦æ¥ä¸€æ¬¾æ–¹ä¾¿å¥½ç”¨çš„æˆªå›¾å·¥å…·**â€”â€”Xnip**</p><blockquote><p>é¦–å…ˆè®©æˆ‘æ¥ä»‹ç»Macæˆªå›¾çš„ä½¿ç”¨æŠ€å·§</p></blockquote><h2 id="mac-æˆªå›¾é˜´å½±-&amp;-æˆªå›¾å°æŠ€å·§">Mac æˆªå›¾é˜´å½± &amp; æˆªå›¾å°æŠ€å·§<a title="#mac-æˆªå›¾é˜´å½±-&amp;-æˆªå›¾å°æŠ€å·§" href="#mac-æˆªå›¾é˜´å½±-&amp;-æˆªå›¾å°æŠ€å·§"></a></h2><p>å¤§å®¶éƒ½çŸ¥é“ï¼ŒmacOS è‡ªå¸¦çš„ <strong>è‡ªç”±æˆªå›¾é”®</strong> æ˜¯ <code>Command + Shift + 4</code>ï¼Œ<strong>å…¨å±æˆªå›¾é”®</strong> æ˜¯ <code>Command + Shift + 3</code>ã€‚</p><p><strong>æ·»åŠ æˆªå›¾é˜´å½±</strong>ï¼šå½“ä½ å¸Œæœ›ç»™æŸä¸ªçª—å£æ·»åŠ é˜´å½±æ—¶ï¼Œåªéœ€è¦å†æŒ‰ä¸‹ç©ºæ ¼é”®ã€‚ä¹Ÿå°±æ˜¯ç»„åˆé”® <code>Command + Shift + 4 + Spacebar</code> å°±å¯ä»¥æˆªä¸‹è¿™ä¸ªçª—å£ï¼Œä¿å­˜æ—¶ä¼šè‡ªåŠ¨æ·»åŠ é˜´å½±ã€‚</p><p><strong>æˆªå›¾åˆ°å‰ªè´´æ¿</strong>ï¼šåœ¨è¿›è¡Œä¸Šé¢è¿™äº›ç»„åˆé”®çš„åŒæ—¶ï¼Œå¤šæŒ‰ä¸€ä¸ª <code>Control</code> é”®ï¼Œæˆªå›¾å°±ä¸ä¼šä¿å­˜åˆ°æ¡Œé¢ï¼Œè€Œæ˜¯è‡ªåŠ¨è¿›å…¥å‰ªåˆ‡æ¿ï¼Œæ–¹ä¾¿ç²˜è´´åˆ°å…¶ä»–åœ°æ–¹ã€‚</p><p><strong>è°ƒæ•´æˆªå›¾èŒƒå›´</strong>ï¼šå…ˆæŒ‰ä¸‹ <code>Command + Shift + 4</code> åï¼Œæ‹–åŠ¨é¼ æ ‡æˆªå›¾ï¼Œæ­¤æ—¶â€”â€”</p><ul><li><p>æŒ‰ä½é¼ æ ‡ï¼ŒåŒæ—¶æŒ‰ä½ Optionï¼Œå¯ä»¥è®©æˆªå›¾èŒƒå›´ä»¥ä¸­å¿ƒå¯¹ç§°ã€‚</p></li><li><p>æŒ‰ä½é¼ æ ‡ï¼ŒåŒæ—¶æŒ‰ä½ Shiftï¼Œå¯ä»¥å›ºå®šæˆªå›¾èŒƒå›´çš„å®½é«˜ã€‚</p></li><li><p>æŒ‰ä½é¼ æ ‡ï¼ŒåŒæ—¶æŒ‰ä½ Spacebarï¼Œå¯ä»¥æ•´å—ç§»åŠ¨æˆªå›¾èŒƒå›´ã€‚</p></li><li><p>Option å’Œ Shift å¯ä»¥ç»„åˆä½¿ç”¨ã€‚</p></li></ul><h2 id="xnip---screenshot-&amp;-annotation">Xnip - Screenshot &amp; Annotation<a title="#xnip---screenshot-&amp;-annotation" href="#xnip---screenshot-&amp;-annotation"></a></h2><blockquote><p>å¤–è§‚ç¾ä¸½çš„ä¸åƒå®åŠ›æ´¾ï¼Œæˆ‘æœ¬æ˜¯ä¸€ç›´ä½¿ç”¨Macè‡ªå¸¦çš„æˆªå›¾å·¥å…·ã€‚æ¯å½“æƒ³è¦é•¿æˆªå›¾æˆ–è€…åšä¸€äº›æ›´é«˜çº§çš„æ³¨é‡Šçš„æ—¶å€™è‡ªå¸¦çš„æˆªå›¾å·¥å…·å°±ä¸åœ¨æ»¡è¶³æˆ‘çš„è¦æ±‚ã€‚äºæ˜¯è¿™æ¬¾è½¯ä»¶ç‰‡æˆä¸ºäº†æˆ‘æœ€çˆ±çš„æˆªå›¾å·¥å…·ã€‚</p></blockquote><p><strong>æ»šåŠ¨æˆªå›¾</strong></p><p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1gaxevvm54ig31460qh7ws.gif" alt="2020-01-15 18.12.01" class="Ï†bs"></p><p>è¿™ä¸ªåŠŸèƒ½æ˜¯æˆ‘æœ€å–œæ¬¢çš„åŠŸèƒ½ä¸ä»…å¯ä»¥å®Œç¾çš„æŠŠæ•´ä¸ªç½‘é¡µæˆªå›¾ä¸‹æ¥ï¼Œå¹¶ä¸”å¯ä»¥æŒ‡å®šæˆ‘æˆªå–çš„èŒƒå›´ã€‚</p><p><strong>æˆªå–å¤šä¸ªçª—å£</strong></p><p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1gaxf29fg78g31hc0u07wn.gif" alt="2020-01-15 18.19.15" class="Ï†bs"></p><p>è¿™é¡¹åŠŸèƒ½æ˜¯å¯¹æˆ‘æ¥è¯´æ˜¯æ¯”è¾ƒæœ‰ç‰¹è‰²çš„ï¼Œå½“è¿ç”¨å¯¹æ¯”çš„æ—¶å€™è¿™ä¸ªåŠŸèƒ½å¯ä»¥æ›´å¥½çš„å®ç°ã€‚åŒæ—¶æ·»åŠ äº†Macè‡ªå¸¦çš„æˆªå–çª—å£é˜´å½±ï¼Œè¿™æ ·ä¹Ÿæœ‰åˆ©äºæ’ç‰ˆã€‚</p><p><strong>æ ‡æ³¨</strong></p><p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1gaxhnsxurqg31360p0x6t.gif" alt="2020-01-15 19.48.51" class="Ï†bs"></p><p>Xnip æ‹¥æœ‰é½å…¨çš„æ ‡æ³¨åŠŸèƒ½ï¼Œä½ å¯ä»¥å¯¹æˆªå–çš„å›¾ç‰‡è¿›è¡Œæ ‡æ³¨ï¼Œåœ¨æ ‡æ³¨çš„åŒæ—¶è¿˜èƒ½é‡æ–°è°ƒæ•´æˆªå›¾å¤§å°ã€‚</p><h2 id="å‚è€ƒæ–‡ç« ">å‚è€ƒæ–‡ç« <a title="#å‚è€ƒæ–‡ç« " href="#å‚è€ƒæ–‡ç« "></a></h2><p><a href="https://sspai.com/post/41443" target="_blank">åœ¨ Windows ä¸Šä¸ºå›¾ç‰‡æ·»åŠ é˜´å½±ï¼Œè®©æˆªå›¾æ›´å¥½çœ‹</a></p><p><a href="https://www.jianshu.com/p/cdd5f11399f9" target="_blank">Xnip - Mac ä¸Šæ–¹ä¾¿å¥½ç”¨çš„æˆªå›¾å·¥å…·ï¼Œæ”¯æŒæ»šåŠ¨æˆªå›¾</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;å¯¹äºç»å¸¸å†™æ–‡ç« ç¨¿ä»¶ç±»çš„å·¥ä½œè€…æ¥è¯´ï¼Œæ’ç‰ˆå†³å®šç»™è¯»è€…çš„ç¬¬ä¸€å°è±¡ã€‚è™½ç„¶Macæœ¬èº«å°±è‡ªå¸¦ä¸ºå›¾ç‰‡åŠ é˜´å½±çš„åŠŸèƒ½ï¼Œä½†å´ä»…ä»…äºæ­¤ã€‚ä¸‹é¢ä¸ºå¤§å®¶å¸¦æ¥ä¸€æ¬¾æ–¹ä¾¿å¥½ç”¨çš„æˆªå›¾å·¥å…·**â€”â€”Xnip**&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;é¦–å…ˆè®©æˆ‘æ¥ä»‹ç»Macæˆªå›¾çš„ä½¿ç”¨æŠ€å·§&lt;/p&gt;
&lt;/blockqu</summary>
      
    
    
    
    <category term="å®ç”¨å·¥å…·" scheme="https://pinkpeachabc.cn/categories/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/"/>
    
    
    <category term="å·¥å…·" scheme="https://pinkpeachabc.cn/tags/%E5%B7%A5%E5%85%B7/"/>
    
  </entry>
  
  <entry>
    <title>åŸŸåè§£æé…ç½®æ•™ç¨‹</title>
    <link href="https://pinkpeachabc.cn/yu-ming-jie-xi.html"/>
    <id>https://pinkpeachabc.cn/yu-ming-jie-xi.html</id>
    <published>2020-01-09T05:58:38.000Z</published>
    <updated>2020-05-20T01:13:27.147Z</updated>
    
    <content type="html"><![CDATA[<h2 id="åŸŸå">åŸŸå<a title="#åŸŸå" href="#åŸŸå"></a></h2><p>å…³äºåŸŸåç®€å•çš„æ¥è¯´å°±æ˜¯ç½‘å€ã€‚æˆ‘ä»¬è´­ä¹°çš„åŸŸåä¸€èˆ¬éƒ½æ˜¯ä¸€çº§åŸŸåï¼Œä¸€çº§åŸŸååˆå«é¡¶çº§åŸŸåï¼ŒåŸŸåå¤§æ¦‚åˆ†ä¸‰ç§åˆ†åˆ«æ˜¯ã€‚</p><ul><li><p>ä¸€çº§åŸŸåï¼šæˆ‘è´­ä¹°çš„<a href="pinkpeachabc.cn">pinkpeachabc.cn</a>å°±æ˜¯ä¸€çº§åŸŸåï¼Œä¸€ä¸²å­—ç¬¦ä¸²ä¸­é—´ä¸€ä¸ªç‚¹éš”å¼€ï¼Œå¹¶ä¸”ä¸€çº§åŸŸåæ¯”äºŒçº§åŸŸåæ›´å®¹æ˜“æ”¶å½•ã€‚</p></li><li><p>äºŒçº§åŸŸåï¼šäºŒçº§åŸŸåç›¸å½“äºä¸€çº§åŸŸåå‰é¢çš„å‰ç¼€ï¼Œåªè¦æ˜¯xxx.xxxx.xxxæ­¤ç±»éƒ½å±äºäºŒçº§åŸŸåï¼Œ.çš„å‰é¢å¯ä»¥å†™ä»»æ„å†…å®¹åªéœ€è¦åœ¨åŸŸåè§£æé‡Œé¢æ·»åŠ å°±å¯ä»¥äº†ã€‚</p></li><li><p>ä¸‰çº§åŸŸåï¼šäºŒçº§åŸŸåçš„å­åŸŸåï¼Œç‰¹å¾æ˜¯åŒ…å«ä¸‰ä¸ªâ€œ.â€ã€‚<a href="http://xn--xxx-uc0ep96b.xxx.baidu.com">ä¾‹å¦‚xxx.xxx.baidu.com</a> ï¼Œxxxä¸Šå¯ä»¥å¡«å†™ä»»æ„å†…å®¹ï¼Œéƒ½å±äºä¸‰çº§åŸŸåã€‚</p></li></ul><blockquote><p>ç”±äºå›½å†…å’Œå›½å¤–å¯¹åŸŸåçº§åˆ«çš„è§£è¯»ä¸åŒå°±ä¸åœ¨èµ˜è¿°åŒºåˆ«ï¼Œå›½å†…å¾ˆå¤šèµ„æ–™è®¤ä¸ºï¼Œé¡¶çº§åŸŸå’Œä¸€çº§åŸŸæ˜¯åˆ†å¼€çš„ï¼Œä¹Ÿå°±æ˜¯è¯´é¡¶çº§åŸŸå·¦ä¾§çš„åŸŸåæ˜¯ä¸€çº§åŸŸã€‚æ‰€ä»¥ <a href="http://www.baidu.com">www.baidu.com</a> è§£è¯»åŸŸåçº§åˆ«å°±æ˜¯ï¼šé¡¶çº§åŸŸ comï¼Œä¸€çº§åŸŸ baiduï¼ŒäºŒçº§åŸŸ wwwã€‚</p></blockquote><h2 id="åŸŸåç±»å‹">åŸŸåç±»å‹<a title="#åŸŸåç±»å‹" href="#åŸŸåç±»å‹"></a></h2><p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1gaq91rfoolj31af0sqaj7.jpg" alt="å±å¹•å¿«ç…§ 2020-01-09 13.32.14" class="Ï†bs"></p><p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1gaq9446sytj31bn0sktjd.jpg" alt="å±å¹•å¿«ç…§ 2020-01-09 13.35.47" class="Ï†bs"></p><p>è¿™é‡Œæˆ‘ä»¥è…¾è®¯äº‘äº‘è§£æä¸ºä¾‹ï¼Œä»‹ç»æˆ‘ä»¬è§£æä¸­æœ€å¸¸ç”¨çš„å‡ ä¸ªã€‚ä¸€èˆ¬çš„æƒ…å†µä¸‹é€‰æ‹©å¿«é€Ÿæ·»åŠ è§£æï¼Œåªéœ€è¦æŠŠæœåŠ¡å™¨ipå¡«å…¥å°±å¯ä»¥ç›´æ¥è§£æã€‚</p><ul><li><p>wwwï¼šè§£æåå¯ç”¨ <a href="http://www.xxxx.xxx">www.xxxx.xxx</a> è®¿é—®ã€‚</p></li><li><p>@ï¼šæ˜¯æŒ‡å‰é¢ä¸å¸¦ä»»ä½•ä¸»æœºåçš„ï¼Œä»¥ç™¾åº¦ä¸ºä¾‹ï¼Œå°±æ˜¯ <a href="http://baidu.com">baidu.com</a>ã€‚</p></li><li><p>*ï¼šæ­¤ä¸ºæ³›è§£æï¼Œåœ¨åŸŸåå‰æ·»åŠ ä»»ä½•å­åŸŸåï¼Œå‡å¯è®¿é—®åˆ°æ‰€æŒ‡å‘çš„WEBåœ°å€ã€‚</p></li><li><p>Aï¼šç”¨äºè®°å½•ç”¨æ¥æŒ‡å®šä¸»æœºåå¯¹åº”çš„ipåœ°å€è®°å½•ã€‚</p></li><li><p>CNAMEï¼šCNAMEç±»å‹è§£æè®¾ç½®çš„æ–¹æ³•å’ŒAè®°å½•ç±»å‹åŸºæœ¬æ˜¯ä¸€æ ·çš„ï¼Œå…¶ä¸­å°†è®°å½•ç±»å‹ä¿®æ”¹ä¸ºâ€œCNAMEâ€ï¼Œå¹¶ä¸”è®°å½•å€¼å¡«å†™æœåŠ¡å™¨ä¸»æœºåœ°å€å³å¯ã€‚</p></li></ul><hr><p>æ›´å…¨é¢çš„ç”¨æ³•å’Œç±»å‹ï¼Œå¯ä»¥ç›´æ¥ç™»å½•ä½ æ‰€è´­ä¹°åŸŸååœ°æ–¹å…·ä½“æŸ¥çœ‹ï¼Œè‹¥æ€•éº»çƒ¦å¯ä»¥ç›´æ¥é€‰æ‹©å¿«é€Ÿè§£æç›´æ¥å¡«å…¥æœåŠ¡å™¨åœ°å€å³å¯ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;åŸŸå&quot;&gt;åŸŸå&lt;a title=&quot;#åŸŸå&quot; href=&quot;#åŸŸå&quot;&gt;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;å…³äºåŸŸåç®€å•çš„æ¥è¯´å°±æ˜¯ç½‘å€ã€‚æˆ‘ä»¬è´­ä¹°çš„åŸŸåä¸€èˆ¬éƒ½æ˜¯ä¸€çº§åŸŸåï¼Œä¸€çº§åŸŸååˆå«é¡¶çº§åŸŸåï¼ŒåŸŸåå¤§æ¦‚åˆ†ä¸‰ç§åˆ†åˆ«æ˜¯ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ä¸€çº§åŸŸåï¼šæˆ‘è´­ä¹°çš„&lt;a href=</summary>
      
    
    
    
    <category term="å®ç”¨çŸ¥è¯†" scheme="https://pinkpeachabc.cn/categories/%E5%AE%9E%E7%94%A8%E7%9F%A5%E8%AF%86/"/>
    
    
    <category term="åŸŸå" scheme="https://pinkpeachabc.cn/tags/%E5%9F%9F%E5%90%8D/"/>
    
  </entry>
  
  <entry>
    <title>Blogæ­å»ºæµç¨‹</title>
    <link href="https://pinkpeachabc.cn/Blog%E6%90%AD%E5%BB%BA%E6%B5%81%E7%A8%8B.html"/>
    <id>https://pinkpeachabc.cn/Blog%E6%90%AD%E5%BB%BA%E6%B5%81%E7%A8%8B.html</id>
    <published>2020-01-01T15:11:10.000Z</published>
    <updated>2020-05-23T13:44:22.364Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬æ–‡è½¬è‡ª: <a href="http://www.ivan-zcy.top/" target="_blank">Blogæ­å»ºæµç¨‹(Macç³»ç»Ÿå®Œç»“å¸–)</a></p><p>åŸæ–‡åœ°å€: <a href="http://www.ivan-zcy.top/2018/09/30/Blog">http://www.ivan-zcy.top/2018/09/30/Blog</a></p></blockquote><a id="more"></a><h3 id="step1-å®‰è£…node.js">Step1 å®‰è£…Node.js<a title="#step1-å®‰è£…node.js" href="#step1-å®‰è£…node.js"></a></h3><p>å¯é€šè¿‡ä»¥ä¸‹ä¸¤ç§æ–¹å¼åœ¨ Mac OS ä¸Šå®‰è£… node.jsï¼š</p><p>æ–¹å¼ä¸€ï¼š åœ¨<a href="https://nodejs.org/en/download/" target="_blank">å®˜æ–¹ä¸‹è½½ç½‘ç«™</a>ä¸‹è½½ pkg å®‰è£…åŒ…ï¼Œç›´æ¥ç‚¹å‡»å®‰è£…å³å¯</p><p>æ–¹å¼äºŒï¼š ä½¿ç”¨ brew å‘½ä»¤æ¥å®‰è£…ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install node</span><br></pre></td></tr></table></figure><h3 id="step2-å®‰è£…git">Step2 å®‰è£…Git<a title="#step2-å®‰è£…git" href="#step2-å®‰è£…git"></a></h3><p>é¦–å…ˆæŸ¥çœ‹ç”µè„‘æ˜¯å¦å®‰è£…Gitï¼Œç»ˆç«¯è¾“å…¥ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git</span><br></pre></td></tr></table></figure><p>å®‰è£…è¿‡åˆ™ä¼šè¾“å‡ºä¸‹è¡¨ï¼Œç„¶åè·³è¿‡è¯¥æ­¥</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">WMBdeMacBook-Pro:~ WENBO$ git</span><br><span class="line">usage: git [--version] [--help] [-C &lt;path&gt;] [-c name&#x3D;value]</span><br><span class="line">           [--exec-path[&#x3D;&lt;path&gt;]] [--html-path] [--man-path] [--info-path]</span><br><span class="line">           [-p | --paginate | --no-pager] [--no-replace-objects] [--bare]</span><br><span class="line">           [--git-dir&#x3D;&lt;path&gt;] [--work-tree&#x3D;&lt;path&gt;] [--namespace&#x3D;&lt;name&gt;]</span><br><span class="line">           &lt;command&gt; [&lt;args&gt;]</span><br><span class="line"></span><br><span class="line">These are common Git commands used in various situations:</span><br><span class="line"></span><br><span class="line">start a working area (see also: git help tutorial)</span><br><span class="line">   clone      Clone a repository into a new directory</span><br><span class="line">   init       Create an empty Git repository or reinitialize an existing one</span><br><span class="line"></span><br><span class="line">work on the current change (see also: git help everyday)</span><br><span class="line">   add        Add file contents to the index</span><br><span class="line">   mv         Move or rename a file, a directory, or a symlink</span><br><span class="line">   reset      Reset current HEAD to the specified state</span><br><span class="line">   rm         Remove files from the working tree and from the index</span><br><span class="line"></span><br><span class="line">examine the history and state (see also: git help revisions)</span><br><span class="line">   bisect     Use binary search to find the commit that introduced a bug</span><br><span class="line">   grep       Print lines matching a pattern</span><br><span class="line">   log        Show commit logs</span><br><span class="line">   show       Show various types of objects</span><br><span class="line">   status     Show the working tree status</span><br><span class="line"></span><br><span class="line">grow, mark and tweak your common history</span><br><span class="line">   branch     List, create, or delete branches</span><br><span class="line">   checkout   Switch branches or restore working tree files</span><br><span class="line">   commit     Record changes to the repository</span><br><span class="line">   diff       Show changes between commits, commit and working tree, etc</span><br><span class="line">   merge      Join two or more development histories together</span><br><span class="line">   rebase     Reapply commits on top of another base tip</span><br><span class="line">   tag        Create, list, delete or verify a tag object signed with GPG</span><br><span class="line"></span><br><span class="line">collaborate (see also: git help workflows)</span><br><span class="line">   fetch      Download objects and refs from another repository</span><br><span class="line">   pull       Fetch from and integrate with another repository or a local branch</span><br><span class="line">   push       Update remote refs along with associated objects</span><br><span class="line"></span><br><span class="line">&#39;git help -a&#39; and &#39;git help -g&#39; list available subcommands and some</span><br><span class="line">concept guides. See &#39;git help &lt;command&gt;&#39; or &#39;git help &lt;concept&gt;&#39;</span><br><span class="line">to read about a specific subcommand or concept.</span><br></pre></td></tr></table></figure><p>å¦‚æœæ²¡æœ‰æ˜¾ç¤ºä¸Šé¢å†…å®¹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡homebrewå®‰è£…GItï¼Œè‹¥æœªå®‰è£…homebrew åˆ™é€šè¿‡ç»ˆç«¯æ‰§è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/bin/ruby -e <span class="string">&quot;<span class="subst">$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)</span>&quot;</span></span><br></pre></td></tr></table></figure><p>éšåæ‰§è¡Œä¸€ä¸‹å‘½ä»¤è¿›è¡ŒGitçš„å®‰è£…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install git</span><br></pre></td></tr></table></figure><h3 id="step3-æ³¨å†Œgithubè´¦å·å¹¶æ–°å»ºä»“åº“">Step3 æ³¨å†ŒGithubè´¦å·å¹¶æ–°å»ºä»“åº“<a title="#step3-æ³¨å†Œgithubè´¦å·å¹¶æ–°å»ºä»“åº“" href="#step3-æ³¨å†Œgithubè´¦å·å¹¶æ–°å»ºä»“åº“"></a></h3><p>ç½‘ç«™é“¾æ¥ï¼š<a href="https://github.com/" target="_blank">Github</a></p><p>æ³¨å†Œå®Œè´¦å·åéœ€æ–°å»ºä¸€ä¸ªä»“åº“ã€‚æ³¨æ„ï¼ï¼<a href="http://xn--username-8k1mt54bqqt31ihkbl7eew7ai0bv97k40wh.github.io">æ–°å»ºçš„ä»“åº“åå­—å¿…é¡»æ˜¯username.github.io</a>ã€‚ä¾‹å¦‚æˆ‘usernameæ˜¯ivan-zcyï¼Œ<a href="http://xn--ivan-zcy-ik0m08bsy7a1jvrtjq9dzv5abi9mr41a.github.io">é‚£ä¹ˆä»“åº“åå­—å¿…é¡»æ˜¯ivan-zcy.github.io</a></p><h3 id="step4-é…ç½®ssh-keyï¼ˆå¯çœç•¥-å»ºè®®é…ç½®ï¼‰">Step4 é…ç½®SSH Keyï¼ˆå¯çœç•¥ å»ºè®®é…ç½®ï¼‰<a title="#step4-é…ç½®ssh-keyï¼ˆå¯çœç•¥-å»ºè®®é…ç½®ï¼‰" href="#step4-é…ç½®ssh-keyï¼ˆå¯çœç•¥-å»ºè®®é…ç½®ï¼‰"></a></h3><p>è¿™ä¸€æ­¥èƒ½çœç•¥ ä½†æ˜¯é…ç½®åæ›´æ–°åšå®¢å°±ä¸ç”¨æ¯æ¬¡éƒ½è¾“å…¥ç”¨æˆ·åå¯†ç äº†</p><p>æ­¥éª¤ï¼š<br>â€‹ 1 æ£€æŸ¥ä¸»æœºæ˜¯å¦å·²å­˜åœ¨SSH Key</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd .ssh</span><br><span class="line">ls -la</span><br></pre></td></tr></table></figure><p>è‹¥è¾“å‡ºçš„æ–‡ä»¶åˆ—è¡¨ä¸­å­˜åœ¨id_rsa.pub æˆ– id_dsa.pub æ–‡ä»¶ï¼Œåˆ™ç›´æ¥è·³åˆ°ç¬¬ä¸‰å°æ­¥</p><p>2 åˆ›å»ºSSH Key<br>åœ¨ç»ˆç«¯è¾“å…¥å¦‚ä¸‹å‘½ä»¤</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C &quot;your_email@example.com&quot;</span><br></pre></td></tr></table></figure><p>æŒ‰ä¸‹å›è½¦ ä¼šè®©è¾“å…¥æ–‡ä»¶åï¼Œç›´æ¥å›è½¦ä¼šåˆ›å»ºé»˜è®¤æ–‡ä»¶åçš„æ–‡ä»¶ ç„¶åä¼šæç¤ºè¾“å…¥ä¸¤æ¬¡å¯†ç (å¯ä¸ºç©º)</p><p>3 æ·»åŠ SSH Keyåˆ°Github</p><p>ï¼ˆå¦‚æœä¹‹å‰åœ¨Githubä¸­æ·»åŠ è¿‡SSH åˆ™è·³è¿‡è¯¥æ­¥ï¼‰</p><p>å¦‚æœä½ æ²¡æœ‰æŒ‡å®šæ–‡ä»¶åï¼ˆä¹Ÿå°±æ˜¯ä½¿ç”¨é»˜è®¤æ–‡ä»¶åï¼‰ï¼Œé‚£ä¹ˆåœ¨.sshæ–‡ä»¶å¤¹ä¸‹ä¼šæœ‰ä¸€ä¸ªid_rsa.pubæ–‡ä»¶ï¼Œæ‰“å¼€è¯¥æ–‡ä»¶å¹¶å¤åˆ¶é‡Œé¢çš„å†…å®¹</p><p>ç™»å½•Githubï¼Œç‚¹å‡»å³ä¸Šè§’å¤´åƒå³è¾¹çš„ä¸‰è§’å›¾æ ‡ï¼Œç‚¹å‡»Settings â€“&gt; SSH and GPG keys â€“&gt; New SSH keyã€‚Title éšä¾¿å¡«ä¸€ä¸ªï¼Œåœ¨Keyæ ä¸­å¡«å…¥å¤åˆ¶çš„å†…å®¹ï¼Œç‚¹å‡»Add SSH keyï¼Œå°±æ·»åŠ æˆåŠŸäº†</p><p>4 æ£€éªŒSSH Keyæ˜¯å¦é…ç½®æˆåŠŸ<br>åœ¨ç»ˆç«¯è¾“å…¥å¦‚ä¸‹å‘½ä»¤</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -T git@github.com</span><br></pre></td></tr></table></figure><p>å¦‚æœæœ€åå‡ºç°</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hi username! You&#39;ve successfully authenticated, but GitHub does not provide shell access.</span><br></pre></td></tr></table></figure><p>å°±è¯´æ˜SSH Keyé…ç½®æˆåŠŸäº†</p><h3 id="step5-å®‰è£…hexo">Step5 å®‰è£…Hexo<a title="#step5-å®‰è£…hexo" href="#step5-å®‰è£…hexo"></a></h3><p>ä½¿ç”¨npmå‘½ä»¤å®‰è£…Hexo</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo</span><br></pre></td></tr></table></figure><p>æ¥ç€åœ¨ä»»æ„ä½ç½®åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå¦‚Blogï¼Œcdåˆ°è¯¥è·¯å¾„ä¸‹æ‰§è¡Œ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo init</span><br></pre></td></tr></table></figure><p>è¯¥å‘½ä»¤ä¼šåœ¨ç›®æ ‡æ–‡ä»¶å¤¹å†…å»ºç«‹ç½‘ç«™æ‰€éœ€çš„åŸºç¡€æ–‡ä»¶</p><p>æ¥ç€å®‰è£…å®‰è£…ä¾èµ–åŒ…</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶æœ¬åœ°åšå®¢å°±æ­å»ºå¥½äº†</p><p>æ‰§è¡Œ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo generate</span><br><span class="line">hexo server</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶å¯åœ¨æµè§ˆå™¨ä¸­è¾“å…¥<a href="https://link.jianshu.com/?t=http://localhost:4000/" target="_blank">http://localhost:4000/</a>è¿›è¡Œæœ¬åœ°æŸ¥çœ‹ï¼ˆå…¶ä»–äººæ— æ³•è®¿é—®ï¼‰</p><p>å½“ç„¶ æ­¤æ—¶å¯ä¿®æ”¹æœ¬åœ°åšå®¢è·¯å¾„ä¸‹çš„_configæ–‡ä»¶å¯¹åšå®¢è¿›è¡Œå…¨å±€è®¾ç½®ï¼Œé‡Œè¾¹è®¾ç½®é¡¹æŒºå¤šå°±ä¸ä¸€ä¸€åˆ—ä¸¾å•¦ï¼è‡ªè¡Œç™¾åº¦</p><h3 id="step6-åŒæ­¥åˆ°è¿œç¨‹githubä»“åº“">Step6 åŒæ­¥åˆ°è¿œç¨‹Githubä»“åº“<a title="#step6-åŒæ­¥åˆ°è¿œç¨‹githubä»“åº“" href="#step6-åŒæ­¥åˆ°è¿œç¨‹githubä»“åº“"></a></h3><p>åœ¨æœ¬åœ°Blogè·¯å¾„ä¸‹æ‰¾åˆ°_config.ymlï¼ŒæŠŠdeployèŠ‚ç‚¹ä¿®æ”¹ä¸ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: git@github.com:username&#x2F;username.github.io.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure><p>ï¼ˆå…¶ä¸­ usernameä¸ºä½ çš„Githubç”¨æˆ·åï¼‰</p><p>ä¸ºäº†èƒ½å¤Ÿä½¿Hexoéƒ¨ç½²åˆ°GitHubä¸Šï¼Œéœ€å®‰è£…ä¸€ä¸ªæ’ä»¶</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure><p>ç„¶åè¾“å…¥ä»¥ä¸‹å‘½ä»¤</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo generate</span><br><span class="line">hexo deploy</span><br></pre></td></tr></table></figure><p>è¿™æ—¶å€™å°±å¯ä»¥åœ¨æµè§ˆå™¨é€šè¿‡è¾“å…¥username.github.ioå°±å¯ä»¥è®¿é—®ä½ çš„åšå®¢äº†</p><h3 id="step7-é…ç½®ä¸»é¢˜">Step7 é…ç½®ä¸»é¢˜<a title="#step7-é…ç½®ä¸»é¢˜" href="#step7-é…ç½®ä¸»é¢˜"></a></h3><p>å‰è¾¹å†™è¿‡é…ç½®ä¸»é¢˜çš„åšæ–‡ æŠ›å‡ºä¸€ä¸ªä¼ é€é—¨ï¼š</p><p><a href="http://www.ivan-zcy.top/2018/09/28/hexo%E6%9B%B4%E6%8D%A2%E4%B8%BB%E9%A2%98%E6%B5%81%E7%A8%8B/" target="_blank">æ»´æ»´ï¼Œæˆ‘æ˜¯ä¼ é€é—¨</a></p><p>ï¼ˆä¸»é¢˜åœ¨githubä¸Š çŸ¥ä¹ä¸Š hexoå®˜ç½‘ä¸Šæœ‰å¾ˆå¤šå¾ˆå¤š é€‚åˆè‡ªå·±å°±å¥½ï¼‰</p><h3 id="æ³¨æ„ç‚¹ï¼ï¼ï¼ï¼">æ³¨æ„ç‚¹ï¼ï¼ï¼ï¼<a title="#æ³¨æ„ç‚¹ï¼ï¼ï¼ï¼" href="#æ³¨æ„ç‚¹ï¼ï¼ï¼ï¼"></a></h3><p>ä¸€äº›ä¸»é¢˜çš„åŠŸèƒ½éœ€è¦æˆ‘ä»¬è‡ªå·±é¢„å…ˆåˆ›å»ºå¥½å¯¹åº”çš„é¡µé¢ï¼Œä¾‹å¦‚æ ‡ç­¾tags å…³äºaboutç­‰ç­‰ç­‰ç­‰</p><p>æ­¤æ—¶æˆ‘ä»¬éœ€è¦åœ¨æœ¬åœ°Blogè·¯å¾„ä¸‹</p><p>1 æ·»åŠ å…³äºé¡µé¢ï¼ˆå¯é€‰ï¼‰</p><p>ä½¿ç”¨ï¼š<code>hexo new page &quot;about&quot;</code>æ–°å»ºä¸€ä¸ª å…³äºæˆ‘ é¡µé¢ã€‚<br>ä¸»é¢˜çš„ <code>_config.yml</code>æ–‡ä»¶ä¸­çš„ <code>menu</code>ä¸­è¿›è¡ŒåŒ¹é…</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">menu:</span><br><span class="line">  home: &#x2F;      &#x2F;&#x2F;ä¸»é¡µ</span><br><span class="line">  categories: &#x2F;categories &#x2F;&#x2F;åˆ†ç±»</span><br><span class="line">  archives: &#x2F;archives   &#x2F;&#x2F;å½’æ¡£</span><br><span class="line">  tags: &#x2F;tags   &#x2F;&#x2F;æ ‡ç­¾</span><br><span class="line">  about: &#x2F;about   &#x2F;&#x2F;å…³äº                  ï¼ˆæ·»åŠ æ­¤è¡Œå³å¯ï¼‰</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯åœ¨æœ¬åœ°åšå®¢è·¯å¾„ â€“&gt; source â€“&gt; aboutæ–‡ä»¶ä¸‹ï¼Œé€šè¿‡ä¿®æ”¹å…¶ä¸­çš„index.mdå¯¹å…¶é¡µé¢è¿›è¡Œé…ç½®</p><p>2 æ·»åŠ æ ‡ç­¾é¡µé¢ï¼ˆå¯é€‰ï¼‰</p><p>ä½¿ç”¨ï¼š <code>hexo new page tags</code>æ–°å»ºä¸€ä¸ª æ ‡ç­¾ é¡µé¢ã€‚<br>ä¸»é¢˜çš„ <code>_config.yml</code>æ–‡ä»¶ä¸­çš„ <code>menu</code>ä¸­è¿›è¡ŒåŒ¹é…</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">menu:</span><br><span class="line">  home: &#x2F;      &#x2F;&#x2F;ä¸»é¡µ</span><br><span class="line">  categories: &#x2F;categories &#x2F;&#x2F;åˆ†ç±»</span><br><span class="line">  archives: &#x2F;archives   &#x2F;&#x2F;å½’æ¡£</span><br><span class="line">  tags: &#x2F;tags   &#x2F;&#x2F;æ ‡ç­¾                  ï¼ˆæ·»åŠ æ­¤è¡Œå³å¯ï¼‰</span><br><span class="line">  about: &#x2F;about   &#x2F;&#x2F;å…³äº</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯åœ¨æœ¬åœ°åšå®¢è·¯å¾„ â€“&gt; source â€“&gt; tagsæ–‡ä»¶ä¸‹ï¼Œé€šè¿‡ä¿®æ”¹å…¶ä¸­çš„index.mdå¯¹å…¶é¡µé¢è¿›è¡Œé…ç½®</p><p>é™¤äº†ä¸Šè¾¹ä¸¤ä¸ªä¹‹å¤–è¿˜æœ‰åˆ†ç±»categoriesï¼Œè‡ªå®šä¹‰é¡µé¢ç­‰ç­‰å°±ä¸ä¸€ä¸€åˆ—ä¸¾å•¦ è‡ªè¡Œç™¾åº¦å§ï¼</p><h3 id="step8-å‘å¸ƒåšæ–‡">Step8 å‘å¸ƒåšæ–‡<a title="#step8-å‘å¸ƒåšæ–‡" href="#step8-å‘å¸ƒåšæ–‡"></a></h3><p>æ¥ç€æŠ›é“¾æ¥ï¼š</p><p><a href="http://www.ivan-zcy.top/2018/09/28/hexo%E5%8F%91%E8%A1%A8%E5%8D%9A%E5%AE%A2%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" target="_blank">æ»´æ»´ï¼Œæˆ‘ä¹Ÿæ˜¯ä¸€ä¸ªä¼ é€é—¨</a></p><h3 id="step9-ç»‘å®šä¸ªäººåŸŸå">Step9 ç»‘å®šä¸ªäººåŸŸå<a title="#step9-ç»‘å®šä¸ªäººåŸŸå" href="#step9-ç»‘å®šä¸ªäººåŸŸå"></a></h3><p>æ­¥éª¤ï¼š</p><p>1 è´­ä¹°åŸŸå</p><p>å»ºè®®ä»<a href="https://account.aliyun.com/login/login.htm?oauth_callback=http%3A%2F%2Fnetcn.console.aliyun.com%2Fcore%2Fdomain%2Flist%3Fspm%3Da2c1d.8251892.0.0.4f0f52f2SzXZY4" target="_blank">é˜¿é‡Œäº‘å¹³å°</a>å•¦ä¹‹ç±»çš„å›½å†…å¤§å‹å¹³å°è´­ä¹°ï¼ˆè¿™ä¸€æ­¥é€šå¸¸éœ€è¦èº«ä»½éªŒè¯ä¹‹ç±»çš„ å¤§æ¦‚éœ€è¦å‡ å¤©æ—¶é—´å§ä¹Ÿè®°ä¸æ¸…æ¥šäº† åæ­£æŒºéº»çƒ¦æŒºç£¨å”§çš„ï¼‰</p><p>2 é…ç½®DNSåœ°å€</p><p>è¿›å…¥é˜¿é‡Œäº‘æ§åˆ¶å° â€“&gt; åŸŸå â€“&gt; åŸŸååˆ—è¡¨ æ‰¾åˆ°è‡ªå·±çš„åŸŸå ç‚¹å‡»ä¸‹å›¾çº¢åœˆåœˆçš„â€œç®¡ç†â€</p><p><img src="http://www.ivan-zcy.top/2018/09/30/Blog%E6%90%AD%E5%BB%BA%E6%B5%81%E7%A8%8B-Mac%E7%B3%BB%E7%BB%9F%E5%AE%8C%E7%BB%93%E5%B8%96/1.png" alt="1" class="Ï†bs"></p><p>3 è¿›è¡ŒåŸŸåè§£æ</p><p>æ‰¾åˆ°ç®¡ç†ç•Œé¢ä¸‹çš„åŸŸåè§£æ åœ¨å…¶ä¸­æ·»åŠ 3æ¡è®°å½•ï¼ˆusernameæ˜¯githubçš„ç”¨æˆ·åï¼‰</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@          A             192.30.252.153</span><br><span class="line">@          A             192.30.252.154</span><br><span class="line">www      CNAME         username.github.io.</span><br></pre></td></tr></table></figure><p>4æ·»åŠ CNAMEæ–‡ä»¶<br>æ–°å»ºä¸€ä¸ªåä¸ºCNAMEçš„æ–‡ä»¶(æ— åç¼€)ï¼Œå†…å®¹ä¸ºä½ çš„åŸŸååœ°å€ã€‚å°†è¯¥æ–‡ä»¶æ”¾åˆ°æœ¬åœ°åšå®¢çš„sourceæ–‡ä»¶å¤¹é‡Œé¢ï¼Œå¹¶æ›´æ–°åˆ°Github</p><p>è¿™æ—¶å€™ä½ çš„åšå®¢å°±å»ºå®Œå•¦ï¼</p><p>æœ€åé™„ä¸Šä¸»é¡µåœ°å€ï¼š <a href="http://www.ivan-zcy.top/" target="_blank">æˆ³æˆ‘</a></p><p>ä¸€èµ·é€ ä½œå§ï¼ï¼ï¼ï¼</p><h4 id="å‚è€ƒé“¾æ¥ï¼š">å‚è€ƒé“¾æ¥ï¼š<a title="#å‚è€ƒé“¾æ¥ï¼š" href="#å‚è€ƒé“¾æ¥ï¼š"></a></h4><p><a href="https://segmentfault.com/a/1190000008040387">https://segmentfault.com/a/1190000008040387</a></p><p><a href="https://blog.csdn.net/ganzhilin520/article/details/79047249">https://blog.csdn.net/ganzhilin520/article/details/79047249</a></p><p><a href="https://www.jianshu.com/p/e5f95eb990ad">https://www.jianshu.com/p/e5f95eb990ad</a></p>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;æœ¬æ–‡è½¬è‡ª: &lt;a href=&quot;http://www.ivan-zcy.top/&quot; target=&quot;_blank&quot;&gt;Blogæ­å»ºæµç¨‹(Macç³»ç»Ÿå®Œç»“å¸–)&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;åŸæ–‡åœ°å€: &lt;a href=&quot;http://www.ivan-zcy.top/2018/09/30/Blog&quot;&gt;http://www.ivan-zcy.top/2018/09/30/Blog&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="åšå®¢" scheme="https://pinkpeachabc.cn/categories/%E5%8D%9A%E5%AE%A2/"/>
    
    
    <category term="hexo" scheme="https://pinkpeachabc.cn/tags/hexo/"/>
    
  </entry>
  
</feed>
