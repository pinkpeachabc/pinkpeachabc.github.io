{"title":"JSPçš„åŸºæœ¬è¯­æ³•","date":"2020-03-04T06:42:17.000Z","date_formatted":{"ll":"2020å¹´3æœˆ4æ—¥","L":"2020/03/04","MM-DD":"03-04"},"link":"JSPçš„åŸºæœ¬è¯­æ³•","comments":true,"tags":["JSP"],"categories":["JavaWeb"],"updated":"2020-08-16T13:30:21.449Z","content":"<h2 id=\"jsp-ç®€ä»‹\">JSP ç®€ä»‹<a title=\"#jsp-ç®€ä»‹\" href=\"#jsp-ç®€ä»‹\"></a></h2>\n<blockquote>\n<p>å‰ä¸¤ç« å†™çš„å“åº”å’Œ sessionï¼Œè¿™æ¬¡æˆ‘æ¥è¯´ä¸€ä¸‹ jsp ğŸ˜€</p>\n</blockquote>\n<p><strong>ä»€ä¹ˆæ˜¯ JSP</strong></p>\n<p>JSP å…¨åä¸º Java Server Pagesï¼Œä¸­æ–‡åå« java æœåŠ¡å™¨é¡µé¢ã€‚åœ¨ä¼ ç»Ÿçš„ç½‘é¡µHTMLæ–‡ä»¶(<em>.htm,</em>.html)ä¸­æ’å…¥ Java ç¨‹åºæ®µå’Œ JSP æ ‡è®°ï¼Œç¼€åä¸º(*.jsp)ã€‚</p>\n<p><strong>ä¸ºä»€ä¹ˆè¦æœ‰ JSP</strong></p>\n<p>ç›´æ¥ä½¿ç”¨ Html æ–‡ä»¶æ˜¯æ²¡æœ‰åŠæ³•è¾“å‡º Java å½“ä¸­çš„ä¿¡æ¯ï¼Œä½¿ç”¨ servlet æ¥å»è¾“å‡ºä¸€ä¸ªç½‘é¡µéå¸¸çš„éº»çƒ¦ã€‚äºæ˜¯å°±å‡ºç°äº†jspï¼Œåˆèƒ½å†™ htmlï¼Œåˆèƒ½å†™ Java ä»£ç </p>\n<p><strong>JSP çš„ç»„æˆéƒ¨åˆ†</strong></p>\n<p>é™æ€æ•°æ®ï¼Œå¦‚ HTML</p>\n<p>JSP è„šæœ¬å…ƒç´ å’Œå˜é‡</p>\n<p>JSP æŒ‡ä»¤ï¼Œå¦‚ include æŒ‡ä»¤</p>\n<p>JSP æ ‡ç­¾åŠ¨ä½œ</p>\n<p>ç”¨æˆ·è‡ªå®šä¹‰æ ‡ç­¾</p>\n<h2 id=\"jspè„šæœ¬å…ƒç´ å’Œå˜é‡\">JSPè„šæœ¬å…ƒç´ å’Œå˜é‡<a title=\"#jspè„šæœ¬å…ƒç´ å’Œå˜é‡\" href=\"#jspè„šæœ¬å…ƒç´ å’Œå˜é‡\"></a></h2>\n<p><strong>åœ¨ JSP å½“ä¸­å†™ Java ä»£ç </strong></p>\n<p><code>&lt;%javaä»£ç %&gt;</code>å†…éƒ¨çš„ java ä»£ç ç¿»è¯‘åˆ° service æ–¹æ³•çš„å†…éƒ¨<br>\n<code>&lt;%=javaå˜é‡æˆ–è¡¨è¾¾å¼&gt;</code>ä¼šè¢«ç¿»è¯‘æˆ service æ–¹æ³•å†…éƒ¨ <code>out.print()</code><br>\n<code>&lt;%!javaä»£ç %&gt;</code>ä¼šè¢«ç¿»è¯‘æˆ servlet çš„æˆå‘˜çš„å†…å®¹<br>\n<strong>JSP æ³¨é‡Š</strong></p>\n<p>HTML æ³¨é‡Šï¼š<code>&lt;!--æ³¨é‡Šå†…å®¹--&gt;</code><br>\nå¯è§èŒƒå›´ jsp æºç ã€ç¿»è¯‘åçš„ servletã€é¡µé¢<br>\n<strong>Java æ³¨é‡Š</strong></p>\n<p><code>//å•è¡Œæ³¨é‡Š  /*å¤šè¡Œæ³¨é‡Š*/</code><br>\nå¯è§èŒƒå›´ jsp æºç  ç¿»è¯‘åçš„ servlet,é¡µé¢ä¸­çœ‹ä¸åˆ°<br>\n<strong>Jsp æ³¨é‡Š</strong></p>\n<p><code>&lt;%--æ³¨é‡Šå†…å®¹--%&gt;</code><br>\nå¯è§èŒƒå›´ jsp æºç å¯è§</p>\n<h2 id=\"jsp-æŒ‡ä»¤\">JSP æŒ‡ä»¤<a title=\"#jsp-æŒ‡ä»¤\" href=\"#jsp-æŒ‡ä»¤\"></a></h2>\n<p><strong>ä»€ä¹ˆæ˜¯æŒ‡ä»¤</strong></p>\n<blockquote>\n<p>JSP æŒ‡ä»¤ç”¨äºè®¾ç½®æ•´ä¸ª JSP é¡µé¢çš„ç›¸å…³ä¿¡æ¯ï¼Œä»¥åŠç”¨äº JSP é¡µé¢ä¸å…¶å®ƒå®¹å™¨ä¹‹é—´çš„é€šä¿¡ã€‚</p>\n</blockquote>\n<p><strong>æœ‰å“ªäº›æŒ‡ä»¤</strong></p>\n<blockquote>\n<p>page æŒ‡ä»¤\tinclude æŒ‡ä»¤\ttaglib æŒ‡ä»¤</p>\n</blockquote>\n<p><strong>page æŒ‡ä»¤</strong></p>\n<figure class=\"highlight jsp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;%<span class=\"meta\">@page</span> <span class=\"string\">&quot;æŒ‡ä»¤&quot;</span> %&gt;</span><br></pre></td></tr></table></figure>\n<p>ç”¨äºè®¾å®šæ•´ä¸ª JSP é¡µé¢çš„å±æ€§å’Œç›¸å…³åŠŸèƒ½ï¼Œå¤šä¸ªå±æ€§ä¹‹é—´ä½¿ç”¨ç©ºæ ¼éš”å¼€ã€‚page æŒ‡ä»¤å…±æœ‰ 11 ä¸ªå±æ€§åˆ†åˆ«æ˜¯ï¼š</p>\n<p>â€‹\t<em>contentType</em><br>\nâ€‹\tcontentType å±æ€§æŒ‡å®š JSP é¡µé¢çš„ MIME å’Œç¼–ç æ ¼å¼</p>\n<p>â€‹\t<em>buffer</em><br>\nâ€‹\tç”¨æ¥è®¾ç½®è¾“å‡ºæµç¼“å†²åŒº,ç¼“å†²åŒºçš„ä½œç”¨å°±æ˜¯ä¸ºäº†æé«˜ IO æ€§èƒ½,ä¹Ÿå°±æ˜¯è¯´å‡å°‘ write çš„æ¬¡æ•°</p>\n<p>â€‹\t<em>language å±æ€§</em><br>\nâ€‹\tæŒ‡å®šé¡µé¢ä¸­ä½¿ç”¨çš„è„šæœ¬è¯­è¨€ç§ç±»,ç›®å‰åªæ”¯æŒ java</p>\n<p>â€‹\tisErrorPage<br>\nâ€‹\tå…è®¸æŒ‡å®šçš„ JSP é¡µé¢ä¸ºé”™è¯¯å¤„ç†é¡µé¢</p>\n<p>â€‹\t<em>autoFlush</em><br>\nâ€‹\tç”¨æ¥æŒ‡å®šå½“è¾“å‡ºæµç¼“å†²åŒºæ»¡äº†çš„æ—¶å€™ï¼Œæ˜¯å¦è‡ªåŠ¨åˆ·æ–°ç¼“å†²åŒº</p>\n<p>â€‹\t<em>errorPage</em><br>\nâ€‹\tå¦‚æœå½“å‰é¡µé¢å‘ç”Ÿå¼‚å¸¸,ç½‘é¡µä¼šé‡å®šå‘åˆ° errorPage æ‰€æŒ‡å®šçš„é¡µé¢è¿›è¡Œå¤„ç†</p>\n<p>â€‹\t<em>extends</em><br>\nâ€‹\tç”¨äºæŒ‡å®šè¯¥ JSP ç”Ÿæˆçš„ servlet ç»§æ‰¿è‡ªå“ªä¸ªçˆ¶ç±»,å¿…é¡»æŒ‡å®šåŒ…ååŠ ç±»å</p>\n<p>â€‹\t<em>session</em><br>\nâ€‹\tæŒ‡å®šå½“å‰é¡µé¢æ˜¯å¦èƒ½è·å¾—å½“å‰ç”¨æˆ·çš„ session å¯¹è±¡,ç¼ºçœæ˜¯ true<br>\nâ€‹\tå¦‚æœæŒ‡å®šä¸º false,é‚£ä¹ˆåœ¨è¯¥é¡µé¢ä¸­æ— æ³•ä½¿ç”¨ sessionï¼Œä½¿ç”¨çš„è¯ä¼šæç¤º500é”™è¯¯</p>\n<p>â€‹\t<em>import</em><br>\nâ€‹\tåœ¨ JSP ä¸­å¼•å…¥ Java çš„åŒ…å’Œç±»ï¼Œå¤šä¸ªåŒ…ä¹‹é—´ä»¥é€—å·éš”å¼€</p>\n<p>â€‹\t<em>info</em><br>\nâ€‹\tç”¨æ¥è®¾ç½®è¯¥ jsp æ–‡ä»¶çš„ä»‹ç»ä¿¡æ¯</p>\n<p>â€‹\t<em>pageEncoding</em><br>\nâ€‹\tpageEncoding å±æ€§ç”¨æ¥æŒ‡å®š JSP æ–‡ä»¶çš„ç¼–ç æ ¼å¼</p>\n<p>â€‹\t<em>isELIgnored</em><br>\nâ€‹\tç”¨æ¥æ ‡ç¤ºæ˜¯å¦æ”¯æŒ EL è¡¨è¾¾å¼</p>\n<p>â€‹\t<em>isThreadSafe</em><br>\nâ€‹\tç¼ºçœå€¼ä¸º true<br>\nâ€‹\tæŒ‡å®šè¯¥ JSP æ–‡ä»¶æ˜¯å¦æ”¯æŒå¤šçº¿ç¨‹è®¿é—®</p>\n<p><strong>includeæŒ‡ä»¤</strong></p>\n<p>è¡¨ç¤ºåœ¨JSPç¼–è¯‘æ—¶æ’å…¥ä¸€ä¸ªåŒ…å«æ–‡ä»¶æˆ–è€…ä»£ç çš„æ–‡ä»¶ï¼Œinclude æŒ‡ä»¤æ‰€åŒ…å«çš„æ–‡ä»¶åä¸èƒ½æ˜¯ä¸€ä¸ªå˜é‡ url,åªèƒ½æ˜¯é™æ€çš„æ–‡ä»¶åã€‚</p>\n<blockquote>\n<p>é™æ€åŒ…å«</p>\n</blockquote>\n<figure class=\"highlight jsp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;%<span class=\"meta\">@include</span> file=<span class=\"string\">&quot;header.jsp&quot;</span>%&gt;</span><br><span class=\"line\">&lt;%<span class=\"meta\">@include</span> file=<span class=\"string\">&quot;footer.jsp&quot;</span>%&gt;</span><br></pre></td></tr></table></figure>\n<p>å°†ä¸¤ä¸ª jsp é¡µé¢æ¥ç€åˆ°ä¸€èµ·ï¼Œ ç„¶åå†ç¿»è¯‘æˆ servlet</p>\n<p><strong>taglibæŒ‡ä»¤</strong></p>\n<p>å£°æ˜ JSP æ–‡ä»¶ä½¿ç”¨äº†æ ‡ç­¾åº“</p>\n<blockquote>\n<p>æœ‰å“ªäº›æ ‡ç­¾åº“</p>\n</blockquote>\n<p>JSP æ ‡å‡†æ ‡ç­¾åº“ï¼Œç¬¬ä¸‰æ–¹æ ‡ç­¾åº“ï¼Œè‡ªå®šä¹‰æ ‡ç­¾åº“</p>\n<h2 id=\"jsp-æ ‡ç­¾åŠ¨ä½œ\">JSP æ ‡ç­¾åŠ¨ä½œ<a title=\"#jsp-æ ‡ç­¾åŠ¨ä½œ\" href=\"#jsp-æ ‡ç­¾åŠ¨ä½œ\"></a></h2>\n<p><strong>é¡µé¢åŒ…å«</strong></p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;jsp:include page=&quot;è¢«åŒ…å«çš„é¡µé¢&quot;&gt;&lt;/jsp:include&gt;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>åŠ¨æ€åŒ…å«</p>\n</blockquote>\n<p>å„è‡ªç¿»è¯‘è‡ªå·±çš„é¡µé¢ï¼Œç„¶åå†å¼•å…¥</p>\n<p><strong>è¯·æ±‚è½¬å‘</strong></p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;jsp:forward page=&quot;è¦è½¬å‘çš„èµ„æº&quot;&gt;&lt;/jsp:forward&gt;</span><br></pre></td></tr></table></figure>\n<h2 id=\"jsp-éšå¼å¯¹è±¡\">JSP éšå¼å¯¹è±¡<a title=\"#jsp-éšå¼å¯¹è±¡\" href=\"#jsp-éšå¼å¯¹è±¡\"></a></h2>\n<p><em>out</em></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//outçš„ç±»å‹ï¼šJspWriter</span></span><br><span class=\"line\"><span class=\"comment\">//outä½œç”¨å°±æ˜¯æƒ³å®¢æˆ·ç«¯è¾“å‡ºå†…å®¹ out.write()</span></span><br><span class=\"line\"><span class=\"comment\">//outç¼“å†²åŒºé»˜è®¤8kb</span></span><br><span class=\"line\"><span class=\"comment\">//å¯ä»¥è®¾ç½®æˆ0 ä»£è¡¨å…³é—­outç¼“å†²åŒºå†…å®¹ç›´æ¥å†™åˆ°responsç¼“å†²åŒº</span></span><br><span class=\"line\"><span class=\"comment\">//outå†™çš„å†…å®¹å†™åˆ°outç¼“å†²åŒºå½“ä¸­</span></span><br><span class=\"line\"><span class=\"comment\">//æœ€åå†æŠŠoutç¼“å†²åŒºå½“ä¸­çš„å†…å®¹åˆå¹¶åˆ°responseç¼“å†²åŒºå½“ä¸­</span></span><br></pre></td></tr></table></figure>\n<p><em>request</em><br>\nå¾—åˆ°ç”¨æˆ·è¯·æ±‚ä¿¡æ¯å¯¹è±¡</p>\n<p><em>response</em><br>\næœåŠ¡å™¨å‘å®¢æˆ·ç«¯çš„å“åº”å¯¹è±¡</p>\n<p><em>config</em><br>\næœåŠ¡å™¨é…ç½®ï¼Œå¯ä»¥å–å¾—åˆå§‹åŒ–å‚æ•°</p>\n<p><em>session</em><br>\nç”¨æ¥ä¿å­˜ç”¨æˆ·ä¼šè¯çš„ä¿¡æ¯</p>\n<p><em>application</em><br>\næ‰€æœ‰ç”¨æˆ·çš„å…±äº«ä¿¡æ¯ï¼Œå°±æ˜¯ servletContext</p>\n<p><em>page</em><br>\næŒ‡å½“å‰é¡µé¢è½¬æ¢åçš„ Servlet ç±»çš„å®ä¾‹</p>\n<p><em>pageContext</em><br>\njsp é¡µé¢çš„ä¸Šä¸‹æ–‡å¯¹è±¡</p>\n<blockquote>\n<p>æ˜¯ä¸€ä¸ªåŸŸå¯¹è±¡</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">setAttribute(String name,Object obj)</span><br><span class=\"line\">getAttribute(String name)</span><br><span class=\"line\">removeAttrbute(String name)</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>å¯ä»¥å‘æŒ‡å®šçš„å…¶ä»–åŸŸä¸­å­˜å–æ•°æ®</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">setAttribute(String name,Object obj,<span class=\"keyword\">int</span> scope)</span><br><span class=\"line\">setAttribute(â€œnameâ€,<span class=\"string\">&quot;lk&quot;</span>,PageContext.REQUEST_SCOPE);</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">getAttribute(String name,<span class=\"keyword\">int</span> scope)</span><br><span class=\"line\">getAttribute(<span class=\"string\">&quot;lk&quot;</span>,PageContext.REQUEST_SCOPE)</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">removeAttrbute(String name,<span class=\"keyword\">int</span> scope)</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">findAttribute(String name)</span><br><span class=\"line\"><span class=\"comment\">//è‡ªåŠ¨åˆ°æ‰€æœ‰çš„åŸŸå½“ä¸­æ‰¾æ•°æ®</span></span><br><span class=\"line\"><span class=\"comment\">//ä»å°åˆ°å¤§çš„èŒƒå›´æœç´¢æ•°æ®</span></span><br><span class=\"line\"><span class=\"comment\">//ä¾æ¬¡ä» pageContext åŸŸï¼Œrequest åŸŸï¼Œsession åŸŸï¼Œapplication åŸŸä¸­è·å–å±æ€§</span></span><br><span class=\"line\"><span class=\"comment\">//åœ¨æŸä¸ªåŸŸä¸­è·å–åå°†ä¸åœ¨å‘åå¯»æ‰¾</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>å¯ä»¥è·å¾—å…¶ä»– 8 å¤§éšå¼å¯¹è±¡</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pageContext.getRequest()</span><br><span class=\"line\">pageContext.getSession()</span><br></pre></td></tr></table></figure>\n<p><em>exception</em><br>\nè¡¨ç¤º JSP é¡µé¢æ‰€å‘ç”Ÿçš„å¼‚å¸¸ï¼Œåœ¨é”™è¯¯é¡µä¸­æ‰èµ·ä½œç”¨<br>\nåªæœ‰æ˜¯é”™è¯¯é¡µé¢çš„æ—¶å€™ï¼Œæ‰ä¼šæœ‰è¯¥å¯¹è±¡</p>\n","prev":{"title":"ELä¸JSTL","link":"ELä¸JSTL"},"next":{"title":"cookieä¸Session","link":"JavaWeb-ä¼šè¯"},"plink":"https://pinkpeachabc.cn/JSPçš„åŸºæœ¬è¯­æ³•/","toc":[{"id":"jsp-ç®€ä»‹","title":"JSP ç®€ä»‹","index":"1"},{"id":"jspè„šæœ¬å…ƒç´ å’Œå˜é‡","title":"JSPè„šæœ¬å…ƒç´ å’Œå˜é‡","index":"2"},{"id":"jsp-æŒ‡ä»¤","title":"JSP æŒ‡ä»¤","index":"3"},{"id":"jsp-æ ‡ç­¾åŠ¨ä½œ","title":"JSP æ ‡ç­¾åŠ¨ä½œ","index":"4"},{"id":"jsp-éšå¼å¯¹è±¡","title":"JSP éšå¼å¯¹è±¡","index":"5"}],"reward":true,"copyright":{"license":"è‡ªç”±è½¬è½½-éå•†ç”¨-ç¦æ­¢æ¼”ç»-ä¿æŒç½²å (<a href=\"https://creativecommons.org/licenses/by-nc-sa/4.0/\" rel=\"external nofollow noopener\" target=\"_blank\">CC BY-NC-ND 4.0</a>)","link":"<a href=\"https://pinkpeachabc.cn/JSPçš„åŸºæœ¬è¯­æ³•/\" title=\"JSPçš„åŸºæœ¬è¯­æ³•\">https://pinkpeachabc.cn/JSPçš„åŸºæœ¬è¯­æ³•/</a>"},"reading_time":"1262 words in 8 min"}