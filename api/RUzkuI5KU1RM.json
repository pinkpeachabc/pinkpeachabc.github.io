{"title":"ELä¸JSTL","date":"2020-03-08T13:18:24.000Z","date_formatted":{"ll":"2020å¹´3æœˆ8æ—¥","L":"2020/03/08","MM-DD":"03-08"},"link":"ELä¸JSTL","comments":true,"tags":["EL","JSTL"],"categories":["JavaWeb"],"updated":"2020-07-18T13:08:53.737Z","content":"<p>ç»å†è¿‡äº† JSPï¼Œå‘ç°æ—¢èƒ½å†™ Html åˆèƒ½å†™ Java ä»£ç ç¡®å®å¾ˆæ–¹ä¾¿ï¼Œä½†æ˜¯å¯¹äºJSP å†…éƒ¨è„šæœ¬çš„ç¼–å†™ï¼Œå´æ˜¯å¾ˆä¸å‹å¥½ğŸ˜­ ä»Šå¤©æ¥ä»‹ç»èƒ½å¤Ÿæ›¿ä»£ JSP é¡µé¢ä¸­çš„è„šæœ¬â€”â€”EL ä¸ JSTL</p>\n<h2 id=\"elè¡¨è¾¾å¼\">ELè¡¨è¾¾å¼<a title=\"#elè¡¨è¾¾å¼\" href=\"#elè¡¨è¾¾å¼\"></a></h2>\n<p><strong>ä½œç”¨</strong></p>\n<blockquote>\n<p>ELæœ€ä¸»è¦çš„ä½œç”¨æ˜¯è·å¾—å››å¤§åŸŸä¸­çš„æ•°æ®</p>\n</blockquote>\n<p><strong>ä»å››å¤§åŸŸå½“ä¸­å–æ•°æ®</strong></p>\n<p>pageContext</p>\n<figure class=\"highlight jsp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$&#123;pageScope.key&#125;;</span><br></pre></td></tr></table></figure>\n<p>request</p>\n<figure class=\"highlight jsp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$&#123;requestScope.key&#125;</span><br></pre></td></tr></table></figure>\n<p>session</p>\n<figure class=\"highlight jsp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$&#123;sessionScope.key&#125;</span><br></pre></td></tr></table></figure>\n<p>application</p>\n<figure class=\"highlight jsp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$&#123;applicationScope.key&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>ç®€å†™</strong></p>\n<figure class=\"highlight jsp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$&#123;ELè¡¨è¾¾å¼&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>EL ä»å››ä¸ªåŸŸä¸­è·å¾—æŸä¸ªå€¼ ${key}ï¼Œä¾æ¬¡ä» pageContext åŸŸï¼Œrequest åŸŸï¼Œsession åŸŸï¼Œapplication åŸŸä¸­ï¼Œè·å–å±æ€§åœ¨æŸä¸ªåŸŸä¸­è·å–åå°†ä¸åœ¨å‘åå¯»æ‰¾ã€‚</p>\n</blockquote>\n<p><strong>EL å†…ç½® 11 å¯¹è±¡</strong></p>\n<p><em>pageScope</em><br>\nè·å– JSP ä¸­ pageScope åŸŸä¸­çš„æ•°æ®</p>\n<p><em>requestScope</em><br>\nè·å– JSP ä¸­ requestScope åŸŸä¸­çš„æ•°æ®</p>\n<p><em>sessionScope</em><br>\nè·å– JSP ä¸­ sessionScope åŸŸä¸­çš„æ•°æ®</p>\n<p>applicationScope<br>\nè·å– JSP ä¸­ applicationScope åŸŸä¸­çš„æ•°æ®</p>\n<p><em>param</em><br>\n<code>request.getParameter()</code></p>\n<p><em>paramValues</em><br>\n<code>rquest.getParameterValues()</code></p>\n<p><em>header</em><br>\n<code>request.getHeader(name)</code></p>\n<p><em>headerValues</em><br>\n<code>request.getHeaderValues()</code></p>\n<p><em>initParam</em><br>\n<code>this.getServletContext().getInitParameter(name)</code></p>\n<p><em>cookie</em>\t<br>\n<code>request.getCookies()---cookie.getName()---cookie.getValue()</code></p>\n<p><em>pageContext</em><br>\npageContext è·å¾—å…¶ä»–å…«å¤§å¯¹è±¡ï¼Œè·å–å½“å‰é¡¹ç›®çš„åç§°<br>\n<code>$&#123;pageContext.request.contextPath&#125;</code></p>\n<p><strong>EL æ‰§è¡Œè¡¨è¾¾å¼</strong></p>\n<blockquote>\n<p>å†…éƒ¨å¯ä»¥è¿›è¡Œè¿ç®—ï¼Œåªè¦æœ‰ç»“æœ</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$&#123;<span class=\"number\">1</span>+<span class=\"number\">1</span>&#125;</span><br><span class=\"line\">$&#123;empty user&#125;</span><br><span class=\"line\">$&#123;user==<span class=\"keyword\">null</span>?<span class=\"keyword\">true</span>:<span class=\"keyword\">false</span>&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"jstl\">JSTL<a title=\"#jstl\" href=\"#jstl\"></a></h2>\n<p><strong>ä»€ä¹ˆæ˜¯JSTL</strong></p>\n<blockquote>\n<p>JSTLï¼ˆJSP Standard Tag Library)ï¼ŒJSP æ ‡å‡†æ ‡ç­¾åº“ã€‚å¯ä»¥åµŒå…¥åœ¨ jsp é¡µé¢ä¸­ä½¿ç”¨æ ‡ç­¾çš„å½¢å¼å®Œæˆä¸šåŠ¡é€»è¾‘ç­‰åŠŸèƒ½ï¼Œjstl å‡ºç°çš„ç›®çš„åŒelä¸€æ ·ä¹Ÿæ˜¯è¦ä»£æ›¿ jsp é¡µé¢ä¸­çš„è„šæœ¬ä»£ç ã€‚</p>\n</blockquote>\n<p><strong>å¯¼åŒ…å’Œå¼•å…¥</strong></p>\n<p>ä½¿ç”¨ jstl éœ€è¦å…ˆæŠŠ jar åŒ…å¼•å…¥å·¥ç¨‹å½“ä¸­ (jstl-1.2.jar)ï¼Œç„¶åå¼•å…¥æ ‡ç­¾åº“æ‰èƒ½å¤Ÿç»§ç»­ä½¿ç”¨ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;%@ taglib uri=<span class=\"string\">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> prefix=<span class=\"string\">&quot;c&quot;</span>%&gt;</span><br></pre></td></tr></table></figure>\n<p><strong>if æ ‡ç­¾</strong></p>\n<p><code>&lt;c:if test=&quot;$&#123;1==1 &#125;&quot;&gt;</code>æ»¡è¶³æ¡ä»¶æ—¶ï¼Œä¸­é—´çš„å†…å®¹æ‰ä¼šæ˜¾ç¤ºå‡ºæ¥<code>&lt;/c:if&gt;</code></p>\n<blockquote>\n<p>é€šè¿‡æ˜¯ç»“åˆ EL è¡¨è¾¾å¼ä¸€èµ·ä½¿ç”¨ï¼ŒEL ä»åŸŸä¸­å–æ•°æ®ï¼Œä½¿ç”¨JSTLè¿›è¡Œåˆ¤æ–­æˆ–è€…éå†</p>\n</blockquote>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;%request.setAttribute(<span class=\"string\">&quot;money&quot;</span>, <span class=\"number\">3</span>);%&gt;</span><br><span class=\"line\">&lt;c:if test=&quot;$&#123;money &gt; 50&#125;&quot;&gt;é‡‘é¢å¤§äºï¼š50&lt;/c:if&gt;</span><br><span class=\"line\">&lt;c:if test=&quot;$&#123;money &lt; 50&#125;&quot;&gt;é‡‘é¢å°äºï¼š50&lt;/c:if&gt;</span><br></pre></td></tr></table></figure>\n<p>åšä¸€ä¸ª if æ ‡ç­¾çš„ä½¿ç”¨ï¼Œ<strong>éœ€æ±‚ï¼šç”¨æˆ·ç™»å½•æˆåŠŸæ—¶ï¼Œ è¿›å…¥é¦–é¡µä¸­ï¼Œæ˜¾ç¤ºç”¨æˆ·åã€‚</strong></p>\n<blockquote>\n<p>1.ç™»å½•æˆåŠŸæ—¶ï¼ŒæŠŠç”¨æˆ·å†™åˆ° session åŸŸå½“ä¸­ã€‚</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//æœ‰å€¼</span></span><br><span class=\"line\"><span class=\"keyword\">if</span>(u != <span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">    response.getWriter().write(<span class=\"string\">&quot;ç™»å½•æˆåŠŸ&quot;</span>);</span><br><span class=\"line\">    <span class=\"comment\">//æŠŠç”¨æˆ·å­˜åœ¨sessionå½“ä¸­</span></span><br><span class=\"line\">    HttpSession session = request.getSeesion();</span><br><span class=\"line\">    session.setAttribute(<span class=\"string\">&quot;user&quot;</span>,u);</span><br><span class=\"line\">    <span class=\"comment\">//è·³è½¬åˆ°ç™»å½•</span></span><br><span class=\"line\">    response.setHeader(<span class=\"string\">&quot;refresh&quot;</span>,<span class=\"string\">&quot;3;url=/é¡¹ç›®åœ°å€/index.jsp&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>2.åœ¨é¦–é¡µå½“ä¸­è¿›è¡Œåˆ¤æ–­ï¼Œä» session åŸŸå½“ä¸­å–æ•°æ®ã€‚</p>\n<p>3.é€šè¿‡ELç»“åˆJSTLè¿›è¡Œåˆ¤æ–­</p>\n</blockquote>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;c:<span class=\"keyword\">if</span> test=<span class=\"string\">&quot;$&#123;empty user&#125;&quot;</span>&gt;</span><br><span class=\"line\">&lt;a href=&quot;Login.jsp&quot;&gt;ç™»å½•&lt;/a&gt;</span><br><span class=\"line\">&lt;a href=&quot;regist.jsp&quot;&gt;å…è´¹æ³¨å†Œ&lt;/a&gt;</span><br><span class=\"line\">&lt;/c:if&gt;</span><br><span class=\"line\">    </span><br><span class=\"line\">&lt;c:<span class=\"keyword\">if</span> test=<span class=\"string\">&quot;$&#123;ï¼empty user&#125;&quot;</span>&gt;</span><br><span class=\"line\">æ¬¢è¿ï¼š$&#123;user.username&#125;</span><br><span class=\"line\">&lt;a href=&quot;#&quot;&gt;é€€å‡º&lt;/a&gt;</span><br><span class=\"line\">&lt;/c:if&gt;</span><br></pre></td></tr></table></figure>\n<p><strong>foreach æ ‡ç­¾</strong></p>\n<blockquote>\n<p>æ™®é€šå¾ªç¯</p>\n</blockquote>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!-- ä»åŸŸå½“ä¸­å–æ•°æ® è‡ªåŠ¨æŠŠæ•°æ®å­˜å‚¨ pageScope --&gt;</span><br><span class=\"line\">&lt;c:forEach begin=<span class=\"string\">&quot;0&quot;</span> end=<span class=\"string\">&quot;5&quot;</span> <span class=\"keyword\">var</span>=<span class=\"string\">&quot;i&quot;</span>&gt;</span><br><span class=\"line\">\t$&#123;i&#125;&lt;br/&gt;</span><br><span class=\"line\">&lt;/c:forEach&gt;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>å¢åŠ  for å¾ªç¯</p>\n</blockquote>\n<p>éå†å­—ç¬¦ä¸²é›†åˆ</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;%</span><br><span class=\"line\">    list&lt;String&gt; strList = <span class=\"keyword\">new</span> ArrayList&lt;String&gt;();</span><br><span class=\"line\">\tstrList.add(<span class=\"string\">&quot;aaa&quot;</span>);</span><br><span class=\"line\">\tstrList.add(<span class=\"string\">&quot;aaa&quot;</span>);</span><br><span class=\"line\">\tstrList.add(<span class=\"string\">&quot;aaa&quot;</span>);</span><br><span class=\"line\"> %&gt;</span><br><span class=\"line\">   &lt;!--ä¼šè‡ªåŠ¨æŠŠå–å‡ºæ¥çš„å€¼æ”¾å…¥åˆ°pageScopeåŸŸå½“ä¸­--&gt;</span><br><span class=\"line\">&lt;c:forEach items=<span class=\"string\">&quot;$&#123;strList&#125;&quot;</span> <span class=\"keyword\">var</span>=<span class=\"string\">&quot;str&quot;</span>&gt;</span><br><span class=\"line\">    $&#123;str&#125;</span><br><span class=\"line\">&lt;/c:forEach&gt;</span><br><span class=\"line\">     </span><br></pre></td></tr></table></figure>\n<p>éå†å¯¹è±¡é›†åˆ</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;%</span><br><span class=\"line\">    list&lt;User&gt; userList = <span class=\"keyword\">new</span> ArrayList&lt;User&gt;();</span><br><span class=\"line\">\tUser u1 = <span class=\"keyword\">new</span> User();</span><br><span class=\"line\">\tu1.setUsername(<span class=\"string\">&quot;æå››&quot;</span>);</span><br><span class=\"line\">\t</span><br><span class=\"line\">\tUser u2 = <span class=\"keyword\">new</span> User();</span><br><span class=\"line\">\tu2.setUsername(<span class=\"string\">&quot;ç‹äº”&quot;</span>);</span><br><span class=\"line\">\tuserList.add(u1);</span><br><span class=\"line\">\tuserList.add(u2);</span><br><span class=\"line\">\tsession.setAttribute(<span class=\"string\">&quot;userList&quot;</span>,userList);</span><br><span class=\"line\"> %&gt;</span><br><span class=\"line\">&lt;c:forEach items=<span class=\"string\">&quot;$&#123;userList&#125;&quot;</span> <span class=\"keyword\">var</span>=<span class=\"string\">&quot;user&quot;</span>&gt;</span><br><span class=\"line\">  $&#123;user.username&#125;</span><br><span class=\"line\">&lt;/c:forEach&gt;</span><br></pre></td></tr></table></figure>\n<p>éå† map</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;%</span><br><span class=\"line\">\tMap&lt;String,String&gt; strMap = <span class=\"keyword\">new</span> HashMap&lt;String,String&gt;();</span><br><span class=\"line\">\tstrMap.put(<span class=\"string\">&quot;name&quot;</span>,<span class=\"string\">&quot;æå››&quot;</span>);</span><br><span class=\"line\">\tstrMap.put(<span class=\"string\">&quot;age&quot;</span>,<span class=\"string\">&quot;28&quot;</span>);</span><br><span class=\"line\">\tstrMap.put(<span class=\"string\">&quot;addr&quot;</span>,<span class=\"string\">&quot;å¤©æ´¥&quot;</span>);</span><br><span class=\"line\">\tsession.setAttribute(<span class=\"string\">&quot;me&quot;</span>,strMap);</span><br><span class=\"line\">%&gt;</span><br><span class=\"line\">&lt;:forEach items=<span class=\"string\">&quot;$&#123;me&#125;&quot;</span> <span class=\"keyword\">var</span>=<span class=\"string\">&quot;entry&quot;</span>&gt;</span><br><span class=\"line\">\t$&#123;entry.key&#125;:$&#123;entry.value&#125;</span><br><span class=\"line\">&lt;/:forEach&gt;</span><br></pre></td></tr></table></figure>\n<hr>\n<p>åƒæ˜¯ jstl çš„æ ‡ç­¾åº“è¿˜æœ‰å¾ˆå¤šï¼Œè¿™é‡Œåªä»‹ç»äº†ä¸¤ä¸ªæ ‡ç­¾ã€‚</p>\n","prev":{"title":"Springæ¡†æ¶è¯¦è§£","link":"IOC å’Œ DI çš„æ¦‚è¿°"},"next":{"title":"JSPçš„åŸºæœ¬è¯­æ³•","link":"JSPçš„åŸºæœ¬è¯­æ³•"},"plink":"https://pinkpeachabc.cn/ELä¸JSTL/","toc":[{"id":"elè¡¨è¾¾å¼","title":"ELè¡¨è¾¾å¼","index":"1"},{"id":"jstl","title":"JSTL","index":"2"}],"reward":true,"copyright":{"license":"è‡ªç”±è½¬è½½-éå•†ç”¨-ç¦æ­¢æ¼”ç»-ä¿æŒç½²å (<a href=\"https://creativecommons.org/licenses/by-nc-sa/4.0/\" rel=\"external nofollow noopener\" target=\"_blank\">CC BY-NC-ND 4.0</a>)","link":"<a href=\"https://pinkpeachabc.cn/ELä¸JSTL/\" title=\"ELä¸JSTL\">https://pinkpeachabc.cn/ELä¸JSTL/</a>"}}