{"title":"Springæ¡†æ¶è¯¦è§£","date":"2020-04-21T03:02:12.000Z","date_formatted":{"ll":"2020å¹´4æœˆ21æ—¥","L":"2020/04/21","MM-DD":"04-21"},"thumbnail":"https://cdn.jsdelivr.net/gh/pinkpeachabc/images/Blog-imgs/blog-springæ¡†æ¶.jpg","link":"2020/04/21/IOC å’Œ DI çš„æ¦‚è¿°","comments":true,"tags":["AOP","IOC","Spring"],"categories":["JavaWeb"],"updated":"2020-08-26T04:22:08.084Z","content":"<blockquote>\n<p>è·ç¦»ä¸Šä¸€æ¬¡æ›´æ–°å·²ç»æœ‰ä¸€ä¸ªæœˆçš„æ—¶é—´äº†ï¼ŒğŸ˜€å…¶å®æœ¬æ”¹æŠŠ Jdbc çš„ç¬”è®°è¡¥å®Œï¼Œä½†æ˜¯è¿™äº›å¤©äº‹æƒ…å¤ªå¤š<s>å¿™ç€æ‰“csgo</s>å¯¼è‡´äº†åšå®¢è¿™æ®µæ—¶é—´æ²¡æœ‰æ›´æ–°ã€‚ä»Šå¤©çªç„¶åœ¨ç½‘ä¸Šæ‰¾åˆ°äº†ä¸€ç¯‡å…³äºSpringæ¶æ„è®ºè¿°å¾ˆå¥½çš„æ–‡ç« ï¼Œæ­£å¥½ä¹Ÿæ˜¯å¾—æ›´æ–°ä¸€ä¸‹ã€‚</p>\n<p>åŸæ–‡åœ°å€ï¼š<a href=\"https://cruii.io/archives/2019111907160329543#top\" target=\"_blank\">Springæ¡†æ¶è¯¦è§£</a></p>\n</blockquote>\n<h1 id=\"ioc-å’Œ-di-çš„æ¦‚è¿°\">IOC å’Œ DI çš„æ¦‚è¿°<a title=\"#ioc-å’Œ-di-çš„æ¦‚è¿°\" href=\"#ioc-å’Œ-di-çš„æ¦‚è¿°\"></a></h1>\n<h2 id=\"ioc(inversion-of-controll)\">IOC(Inversion of Controll)<a title=\"#ioc(inversion-of-controll)\" href=\"#ioc(inversion-of-controll)\"></a></h2>\n<p><strong>æ€æƒ³æ˜¯åè½¬èµ„æºè·å–çš„æ–¹å‘</strong>ï¼Œä¼ ç»Ÿçš„èµ„æºæŸ¥æ‰¾æ–¹å¼è¦æ±‚ç»„ä»¶å‘å®¹å™¨å‘èµ·è¯·æ±‚æŸ¥æ‰¾èµ„æºã€‚ä½œä¸ºå›åº”ï¼Œå®¹å™¨é€‚æ—¶çš„è¿”å›èµ„æºã€‚è€Œåº”ç”¨äº†IOCä¹‹åï¼Œåˆ™æ˜¯<strong>å®¹å™¨ä¸»åŠ¨çš„å°†èµ„æºæ¨é€ç»™å®ƒæ‰€ç®¡ç†çš„ç»„ä»¶ï¼Œç»„ä»¶æ‰€è¦åšçš„ä»…æ˜¯é€‰æ‹©ä¸€ç§åˆé€‚çš„æ–¹å¼æ¥æ¥æ”¶èµ„æº</strong></p>\n<h2 id=\"di(dependency-injection)\">DI(Dependency Injection)<a title=\"#di(dependency-injection)\" href=\"#di(dependency-injection)\"></a></h2>\n<p>æ˜¯IOCçš„å¦ä¸€ç§è¡¨è¿°æ–¹å¼ï¼Œå³<strong>ç»„ä»¶ä»¥ä¸€äº›é¢„å…ˆå®šä¹‰å¥½çš„æ–¹å¼(å¦‚ï¼šgetteræ–¹æ³•)æ¥æ¥æ”¶æ¥è‡ªå®¹å™¨çš„èµ„æºæ³¨å…¥</strong></p>\n<h1 id=\"springé…ç½®\">Springé…ç½®<a title=\"#springé…ç½®\" href=\"#springé…ç½®\"></a></h1>\n<p>åœ¨SpringIOCå®¹å™¨è¯»å–beané…ç½®åˆ›å»ºbeanå®ä¾‹ä¹‹å‰ï¼Œå¿…é¡»å¯¹å®ƒè¿›è¡Œå®ä¾‹åŒ–ã€‚åªæœ‰åœ¨å®¹å™¨å®ä¾‹åŒ–åï¼Œæ‰å¯ä»¥ä»IOCå®¹å™¨é‡Œè·å–beanå®ä¾‹å¹¶ä½¿ç”¨</p>\n<p>Springæä¾›äº†ä¸¤ç§ç±»å‹çš„IOCå®¹å™¨å®ç°</p>\n<ul>\n<li><strong>BeanFactoryï¼šIOCå®¹å™¨çš„åŸºæœ¬å®ç°ï¼Œåœ¨è°ƒç”¨getBean()æ–¹æ³•æ—¶æ‰ä¼šå®ä¾‹åŒ–å¯¹è±¡</strong></li>\n<li><strong>ApplicationContextï¼šæä¾›äº†æ›´å¤šçš„é«˜çº§ç‰¹æ€§ï¼Œåœ¨åŠ è½½é…ç½®æ–‡ä»¶åå°±ä¼šå®ä¾‹åŒ–å¯¹è±¡ã€‚æ˜¯BeanFactoryçš„å­æ¥å£</strong></li>\n</ul>\n<p><code>BeanFactory</code>æ˜¯Springæ¡†æ¶çš„åŸºç¡€è®¾æ–½ï¼Œé¢å‘Springæœ¬èº«</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ApplicationContext&#96;é¢å‘ä½¿ç”¨Springæ¡†æ¶çš„å¼€å‘è€…ï¼Œå‡ ä¹æ‰€æœ‰çš„åº”ç”¨åœºåˆéƒ½ç›´æ¥ä½¿ç”¨&#96;ApplicationContext&#96;è€Œéåº•å±‚çš„&#96;BeanFactory</span><br></pre></td></tr></table></figure>\n<p><strong>æ— è®ºä½¿ç”¨ä½•ç§æ–¹å¼ï¼Œé…ç½®æ–‡ä»¶æ—¶éƒ½æ˜¯ç›¸åŒçš„</strong></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- é…ç½®bean --&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- class: beançš„å…¨ç±»åï¼Œé€šè¿‡åå°„çš„æ–¹å¼åœ¨IOCå®¹å™¨ä¸­åˆ›å»ºbeanï¼Œæ‰€ä»¥è¦æ±‚beanä¸­å¿…é¡»æœ‰æ— å‚æ„é€ å™¨ --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;people&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;learningspring.ioc.examples.People&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;name&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;Chen&quot;</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br><span class=\"line\">public class People &#123;</span><br><span class=\"line\">    private String name;</span><br><span class=\"line\"></span><br><span class=\"line\">    public People() &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public String getName() &#123;</span><br><span class=\"line\">        return name;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setName(String name) &#123;</span><br><span class=\"line\">        this.name = name;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    public String toString() &#123;</span><br><span class=\"line\">        return &quot;People&#123;&quot; +</span><br><span class=\"line\">                &quot;name=&#x27;&quot; + name + &#x27;\\&#x27;&#x27; +</span><br><span class=\"line\">                &#x27;&#125;&#x27;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">@Test</span><br><span class=\"line\">public void test()&#123;</span><br><span class=\"line\">    // åˆ›å»ºIOCå®¹å™¨</span><br><span class=\"line\">    ApplicationContext ctx = new FileSystemXmlApplicationContext(&quot;F:\\\\Projects\\\\IdeaProjects\\\\LearningSpring\\\\src\\\\main\\\\java\\\\learningspring\\\\ioc\\\\examples\\\\applicationContext.xml&quot;);</span><br><span class=\"line\"></span><br><span class=\"line\">    // ä»IOCå®¹å™¨ä¸­è·å–beanå®ä¾‹</span><br><span class=\"line\">    People people = (People) ctx.getBean(&quot;people&quot;);</span><br><span class=\"line\"></span><br><span class=\"line\">    System.out.println(people);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"applicationcontext\">ApplicationContext<a title=\"#applicationcontext\" href=\"#applicationcontext\"></a></h2>\n<p><code>ApplicationContext</code>æœ‰ä¸¤ä¸ªå®ç°ç±»ï¼š</p>\n<ul>\n<li><code>ClassPathXmlApplicationContext</code>ï¼šåŠ è½½ç±»è·¯å¾„é‡Œçš„é…ç½®æ–‡ä»¶</li>\n<li><code>FileSystemXmlApplicationContext</code>ï¼šåŠ è½½æ–‡ä»¶ç³»ç»Ÿé‡Œçš„é…ç½®æ–‡ä»¶</li>\n</ul>\n<h2 id=\"beançš„ç›¸å…³é…ç½®\">Beançš„ç›¸å…³é…ç½®<a title=\"#beançš„ç›¸å…³é…ç½®\" href=\"#beançš„ç›¸å…³é…ç½®\"></a></h2>\n<h3 id=\"beanæ ‡ç­¾çš„idå’Œnameçš„é…ç½®\">beanæ ‡ç­¾çš„idå’Œnameçš„é…ç½®<a title=\"#beanæ ‡ç­¾çš„idå’Œnameçš„é…ç½®\" href=\"#beanæ ‡ç­¾çš„idå’Œnameçš„é…ç½®\"></a></h3>\n<ul>\n<li><code>id</code>ï¼šä½¿ç”¨äº†çº¦æŸä¸­çš„å”¯ä¸€çº¦æŸã€‚ä¸èƒ½æœ‰ç‰¹æ®Šå­—ç¬¦</li>\n<li><code>name</code>ï¼šæ²¡æœ‰ä½¿ç”¨çº¦æŸä¸­çš„å”¯ä¸€çº¦æŸï¼ˆç†è®ºä¸Šå¯ä»¥é‡å¤ï¼Œä½†æ˜¯å®é™…å¼€å‘ä¸­ä¸èƒ½å‡ºç°ï¼‰ã€‚å¯ä»¥æœ‰ç‰¹æ®Šå­—ç¬¦</li>\n</ul>\n<h3 id=\"beançš„ç”Ÿå‘½å‘¨æœŸçš„é…ç½®\">beançš„ç”Ÿå‘½å‘¨æœŸçš„é…ç½®<a title=\"#beançš„ç”Ÿå‘½å‘¨æœŸçš„é…ç½®\" href=\"#beançš„ç”Ÿå‘½å‘¨æœŸçš„é…ç½®\"></a></h3>\n<ul>\n<li><code>init-method</code>ï¼šbeanè¢«åˆå§‹åŒ–çš„æ—¶å€™æ‰§è¡Œçš„æ–¹æ³•</li>\n<li><code>destroy-method</code>ï¼šbeanè¢«é”€æ¯çš„æ—¶å€™æ‰§è¡Œçš„æ–¹æ³•ï¼Œå‰ææ˜¯beanæ˜¯å•ä¾‹çš„ï¼Œå·¥å‚å…³é—­</li>\n</ul>\n<h3 id=\"beançš„ä½œç”¨èŒƒå›´çš„é…ç½®\">beançš„ä½œç”¨èŒƒå›´çš„é…ç½®<a title=\"#beançš„ä½œç”¨èŒƒå›´çš„é…ç½®\" href=\"#beançš„ä½œç”¨èŒƒå›´çš„é…ç½®\"></a></h3>\n<ul>\n<li>scope: beançš„ä½œç”¨èŒƒå›´</li>\n<li><strong>singletonï¼šå•ä¾‹æ¨¡å¼ï¼Œé»˜è®¤çš„ä½œç”¨åŸŸã€‚</strong></li>\n<li><strong>prototypeï¼šå¤šä¾‹æ¨¡å¼ã€‚</strong></li>\n<li>requestï¼šåº”ç”¨åœ¨Webé¡¹ç›®ä¸­ï¼ŒSpringåˆ›å»ºè¿™ä¸ªç±»åï¼Œå°†è¿™ä¸ªç±»å­˜å…¥åˆ°requestèŒƒå›´ä¸­ã€‚</li>\n<li>sessionï¼šåº”ç”¨åœ¨Webé¡¹ç›®ä¸­ï¼ŒSpringåˆ›å»ºè¿™ä¸ªç±»åï¼Œå°†è¿™ä¸ªç±»å­˜å…¥åˆ°sessionèŒƒå›´ä¸­ã€‚</li>\n<li>globalsessionï¼šåº”ç”¨åœ¨Webé¡¹ç›®ä¸­ï¼Œå¿…é¡»åœ¨porletç¯å¢ƒä¸‹ä½¿ç”¨ã€‚ä½†æ˜¯å¦‚æœæ²¡æœ‰è¿™ç§ç¯å¢ƒï¼Œç›¸å½“äºsessionã€‚</li>\n</ul>\n<h2 id=\"springçš„beanç®¡ç†é…ç½®\">Springçš„Beanç®¡ç†é…ç½®<a title=\"#springçš„beanç®¡ç†é…ç½®\" href=\"#springçš„beanç®¡ç†é…ç½®\"></a></h2>\n<h3 id=\"springçš„beançš„å®ä¾‹åŒ–æ–¹å¼\">Springçš„Beançš„å®ä¾‹åŒ–æ–¹å¼<a title=\"#springçš„beançš„å®ä¾‹åŒ–æ–¹å¼\" href=\"#springçš„beançš„å®ä¾‹åŒ–æ–¹å¼\"></a></h3>\n<h4 id=\"æ— å‚æ„é€ æ–¹å¼ï¼ˆé»˜è®¤ï¼‰\">æ— å‚æ„é€ æ–¹å¼ï¼ˆé»˜è®¤ï¼‰<a title=\"#æ— å‚æ„é€ æ–¹å¼ï¼ˆé»˜è®¤ï¼‰\" href=\"#æ— å‚æ„é€ æ–¹å¼ï¼ˆé»˜è®¤ï¼‰\"></a></h4>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * //TODO</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> Chen Rui</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@version</span> 1.0</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Dog</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer length;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getName</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> name;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setName</span><span class=\"params\">(String name)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Integer <span class=\"title\">getLength</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> length;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setLength</span><span class=\"params\">(Integer length)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.length = length;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">toString</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&quot;Dog&#123;&quot;</span> +</span><br><span class=\"line\">                <span class=\"string\">&quot;name=&#x27;&quot;</span> + name + <span class=\"string\">&#x27;\\&#x27;&#x27;</span> +</span><br><span class=\"line\">                <span class=\"string\">&quot;, length=&quot;</span> + length +</span><br><span class=\"line\">                <span class=\"string\">&#x27;&#125;&#x27;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span><br><span class=\"line\">&lt;beans xmlns=<span class=\"string\">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class=\"line\">       xmlns:xsi=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class=\"line\">       xsi:schemaLocation=<span class=\"string\">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- Spring Beançš„å®ä¾‹åŒ–æ–¹å¼--&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- æ— å‚æ„é€ çš„æ–¹å¼ --&gt;</span><br><span class=\"line\">    &lt;bean id=<span class=\"string\">&quot;dog&quot;</span> <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;learningspring.ioc.examples.demo3.Dog&quot;</span>/&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>\n<h4 id=\"é™æ€å·¥å‚å®ä¾‹åŒ–æ–¹å¼\">é™æ€å·¥å‚å®ä¾‹åŒ–æ–¹å¼<a title=\"#é™æ€å·¥å‚å®ä¾‹åŒ–æ–¹å¼\" href=\"#é™æ€å·¥å‚å®ä¾‹åŒ–æ–¹å¼\"></a></h4>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> Chen Rui</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@version</span> 1.0</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Car</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Double price;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Car</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Car</span><span class=\"params\">(String name, Double price)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.price = price;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">toString</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&quot;Car&#123;&quot;</span> +</span><br><span class=\"line\">                <span class=\"string\">&quot;name=&#x27;&quot;</span> + name + <span class=\"string\">&#x27;\\&#x27;&#x27;</span> +</span><br><span class=\"line\">                <span class=\"string\">&quot;, price=&quot;</span> + price +</span><br><span class=\"line\">                <span class=\"string\">&#x27;&#125;&#x27;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">package</span> learningspring.ioc.examples.demo3;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> Chen Rui</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@version</span> 1.0</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CarFactory</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Car <span class=\"title\">createCar</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Car();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span><br><span class=\"line\">&lt;beans xmlns=<span class=\"string\">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class=\"line\">       xmlns:xsi=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class=\"line\">       xsi:schemaLocation=<span class=\"string\">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- Spring Beançš„å®ä¾‹åŒ–æ–¹å¼--&gt;</span><br><span class=\"line\">    &lt;!-- é™æ€å·¥å‚çš„æ–¹å¼ --&gt;</span><br><span class=\"line\">    &lt;bean id=<span class=\"string\">&quot;car&quot;</span> <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;learningspring.ioc.examples.demo3.CarFactory&quot;</span> factory-method=<span class=\"string\">&quot;createCar&quot;</span>/&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>\n<h4 id=\"å®ä¾‹å·¥å‚å®ä¾‹åŒ–æ–¹å¼\">å®ä¾‹å·¥å‚å®ä¾‹åŒ–æ–¹å¼<a title=\"#å®ä¾‹å·¥å‚å®ä¾‹åŒ–æ–¹å¼\" href=\"#å®ä¾‹å·¥å‚å®ä¾‹åŒ–æ–¹å¼\"></a></h4>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * //TODO</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> Chen Rui</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@version</span> 1.0</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Dog</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer length;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getName</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> name;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setName</span><span class=\"params\">(String name)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Integer <span class=\"title\">getLength</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> length;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setLength</span><span class=\"params\">(Integer length)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.length = length;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">toString</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&quot;Dog&#123;&quot;</span> +</span><br><span class=\"line\">                <span class=\"string\">&quot;name=&#x27;&quot;</span> + name + <span class=\"string\">&#x27;\\&#x27;&#x27;</span> +</span><br><span class=\"line\">                <span class=\"string\">&quot;, length=&quot;</span> + length +</span><br><span class=\"line\">                <span class=\"string\">&#x27;&#125;&#x27;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * //TODO</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> Chen Rui</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@version</span> 1.0</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DogFactory</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Dog <span class=\"title\">createDog</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Dog();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span><br><span class=\"line\">&lt;beans xmlns=<span class=\"string\">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class=\"line\">       xmlns:xsi=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class=\"line\">       xsi:schemaLocation=<span class=\"string\">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- Spring Beançš„å®ä¾‹åŒ–æ–¹å¼--&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- å®ä¾‹å·¥å‚çš„æ–¹å¼ --&gt;</span><br><span class=\"line\">    &lt;bean id=<span class=\"string\">&quot;dogFactory&quot;</span> <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;learningspring.ioc.examples.demo3.DogFactory&quot;</span>/&gt;</span><br><span class=\"line\">    &lt;bean id=<span class=\"string\">&quot;dog2&quot;</span> factory-bean=<span class=\"string\">&quot;dogFactory&quot;</span> factory-method=<span class=\"string\">&quot;createDog&quot;</span>/&gt;</span><br><span class=\"line\">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>\n<h3 id=\"springçš„å±æ€§æ³¨å…¥æ–¹å¼\">Springçš„å±æ€§æ³¨å…¥æ–¹å¼<a title=\"#springçš„å±æ€§æ³¨å…¥æ–¹å¼\" href=\"#springçš„å±æ€§æ³¨å…¥æ–¹å¼\"></a></h3>\n<h4 id=\"æ„é€ æ–¹æ³•æ–¹å¼çš„å±æ€§æ³¨å…¥\">æ„é€ æ–¹æ³•æ–¹å¼çš„å±æ€§æ³¨å…¥<a title=\"#æ„é€ æ–¹æ³•æ–¹å¼çš„å±æ€§æ³¨å…¥\" href=\"#æ„é€ æ–¹æ³•æ–¹å¼çš„å±æ€§æ³¨å…¥\"></a></h4>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">beans</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--æ„é€ æ–¹æ³•æ–¹å¼çš„å±æ€§æ³¨å…¥--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;car&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;learningspring.ioc.examples.demo3.Car&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">constructor-arg</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;name&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;BWM&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">constructor-arg</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;price&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;800000&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"setæ–¹æ³•æ–¹å¼çš„å±æ€§æ³¨å…¥\">Setæ–¹æ³•æ–¹å¼çš„å±æ€§æ³¨å…¥<a title=\"#setæ–¹æ³•æ–¹å¼çš„å±æ€§æ³¨å…¥\" href=\"#setæ–¹æ³•æ–¹å¼çš„å±æ€§æ³¨å…¥\"></a></h4>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">beans</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--Setæ–¹æ³•æ–¹å¼çš„å±æ€§æ³¨å…¥--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;dog&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;learningspring.ioc.examples.demo3.Dog&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;name&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;Golden&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;length&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;100&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"ä¸ºbeanæ³¨å…¥å¼•ç”¨ç±»å‹çš„æ•°æ®\">ä¸ºBeanæ³¨å…¥å¼•ç”¨ç±»å‹çš„æ•°æ®<a title=\"#ä¸ºbeanæ³¨å…¥å¼•ç”¨ç±»å‹çš„æ•°æ®\" href=\"#ä¸ºbeanæ³¨å…¥å¼•ç”¨ç±»å‹çš„æ•°æ®\"></a></h4>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">beans</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--æ„é€ æ–¹æ³•æ–¹å¼çš„å±æ€§æ³¨å…¥--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;car&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;learningspring.ioc.examples.demo3.Car&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">constructor-arg</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;name&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;BWM&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">constructor-arg</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;price&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;800000&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--Setæ–¹æ³•æ–¹å¼çš„å±æ€§æ³¨å…¥--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;dog&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;learningspring.ioc.examples.demo3.Dog&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;name&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;Golden&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;length&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;100&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--ä¸ºBeanæ³¨å…¥å¯¹è±¡å±æ€§--&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--æ„é€ æ–¹æ³•æ–¹å¼ä¸€æ ·å¯è¡Œ--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;employee&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;learningspring.ioc.examples.demo3.Employee&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;name&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;Chen&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;car&quot;</span> <span class=\"attr\">ref</span>=<span class=\"string\">&quot;car&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;dog&quot;</span> <span class=\"attr\">ref</span>=<span class=\"string\">&quot;dog&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"påç§°ç©ºé—´çš„å±æ€§æ³¨å…¥ï¼ˆspring2.5ï¼‰\">Påç§°ç©ºé—´çš„å±æ€§æ³¨å…¥ï¼ˆSpring2.5ï¼‰<a title=\"#påç§°ç©ºé—´çš„å±æ€§æ³¨å…¥ï¼ˆspring2.5ï¼‰\" href=\"#påç§°ç©ºé—´çš„å±æ€§æ³¨å…¥ï¼ˆspring2.5ï¼‰\"></a></h4>\n<ul>\n<li>é€šè¿‡å¼•å…¥påç§°ç©ºé—´å®Œæˆå±æ€§æ³¨å…¥\n<ul>\n<li>æ™®é€šå±æ€§ï¼šp:å±æ€§å=â€œå€¼â€</li>\n<li>å¯¹è±¡å±æ€§ï¼šp:å±æ€§å-ref=â€œå€¼â€</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">beans</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xmlns:p</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/p&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--Påç§°ç©ºé—´çš„å±æ€§æ³¨å…¥--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;cat&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;learningspring.ioc.examples.demo3.Cat&quot;</span> <span class=\"attr\">p:name</span>=<span class=\"string\">&quot;Orange&quot;</span> <span class=\"attr\">p:length</span>=<span class=\"string\">&quot;100&quot;</span>/&gt;</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">&lt;!--ä¸ºBeanæ³¨å…¥å¯¹è±¡å±æ€§--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;employee&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;learningspring.ioc.examples.demo3.Employee&quot;</span> <span class=\"attr\">p:cat-ref</span>=<span class=\"string\">&quot;cat&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;name&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;Chen&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;car&quot;</span> <span class=\"attr\">ref</span>=<span class=\"string\">&quot;car&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;dog&quot;</span> <span class=\"attr\">ref</span>=<span class=\"string\">&quot;dog&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"spelæ–¹å¼çš„å±æ€§æ³¨å…¥ï¼ˆspring3ï¼‰\">SpELæ–¹å¼çš„å±æ€§æ³¨å…¥ï¼ˆSpring3ï¼‰<a title=\"#spelæ–¹å¼çš„å±æ€§æ³¨å…¥ï¼ˆspring3ï¼‰\" href=\"#spelæ–¹å¼çš„å±æ€§æ³¨å…¥ï¼ˆspring3ï¼‰\"></a></h4>\n<p>SpELï¼šSpring Expresssion Language çš„è¡¨è¾¾å¼è¯­è¨€</p>\n<p>è¯­æ³•ï¼š#{è¡¨è¾¾å¼}</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">beans</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xmlns:p</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/p&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--SpELè¡¨è¾¾å¼æ³¨å…¥--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;cat2&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;learningspring.ioc.examples.demo4.Cat&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!--å­—ç¬¦ä¸²è¦åŠ å•å¼•å·--&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!--ä¹Ÿå¯ä»¥é€šè¿‡#&#123;beanName.å±æ€§åæˆ–æ–¹æ³•å&#125;æ¥é€šè¿‡å…¶ä»–beançš„å±æ€§æˆ–è€…æ–¹æ³•æ¥æ³¨å…¥--&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;name&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;#&#123;&#x27;Orange&#x27;&#125;&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;length&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;#&#123;101&#125;&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"æ³¨å…¥é›†åˆç±»å‹çš„æ•°æ®\">æ³¨å…¥é›†åˆç±»å‹çš„æ•°æ®<a title=\"#æ³¨å…¥é›†åˆç±»å‹çš„æ•°æ®\" href=\"#æ³¨å…¥é›†åˆç±»å‹çš„æ•°æ®\"></a></h3>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * æ³¨å…¥é›†åˆç±»å‹çš„æ•°æ®æµ‹è¯•</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> Chen Rui</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@version</span> 1.0</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CollectionBean</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String[] strs;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> List&lt;String&gt; list;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Set&lt;String&gt; set;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Map&lt;String, String&gt; map;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setStrs</span><span class=\"params\">(String[] strs)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.strs = strs;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setList</span><span class=\"params\">(List&lt;String&gt; list)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.list = list;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setSet</span><span class=\"params\">(Set&lt;String&gt; set)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.set = set;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setMap</span><span class=\"params\">(Map&lt;String, String&gt; map)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.map = map;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">toString</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&quot;CollectionBean&#123;&quot;</span> +</span><br><span class=\"line\">                <span class=\"string\">&quot;strs=&quot;</span> + Arrays.toString(strs) +</span><br><span class=\"line\">                <span class=\"string\">&quot;, list=&quot;</span> + list +</span><br><span class=\"line\">                <span class=\"string\">&quot;, set=&quot;</span> + set +</span><br><span class=\"line\">                <span class=\"string\">&quot;, map=&quot;</span> + map +</span><br><span class=\"line\">                <span class=\"string\">&#x27;&#125;&#x27;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span><br><span class=\"line\">&lt;beans xmlns=<span class=\"string\">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class=\"line\">       xmlns:xsi=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class=\"line\">       xsi:schemaLocation=<span class=\"string\">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!--Springçš„é›†åˆå±æ€§çš„æ³¨å…¥--&gt;</span><br><span class=\"line\">    &lt;!--æ³¨å…¥æ•°ç»„ç±»å‹--&gt;</span><br><span class=\"line\">    &lt;bean id=<span class=\"string\">&quot;collectionBean&quot;</span> <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;learningspring.ioc.examples.demo4.CollectionBean&quot;</span>&gt;</span><br><span class=\"line\">        &lt;!-- æ³¨å…¥æ•°ç»„ç±»å‹ --&gt;</span><br><span class=\"line\">        &lt;property name=<span class=\"string\">&quot;strs&quot;</span>&gt;</span><br><span class=\"line\">            &lt;list&gt;</span><br><span class=\"line\">                &lt;value&gt;Tom&lt;/value&gt;</span><br><span class=\"line\">                &lt;value&gt;Jack&lt;/value&gt;</span><br><span class=\"line\">            &lt;/list&gt;</span><br><span class=\"line\">        &lt;/property&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        &lt;!-- æ³¨å…¥Listé›†åˆ --&gt;</span><br><span class=\"line\">        &lt;property name=<span class=\"string\">&quot;list&quot;</span>&gt;</span><br><span class=\"line\">            &lt;list&gt;</span><br><span class=\"line\">                &lt;value&gt;Lucy&lt;/value&gt;</span><br><span class=\"line\">                &lt;value&gt;Lily&lt;/value&gt;</span><br><span class=\"line\">            &lt;/list&gt;</span><br><span class=\"line\">        &lt;/property&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        &lt;!-- æ³¨å…¥Seté›†åˆ --&gt;</span><br><span class=\"line\">        &lt;property name=<span class=\"string\">&quot;set&quot;</span>&gt;</span><br><span class=\"line\">            &lt;set&gt;</span><br><span class=\"line\">                &lt;value&gt;aaa&lt;/value&gt;</span><br><span class=\"line\">                &lt;value&gt;bbb&lt;/value&gt;</span><br><span class=\"line\">                &lt;value&gt;ccc&lt;/value&gt;</span><br><span class=\"line\">            &lt;/set&gt;</span><br><span class=\"line\">        &lt;/property&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        &lt;!-- æ³¨å…¥Mapé›†åˆ --&gt;</span><br><span class=\"line\">        &lt;property name=<span class=\"string\">&quot;map&quot;</span>&gt;</span><br><span class=\"line\">            &lt;map&gt;</span><br><span class=\"line\">                &lt;entry key=<span class=\"string\">&quot;a&quot;</span> value=<span class=\"string\">&quot;1&quot;</span>/&gt;</span><br><span class=\"line\">                &lt;entry key=<span class=\"string\">&quot;b&quot;</span> value=<span class=\"string\">&quot;2&quot;</span>/&gt;</span><br><span class=\"line\">            &lt;/map&gt;</span><br><span class=\"line\">        &lt;/property&gt;</span><br><span class=\"line\">    &lt;/bean&gt;</span><br><span class=\"line\">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>\n<h3 id=\"springåˆ†æ¨¡å—å¼€å‘çš„é…ç½®\">Springåˆ†æ¨¡å—å¼€å‘çš„é…ç½®<a title=\"#springåˆ†æ¨¡å—å¼€å‘çš„é…ç½®\" href=\"#springåˆ†æ¨¡å—å¼€å‘çš„é…ç½®\"></a></h3>\n<ul>\n<li>åŠ è½½é…ç½®æ–‡ä»¶æ—¶ï¼Œç›´æ¥åŠ è½½å¤šä¸ªé…ç½®æ–‡ä»¶</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ApplicationContext ctx = <span class=\"keyword\">new</span> ClassPathXmlApplicationContext(<span class=\"string\">&quot;applicationContext1.xml&quot;</span>, <span class=\"string\">&quot;applicationContext2.xml&quot;</span>);</span><br></pre></td></tr></table></figure>\n<ul>\n<li>åœ¨ä¸€ä¸ªé…ç½®æ–‡ä»¶ä¸­å¼•å…¥å¤šä¸ªé…ç½®æ–‡ä»¶</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">beans</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--å¼•å…¥é…ç½®æ–‡ä»¶--&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">import</span> <span class=\"attr\">resource</span>=<span class=\"string\">&quot;applicationContext2.xml&quot;</span>/&gt;</span></span><br><span class=\"line\">    </span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h1 id=\"springå¼€å‘ä¸­çš„å¸¸ç”¨æ³¨è§£\">Springå¼€å‘ä¸­çš„å¸¸ç”¨æ³¨è§£<a title=\"#springå¼€å‘ä¸­çš„å¸¸ç”¨æ³¨è§£\" href=\"#springå¼€å‘ä¸­çš„å¸¸ç”¨æ³¨è§£\"></a></h1>\n<h2 id=\"@component\">@Component<a title=\"#@component\" href=\"#@component\"></a></h2>\n<p>è¯¥æ³¨è§£åœ¨ç±»ä¸Šä½¿ç”¨ï¼Œä½¿ç”¨è¯¥æ³¨è§£å°±ç›¸å½“äºåœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®äº†ä¸€ä¸ªBeanï¼Œä¾‹å¦‚ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Component(&quot;userDao&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">UserDaoImpl</span> <span class=\"keyword\">implements</span> <span class=\"title\">UserDao</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">save</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;UserDaoImpl.save&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ç›¸å½“äºä»¥ä¸‹å†…å®¹ï¼š</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;userDao&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;learningspring.ioc.examplesannotation.demo1.UserDaoImpl&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>è¯¥æ³¨è§£æœ‰3ä¸ªè¡ç”Ÿæ³¨è§£ï¼š</p>\n<ul>\n<li><strong>@Controllerï¼šä¿®é¥°Web å±‚ç±»</strong></li>\n<li><strong>@Serviceï¼šä¿®é¥°Serviceå±‚ç±»</strong></li>\n<li><strong>@Repositoryï¼šä¿®é¥°Daoå±‚ç±»</strong></li>\n</ul>\n<h2 id=\"@value\">@Value<a title=\"#@value\" href=\"#@value\"></a></h2>\n<p>è¯¥æ³¨è§£ç”¨äºç»™å±æ€§æ³¨å…¥å€¼ï¼Œæœ‰2ç§ç”¨æ³•</p>\n<ul>\n<li>å¦‚æœæœ‰setæ–¹æ³•ï¼Œåˆ™éœ€è¦å°†è¯¥æ³¨è§£æ·»åŠ åˆ°setæ–¹æ³•ä¸Š</li>\n<li>å¦‚æœæ²¡æœ‰setæ–¹æ³•ï¼Œåˆ™éœ€è¦å°†è¯¥æ³¨è§£æ·»åŠ åˆ°å±æ€§ä¸Š</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Value æ³¨è§£ç”¨äºå±æ€§æ³¨å…¥</span></span><br><span class=\"line\"><span class=\"comment\"> * å½“ç±»æœ‰æä¾›setæ–¹æ³•æ—¶æ·»åŠ åœ¨setæ–¹æ³•ä¸Š</span></span><br><span class=\"line\"><span class=\"comment\"> * å¦‚æœæ²¡æœ‰ï¼Œåˆ™æ·»åŠ åˆ°å±æ€§ä¸Š</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> Chen Rui</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@version</span> 1.0</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Component(&quot;dog&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Dog</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Value(&quot;100&quot;)</span> <span class=\"comment\">// æ³¨å…¥å±æ€§å€¼</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Double length;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Dog</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Dog</span><span class=\"params\">(String name, Double length)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.length = length;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getName</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> name;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Value(&quot;Golden&quot;)</span> <span class=\"comment\">// æ³¨å…¥å±æ€§å€¼</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setName</span><span class=\"params\">(String name)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">toString</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&quot;Dog&#123;&quot;</span> +</span><br><span class=\"line\">                <span class=\"string\">&quot;name=&#x27;&quot;</span> + name + <span class=\"string\">&#x27;\\&#x27;&#x27;</span> +</span><br><span class=\"line\">                <span class=\"string\">&quot;, length=&quot;</span> + length +</span><br><span class=\"line\">                <span class=\"string\">&#x27;&#125;&#x27;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"@autowired\">@Autowired<a title=\"#@autowired\" href=\"#@autowired\"></a></h2>\n<p><code>@Value</code> é€šå¸¸ç”¨äºæ™®é€šå±æ€§çš„æ³¨å…¥ã€‚</p>\n<p><code>@Autowired</code> é€šå¸¸ç”¨äºä¸ºå¯¹è±¡ç±»å‹çš„å±æ€§æ³¨å…¥å€¼ï¼Œä½†æ˜¯æŒ‰ç…§<strong>ç±»å‹</strong>å®Œæˆå±æ€§æ³¨å…¥</p>\n<p>ä¹ æƒ¯æ˜¯æŒ‰ç…§<strong>åç§°</strong>å®Œæˆå±æ€§æ³¨å…¥ï¼Œæ‰€ä»¥å¿…é¡»è®©<code>@Autowired</code>æ³¨è§£å’Œ<code>@Qualifier</code>æ³¨è§£<strong>ä¸€åŒä½¿ç”¨</strong>ã€‚</p>\n<p>ï¼ˆå¦‚æœæ²¡æœ‰<code>@Qualifier</code>æ³¨è§£ï¼Œä¿®æ”¹ä»¥ä¸‹ä¾‹å­ä¸­<code>@Repository</code>æ³¨è§£çš„å€¼ï¼Œä¹Ÿèƒ½ç¼–è¯‘æˆåŠŸï¼‰</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Service(&quot;userService&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">UserServiceImpl</span> <span class=\"keyword\">implements</span> <span class=\"title\">UserService</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"meta\">@Qualifier(&quot;userDao&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> UserDao userDao;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">save</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;UserServiceImpl.save&quot;</span>);</span><br><span class=\"line\">        userDao.save();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"meta\">@Repository(&quot;userDao&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">UserDaoImpl</span> <span class=\"keyword\">implements</span> <span class=\"title\">UserDao</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">save</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;UserDaoImpl.save&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"@resource\">@Resource<a title=\"#@resource\" href=\"#@resource\"></a></h2>\n<p>è¯¥æ³¨è§£ä¹Ÿå¯ä»¥ç”¨äºå±æ€§æ³¨å…¥ï¼Œé€šå¸¸æƒ…å†µä¸‹ä½¿ç”¨**@Resourceæ³¨è§£**ï¼Œé»˜è®¤æŒ‰ç…§<strong>åç§°</strong>å®Œæˆå±æ€§æ³¨å…¥ã€‚</p>\n<p>è¯¥æ³¨è§£ç”±J2EEæä¾›ï¼Œéœ€è¦å¯¼å…¥åŒ…<code>javax.annotation.Resource</code>ã€‚</p>\n<p><code>@Resource</code>æœ‰ä¸¤ä¸ªé‡è¦çš„å±æ€§ï¼š<code>name</code>å’Œ<code>type</code>ï¼Œè€ŒSpringå°†<code>@Resource</code>æ³¨è§£çš„<code>name</code>å±æ€§è§£æä¸ºbeançš„åå­—ï¼Œè€Œ<code>type</code>å±æ€§åˆ™è§£æä¸ºbeançš„ç±»å‹ã€‚æ‰€ä»¥ï¼Œå¦‚æœä½¿ç”¨<code>name</code>å±æ€§ï¼Œåˆ™ä½¿ç”¨byNameçš„è‡ªåŠ¨æ³¨å…¥ç­–ç•¥ï¼Œè€Œä½¿ç”¨<code>type</code>å±æ€§æ—¶åˆ™ä½¿ç”¨byTypeè‡ªåŠ¨æ³¨å…¥ç­–ç•¥ã€‚å¦‚æœæ—¢ä¸åˆ¶å®š<code>name</code>ä¹Ÿä¸åˆ¶å®š<code>type</code>å±æ€§ï¼Œè¿™æ—¶å°†é€šè¿‡åå°„æœºåˆ¶ä½¿ç”¨byNameè‡ªåŠ¨æ³¨å…¥ç­–ç•¥ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * UserController</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> Chen Rui</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@version</span> 1.0</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"meta\">@Controller(&quot;userController&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">UserController</span> </span>&#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"meta\">@Resource(name = &quot;userService&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> UserService userService; </span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * UserServiceå®ç°ç±»</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> Chen Rui</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@version</span> 1.0</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Service(&quot;userService&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">UserServiceImpl</span> <span class=\"keyword\">implements</span> <span class=\"title\">UserService</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"meta\">@Resource(name = &quot;userDao&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> UserDao userDao;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">save</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;UserServiceImpl.save&quot;</span>);</span><br><span class=\"line\">        userDao.save();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * UserDaoå®ç°ç±»</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> Chen Rui</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@version</span> 1.0</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Component(&quot;userDao&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">UserDaoImpl</span> <span class=\"keyword\">implements</span> <span class=\"title\">UserDao</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">save</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;UserDaoImpl.save&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"@postconstruct-å’Œ-@predestroy\">@PostConstruct å’Œ @PreDestroy<a title=\"#@postconstruct-å’Œ-@predestroy\" href=\"#@postconstruct-å’Œ-@predestroy\"></a></h2>\n<p><code>@PostConstruct</code>å’Œ<code>@PreDestroy</code>æ³¨è§£ï¼Œå‰è€…ä¸ºBeanç”Ÿå‘½å‘¨æœŸç›¸å…³çš„æ³¨è§£ï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œä½¿ç”¨åˆ°äº†i<code>nit-method</code>å‚æ•°æ¥é…ç½®Beanåˆå§‹åŒ–ä¹‹å‰è¦æ‰§è¡Œçš„æ–¹æ³•ï¼Œè¯¥æ³¨è§£ä¹Ÿæ˜¯åŒæ ·çš„ä½œç”¨ã€‚å°†è¯¥æ³¨è§£æ·»åŠ åˆ°æƒ³åœ¨åˆå§‹åŒ–ä¹‹å‰æ‰§è¡Œçš„ç›®æ ‡æ–¹æ³•ä¸Šï¼Œå°±å¯ä»¥å®ç°è¯¥åŠŸèƒ½ï¼Œè€Œåè€…åˆ™æ˜¯Beanç”Ÿå‘½å‘¨æœŸä¸­<code>destroy-method</code>ç›®æ ‡æ–¹æ³•ï¼Œä½¿ç”¨è¯¥æ³¨è§£åœ¨æŒ‡å®šæ–¹æ³•ä¸Šï¼Œå³å¯å®ç°åœ¨Beané”€æ¯ä¹‹å‰æ‰§è¡Œè¯¥æ–¹æ³•ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * UserDaoå®ç°ç±»</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> Chen Rui</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@version</span> 1.0</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Component(&quot;userDao&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">UserDaoImpl</span> <span class=\"keyword\">implements</span> <span class=\"title\">UserDao</span> </span>&#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"meta\">@PostConstruct</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">init</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;UserDaoImpl.init&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">save</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;UserDaoImpl.save&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"meta\">@PreDestroy</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">destroy</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;UserDaoImpl.destroy&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"@scope\">@Scope<a title=\"#@scope\" href=\"#@scope\"></a></h2>\n<p>Beançš„ä½œç”¨èŒƒå›´çš„æ³¨è§£ï¼Œé»˜è®¤ä¸ºsingletonï¼ˆå•ä¾‹ï¼‰</p>\n<p>å¯é€‰å€¼ï¼š</p>\n<ul>\n<li>singleton</li>\n<li>prototype</li>\n<li>request</li>\n<li>session</li>\n<li>globalsession</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * UserDaoå®ç°ç±»</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> Chen Rui</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@version</span> 1.0</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Component(&quot;userDao&quot;)</span></span><br><span class=\"line\"><span class=\"meta\">@Scope</span> <span class=\"comment\">// é»˜è®¤ä¸ºsingleton</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">UserDaoImpl</span> <span class=\"keyword\">implements</span> <span class=\"title\">UserDao</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@PostConstruct</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">init</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;UserDaoImpl.init&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">save</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;UserDaoImpl.save&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@PreDestroy</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">destroy</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;UserDaoImpl.destroy&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"åŸºäºxmlé…ç½®å’ŒåŸºäºæ³¨è§£é…ç½®çš„å¯¹æ¯”\">åŸºäºXMLé…ç½®å’ŒåŸºäºæ³¨è§£é…ç½®çš„å¯¹æ¯”<a title=\"#åŸºäºxmlé…ç½®å’ŒåŸºäºæ³¨è§£é…ç½®çš„å¯¹æ¯”\" href=\"#åŸºäºxmlé…ç½®å’ŒåŸºäºæ³¨è§£é…ç½®çš„å¯¹æ¯”\"></a></h2>\n<div class=\"Ï†cy\"><div class=\"Ï†da\"><table><thead>\n<tr>\n<th style=\"padding:0\"></th>\n<th>åŸºäºXMLçš„é…ç½®</th>\n<th>åŸºäºæ³¨è§£çš„é…ç½®</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Beançš„å®šä¹‰</td>\n<td><bean id=\"Beançš„id\" class=\"ç±»çš„å…¨è·¯å¾„\"/></td>\n<td>@Componentæˆ–è¡ç”Ÿæ³¨è§£@Controllerï¼Œ@Serviceå’Œ@Repository</td>\n</tr>\n<tr>\n<td>Beançš„åç§°</td>\n<td>é€šè¿‡idæˆ–nameæŒ‡å®š</td>\n<td>@Component(â€œBeançš„idâ€)</td>\n</tr>\n<tr>\n<td>Beançš„å±æ€§æ³¨å…¥</td>\n<td><property>æˆ–è€…é€šè¿‡på‘½åç©ºé—´</td>\n<td>é€šè¿‡æ³¨è§£@Autowired æŒ‰ç±»å‹æ³¨å…¥ é€šè¿‡@QualifieræŒ‰åç§°æ³¨å…¥</td>\n</tr>\n<tr>\n<td>Beançš„ç”Ÿå‘½å‘¨æœŸ</td>\n<td>init-methodæŒ‡å®šBeanåˆå§‹åŒ–å‰æ‰§è¡Œçš„æ–¹æ³•ï¼Œdestroy-methodæŒ‡å®šBeané”€æ¯å‰æ‰§è¡Œçš„æ–¹æ³•</td>\n<td>@PostConstruct å¯¹åº”äºint-method @PreDestroy å¯¹åº”äºdestroy-method</td>\n</tr>\n<tr>\n<td>Beançš„ä½œç”¨åŸŸ</td>\n<td>åœ¨beanæ ‡ç­¾ä¸­é…ç½®scopeå±æ€§</td>\n<td>@Scope, é»˜è®¤æ˜¯singleton é…ç½®å¤šä¾‹å¯ä»¥åœ¨ç›®æ ‡ç±»ä¸Šä½¿ç”¨@Scope(â€œprototypeâ€)</td>\n</tr>\n<tr>\n<td>ä½¿ç”¨åœºæ™¯</td>\n<td>Beanæ¥è‡ªç¬¬ä¸‰æ–¹ï¼Œå¯ä»¥ä½¿ç”¨åœ¨ä»»ä½•åœºæ™¯</td>\n<td>Beançš„å®ç°ç±»ç”±è‡ªå·±ç»´æŠ¤</td>\n</tr>\n</tbody>\n</table></div></div><p>XMLå¯ä»¥é€‚ç”¨äºä»»ä½•åœºæ™¯ï¼Œå°±ç®—Beanæ¥è‡ªç¬¬ä¸‰æ–¹ä¹Ÿå¯ä»¥é€‚ç”¨XMLæ–¹å¼æ¥ç®¡ç†ã€‚è€Œæ³¨è§£æ–¹å¼å°±æ— æ³•åœ¨æ­¤åœºæ™¯ä¸‹ä½¿ç”¨ï¼Œæ³¨è§£æ–¹å¼å¯ä»¥è®©å¼€å‘çš„è¿‡ç¨‹æ›´åŠ æ–¹ä¾¿ï¼Œä½†å‰ææ˜¯Beanç”±è‡ªå·±ç»´æŠ¤ï¼Œè¿™æ ·æ‰èƒ½åœ¨æºç ä¸­æ·»åŠ æ³¨è§£ã€‚</p>\n<p>æ‰€ä»¥å¯ä»¥ä½¿ç”¨<strong>ä¸¤è€…æ··åˆ</strong>çš„æ–¹å¼æ¥å¼€å‘é¡¹ç›®ï¼Œä½¿ç”¨<strong>XMLé…ç½®æ–‡ä»¶æ¥ç®¡ç†Beanï¼Œä½¿ç”¨æ³¨è§£æ¥è¿›è¡Œå±æ€§æ³¨å…¥</strong></p>\n<h1 id=\"spring-aop\">Spring AOP<a title=\"#spring-aop\" href=\"#spring-aop\"></a></h1>\n<h2 id=\"aopçš„æ¦‚è¿°\">AOPçš„æ¦‚è¿°<a title=\"#aopçš„æ¦‚è¿°\" href=\"#aopçš„æ¦‚è¿°\"></a></h2>\n<p>å³<strong>é¢å‘åˆ‡é¢ç¼–ç¨‹</strong>ï¼Œé€šè¿‡<strong>é¢„ç¼–è¯‘</strong>æ–¹å¼å’Œè¿è¡ŒæœŸåŠ¨æ€ä»£ç†å®ç°ç¨‹åºåŠŸèƒ½çš„ç»Ÿä¸€ç»´æŠ¤çš„ä¸€ç§æŠ€æœ¯ã€‚åˆ©ç”¨AOPå¯ä»¥å¯¹ä¸šåŠ¡é€»è¾‘çš„å„ä¸ªéƒ¨åˆ†è¿›è¡Œ<strong>éš”ç¦»</strong>ï¼Œä»è€Œä½¿å¾—ä¸šåŠ¡é€»è¾‘å„éƒ¨åˆ†ä¹‹é—´çš„<strong>è€¦åˆåº¦é™ä½</strong>ï¼Œæé«˜ç¨‹åºçš„<strong>å¯é‡ç”¨æ€§</strong>ï¼ŒåŒæ—¶æé«˜äº†å¼€å‘çš„æ•ˆç‡ã€‚</p>\n<h2 id=\"aopçš„æ¡ˆä¾‹ï¼ˆåº”ç”¨åœºæ™¯ï¼‰\">AOPçš„æ¡ˆä¾‹ï¼ˆåº”ç”¨åœºæ™¯ï¼‰<a title=\"#aopçš„æ¡ˆä¾‹ï¼ˆåº”ç”¨åœºæ™¯ï¼‰\" href=\"#aopçš„æ¡ˆä¾‹ï¼ˆåº”ç”¨åœºæ™¯ï¼‰\"></a></h2>\n<p>èƒŒæ™¯ï¼šæŸé¡¹ç›®å·²ç»å†™å¥½äº†ä¿å­˜åˆ°æ•°æ®åº“çš„æ–¹æ³•ã€‚å‡è®¾ç°åœ¨éœ€è¦æ·»åŠ ä¸€ä¸ªæ–°çš„åŠŸèƒ½ï¼Œä¾‹å¦‚æƒé™æ ¡éªŒï¼Œåœ¨ä¿å­˜åˆ°æ•°æ®åº“ä¹‹å‰è¦å¯¹ç”¨æˆ·æƒé™è¿›è¡Œæ ¡éªŒã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">UserDaoImpl</span> <span class=\"keyword\">implements</span> <span class=\"title\">UserDao</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">save</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        ...</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ç°åœ¨éœ€è¦å¤šåŠ ä¸€ä¸ªéœ€æ±‚ï¼Œåœ¨ç”¨æˆ·å°†æ•°æ®ä¿å­˜åˆ°æ•°æ®åº“ä¹‹å‰ï¼Œè¿›è¡Œæƒé™æ ¡éªŒã€‚</p>\n<p>æ­¤æ—¶é€šå¸¸å°±ä¼šåœ¨è¯¥æ–¹æ³•ä¸­æ·»åŠ ä¸€ä¸ªæ–¹æ³•æ¥è¿›è¡Œæƒé™æ ¡éªŒç„¶ååœ¨saveæ–¹æ³•ä¸­è°ƒç”¨ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">UserDaoImpl</span> <span class=\"keyword\">implements</span> <span class=\"title\">UserDao</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">save</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        checkPri();</span><br><span class=\"line\">        <span class=\"comment\">// ä¿å­˜åˆ°æ•°æ®åº“</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">checkPri</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// æƒé™æ ¡éªŒ</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ç”¨è¿™æ ·çš„æ–¹æ³•æ¥å®ç°ï¼Œå¼Šç«¯å°±æ˜¯åªèƒ½åœ¨è¿™ä¸€ä¸ªç±»ä¸­ä½¿ç”¨ï¼Œé€šå¸¸ä¸€ä¸ªé¡¹ç›®ä¸­æœ‰è®¸å¤šçš„æ–¹æ³•éƒ½å¯èƒ½éœ€è¦æ‰§è¡Œæƒé™æ ¡éªŒï¼Œæ­¤æ—¶å°±è¦åœ¨æ¯ä¸ªç±»ä¸­ç¼–å†™åŒæ ·çš„ä»£ç ï¼Œæ‰€ä»¥è¯¥æ–¹æ³•å¹¶ä¸ç§‘å­¦ã€‚</p>\n<p>æ­¤æ—¶å°±æœ‰äº†ä¸€ä¸ªæ›´å¥½çš„æ–¹æ³•ï¼Œå³<strong>çºµå‘ç»§æ‰¿</strong>ã€‚</p>\n<p>å®šä¹‰ä¸€ä¸ªé€šç”¨çš„Daoï¼Œåœ¨é€šç”¨çš„Daoä¸­ç¼–å†™æƒé™æ ¡éªŒçš„æ–¹æ³•ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">BaseDao</span></span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">checkPri</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// æƒé™æ ¡éªŒ</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ç„¶åæ¯ä¸€ä¸ªä¸åŒçš„ç±»éƒ½å»ç»§æ‰¿è¿™ä¸ªç±»ï¼Œå†è°ƒç”¨è¯¥æ–¹æ³•</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">UserDaoImpl</span> <span class=\"keyword\">extends</span> <span class=\"title\">BaseDao</span> <span class=\"keyword\">implements</span> <span class=\"title\">UserDao</span></span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">save</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        checkPri();</span><br><span class=\"line\">        <span class=\"comment\">// ä¿å­˜åˆ°æ•°æ®åº“</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>æ­¤æ—¶å°±åªéœ€è¦ç»´æŠ¤<code>BaseDao</code>ä¸­çš„ä¸€ä»½ä»£ç å°±å¯ä»¥ï¼Œå¤§å¤§å‡è½»äº†å·¥ä½œé‡ï¼Œæé«˜äº†æ•ˆç‡ã€‚</p>\n<p>ä½†AOPçš„æ€æƒ³æ›´é«˜ä¸€æ­¥ï¼Œä¸é‡‡ç”¨çºµå‘ç»§æ‰¿ï¼Œè€Œé‡‡ç”¨<strong>æ¨ªå‘æŠ½å–</strong>æ¥å–ä»£</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">UserDaoImpl</span> <span class=\"keyword\">implements</span> <span class=\"title\">UserDao</span></span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">save</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// ä¿å­˜åˆ°æ•°æ®åº“</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>æ¨ªå‘æŠ½å–æœºåˆ¶å®è´¨ä¸Šå°±æ˜¯<strong>ä»£ç†æœºåˆ¶</strong>ï¼Œé€šè¿‡åˆ›å»º<code>UserDaoImpl</code>ç±»çš„ä»£ç†ç±»ï¼Œé€šè¿‡ä»£ç†ç±»æ¥è°ƒç”¨æƒé™æ ¡éªŒçš„æ–¹æ³•ã€‚</p>\n<h2 id=\"aopåº•å±‚å®ç°åŸç†\">AOPåº•å±‚å®ç°åŸç†<a title=\"#aopåº•å±‚å®ç°åŸç†\" href=\"#aopåº•å±‚å®ç°åŸç†\"></a></h2>\n<p>AOPçš„å®ç°ä½¿ç”¨äº†åŠ¨æ€ä»£ç†æŠ€æœ¯ï¼ŒåŠ¨æ€ä»£ç†åˆ†ä¸ºä¸¤ç§</p>\n<ul>\n<li>JDKåŠ¨æ€ä»£ç†ï¼šåªèƒ½å¯¹å®ç°äº†æ¥å£çš„ç±»äº§ç”Ÿä»£ç†</li>\n<li>CglibåŠ¨æ€ä»£ç†ï¼ˆç±»ä¼¼äºjavassistçš„ç¬¬ä¸‰æ–¹ä»£ç†æŠ€æœ¯ï¼‰ï¼šå¯¹æ²¡æœ‰å®ç°æ¥å£çš„ç±»äº§ç”Ÿä»£ç†å¯¹è±¡ï¼Œå³ç”Ÿæˆå­ç±»å¯¹è±¡ã€‚</li>\n</ul>\n<h3 id=\"jdkåŠ¨æ€ä»£ç†\">JDKåŠ¨æ€ä»£ç†<a title=\"#jdkåŠ¨æ€ä»£ç†\" href=\"#jdkåŠ¨æ€ä»£ç†\"></a></h3>\n<h4 id=\"jdkåŠ¨æ€ä»£ç†æ¡ˆä¾‹\">JDKåŠ¨æ€ä»£ç†æ¡ˆä¾‹<a title=\"#jdkåŠ¨æ€ä»£ç†æ¡ˆä¾‹\" href=\"#jdkåŠ¨æ€ä»£ç†æ¡ˆä¾‹\"></a></h4>\n<p>è¯¥æ¡ˆä¾‹å®ç°ä¸€ä¸ªè®¡ç®—å™¨çš„æ—¥å¿—åŠŸèƒ½</p>\n<p>é¦–å…ˆåˆ›å»ºä¸€ä¸ªæ¥å£<code>Calculator</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * è®¡ç®—å™¨æ¥å£</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> Chen Rui</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@version</span> 1.0</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Calculator</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * åŠ æ³•</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> a å®æ•°</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> b å®æ•°</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> ç›¸åŠ ç»“æœ</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">add</span><span class=\"params\">(<span class=\"keyword\">int</span> a, <span class=\"keyword\">int</span> b)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * å‡æ³•</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> a å®æ•°,è¢«å‡æ•°</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> b å®æ•°,å‡æ•°</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> ç›¸å‡ç»“æœ</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">sub</span><span class=\"params\">(<span class=\"keyword\">int</span> a, <span class=\"keyword\">int</span> b)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ä¹˜æ³•</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> a å®æ•°</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> b å®æ•°</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> ç›¸ä¹˜ç»“æœ</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">mul</span><span class=\"params\">(<span class=\"keyword\">int</span> a, <span class=\"keyword\">int</span> b)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * é™¤æ³•</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> a å®æ•°,è¢«é™¤æ•°</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> b å®æ•°,é™¤æ•°</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> ç›¸é™¤ç»“æœ</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">div</span><span class=\"params\">(<span class=\"keyword\">int</span> a, <span class=\"keyword\">int</span> b)</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>æ¥ç€åˆ›å»ºä¸€ä¸ªç±»<code>CalculatorImpl</code>æ¥å®ç°è¯¥æ¥å£å¹¶é‡å†™æ–¹æ³•</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * è®¡ç®—å™¨å®ç°ç±»</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> Chen Rui</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@version</span> 1.0</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CalculatorImpl</span> <span class=\"keyword\">implements</span> <span class=\"title\">Calculator</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">add</span><span class=\"params\">(<span class=\"keyword\">int</span> a, <span class=\"keyword\">int</span> b)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> a + b;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">sub</span><span class=\"params\">(<span class=\"keyword\">int</span> a, <span class=\"keyword\">int</span> b)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> a - b;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">mul</span><span class=\"params\">(<span class=\"keyword\">int</span> a, <span class=\"keyword\">int</span> b)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> a * b;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">div</span><span class=\"params\">(<span class=\"keyword\">int</span> a, <span class=\"keyword\">int</span> b)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (b == <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;é™¤æ•°ä¸èƒ½ä¸º0&quot;</span>);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span>  a / b;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>åœ¨æµ‹è¯•ç±»ä¸­æµ‹è¯•è¯¥è®¡ç®—å™¨ä»£ç </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> Chen Rui</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@version</span> 1.0</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AppTest</span> </span>&#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        Calculator target = <span class=\"keyword\">new</span> CalculatorImpl();</span><br><span class=\"line\">        <span class=\"keyword\">int</span> a = <span class=\"number\">10</span>;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> b = <span class=\"number\">10</span>;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;res --&gt; &quot;</span> + target.add(a, b));</span><br><span class=\"line\"></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;res --&gt; &quot;</span> + target.mul(a, b));</span><br><span class=\"line\"></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;res --&gt; &quot;</span> + target.sub(a, b));</span><br><span class=\"line\"></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;res --&gt; &quot;</span> + target.div(a, b));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>æ­¤æ—¶æ§åˆ¶å°çš„è¾“å‡ºç»“æœä¸ºï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">res --&gt; 20</span><br><span class=\"line\">res --&gt; 100</span><br><span class=\"line\">res --&gt; 0</span><br><span class=\"line\">res --&gt; 1</span><br></pre></td></tr></table></figure>\n<p>ç°åœ¨ä¸ºè¯¥è®¡ç®—å™¨å¢åŠ <strong>æ‰“å°æ—¥å¿—</strong>çš„åŠŸèƒ½</p>\n<p>åˆ›å»ºä¸€ä¸ªè®¡ç®—å™¨çš„ä»£ç†ç±»<code>CalculatorLoggingProxy</code>ï¼Œåœ¨ç±»ä¸­é¦–å…ˆå®šä¹‰è¢«ä»£ç†çš„ç›®æ ‡å¯¹è±¡targetï¼Œå¹¶é€šè¿‡æ„é€ å‡½æ•°è¿›è¡Œèµ‹å€¼ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.lang.reflect.InvocationHandler;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.lang.reflect.Method;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.lang.reflect.Proxy;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Arrays;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Date;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * è®¡ç®—å™¨ä»£ç†ç±»</span></span><br><span class=\"line\"><span class=\"comment\"> * å®ç°æ‰©å±•æ‰“å°æ—¥å¿—åŠŸèƒ½</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> Chen Rui</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@version</span> 1.0</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CalculatorProxy</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * è¢«ä»£ç†çš„å¯¹è±¡</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Calculator target;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">CalculatorProxy</span><span class=\"params\">(Calculator target)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.target = target;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Calculator <span class=\"title\">createProxy</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        Calculator proxy;</span><br><span class=\"line\"></span><br><span class=\"line\">        ClassLoader classLoader = target.getClass().getClassLoader();</span><br><span class=\"line\"></span><br><span class=\"line\">        Class[] interfaces = <span class=\"keyword\">new</span> Class[]&#123;Calculator.class&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">        InvocationHandler handler = <span class=\"keyword\">new</span> InvocationHandler() &#123;</span><br><span class=\"line\">            <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">             * <span class=\"doctag\">@param</span> proxy     æ­£åœ¨è¿”å›çš„ä»£ç†å¯¹è±¡ï¼Œä¸€èˆ¬åœ¨invokeæ–¹æ³•ä¸­éƒ½ä¸ä½¿ç”¨è¯¥å¯¹è±¡</span></span><br><span class=\"line\"><span class=\"comment\">             *                  å¦‚æœä½¿ç”¨è¯¥å¯¹è±¡ï¼Œåˆ™ä¼šå¼•å‘æ ˆå†…å­˜æº¢å‡ºã€‚å› ä¸ºä¼šå¾ªç¯è°ƒç”¨invokeæ–¹æ³•ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">             * <span class=\"doctag\">@param</span> method    æ­£åœ¨è¢«è°ƒç”¨çš„æ–¹æ³•</span></span><br><span class=\"line\"><span class=\"comment\">             * <span class=\"doctag\">@param</span> args      è°ƒç”¨æ–¹å¼æ—¶ä¼ å…¥çš„å‚æ•°</span></span><br><span class=\"line\"><span class=\"comment\">             * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">             * <span class=\"doctag\">@throws</span> Throwable</span></span><br><span class=\"line\"><span class=\"comment\">             */</span></span><br><span class=\"line\">            <span class=\"meta\">@Override</span></span><br><span class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> Object <span class=\"title\">invoke</span><span class=\"params\">(Object proxy, Method method, Object[] args)</span> <span class=\"keyword\">throws</span> Throwable </span>&#123;</span><br><span class=\"line\">                <span class=\"comment\">// è·å–æ–¹æ³•å</span></span><br><span class=\"line\">                String methodName = method.getName();</span><br><span class=\"line\">                <span class=\"comment\">// è¾“å‡ºæ—¥å¿—é€»è¾‘</span></span><br><span class=\"line\">                System.out.println(<span class=\"keyword\">new</span> Date() + <span class=\"string\">&quot;: The method &quot;</span> + methodName + <span class=\"string\">&quot; begins with &quot;</span> + Arrays.asList(args));</span><br><span class=\"line\">                <span class=\"comment\">// æ‰§è¡Œæ–¹æ³•</span></span><br><span class=\"line\">                Object result = method.invoke(target, args);</span><br><span class=\"line\">                <span class=\"comment\">// è¾“å‡ºæ—¥å¿—é€»è¾‘</span></span><br><span class=\"line\">                System.out.println(<span class=\"keyword\">new</span> Date() + <span class=\"string\">&quot;: The method &quot;</span> + methodName + <span class=\"string\">&quot; ends with &quot;</span> + result);</span><br><span class=\"line\">                <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">        proxy = (Calculator) Proxy.newProxyInstance(classLoader,interfaces,handler);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> proxy;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>æ­¤æ—¶é‡æ–°ç¼–å†™æµ‹è¯•æ–¹æ³•</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> Chen Rui</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@version</span> 1.0</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AppTest</span> </span>&#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        Calculator target = <span class=\"keyword\">new</span> CalculatorImpl();</span><br><span class=\"line\">        <span class=\"comment\">// åˆ›å»ºä»£ç†å¯¹è±¡</span></span><br><span class=\"line\">        Calculator proxy = <span class=\"keyword\">new</span> CalculatorProxy(target).createProxy();</span><br><span class=\"line\">        <span class=\"keyword\">int</span> a = <span class=\"number\">10</span>;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> b = <span class=\"number\">10</span>;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;res --&gt; &quot;</span> + proxy.add(a, b));</span><br><span class=\"line\"></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;res --&gt; &quot;</span> + proxy.mul(a, b));</span><br><span class=\"line\"></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;res --&gt; &quot;</span> + proxy.sub(a, b));</span><br><span class=\"line\"></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;res --&gt; &quot;</span> + proxy.div(a, b));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>åˆ°æ­¤å°±å®Œæˆäº†åœ¨ä¸æ”¹å˜<code>CalculatorImpl</code>ç±»çš„æºä»£ç çš„æƒ…å†µä¸‹ï¼Œå®ç°å¯¹è®¡ç®—å™¨çš„åŠŸèƒ½å¢åŠ ï¼Œå®ç°äº†æ—¥å¿—æ‰“å°çš„åŠŸèƒ½ã€‚æ­¤æ—¶æ§åˆ¶å°çš„æ‰“å°å†…å®¹ä¸º</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Sun Mar 17 20:36:26 CST 2019: The method add begins with [10, 10]</span><br><span class=\"line\">Sun Mar 17 20:36:26 CST 2019: The method add ends with 20</span><br><span class=\"line\">res --&gt; 20</span><br><span class=\"line\">Sun Mar 17 20:36:26 CST 2019: The method mul begins with [10, 10]</span><br><span class=\"line\">Sun Mar 17 20:36:26 CST 2019: The method mul ends with 100</span><br><span class=\"line\">res --&gt; 100</span><br><span class=\"line\">Sun Mar 17 20:36:26 CST 2019: The method sub begins with [10, 10]</span><br><span class=\"line\">Sun Mar 17 20:36:26 CST 2019: The method sub ends with 0</span><br><span class=\"line\">res --&gt; 0</span><br><span class=\"line\">Sun Mar 17 20:36:26 CST 2019: The method div begins with [10, 10]</span><br><span class=\"line\">Sun Mar 17 20:36:26 CST 2019: The method div ends with 1</span><br><span class=\"line\">res --&gt; 1</span><br></pre></td></tr></table></figure>\n<h3 id=\"cglibåŠ¨æ€ä»£ç†\">CglibåŠ¨æ€ä»£ç†<a title=\"#cglibåŠ¨æ€ä»£ç†\" href=\"#cglibåŠ¨æ€ä»£ç†\"></a></h3>\n<h4 id=\"cglibåŠ¨æ€ä»£ç†æ¡ˆä¾‹\">CglibåŠ¨æ€ä»£ç†æ¡ˆä¾‹<a title=\"#cglibåŠ¨æ€ä»£ç†æ¡ˆä¾‹\" href=\"#cglibåŠ¨æ€ä»£ç†æ¡ˆä¾‹\"></a></h4>\n<p>åŒæ ·æ¥å®ç°ä¸€ä¸ªå¯¹è®¡ç®—å™¨æ¥å¢åŠ æ‰“å°æ—¥å¿—åŠŸèƒ½</p>\n<p>é¦–å…ˆåˆ›å»ºè®¡ç®—å™¨ç±»<code>Calculator</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * è®¡ç®—å™¨ç±»</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> Chen Rui</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@version</span> 1.0</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Calculator</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">add</span><span class=\"params\">(<span class=\"keyword\">int</span> a, <span class=\"keyword\">int</span> b)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> a + b;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">sub</span><span class=\"params\">(<span class=\"keyword\">int</span> a, <span class=\"keyword\">int</span> b)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> a - b;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">mul</span><span class=\"params\">(<span class=\"keyword\">int</span> a, <span class=\"keyword\">int</span> b)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> a * b;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">div</span><span class=\"params\">(<span class=\"keyword\">int</span> a, <span class=\"keyword\">int</span> b)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (b == <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;é™¤æ•°ä¸èƒ½ä¸º0&quot;</span>);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span>  a / b;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>æ­¤æ—¶éœ€è¦å¯¼å…¥cglibçš„jaråŒ…ï¼Œåœ¨mavenä¸­æ·»åŠ ä¾èµ–</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>cglib<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>cglib<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.2.2<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>æ¥ç€åˆ›å»ºè®¡ç®—å™¨çš„ä»£ç†ç±»<code>CalculatorProxy</code>å¹¶ä¸”å®ç°<code>MethodInterceptor</code>æ¥å£å¹¶é‡å†™<code>intercept</code>æ–¹æ³•ã€‚</p>\n<p>åœ¨ç±»ä¸­é¦–å…ˆå®šä¹‰è¢«ä»£ç†çš„ç›®æ ‡å¯¹è±¡ï¼Œå¹¶é€šè¿‡æ„é€ å‡½æ•°è¿›è¡Œèµ‹å€¼ã€‚ç„¶ååˆ›å»º<code>createProxy()</code>æ–¹æ³•è¿”å›è¢«å¢å¼ºçš„è®¡ç®—å™¨å¯¹è±¡ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * è®¡ç®—å™¨ä»£ç†ç±»</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> Chen Rui</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@version</span> 1.0</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CalculatorProxy</span> <span class=\"keyword\">implements</span> <span class=\"title\">MethodInterceptor</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * è¢«ä»£ç†çš„å¯¹è±¡</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Calculator target;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">CalculatorProxy</span><span class=\"params\">(Calculator target)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.target = target;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Calculator <span class=\"title\">createProxy</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 1.åˆ›å»ºcglibçš„æ ¸å¿ƒç±»å¯¹è±¡</span></span><br><span class=\"line\">        Enhancer enhancer = <span class=\"keyword\">new</span> Enhancer();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 2.è®¾ç½®çˆ¶ç±»</span></span><br><span class=\"line\">        enhancer.setSuperclass(target.getClass());</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 3.è®¾ç½®å›è°ƒï¼ˆç±»ä¼¼äºjdkåŠ¨æ€ä»£ç†ä¸­çš„InvocationHandlerå¯¹è±¡ï¼‰</span></span><br><span class=\"line\">        enhancer.setCallback(<span class=\"keyword\">this</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 4.åˆ›å»ºä»£ç†å¯¹è±¡</span></span><br><span class=\"line\">        Calculator proxy = (Calculator) enhancer.create();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> proxy;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Object <span class=\"title\">intercept</span><span class=\"params\">(Object proxy, Method method, Object[] args, MethodProxy methodProxy)</span> <span class=\"keyword\">throws</span> Throwable </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// è·å–æ–¹æ³•å</span></span><br><span class=\"line\">        String methodName = method.getName();</span><br><span class=\"line\">        <span class=\"comment\">// è¾“å‡ºæ—¥å¿—é€»è¾‘</span></span><br><span class=\"line\">        System.out.println(<span class=\"keyword\">new</span> Date() + <span class=\"string\">&quot;: The method &quot;</span> + methodName + <span class=\"string\">&quot; begins with &quot;</span> + Arrays.asList(args));</span><br><span class=\"line\">        <span class=\"comment\">// æ‰§è¡Œæ–¹æ³•</span></span><br><span class=\"line\">        Object result = methodProxy.invokeSuper(proxy, args);</span><br><span class=\"line\">        <span class=\"comment\">// è¾“å‡ºæ—¥å¿—é€»è¾‘</span></span><br><span class=\"line\">        System.out.println(<span class=\"keyword\">new</span> Date() + <span class=\"string\">&quot;: The method &quot;</span> + methodName + <span class=\"string\">&quot; ends with &quot;</span> + result);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"springä¸­çš„aopå®ç°â€”â€”aspectj\">Springä¸­çš„AOPå®ç°â€”â€”AspectJ<a title=\"#springä¸­çš„aopå®ç°â€”â€”aspectj\" href=\"#springä¸­çš„aopå®ç°â€”â€”aspectj\"></a></h2>\n<h3 id=\"aopå¼€å‘ä¸­çš„ç›¸å…³æœ¯è¯­\">AOPå¼€å‘ä¸­çš„ç›¸å…³æœ¯è¯­<a title=\"#aopå¼€å‘ä¸­çš„ç›¸å…³æœ¯è¯­\" href=\"#aopå¼€å‘ä¸­çš„ç›¸å…³æœ¯è¯­\"></a></h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">UserDao</span></span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">save</span><span class=\"params\">()</span></span>&#123;&#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">query</span><span class=\"params\">()</span></span>&#123;&#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">update</span><span class=\"params\">()</span></span>&#123;&#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">delete</span><span class=\"params\">()</span></span>&#123;&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>joinpoint(è¿æ¥ç‚¹) ï¼š å¯ä»¥è¢«æ‹¦æˆªåˆ°çš„ç‚¹ã€‚save(), query(),update(),delete()æ–¹æ³•éƒ½å¯ä»¥å¢å¼ºï¼Œè¿™äº›æ–¹æ³•å°±å¯ä»¥ç§°ä¸ºè¿æ¥ç‚¹ã€‚</li>\n<li>pointcut(åˆ‡å…¥ç‚¹)ï¼šçœŸæ­£è¢«æ‹¦æˆªåˆ°çš„ç‚¹ã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼Œå¯ä»¥åªå¯¹save()æ–¹æ³•è¿›è¡Œå¢å¼ºï¼Œé‚£ä¹ˆsave()æ–¹æ³•å°±æ˜¯åˆ‡å…¥ç‚¹ã€‚</li>\n<li>advice(å¢å¼º)ï¼šæ–¹æ³•å±‚é¢çš„å¢å¼ºï¼Œç°åœ¨å¯ä»¥å¯¹save()æ–¹æ³•è¿›è¡Œæƒé™æ ¡éªŒï¼Œæƒé™æ ¡éªŒ(checkPri())çš„æ–¹æ³•ç§°ä¸ºå¢å¼ºã€‚</li>\n<li>introduction(å¼•ä»‹)ï¼šç±»å±‚é¢çš„å¢å¼ºã€‚</li>\n<li>target(ç›®æ ‡)ï¼šè¢«å¢å¼ºçš„å¯¹è±¡ã€‚</li>\n<li>weaving(ç»‡å…¥)ï¼šå°†å¢å¼º(advice)åº”ç”¨åˆ°ç›®æ ‡(target)çš„è¿‡ç¨‹</li>\n<li>proxy(ä»£ç†)ï¼šä»£ç†å¯¹è±¡ï¼Œè¢«å¢å¼ºä»¥åçš„ä»£ç†å¯¹è±¡</li>\n<li>aspect(åˆ‡é¢)ï¼šå¤šä¸ªå¢å¼º(advice)å’Œå¤šä¸ªåˆ‡å…¥ç‚¹(pointcut)çš„ç»„åˆ</li>\n</ul>\n<h3 id=\"aspectjçš„xmlé…ç½®æ¡ˆä¾‹\">AspectJçš„XMLé…ç½®æ¡ˆä¾‹<a title=\"#aspectjçš„xmlé…ç½®æ¡ˆä¾‹\" href=\"#aspectjçš„xmlé…ç½®æ¡ˆä¾‹\"></a></h3>\n<p>é¦–å…ˆåˆ›å»ºä¸€ä¸ªæ¥å£<code>ProductDao</code>ï¼Œåœ¨é‡Œé¢å®šä¹‰æ·»åŠ å•†å“ï¼ŒæŸ¥è¯¢å•†å“ï¼Œä¿®æ”¹å•†å“ï¼Œåˆ é™¤å•†å“æ–¹æ³•ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * ProductDao</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> Chen Rui</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@version</span> 1.0</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">ProductDao</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * æ·»åŠ å•†å“</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">save</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * åˆ é™¤å•†å“</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">delete</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ä¿®æ”¹å•†å“</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">modify</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * æŸ¥è¯¢å•†å“</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">query</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>æ¥ç€åˆ›å»ºä¸€ä¸ªç±»<code>ProductDaoImpl</code>æ¥å®ç°è¯¥æ¥å£</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * ProductDaoçš„å®ç°ç±»</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> Chen Rui</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@version</span> 1.0</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ProductDaoImpl</span> <span class=\"keyword\">implements</span> <span class=\"title\">ProductDao</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">save</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;æ·»åŠ å•†å“&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">delete</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;åˆ é™¤å•†å“&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">modify</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ä¿®æ”¹å•†å“&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">query</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;æŸ¥è¯¢å•†å“&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ç°åœ¨ç›®çš„å°±æ˜¯ç»™<code>save()</code>æ–¹æ³•è¿›è¡Œå¢å¼ºï¼Œä½¿å¾—åœ¨è°ƒç”¨<code>save()</code>æ–¹æ³•å‰è¿›è¡Œæƒé™æ ¡éªŒã€‚</p>\n<p>è¦å®ç°æ­¤åŠŸèƒ½ï¼Œå…ˆåˆ›å»ºä¸€ä¸ª<strong>å¢å¼ºç±»</strong>ï¼Œæˆ–è€…å«<strong>åˆ‡é¢ç±»</strong>ã€‚é‡Œé¢ç¼–å†™è¦å¢å¼ºçš„åŠŸèƒ½ï¼Œä¾‹å¦‚æƒé™æ ¡éªŒã€‚</p>\n<p>åˆ›å»ºå¢å¼ºç±»<code>ProductEnhancer</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * ProductDaoçš„å¢å¼ºç±»(åˆ‡é¢ç±»)</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> Chen Rui</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@version</span> 1.0</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ProductEnhancer</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">checkPri</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ã€å‰ç½®å¢å¼ºã€‘æƒé™æ ¡éªŒ&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ç„¶ååˆ›å»ºé…ç½®æ–‡ä»¶<code>aspectj-xml.xml</code>æ¥é…ç½®ï¼Œè¯¥æ–‡ä»¶åæ­¤æ¡ˆä¾‹ä»…ç”¨äºæ¼”ç¤ºï¼Œå®é™…å¼€å‘ä¸­ä¸è¦é‡‡å–æ­¤åï¼Œä¾æ®å®é™…éœ€æ±‚ç¼–å†™ã€‚</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">beans</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xmlns:aop</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">\thttp://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">    http://www.springframework.org/schema/aop</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">    http://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- é…ç½®ç›®æ ‡å¯¹è±¡ï¼Œå³è¢«å¢å¼ºçš„å¯¹è±¡ --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;productDao&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;learningspring.aop.aspectj.xml.demo2.ProductDaoImpl&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- å°†å¢å¼ºç±»(åˆ‡é¢ç±»)äº¤ç»™Springç®¡ç† --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;productEnhancer&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;learningspring.aop.aspectj.xml.demo2.ProductEnhancer&quot;</span>/&gt;</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- é€šè¿‡å¯¹AOPçš„é…ç½®å®Œæˆå¯¹ç›®æ ‡å¯¹è±¡äº§ç”Ÿä»£ç† --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">aop:config</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- è¡¨è¾¾å¼é…ç½®å“ªäº›ç±»çš„å“ªäº›æ–¹æ³•éœ€è¦è¿›è¡Œå¢å¼º --&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- å¯¹ProductDaoImplç±»ä¸­çš„saveæ–¹æ³•è¿›è¡Œå¢å¼º --&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!--</span></span><br><span class=\"line\"><span class=\"comment\">        â€œ*â€ è¡¨ç¤ºä»»æ„è¿”å›å€¼ç±»å‹</span></span><br><span class=\"line\"><span class=\"comment\">        â€œ..â€ è¡¨ç¤ºä»»æ„å‚æ•°</span></span><br><span class=\"line\"><span class=\"comment\">        --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">aop:pointcut</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;pointcut1&quot;</span> <span class=\"attr\">expression</span>=<span class=\"string\">&quot;execution(* learningspring.aop.aspectj.xml.demo2.ProductDaoImpl.save(..))&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- é…ç½®åˆ‡é¢ --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">aop:aspect</span> <span class=\"attr\">ref</span>=<span class=\"string\">&quot;productEnhancer&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"comment\">&lt;!-- å‰ç½®å¢å¼º --&gt;</span></span><br><span class=\"line\">            <span class=\"comment\">&lt;!-- å®ç°åœ¨è°ƒç”¨saveæ–¹æ³•ä¹‹å‰è°ƒç”¨checkPriæ–¹æ³•æ¥è¿›è¡Œæƒé™æ ¡éªŒ--&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">aop:before</span> <span class=\"attr\">method</span>=<span class=\"string\">&quot;checkPri&quot;</span> <span class=\"attr\">pointcut-ref</span>=<span class=\"string\">&quot;pointcut1&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">aop:aspect</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">aop:config</span>&gt;</span></span><br><span class=\"line\">    </span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>è‡³æ­¤åˆ‡å…¥ç‚¹åŠåˆ‡é¢éƒ½å·²é…ç½®å®Œæˆï¼Œç¼–å†™æµ‹è¯•ç±»å’Œæ–¹æ³•</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> org.junit.Test;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.junit.runner.RunWith;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.test.context.ContextConfiguration;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.test.context.junit4.SpringJUnit4ClassRunner;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.annotation.Resource;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * AspectJçš„XMLæ–¹å¼é…ç½®æµ‹è¯•ç±»</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> Chen Rui</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@version</span> 1.0</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class=\"line\"><span class=\"meta\">@ContextConfiguration(&quot;classpath:aspectj-xml.xml&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AppTest</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Resource(name = &quot;productDao&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> ProductDao productDao;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// å¯¹saveæ–¹æ³•è¿›è¡Œå¢å¼º</span></span><br><span class=\"line\">        productDao.save();</span><br><span class=\"line\"></span><br><span class=\"line\">        productDao.delete();</span><br><span class=\"line\">        </span><br><span class=\"line\">        productDao.modify();</span><br><span class=\"line\">        </span><br><span class=\"line\">        productDao.query();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>è¿è¡Œ<code>test()</code>æ–¹æ³•ï¼Œæ§åˆ¶å°æ‰“å°ç»“æœå¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ã€å‰ç½®å¢å¼ºã€‘æƒé™æ ¡éªŒ</span><br><span class=\"line\">æ·»åŠ å•†å“</span><br><span class=\"line\">åˆ é™¤å•†å“</span><br><span class=\"line\">ä¿®æ”¹å•†å“</span><br><span class=\"line\">æŸ¥è¯¢å•†å“</span><br></pre></td></tr></table></figure>\n<p>è‡³æ­¤å°±å®ç°äº†åœ¨ä¸ä¿®æ”¹<code>ProductDaoImpl</code>ç±»çš„æƒ…å†µä¸‹ï¼Œå¯¹å…¶ä¸­çš„<code>save()</code>æ–¹æ³•è¿›è¡Œå¢å¼ºã€‚</p>\n<h3 id=\"springä¸­å¸¸ç”¨çš„å¢å¼ºç±»å‹\">Springä¸­å¸¸ç”¨çš„å¢å¼ºç±»å‹<a title=\"#springä¸­å¸¸ç”¨çš„å¢å¼ºç±»å‹\" href=\"#springä¸­å¸¸ç”¨çš„å¢å¼ºç±»å‹\"></a></h3>\n<h4 id=\"å‰ç½®å¢å¼º\">å‰ç½®å¢å¼º<a title=\"#å‰ç½®å¢å¼º\" href=\"#å‰ç½®å¢å¼º\"></a></h4>\n<p>åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œä¹‹å‰æ‰§è¡Œï¼Œå¯ä»¥è·å¾—åˆ‡å…¥ç‚¹çš„ä¿¡æ¯</p>\n<p>ä¿®æ”¹ä¹‹å‰çš„<code>ProductEnhancer</code>ç±»çš„<code>checkPri()</code>æ–¹æ³•çš„å‚æ•°ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> org.aspectj.lang.JoinPoint;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * ProductDaoçš„å¢å¼ºç±»(åˆ‡é¢ç±»)</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> Chen Rui</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@version</span> 1.0</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ProductEnhancer</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">checkPri</span><span class=\"params\">(JoinPoint joinPoint)</span></span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ã€å‰ç½®å¢å¼ºã€‘æƒé™æ ¡éªŒ&quot;</span> + joinPoint);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>æ‰§è¡Œæµ‹è¯•æ–¹æ³•ï¼Œæ§åˆ¶å°è¾“å‡º</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ã€å‰ç½®å¢å¼ºã€‘æƒé™æ ¡éªŒexecution(void learningspring.aop.aspectj.xml.demo2.ProductDao.save())</span><br><span class=\"line\">æ·»åŠ å•†å“</span><br><span class=\"line\">åˆ é™¤å•†å“</span><br><span class=\"line\">ä¿®æ”¹å•†å“</span><br><span class=\"line\">æŸ¥è¯¢å•†å“</span><br></pre></td></tr></table></figure>\n<h4 id=\"åç½®å¢å¼º\">åç½®å¢å¼º<a title=\"#åç½®å¢å¼º\" href=\"#åç½®å¢å¼º\"></a></h4>\n<p>åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œä¹‹åæ‰§è¡Œï¼Œå¯ä»¥è·å¾—æ–¹æ³•çš„è¿”å›å€¼</p>\n<p>é¦–å…ˆä¿®æ”¹<code>ProductDao</code>ä¸­çš„<code>delete()</code>æ–¹æ³•çš„è¿”å›å€¼ç±»å‹ï¼Œæ”¹æˆString</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * ProductDao</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> Chen Rui</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@version</span> 1.0</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">ProductDao</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * æ·»åŠ å•†å“</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">save</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * åˆ é™¤å•†å“</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\">String <span class=\"title\">delete</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ä¿®æ”¹å•†å“</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">modify</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * æŸ¥è¯¢å•†å“</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">query</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>å†ä¿®æ”¹<code>ProductDaoImpl</code>ä¸­çš„<code>delete()</code>æ–¹æ³•</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * ProductDaoçš„å®ç°ç±»</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> Chen Rui</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@version</span> 1.0</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ProductDaoImpl</span> <span class=\"keyword\">implements</span> <span class=\"title\">ProductDao</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">save</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;æ·»åŠ å•†å“&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">delete</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;åˆ é™¤å•†å“&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Date().toString();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">modify</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ä¿®æ”¹å•†å“&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">query</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;æŸ¥è¯¢å•†å“&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ä¿®æ”¹<code>ProductEnhancer</code>ç±»ï¼Œæ·»åŠ <code>writeLog()</code>æ–¹æ³•ï¼Œå®ç°å†™æ—¥å¿—åŠŸèƒ½</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * ProductDaoçš„å¢å¼ºç±»(åˆ‡é¢ç±»)</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> Chen Rui</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@version</span> 1.0</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ProductEnhancer</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * å‰ç½®å¢å¼ºæ¡ˆä¾‹</span></span><br><span class=\"line\"><span class=\"comment\">     * åœ¨è°ƒç”¨saveæ–¹æ³•ä¹‹å‰è¿›è¡Œæƒé™æ ¡éªŒ</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> joinPoint åˆ‡å…¥ç‚¹å¯¹è±¡</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">checkPri</span><span class=\"params\">(JoinPoint joinPoint)</span></span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ã€å‰ç½®å¢å¼ºã€‘æƒé™æ ¡éªŒ&quot;</span> + joinPoint);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * åç½®å¢å¼ºæ¡ˆä¾‹</span></span><br><span class=\"line\"><span class=\"comment\">     * åœ¨è°ƒç”¨deleteæ–¹æ³•ä¹‹åï¼Œå†™å…¥æ—¥å¿—è®°å½•æ“ä½œæ—¶é—´</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> result ç›®æ ‡æ–¹æ³•è¿”å›çš„å¯¹è±¡</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">writeLog</span><span class=\"params\">(Object result)</span></span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ã€åç½®å¢å¼ºã€‘å†™å…¥æ—¥å¿— æ“ä½œæ—¶é—´ï¼š&quot;</span> + result.toString());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ç„¶åä¿®æ”¹<code>aspectj.xml</code>é…ç½®æ–‡ä»¶ï¼Œé…ç½®æ–°çš„<strong>åˆ‡å…¥ç‚¹</strong>å’Œ<strong>åˆ‡é¢</strong></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">beans</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xmlns:aop</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">\thttp://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">    http://www.springframework.org/schema/aop</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">    http://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- é…ç½®ç›®æ ‡å¯¹è±¡ï¼Œå³è¢«å¢å¼ºçš„å¯¹è±¡ --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;productDao&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;learningspring.aop.aspectj.xml.demo2.ProductDaoImpl&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- å°†å¢å¼ºç±»(åˆ‡é¢ç±»)äº¤ç»™Springç®¡ç† --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;productEnhancer&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;learningspring.aop.aspectj.xml.demo2.ProductEnhancer&quot;</span>/&gt;</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- é€šè¿‡å¯¹AOPçš„é…ç½®å®Œæˆå¯¹ç›®æ ‡å¯¹è±¡äº§ç”Ÿä»£ç† --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">aop:config</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- è¡¨è¾¾å¼é…ç½®å“ªäº›ç±»çš„å“ªäº›æ–¹æ³•éœ€è¦è¿›è¡Œå¢å¼º --&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- å¯¹ProductDaoImplç±»ä¸­çš„saveæ–¹æ³•è¿›è¡Œå¢å¼º --&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!--</span></span><br><span class=\"line\"><span class=\"comment\">        â€œ*â€ è¡¨ç¤ºä»»æ„è¿”å›å€¼ç±»å‹</span></span><br><span class=\"line\"><span class=\"comment\">        â€œ..â€ è¡¨ç¤ºä»»æ„å‚æ•°</span></span><br><span class=\"line\"><span class=\"comment\">        --&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- å‰ç½®å¢å¼ºçš„åˆ‡å…¥ç‚¹é…ç½® --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">aop:pointcut</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;pointcut1&quot;</span> <span class=\"attr\">expression</span>=<span class=\"string\">&quot;execution(* learningspring.aop.aspectj.xml.demo2.ProductDaoImpl.save(..))&quot;</span>/&gt;</span></span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- åç½®å¢å¼ºçš„åˆ‡å…¥ç‚¹é…ç½® --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">aop:pointcut</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;pointcut2&quot;</span> <span class=\"attr\">expression</span>=<span class=\"string\">&quot;execution(* learningspring.aop.aspectj.xml.demo2.ProductDaoImpl.delete(..))&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- é…ç½®åˆ‡é¢ --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">aop:aspect</span> <span class=\"attr\">ref</span>=<span class=\"string\">&quot;productEnhancer&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"comment\">&lt;!-- å‰ç½®å¢å¼º --&gt;</span></span><br><span class=\"line\">            <span class=\"comment\">&lt;!-- å®ç°åœ¨è°ƒç”¨saveæ–¹æ³•ä¹‹å‰è°ƒç”¨checkPriæ–¹æ³•æ¥è¿›è¡Œæƒé™æ ¡éªŒ--&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">aop:before</span> <span class=\"attr\">method</span>=<span class=\"string\">&quot;checkPri&quot;</span> <span class=\"attr\">pointcut-ref</span>=<span class=\"string\">&quot;pointcut1&quot;</span>/&gt;</span></span><br><span class=\"line\">            </span><br><span class=\"line\">            <span class=\"comment\">&lt;!-- åç½®å¢å¼º --&gt;</span></span><br><span class=\"line\">            <span class=\"comment\">&lt;!-- returningé‡Œé¢çš„å€¼å¿…é¡»å’ŒwriteLog()æ–¹æ³•é‡Œçš„å‚æ•°åç›¸åŒï¼Œæœ¬æ¡ˆä¾‹ä¸ºresult--&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">aop:after-returning</span> <span class=\"attr\">method</span>=<span class=\"string\">&quot;writeLog&quot;</span> <span class=\"attr\">returning</span>=<span class=\"string\">&quot;result&quot;</span> <span class=\"attr\">pointcut-ref</span>=<span class=\"string\">&quot;pointcut2&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">aop:aspect</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">aop:config</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>æ‰§è¡Œæµ‹è¯•æ–¹æ³•ï¼Œæ§åˆ¶å°æ‰“å°ç»“æœ</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ã€å‰ç½®å¢å¼ºã€‘æƒé™æ ¡éªŒexecution(void learningspring.aop.aspectj.xml.demo2.ProductDao.save())</span><br><span class=\"line\">æ·»åŠ å•†å“</span><br><span class=\"line\">åˆ é™¤å•†å“</span><br><span class=\"line\">ã€åç½®å¢å¼ºã€‘å†™å…¥æ—¥å¿— æ“ä½œæ—¶é—´ï¼šTue Mar 19 15:59:48 CST 2019</span><br><span class=\"line\">ä¿®æ”¹å•†å“</span><br><span class=\"line\">æŸ¥è¯¢å•†å“</span><br></pre></td></tr></table></figure>\n<h4 id=\"ç¯ç»•å¢å¼º\">ç¯ç»•å¢å¼º<a title=\"#ç¯ç»•å¢å¼º\" href=\"#ç¯ç»•å¢å¼º\"></a></h4>\n<p>åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œä¹‹å‰å’Œä¹‹åéƒ½æ‰§è¡Œ</p>\n<p>åˆ©ç”¨ç¯ç»•å¢å¼ºæ¥å®ç°åœ¨è°ƒç”¨<code>modify()</code>æ–¹æ³•å‰åè¿›è¡Œæ€§èƒ½ç›‘æ§</p>\n<p>é¦–å…ˆä¿®æ”¹<code>ProductEnhancer</code>ç±»ï¼Œæ·»åŠ <code>monitor()</code>æ–¹æ³•</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * ProductDaoçš„å¢å¼ºç±»(åˆ‡é¢ç±»)</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> Chen Rui</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@version</span> 1.0</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ProductEnhancer</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * å‰ç½®å¢å¼ºæ¡ˆä¾‹</span></span><br><span class=\"line\"><span class=\"comment\">     * åœ¨è°ƒç”¨saveæ–¹æ³•ä¹‹å‰è¿›è¡Œæƒé™æ ¡éªŒ</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> joinPoint åˆ‡å…¥ç‚¹å¯¹è±¡</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">checkPri</span><span class=\"params\">(JoinPoint joinPoint)</span></span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ã€å‰ç½®å¢å¼ºã€‘æƒé™æ ¡éªŒ&quot;</span> + joinPoint);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * åç½®å¢å¼ºæ¡ˆä¾‹</span></span><br><span class=\"line\"><span class=\"comment\">     * åœ¨è°ƒç”¨deleteæ–¹æ³•ä¹‹åï¼Œå†™å…¥æ—¥å¿—è®°å½•æ“ä½œæ—¶é—´</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> result ç›®æ ‡æ–¹æ³•è¿”å›çš„å¯¹è±¡</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">writeLog</span><span class=\"params\">(Object result)</span></span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ã€åç½®å¢å¼ºã€‘å†™å…¥æ—¥å¿— æ“ä½œæ—¶é—´ï¼š&quot;</span> + result.toString());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ç¯ç»•å¢å¼º</span></span><br><span class=\"line\"><span class=\"comment\">     * åœ¨è°ƒç”¨modifyæ–¹æ³•å‰åï¼Œæ˜¾ç¤ºæ€§èƒ½å‚æ•°</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> joinPoint åˆ‡å…¥ç‚¹å¯¹è±¡</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@throws</span> Throwable å¯æŠ›å‡ºçš„å¼‚å¸¸</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Object <span class=\"title\">monitor</span><span class=\"params\">(ProceedingJoinPoint joinPoint)</span> <span class=\"keyword\">throws</span> Throwable</span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ã€ç¯ç»•å¢å¼ºã€‘å½“å‰ç©ºé—²å†…å­˜&quot;</span> + Runtime.getRuntime().freeMemory()/(<span class=\"number\">1024</span> * <span class=\"number\">1024</span>) + <span class=\"string\">&quot;MB&quot;</span>);</span><br><span class=\"line\">        Object obj = joinPoint.proceed();</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ã€ç¯ç»•å¢å¼ºã€‘å½“å‰ç©ºé—²å†…å­˜&quot;</span> + Runtime.getRuntime().freeMemory()/(<span class=\"number\">1024</span> * <span class=\"number\">1024</span>) + <span class=\"string\">&quot;MB&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> obj;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ç„¶åå†ä¿®æ”¹<code>aspectj.xml</code>é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ æ–°çš„<strong>åˆ‡å…¥ç‚¹</strong>å’Œ<strong>åˆ‡é¢</strong></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">beans</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xmlns:aop</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">\thttp://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">    http://www.springframework.org/schema/aop</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">    http://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- é…ç½®ç›®æ ‡å¯¹è±¡ï¼Œå³è¢«å¢å¼ºçš„å¯¹è±¡ --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;productDao&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;learningspring.aop.aspectj.xml.demo2.ProductDaoImpl&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- å°†å¢å¼ºç±»(åˆ‡é¢ç±»)äº¤ç»™Springç®¡ç† --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;productEnhancer&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;learningspring.aop.aspectj.xml.demo2.ProductEnhancer&quot;</span>/&gt;</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- é€šè¿‡å¯¹AOPçš„é…ç½®å®Œæˆå¯¹ç›®æ ‡å¯¹è±¡äº§ç”Ÿä»£ç† --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">aop:config</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- è¡¨è¾¾å¼é…ç½®å“ªäº›ç±»çš„å“ªäº›æ–¹æ³•éœ€è¦è¿›è¡Œå¢å¼º --&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- å¯¹ProductDaoImplç±»ä¸­çš„saveæ–¹æ³•è¿›è¡Œå¢å¼º --&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!--</span></span><br><span class=\"line\"><span class=\"comment\">        â€œ*â€ è¡¨ç¤ºä»»æ„è¿”å›å€¼ç±»å‹</span></span><br><span class=\"line\"><span class=\"comment\">        â€œ..â€ è¡¨ç¤ºä»»æ„å‚æ•°</span></span><br><span class=\"line\"><span class=\"comment\">        --&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- å‰ç½®å¢å¼ºçš„åˆ‡å…¥ç‚¹é…ç½® --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">aop:pointcut</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;pointcut1&quot;</span> <span class=\"attr\">expression</span>=<span class=\"string\">&quot;execution(* learningspring.aop.aspectj.xml.demo2.ProductDaoImpl.save(..))&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- åç½®å¢å¼ºçš„åˆ‡å…¥ç‚¹é…ç½® --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">aop:pointcut</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;pointcut2&quot;</span> <span class=\"attr\">expression</span>=<span class=\"string\">&quot;execution(* learningspring.aop.aspectj.xml.demo2.ProductDaoImpl.delete(..))&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- ç¯ç»•å¢å¼ºçš„åˆ‡å…¥ç‚¹é…ç½® --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">aop:pointcut</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;pointcut3&quot;</span> <span class=\"attr\">expression</span>=<span class=\"string\">&quot;execution(* learningspring.aop.aspectj.xml.demo2.ProductDaoImpl.modify(..))&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- é…ç½®åˆ‡é¢ --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">aop:aspect</span> <span class=\"attr\">ref</span>=<span class=\"string\">&quot;productEnhancer&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"comment\">&lt;!-- å‰ç½®å¢å¼º --&gt;</span></span><br><span class=\"line\">            <span class=\"comment\">&lt;!-- å®ç°åœ¨è°ƒç”¨saveæ–¹æ³•ä¹‹å‰è°ƒç”¨checkPriæ–¹æ³•æ¥è¿›è¡Œæƒé™æ ¡éªŒ--&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">aop:before</span> <span class=\"attr\">method</span>=<span class=\"string\">&quot;checkPri&quot;</span> <span class=\"attr\">pointcut-ref</span>=<span class=\"string\">&quot;pointcut1&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">&lt;!-- åç½®å¢å¼º --&gt;</span></span><br><span class=\"line\">            <span class=\"comment\">&lt;!-- returningé‡Œé¢çš„å€¼å¿…é¡»å’ŒwriteLog()æ–¹æ³•é‡Œçš„å‚æ•°åç›¸åŒï¼Œæœ¬æ¡ˆä¾‹ä¸ºresult--&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">aop:after-returning</span> <span class=\"attr\">method</span>=<span class=\"string\">&quot;writeLog&quot;</span> <span class=\"attr\">returning</span>=<span class=\"string\">&quot;result&quot;</span> <span class=\"attr\">pointcut-ref</span>=<span class=\"string\">&quot;pointcut2&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">&lt;!-- ç¯ç»•å¢å¼º --&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">aop:around</span> <span class=\"attr\">method</span>=<span class=\"string\">&quot;monitor&quot;</span> <span class=\"attr\">pointcut-ref</span>=<span class=\"string\">&quot;pointcut3&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">aop:aspect</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">aop:config</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>è¿è¡Œæµ‹è¯•æ–¹æ³•ï¼Œæ§åˆ¶å°æ‰“å°ç»“æœï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ã€å‰ç½®å¢å¼ºã€‘æƒé™æ ¡éªŒexecution(void learningspring.aop.aspectj.xml.demo2.ProductDao.save())</span><br><span class=\"line\">æ·»åŠ å•†å“</span><br><span class=\"line\">åˆ é™¤å•†å“</span><br><span class=\"line\">ã€åç½®å¢å¼ºã€‘å†™å…¥æ—¥å¿— æ“ä½œæ—¶é—´ï¼šTue Mar 19 15:58:49 CST 2019</span><br><span class=\"line\">ã€ç¯ç»•å¢å¼ºã€‘å½“å‰ç©ºé—²å†…å­˜185MB</span><br><span class=\"line\">ä¿®æ”¹å•†å“</span><br><span class=\"line\">ã€ç¯ç»•å¢å¼ºã€‘å½“å‰ç©ºé—²å†…å­˜185MB</span><br><span class=\"line\">æŸ¥è¯¢å•†å“</span><br></pre></td></tr></table></figure>\n<h4 id=\"å¼‚å¸¸æŠ›å‡ºå¢å¼º\">å¼‚å¸¸æŠ›å‡ºå¢å¼º<a title=\"#å¼‚å¸¸æŠ›å‡ºå¢å¼º\" href=\"#å¼‚å¸¸æŠ›å‡ºå¢å¼º\"></a></h4>\n<p>åœ¨ç¨‹åºå‡ºç°å¼‚å¸¸æ—¶æ‰§è¡Œ</p>\n<p>åˆ©ç”¨å¼‚å¸¸æŠ›å‡ºå¢å¼ºæ¥å®ç°è·å–å¼‚å¸¸ä¿¡æ¯çš„åŠŸèƒ½</p>\n<p>é¦–å…ˆä¿®æ”¹<code>ProductDaoImpl</code>ä¸­çš„<code>query()</code>æ–¹æ³•ï¼Œä½¿è¯¥æ–¹æ³•æŠ›å‡ºå¼‚å¸¸</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * ProductDaoçš„å®ç°ç±»</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> Chen Rui</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@version</span> 1.0</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ProductDaoImpl</span> <span class=\"keyword\">implements</span> <span class=\"title\">ProductDao</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">save</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;æ·»åŠ å•†å“&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">query</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;æŸ¥è¯¢å•†å“&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">int</span> a = <span class=\"number\">1</span>/<span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">modify</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ä¿®æ”¹å•†å“&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">delete</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;åˆ é™¤å•†å“&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Date().toString();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>æ¥ç€ä¿®æ”¹<code>ProductEnhancer</code>ç±»ï¼Œæ·»åŠ <code>exception()</code>æ–¹æ³•</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * ProductDaoçš„å¢å¼ºç±»(åˆ‡é¢ç±»)</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> Chen Rui</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@version</span> 1.0</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ProductEnhancer</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * å‰ç½®å¢å¼ºæ¡ˆä¾‹</span></span><br><span class=\"line\"><span class=\"comment\">     * åœ¨è°ƒç”¨saveæ–¹æ³•ä¹‹å‰è¿›è¡Œæƒé™æ ¡éªŒ</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> joinPoint åˆ‡å…¥ç‚¹å¯¹è±¡</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">checkPri</span><span class=\"params\">(JoinPoint joinPoint)</span></span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ã€å‰ç½®å¢å¼ºã€‘æƒé™æ ¡éªŒ&quot;</span> + joinPoint);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * åç½®å¢å¼ºæ¡ˆä¾‹</span></span><br><span class=\"line\"><span class=\"comment\">     * åœ¨è°ƒç”¨deleteæ–¹æ³•ä¹‹åï¼Œå†™å…¥æ—¥å¿—è®°å½•æ“ä½œæ—¶é—´</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> result ç›®æ ‡æ–¹æ³•è¿”å›çš„å¯¹è±¡</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">writeLog</span><span class=\"params\">(Object result)</span></span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ã€åç½®å¢å¼ºã€‘å†™å…¥æ—¥å¿— æ“ä½œæ—¶é—´ï¼š&quot;</span> + result.toString());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ç¯ç»•å¢å¼º</span></span><br><span class=\"line\"><span class=\"comment\">     * åœ¨è°ƒç”¨modifyæ–¹æ³•å‰åï¼Œæ˜¾ç¤ºæ€§èƒ½å‚æ•°</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> joinPoint åˆ‡å…¥ç‚¹å¯¹è±¡</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@throws</span> Throwable å¯æŠ›å‡ºçš„å¼‚å¸¸</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Object <span class=\"title\">monitor</span><span class=\"params\">(ProceedingJoinPoint joinPoint)</span> <span class=\"keyword\">throws</span> Throwable</span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ã€ç¯ç»•å¢å¼ºã€‘å½“å‰ç©ºé—²å†…å­˜&quot;</span> + Runtime.getRuntime().freeMemory()/(<span class=\"number\">1024</span> * <span class=\"number\">1024</span>) + <span class=\"string\">&quot;MB&quot;</span>);</span><br><span class=\"line\">        Object obj = joinPoint.proceed();</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ã€ç¯ç»•å¢å¼ºã€‘å½“å‰ç©ºé—²å†…å­˜&quot;</span> + Runtime.getRuntime().freeMemory()/(<span class=\"number\">1024</span> * <span class=\"number\">1024</span>) + <span class=\"string\">&quot;MB&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> obj;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * å¼‚å¸¸æŠ›å‡ºå¢å¼º</span></span><br><span class=\"line\"><span class=\"comment\">     * åœ¨è°ƒç”¨queryæ—¶è‹¥æŠ›å‡ºå¼‚å¸¸åˆ™æ‰“å°å¼‚å¸¸ä¿¡æ¯</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> ex å¼‚å¸¸å¯¹è±¡</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">exception</span><span class=\"params\">(Throwable ex)</span></span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ã€å¼‚å¸¸æŠ›å‡ºå¢å¼ºã€‘&quot;</span> + <span class=\"string\">&quot;å¼‚å¸¸ä¿¡æ¯ï¼š&quot;</span> +ex.getMessage());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ç„¶åå†ä¿®æ”¹<code>aspectj-xml.xml</code>é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ æ–°çš„<strong>åˆ‡å…¥ç‚¹</strong>å’Œ<strong>åˆ‡é¢</strong></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">beans</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xmlns:aop</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">\thttp://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">    http://www.springframework.org/schema/aop</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">    http://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- é…ç½®ç›®æ ‡å¯¹è±¡ï¼Œå³è¢«å¢å¼ºçš„å¯¹è±¡ --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;productDao&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;learningspring.aop.aspectj.xml.demo2.ProductDaoImpl&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- å°†å¢å¼ºç±»(åˆ‡é¢ç±»)äº¤ç»™Springç®¡ç† --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;productEnhancer&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;learningspring.aop.aspectj.xml.demo2.ProductEnhancer&quot;</span>/&gt;</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- é€šè¿‡å¯¹AOPçš„é…ç½®å®Œæˆå¯¹ç›®æ ‡å¯¹è±¡äº§ç”Ÿä»£ç† --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">aop:config</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- è¡¨è¾¾å¼é…ç½®å“ªäº›ç±»çš„å“ªäº›æ–¹æ³•éœ€è¦è¿›è¡Œå¢å¼º --&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- å¯¹ProductDaoImplç±»ä¸­çš„saveæ–¹æ³•è¿›è¡Œå¢å¼º --&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!--</span></span><br><span class=\"line\"><span class=\"comment\">        â€œ*â€ è¡¨ç¤ºä»»æ„è¿”å›å€¼ç±»å‹</span></span><br><span class=\"line\"><span class=\"comment\">        â€œ..â€ è¡¨ç¤ºä»»æ„å‚æ•°</span></span><br><span class=\"line\"><span class=\"comment\">        --&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- å‰ç½®å¢å¼ºçš„åˆ‡å…¥ç‚¹é…ç½® --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">aop:pointcut</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;pointcut1&quot;</span> <span class=\"attr\">expression</span>=<span class=\"string\">&quot;execution(* learningspring.aop.aspectj.xml.demo2.ProductDaoImpl.save(..))&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- åç½®å¢å¼ºçš„åˆ‡å…¥ç‚¹é…ç½® --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">aop:pointcut</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;pointcut2&quot;</span> <span class=\"attr\">expression</span>=<span class=\"string\">&quot;execution(* learningspring.aop.aspectj.xml.demo2.ProductDaoImpl.delete(..))&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- ç¯ç»•å¢å¼ºçš„åˆ‡å…¥ç‚¹é…ç½® --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">aop:pointcut</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;pointcut3&quot;</span> <span class=\"attr\">expression</span>=<span class=\"string\">&quot;execution(* learningspring.aop.aspectj.xml.demo2.ProductDaoImpl.modify(..))&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- å¼‚å¸¸æŠ›å‡ºå¢å¼ºçš„åˆ‡å…¥ç‚¹é…ç½® --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">aop:pointcut</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;pointcut4&quot;</span> <span class=\"attr\">expression</span>=<span class=\"string\">&quot;execution(* learningspring.aop.aspectj.xml.demo2.ProductDaoImpl.query(..))&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- é…ç½®åˆ‡é¢ --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">aop:aspect</span> <span class=\"attr\">ref</span>=<span class=\"string\">&quot;productEnhancer&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"comment\">&lt;!-- å‰ç½®å¢å¼º --&gt;</span></span><br><span class=\"line\">            <span class=\"comment\">&lt;!-- å®ç°åœ¨è°ƒç”¨saveæ–¹æ³•ä¹‹å‰è°ƒç”¨checkPriæ–¹æ³•æ¥è¿›è¡Œæƒé™æ ¡éªŒ--&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">aop:before</span> <span class=\"attr\">method</span>=<span class=\"string\">&quot;checkPri&quot;</span> <span class=\"attr\">pointcut-ref</span>=<span class=\"string\">&quot;pointcut1&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">&lt;!-- åç½®å¢å¼º --&gt;</span></span><br><span class=\"line\">            <span class=\"comment\">&lt;!-- returningé‡Œé¢çš„å€¼å¿…é¡»å’ŒwriteLog()æ–¹æ³•é‡Œçš„å‚æ•°åç›¸åŒï¼Œæœ¬æ¡ˆä¾‹ä¸ºresult--&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">aop:after-returning</span> <span class=\"attr\">method</span>=<span class=\"string\">&quot;writeLog&quot;</span> <span class=\"attr\">returning</span>=<span class=\"string\">&quot;result&quot;</span> <span class=\"attr\">pointcut-ref</span>=<span class=\"string\">&quot;pointcut2&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">&lt;!-- ç¯ç»•å¢å¼º --&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">aop:around</span> <span class=\"attr\">method</span>=<span class=\"string\">&quot;monitor&quot;</span> <span class=\"attr\">pointcut-ref</span>=<span class=\"string\">&quot;pointcut3&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">&lt;!-- å¼‚å¸¸æŠ›å‡ºå¢å¼º --&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">aop:after-throwing</span> <span class=\"attr\">method</span>=<span class=\"string\">&quot;exception&quot;</span> <span class=\"attr\">throwing</span>=<span class=\"string\">&quot;ex&quot;</span> <span class=\"attr\">pointcut-ref</span>=<span class=\"string\">&quot;pointcut4&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">aop:aspect</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">aop:config</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>æœ€åæ‰§è¡Œæµ‹è¯•æ–¹æ³•ï¼Œæ§åˆ¶å°è¾“å‡ºç»“æœï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ã€å‰ç½®å¢å¼ºã€‘æƒé™æ ¡éªŒexecution(void learningspring.aop.aspectj.xml.demo2.ProductDao.save())</span><br><span class=\"line\">æ·»åŠ å•†å“</span><br><span class=\"line\">åˆ é™¤å•†å“</span><br><span class=\"line\">ã€åç½®å¢å¼ºã€‘å†™å…¥æ—¥å¿— æ“ä½œæ—¶é—´ï¼šTue Mar 19 15:58:16 CST 2019</span><br><span class=\"line\">ã€ç¯ç»•å¢å¼ºã€‘å½“å‰ç©ºé—²å†…å­˜183MB</span><br><span class=\"line\">ä¿®æ”¹å•†å“</span><br><span class=\"line\">ã€ç¯ç»•å¢å¼ºã€‘å½“å‰ç©ºé—²å†…å­˜183MB</span><br><span class=\"line\">æŸ¥è¯¢å•†å“</span><br><span class=\"line\">ã€å¼‚å¸¸æŠ›å‡ºå¢å¼ºã€‘å¼‚å¸¸ä¿¡æ¯ï¼š&#x2F; by zero</span><br></pre></td></tr></table></figure>\n<h4 id=\"æœ€ç»ˆå¢å¼º\">æœ€ç»ˆå¢å¼º<a title=\"#æœ€ç»ˆå¢å¼º\" href=\"#æœ€ç»ˆå¢å¼º\"></a></h4>\n<p>æ— è®ºä»£ç æ˜¯å¦æœ‰å¼‚å¸¸æœ€ç»ˆéƒ½ä¼šæ‰§è¡Œ</p>\n<p>ç»§ç»­åœ¨å¼‚å¸¸æŠ›å‡ºå¢å¼ºçš„ä»£ç ä¿®æ”¹ï¼Œå®ç°æ— è®ºæ˜¯å¦æŠ›å‡ºå¼‚å¸¸éƒ½ä¼šæ‰“å°å½“å‰æ—¶é—´ä¿¡æ¯</p>\n<p>é¦–å…ˆä¿®æ”¹<code>ProductEnhancer</code>ç±»ï¼Œæ·»åŠ <code>finallyAdvice()</code>æ–¹æ³•</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * ProductDaoçš„å¢å¼ºç±»(åˆ‡é¢ç±»)</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> Chen Rui</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@version</span> 1.0</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ProductEnhancer</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * å‰ç½®å¢å¼ºæ¡ˆä¾‹</span></span><br><span class=\"line\"><span class=\"comment\">     * åœ¨è°ƒç”¨saveæ–¹æ³•ä¹‹å‰è¿›è¡Œæƒé™æ ¡éªŒ</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> joinPoint åˆ‡å…¥ç‚¹å¯¹è±¡</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">checkPri</span><span class=\"params\">(JoinPoint joinPoint)</span></span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ã€å‰ç½®å¢å¼ºã€‘æƒé™æ ¡éªŒ&quot;</span> + joinPoint);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * åç½®å¢å¼ºæ¡ˆä¾‹</span></span><br><span class=\"line\"><span class=\"comment\">     * åœ¨è°ƒç”¨deleteæ–¹æ³•ä¹‹åï¼Œå†™å…¥æ—¥å¿—è®°å½•æ“ä½œæ—¶é—´</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> result ç›®æ ‡æ–¹æ³•è¿”å›çš„å¯¹è±¡</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">writeLog</span><span class=\"params\">(Object result)</span></span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ã€åç½®å¢å¼ºã€‘å†™å…¥æ—¥å¿— æ“ä½œæ—¶é—´ï¼š&quot;</span> + result.toString());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ç¯ç»•å¢å¼º</span></span><br><span class=\"line\"><span class=\"comment\">     * åœ¨è°ƒç”¨modifyæ–¹æ³•å‰åï¼Œæ˜¾ç¤ºæ€§èƒ½å‚æ•°</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> joinPoint åˆ‡å…¥ç‚¹å¯¹è±¡</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@throws</span> Throwable å¯æŠ›å‡ºçš„å¼‚å¸¸</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Object <span class=\"title\">monitor</span><span class=\"params\">(ProceedingJoinPoint joinPoint)</span> <span class=\"keyword\">throws</span> Throwable</span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ã€ç¯ç»•å¢å¼ºã€‘å½“å‰ç©ºé—²å†…å­˜&quot;</span> + Runtime.getRuntime().freeMemory()/(<span class=\"number\">1024</span> * <span class=\"number\">1024</span>) + <span class=\"string\">&quot;MB&quot;</span>);</span><br><span class=\"line\">        Object obj = joinPoint.proceed();</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ã€ç¯ç»•å¢å¼ºã€‘å½“å‰ç©ºé—²å†…å­˜&quot;</span> + Runtime.getRuntime().freeMemory()/(<span class=\"number\">1024</span> * <span class=\"number\">1024</span>) + <span class=\"string\">&quot;MB&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> obj;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * å¼‚å¸¸æŠ›å‡ºå¢å¼º</span></span><br><span class=\"line\"><span class=\"comment\">     * åœ¨è°ƒç”¨queryæ—¶è‹¥æŠ›å‡ºå¼‚å¸¸åˆ™æ‰“å°å¼‚å¸¸ä¿¡æ¯</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> ex å¼‚å¸¸å¯¹è±¡</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">exception</span><span class=\"params\">(Throwable ex)</span></span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ã€å¼‚å¸¸æŠ›å‡ºå¢å¼ºã€‘&quot;</span> + <span class=\"string\">&quot;å¼‚å¸¸ä¿¡æ¯ï¼š&quot;</span> +ex.getMessage());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * æœ€ç»ˆå¢å¼º</span></span><br><span class=\"line\"><span class=\"comment\">     * æ— è®ºqueryæ–¹æ³•æ˜¯å¦æŠ›å‡ºå¼‚å¸¸éƒ½æ‰“å°å½“å‰æ—¶é—´</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">finallyAdvice</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ã€æœ€ç»ˆå¢å¼ºã€‘&quot;</span> + <span class=\"keyword\">new</span> Date().toString());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ä¿®æ”¹<code>aspectj.xml</code>é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ æ–°çš„<strong>åˆ‡é¢</strong></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">beans</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xmlns:aop</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">\thttp://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">    http://www.springframework.org/schema/aop</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">    http://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- é…ç½®ç›®æ ‡å¯¹è±¡ï¼Œå³è¢«å¢å¼ºçš„å¯¹è±¡ --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;productDao&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;learningspring.aop.aspectj.xml.demo2.ProductDaoImpl&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- å°†å¢å¼ºç±»(åˆ‡é¢ç±»)äº¤ç»™Springç®¡ç† --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;productEnhancer&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;learningspring.aop.aspectj.xml.demo2.ProductEnhancer&quot;</span>/&gt;</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- é€šè¿‡å¯¹AOPçš„é…ç½®å®Œæˆå¯¹ç›®æ ‡å¯¹è±¡äº§ç”Ÿä»£ç† --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">aop:config</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- è¡¨è¾¾å¼é…ç½®å“ªäº›ç±»çš„å“ªäº›æ–¹æ³•éœ€è¦è¿›è¡Œå¢å¼º --&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- å¯¹ProductDaoImplç±»ä¸­çš„saveæ–¹æ³•è¿›è¡Œå¢å¼º --&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!--</span></span><br><span class=\"line\"><span class=\"comment\">        â€œ*â€ è¡¨ç¤ºä»»æ„è¿”å›å€¼ç±»å‹</span></span><br><span class=\"line\"><span class=\"comment\">        â€œ..â€ è¡¨ç¤ºä»»æ„å‚æ•°</span></span><br><span class=\"line\"><span class=\"comment\">        --&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- å‰ç½®å¢å¼ºçš„åˆ‡å…¥ç‚¹é…ç½® --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">aop:pointcut</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;pointcut1&quot;</span> <span class=\"attr\">expression</span>=<span class=\"string\">&quot;execution(* learningspring.aop.aspectj.xml.demo2.ProductDaoImpl.save(..))&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- åç½®å¢å¼ºçš„åˆ‡å…¥ç‚¹é…ç½® --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">aop:pointcut</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;pointcut2&quot;</span> <span class=\"attr\">expression</span>=<span class=\"string\">&quot;execution(* learningspring.aop.aspectj.xml.demo2.ProductDaoImpl.delete(..))&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- ç¯ç»•å¢å¼ºçš„åˆ‡å…¥ç‚¹é…ç½® --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">aop:pointcut</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;pointcut3&quot;</span> <span class=\"attr\">expression</span>=<span class=\"string\">&quot;execution(* learningspring.aop.aspectj.xml.demo2.ProductDaoImpl.modify(..))&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- å¼‚å¸¸æŠ›å‡ºå¢å¼ºçš„åˆ‡å…¥ç‚¹é…ç½® --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">aop:pointcut</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;pointcut4&quot;</span> <span class=\"attr\">expression</span>=<span class=\"string\">&quot;execution(* learningspring.aop.aspectj.xml.demo2.ProductDaoImpl.query(..))&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- é…ç½®åˆ‡é¢ --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">aop:aspect</span> <span class=\"attr\">ref</span>=<span class=\"string\">&quot;productEnhancer&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"comment\">&lt;!-- å‰ç½®å¢å¼º --&gt;</span></span><br><span class=\"line\">            <span class=\"comment\">&lt;!-- å®ç°åœ¨è°ƒç”¨saveæ–¹æ³•ä¹‹å‰è°ƒç”¨checkPriæ–¹æ³•æ¥è¿›è¡Œæƒé™æ ¡éªŒ--&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">aop:before</span> <span class=\"attr\">method</span>=<span class=\"string\">&quot;checkPri&quot;</span> <span class=\"attr\">pointcut-ref</span>=<span class=\"string\">&quot;pointcut1&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">&lt;!-- åç½®å¢å¼º --&gt;</span></span><br><span class=\"line\">            <span class=\"comment\">&lt;!-- returningé‡Œé¢çš„å€¼å¿…é¡»å’ŒwriteLog()æ–¹æ³•é‡Œçš„å‚æ•°åç›¸åŒï¼Œæœ¬æ¡ˆä¾‹ä¸ºresult--&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">aop:after-returning</span> <span class=\"attr\">method</span>=<span class=\"string\">&quot;writeLog&quot;</span> <span class=\"attr\">returning</span>=<span class=\"string\">&quot;result&quot;</span> <span class=\"attr\">pointcut-ref</span>=<span class=\"string\">&quot;pointcut2&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">&lt;!-- ç¯ç»•å¢å¼º --&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">aop:around</span> <span class=\"attr\">method</span>=<span class=\"string\">&quot;monitor&quot;</span> <span class=\"attr\">pointcut-ref</span>=<span class=\"string\">&quot;pointcut3&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">&lt;!-- å¼‚å¸¸æŠ›å‡ºå¢å¼º --&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">aop:after-throwing</span> <span class=\"attr\">method</span>=<span class=\"string\">&quot;exception&quot;</span> <span class=\"attr\">throwing</span>=<span class=\"string\">&quot;ex&quot;</span> <span class=\"attr\">pointcut-ref</span>=<span class=\"string\">&quot;pointcut4&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">&lt;!-- æœ€ç»ˆå¢å¼º --&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">aop:after</span> <span class=\"attr\">method</span>=<span class=\"string\">&quot;finallyAdvice&quot;</span> <span class=\"attr\">pointcut-ref</span>=<span class=\"string\">&quot;pointcut4&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">aop:aspect</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">aop:config</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>æœ€åè¿è¡Œæµ‹è¯•ä»£ç ï¼Œæ§åˆ¶å°è¾“å‡ºç»“æœï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ã€å‰ç½®å¢å¼ºã€‘æƒé™æ ¡éªŒexecution(void learningspring.aop.aspectj.xml.demo2.ProductDao.save())</span><br><span class=\"line\">æ·»åŠ å•†å“</span><br><span class=\"line\">åˆ é™¤å•†å“</span><br><span class=\"line\">ã€åç½®å¢å¼ºã€‘å†™å…¥æ—¥å¿— æ“ä½œæ—¶é—´ï¼šTue Mar 19 15:57:01 CST 2019</span><br><span class=\"line\">ã€ç¯ç»•å¢å¼ºã€‘å½“å‰ç©ºé—²å†…å­˜183MB</span><br><span class=\"line\">ä¿®æ”¹å•†å“</span><br><span class=\"line\">ã€ç¯ç»•å¢å¼ºã€‘å½“å‰ç©ºé—²å†…å­˜183MB</span><br><span class=\"line\">æŸ¥è¯¢å•†å“</span><br><span class=\"line\">ã€æœ€ç»ˆå¢å¼ºã€‘Tue Mar 19 15:57:01 CST 2019</span><br><span class=\"line\">ã€å¼‚å¸¸æŠ›å‡ºå¢å¼ºã€‘å¼‚å¸¸ä¿¡æ¯ï¼š&#x2F; by zero</span><br></pre></td></tr></table></figure>\n<h3 id=\"aopåˆ‡å…¥ç‚¹è¡¨è¾¾å¼è¯­æ³•\">AOPåˆ‡å…¥ç‚¹è¡¨è¾¾å¼è¯­æ³•<a title=\"#aopåˆ‡å…¥ç‚¹è¡¨è¾¾å¼è¯­æ³•\" href=\"#aopåˆ‡å…¥ç‚¹è¡¨è¾¾å¼è¯­æ³•\"></a></h3>\n<p>AOPåˆ‡å…¥ç‚¹è¡¨è¾¾å¼æ˜¯åŸºäºexecutionçš„å‡½æ•°å®Œæˆçš„</p>\n<p>è¯­æ³•ï¼š<strong>[è®¿é—®ä¿®é¥°ç¬¦] æ–¹æ³•è¿”å›å€¼ åŒ…å.ç±»å.æ–¹æ³•å(å‚æ•°)</strong></p>\n<p>â€œ*â€ è¡¨ç¤ºä»»æ„è¿”å›å€¼ç±»å‹ â€œâ€¦â€ è¡¨ç¤ºä»»æ„å‚æ•°</p>\n<ul>\n<li><code>public void learningspring.aop.aspectj.xml.demo2.ProductDaoImpl.save(..)</code>ï¼šå…·ä½“åˆ°æŸä¸ªå¢å¼ºçš„æ–¹æ³•</li>\n<li><code>* *.*.*.*Dao.save(..)</code>ï¼šæ‰€æœ‰åŒ…ä¸‹çš„æ‰€æœ‰ä»¥Daoç»“å°¾çš„ç±»ä¸­çš„saveæ–¹æ³•éƒ½ä¼šè¢«å¢å¼º</li>\n<li><code>* learningspring.aop.aspectj.xml.demo2.ProductDaoImpl+.save(..)</code>ï¼šProductDaoImplåŠå…¶å­ç±»çš„saveæ–¹æ³•éƒ½ä¼šè¢«å¢å¼º</li>\n<li><code>* learningspring.aop.aspectj.xml..*.*(..)</code>ï¼šxmlåŒ…åŠå…¶å­åŒ…çš„æ‰€æœ‰ç±»çš„æ–¹æ³•éƒ½ä¼šè¢«å¢å¼º</li>\n</ul>\n<h3 id=\"aspectjçš„æ³¨è§£é…ç½®æ¡ˆä¾‹\">AspectJçš„æ³¨è§£é…ç½®æ¡ˆä¾‹<a title=\"#aspectjçš„æ³¨è§£é…ç½®æ¡ˆä¾‹\" href=\"#aspectjçš„æ³¨è§£é…ç½®æ¡ˆä¾‹\"></a></h3>\n<p>é¦–å…ˆä¹Ÿæ˜¯åˆ›å»ºä¸€ä¸ªæ¥å£<code>ProductDao</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * ProductDaoæ¥å£</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> Chen Rui</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@version</span> 1.0</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">ProductDao</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * æ·»åŠ å•†å“</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">save</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * æŸ¥è¯¢å•†å“</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">query</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ä¿®æ”¹å•†å“</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">modify</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * åˆ é™¤å•†å“</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\">String <span class=\"title\">delete</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ç„¶ååˆ›å»ºä¸€ä¸ªDaoå®ç°ç±»<code>ProductDaoImpl</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * ProductDaoçš„å®ç°ç±»</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> Chen Rui</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@version</span> 1.0</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ProductDaoImpl</span> <span class=\"keyword\">implements</span> <span class=\"title\">ProductDao</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">save</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;æ·»åŠ å•†å“&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">delete</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;åˆ é™¤å•†å“&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Date().toString();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">modify</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ä¿®æ”¹å•†å“&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">query</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;æŸ¥è¯¢å•†å“&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">int</span> a = <span class=\"number\">1</span>/<span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>æ¥ç€åˆ›å»º<strong>å¢å¼ºç±»</strong><code>ProductEnhancer</code>ï¼Œåœ¨è¯¥ç±»é‡Œé¢ä½¿ç”¨æ³¨è§£</p>\n<p>ä½¿ç”¨<code>@Pointcut</code>æ³¨è§£å¯ä»¥é…ç½®åˆ‡å…¥ç‚¹ä¿¡æ¯ï¼Œåœ¨è¾ƒå¤šçš„æ–¹æ³•éƒ½è¦ä½¿ç”¨åŒä¸€ä¸ªå¢å¼ºæ—¶ï¼Œå°±å¯ä»¥é…ç½®ä¸€ä¸ªåˆ‡å…¥ç‚¹è®©ç›®æ ‡æ–¹æ³•éƒ½å»å¼•ç”¨</p>\n<p><code>@Before</code>ï¼šå‰ç½®å¢å¼º</p>\n<p><code>@AfterReturning</code>ï¼šåç½®å¢å¼ºï¼Œå…¶ä¸­çš„returningçš„å€¼å¿…é¡»å’Œæ–¹æ³•ä¼ å…¥çš„å‚æ•°åç›¸åŒ</p>\n<p><code>@Around</code>ï¼šç¯ç»•å¢å¼º</p>\n<p><code>@AfterThrowing</code>ï¼šå¼‚å¸¸æŠ›å‡ºå¢å¼ºï¼Œå…¶ä¸­çš„throwingçš„å€¼å¿…é¡»å’Œæ–¹æ³•ä¼ å…¥çš„å‚æ•°åç›¸åŒ</p>\n<p><code>@After</code>ï¼šæœ€ç»ˆå¢å¼º</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * ProductDaoçš„å¢å¼ºç±»(åˆ‡é¢ç±»)</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> Chen Rui</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@version</span> 1.0</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"meta\">@Aspect</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ProductEnhancer</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * åˆ‡å…¥ç‚¹é…ç½®</span></span><br><span class=\"line\"><span class=\"comment\">     * å¯¹ProductDaoImplé‡Œçš„æ–¹æ³•éƒ½å¢å¼º</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Pointcut(value = &quot;execution(* learningspring.aop.aspectj.annotation.demo2.ProductDaoImpl.*(..))&quot;)</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">pointcut1</span><span class=\"params\">()</span></span>&#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * å‰ç½®å¢å¼ºæ¡ˆä¾‹</span></span><br><span class=\"line\"><span class=\"comment\">     * åœ¨è°ƒç”¨saveæ–¹æ³•ä¹‹å‰è¿›è¡Œæƒé™æ ¡éªŒ</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> joinPoint åˆ‡å…¥ç‚¹å¯¹è±¡</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Before(value = &quot;execution(* learningspring.aop.aspectj.annotation.demo2.ProductDaoImpl.save())&quot;)</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">checkPri</span><span class=\"params\">(JoinPoint joinPoint)</span></span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ã€å‰ç½®å¢å¼ºã€‘æƒé™æ ¡éªŒ&quot;</span> + joinPoint);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * åç½®å¢å¼ºæ¡ˆä¾‹</span></span><br><span class=\"line\"><span class=\"comment\">     * åœ¨è°ƒç”¨deleteæ–¹æ³•ä¹‹åï¼Œå†™å…¥æ—¥å¿—è®°å½•æ“ä½œæ—¶é—´</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> result ç›®æ ‡æ–¹æ³•è¿”å›çš„å¯¹è±¡</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@AfterReturning(returning = &quot;result&quot;, value = &quot;execution(* learningspring.aop.aspectj.annotation.demo2.ProductDaoImpl.delete())&quot;)</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">writeLog</span><span class=\"params\">(Object result)</span></span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ã€åç½®å¢å¼ºã€‘å†™å…¥æ—¥å¿— æ“ä½œæ—¶é—´ï¼š&quot;</span> + result.toString());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ç¯ç»•å¢å¼º</span></span><br><span class=\"line\"><span class=\"comment\">     * åœ¨è°ƒç”¨modifyæ–¹æ³•å‰åï¼Œæ˜¾ç¤ºæ€§èƒ½å‚æ•°</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> joinPoint åˆ‡å…¥ç‚¹å¯¹è±¡</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@throws</span> Throwable å¯æŠ›å‡ºçš„å¼‚å¸¸</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Around(value = &quot;execution(* learningspring.aop.aspectj.annotation.demo2.ProductDaoImpl.modify())&quot;)</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Object <span class=\"title\">monitor</span><span class=\"params\">(ProceedingJoinPoint joinPoint)</span> <span class=\"keyword\">throws</span> Throwable</span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ã€ç¯ç»•å¢å¼ºã€‘å½“å‰ç©ºé—²å†…å­˜&quot;</span> + Runtime.getRuntime().freeMemory()/(<span class=\"number\">1024</span> * <span class=\"number\">1024</span>) + <span class=\"string\">&quot;MB&quot;</span>);</span><br><span class=\"line\">        Object obj = joinPoint.proceed();</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ã€ç¯ç»•å¢å¼ºã€‘å½“å‰ç©ºé—²å†…å­˜&quot;</span> + Runtime.getRuntime().freeMemory()/(<span class=\"number\">1024</span> * <span class=\"number\">1024</span>) + <span class=\"string\">&quot;MB&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> obj;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * å¼‚å¸¸æŠ›å‡ºå¢å¼º</span></span><br><span class=\"line\"><span class=\"comment\">     * åœ¨è°ƒç”¨queryæ—¶è‹¥æŠ›å‡ºå¼‚å¸¸åˆ™æ‰“å°å¼‚å¸¸ä¿¡æ¯</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> ex å¼‚å¸¸å¯¹è±¡</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@AfterThrowing(throwing = &quot;ex&quot;, value = &quot;execution(* learningspring.aop.aspectj.annotation.demo2.ProductDaoImpl.query())&quot;)</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">exception</span><span class=\"params\">(Throwable ex)</span></span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ã€å¼‚å¸¸æŠ›å‡ºå¢å¼ºã€‘&quot;</span> + <span class=\"string\">&quot;å¼‚å¸¸ä¿¡æ¯ï¼š&quot;</span> +ex.getMessage());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * æœ€ç»ˆå¢å¼º</span></span><br><span class=\"line\"><span class=\"comment\">     * æ— è®ºProductDaoImplé‡Œçš„æ¯ä¸ªæ–¹æ³•æ˜¯å¦æŠ›å‡ºå¼‚å¸¸éƒ½æ‰“å°å½“å‰æ—¶é—´</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@After(value = &quot;pointcut1()&quot;)</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">finallyAdvice</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ã€æœ€ç»ˆå¢å¼ºã€‘&quot;</span> + <span class=\"keyword\">new</span> Date().toString());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ç¼–å†™æµ‹è¯•æ–¹æ³•</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * AspectJçš„æ³¨è§£æ–¹å¼é…ç½®æµ‹è¯•ç±»</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> Chen Rui</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@version</span> 1.0</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class=\"line\"><span class=\"meta\">@ContextConfiguration(&quot;classpath:aspectj-annotation.xml&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AppTest</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Resource(name = &quot;productDao&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> ProductDao productDao;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        productDao.save();</span><br><span class=\"line\"></span><br><span class=\"line\">        productDao.delete();</span><br><span class=\"line\"></span><br><span class=\"line\">        productDao.modify();</span><br><span class=\"line\"></span><br><span class=\"line\">        productDao.query();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>è¿è¡Œï¼Œæ§åˆ¶å°è¾“å‡º</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ã€å‰ç½®å¢å¼ºã€‘æƒé™æ ¡éªŒexecution(void learningspring.aop.aspectj.annotation.demo2.ProductDao.save())</span><br><span class=\"line\">æ·»åŠ å•†å“</span><br><span class=\"line\">ã€æœ€ç»ˆå¢å¼ºã€‘Tue Mar 19 16:01:06 CST 2019</span><br><span class=\"line\">åˆ é™¤å•†å“</span><br><span class=\"line\">ã€æœ€ç»ˆå¢å¼ºã€‘Tue Mar 19 16:01:06 CST 2019</span><br><span class=\"line\">ã€åç½®å¢å¼ºã€‘å†™å…¥æ—¥å¿— æ“ä½œæ—¶é—´ï¼šTue Mar 19 16:01:06 CST 2019</span><br><span class=\"line\">ã€ç¯ç»•å¢å¼ºã€‘å½“å‰ç©ºé—²å†…å­˜186MB</span><br><span class=\"line\">ä¿®æ”¹å•†å“</span><br><span class=\"line\">ã€ç¯ç»•å¢å¼ºã€‘å½“å‰ç©ºé—²å†…å­˜186MB</span><br><span class=\"line\">ã€æœ€ç»ˆå¢å¼ºã€‘Tue Mar 19 16:01:06 CST 2019</span><br><span class=\"line\">æŸ¥è¯¢å•†å“</span><br><span class=\"line\">ã€æœ€ç»ˆå¢å¼ºã€‘Tue Mar 19 16:01:06 CST 2019</span><br><span class=\"line\">ã€å¼‚å¸¸æŠ›å‡ºå¢å¼ºã€‘å¼‚å¸¸ä¿¡æ¯ï¼š&#x2F; by zero</span><br></pre></td></tr></table></figure>\n<h1 id=\"spring-jdbc-template\">Spring JDBC Template<a title=\"#spring-jdbc-template\" href=\"#spring-jdbc-template\"></a></h1>\n<p>Springæä¾›äº†æä¾›äº†å¤šç§æŒä¹…å±‚æŠ€æœ¯çš„æ¨¡æ¿ç±»</p>\n<div class=\"Ï†cy\"><div class=\"Ï†da\"><table><thead>\n<tr>\n<th>ORMæŒä¹…åŒ–æŠ€æœ¯</th>\n<th>æ¨¡æ¿ç±»</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>JDBC</td>\n<td>org.springframework.jdbc.core.JdbcTemplate</td>\n</tr>\n<tr>\n<td>Hibernate3.0</td>\n<td>org.springframework.orm.hibernate3.HibernateTemplate</td>\n</tr>\n<tr>\n<td>IBatis(Mybatis)</td>\n<td>org.springframework.orm.ibatis.SqlMapClientTemplate</td>\n</tr>\n<tr>\n<td>JPA</td>\n<td>org.springframework.orm.jpa.JpaTemplate</td>\n</tr>\n</tbody>\n</table></div></div><h2 id=\"jdbc-templateçš„å…¥é—¨\">JDBC Templateçš„å…¥é—¨<a title=\"#jdbc-templateçš„å…¥é—¨\" href=\"#jdbc-templateçš„å…¥é—¨\"></a></h2>\n<p>é¦–å…ˆå¼•å…¥jaråŒ…ï¼Œåœ¨<code>pom.xml</code>æ–‡ä»¶ä¸­åŠ å…¥<code>spring-jdbc</code>ï¼Œ<code>spring-tx</code>ï¼Œ<code>mysql-connector-java</code>ï¼ˆæœ¬æ¡ˆä¾‹ä½¿ç”¨çš„æ˜¯MySQL8ï¼‰ä¸‰ä¸ªä¾èµ–ã€‚</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-jdbc<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>4.3.14.RELEASE<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-tx<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>4.3.14.RELEASE<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>mysql<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>mysql-connector-java<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>8.0.15<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>ç„¶ååˆ›å»ºæ•°æ®åº“è¡¨ï¼Œæœ¬ä¾‹ä½¿ç”¨çš„MySQL8</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">create table account</span><br><span class=\"line\">(</span><br><span class=\"line\">\tid int auto_increment</span><br><span class=\"line\">\t\tprimary key,</span><br><span class=\"line\">\tname varchar(8) not null,</span><br><span class=\"line\">\tmoney double default 0</span><br><span class=\"line\">)</span><br><span class=\"line\">comment &#39;è´¦æˆ·è¡¨&#39;;</span><br></pre></td></tr></table></figure>\n<h3 id=\"åŸºæœ¬ä½¿ç”¨\">åŸºæœ¬ä½¿ç”¨<a title=\"#åŸºæœ¬ä½¿ç”¨\" href=\"#åŸºæœ¬ä½¿ç”¨\"></a></h3>\n<p>æœ€åŸºæœ¬çš„ä½¿ç”¨ï¼Œä¸ä¾èµ–äºSpring çš„ç®¡ç†ï¼Œæ‰‹åŠ¨åˆ›å»ºå¯¹è±¡ï¼Œé‡‡ç”¨ç¡¬ç¼–ç çš„æ–¹å¼è¿›è¡Œå±æ€§æ³¨å…¥ã€‚ä¸æ¨èä½¿ç”¨è¯¥æ–¹æ³•ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AppTest</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ç¡¬ç¼–ç </span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test1</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// åˆ›å»ºè¿æ¥æ± </span></span><br><span class=\"line\">        DriverManagerDataSource dataSource = <span class=\"keyword\">new</span> DriverManagerDataSource();</span><br><span class=\"line\">        dataSource.setDriverClassName(<span class=\"string\">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);</span><br><span class=\"line\">        dataSource.setUrl(<span class=\"string\">&quot;jdbc:mysql://localhost:3306/springjdbc?useUnicode=true&amp;characterEncoding=utf-8&amp;serverTimezone=Asia/Shanghai&amp;useSSL=false &quot;</span>);</span><br><span class=\"line\">        dataSource.setUsername(<span class=\"string\">&quot;root&quot;</span>);</span><br><span class=\"line\">        dataSource.setPassword(<span class=\"string\">&quot;123456&quot;</span>);</span><br><span class=\"line\">        <span class=\"comment\">// åˆ›å»ºJDBC Template</span></span><br><span class=\"line\">        JdbcTemplate jdbcTemplate = <span class=\"keyword\">new</span> JdbcTemplate(dataSource);</span><br><span class=\"line\">        <span class=\"keyword\">int</span> i = jdbcTemplate.update(<span class=\"string\">&quot;INSERT INTO account VALUES (null ,?,?)&quot;</span>, <span class=\"string\">&quot;Tom&quot;</span>, <span class=\"number\">20000d</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (i &gt; <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;Update Successful&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>æ¥ä¸‹æ¥ä½¿ç”¨ç¬¬äºŒç§æ–¹æ³•ï¼ŒæŠŠè¿æ¥æ± å¯¹è±¡å’Œæ¨¡æ¿(Template)éƒ½äº¤ç»™Springæ¥ç®¡ç†</p>\n<p>åˆ›å»º<code>spring-jdbc.xml</code>è¯¥æ–‡ä»¶ç”¨æ¥ç®¡ç†Bean</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">beans</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- é…ç½®æ•°æ®åº“è¿æ¥æ±  --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;dataSource&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;driverClassName&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;url&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;jdbc:mysql://localhost:3306/springjdbc?useUnicode=true<span class=\"symbol\">&amp;amp;</span>characterEncoding=utf-8<span class=\"symbol\">&amp;amp;</span>serverTimezone=Asia/Shanghai<span class=\"symbol\">&amp;amp;</span>useSSL=false&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;username&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;root&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;password&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;123456&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- é…ç½®Spring JDBC Template --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;jdbcTemplate&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;org.springframework.jdbc.core.JdbcTemplate&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;dataSource&quot;</span> <span class=\"attr\">ref</span>=<span class=\"string\">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>åœ¨æµ‹è¯•ç±»ä¸­åŠ å…¥ç›¸åº”çš„æ³¨è§£ï¼Œä»¥åŠé…ç½®æ–‡ä»¶ä¿¡æ¯ï¼Œç¼–å†™æ–°çš„æµ‹è¯•æ–¹æ³•</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Spring JDBC Templateçš„ä½¿ç”¨</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> Chen Rui</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@version</span> 1.0</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"meta\">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class=\"line\"><span class=\"meta\">@ContextConfiguration(&quot;classpath:spring-jdbc.xml&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AppTest</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Spring é…ç½®æ–‡ä»¶æ–¹å¼</span></span><br><span class=\"line\"><span class=\"comment\">     * æŠŠè¿æ¥æ± å’Œæ¨¡æ¿(Template)éƒ½äº¤ç»™springç®¡ç†</span></span><br><span class=\"line\"><span class=\"comment\">     * æ—¥å¿—ä¿¡æ¯ï¼šLoaded JDBC driver: com.mysql.cj.jdbc.Driver</span></span><br><span class=\"line\"><span class=\"comment\">     * æ˜¯ä½¿ç”¨çš„é»˜è®¤çš„è¿æ¥æ± </span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Resource(name = &quot;jdbcTemplate&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> JdbcTemplate jdbcTemplate;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test2</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> i = jdbcTemplate.update(<span class=\"string\">&quot;INSERT INTO account VALUES (null ,?,?)&quot;</span>, <span class=\"string\">&quot;Jack&quot;</span>, <span class=\"number\">30000d</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (i &gt; <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;Update Successful&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<p>é€šè¿‡<code>@Resource</code>æ³¨è§£ä»IOCå®¹å™¨ä¸­è·å–åˆ°æ¨¡æ¿å¯¹è±¡ï¼Œç„¶åé€šè¿‡è¯¥æ¨¡æ¿å¯¹è±¡æ¥æ“ä½œæ•°æ®åº“ã€‚</p>\n<p>è¿™æ ·å°±å®Œæˆäº†Spring JDBC Templateçš„æœ€åŸºæœ¬ä½¿ç”¨</p>\n<h3 id=\"æ•°æ®åº“è¿æ¥æ± \">æ•°æ®åº“è¿æ¥æ± <a title=\"#æ•°æ®åº“è¿æ¥æ± \" href=\"#æ•°æ®åº“è¿æ¥æ± \"></a></h3>\n<p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œå¯èƒ½å¹¶ä¸ä¼šä½¿ç”¨é»˜è®¤çš„è¿æ¥æ± ï¼Œè€Œæ˜¯å»ä½¿ç”¨ä¸€äº›å¼€æºçš„æ•°æ®åº“è¿æ¥æ± ï¼Œåœ¨è¯¥ä¾‹ä¸­ä»‹ç»ä¸¤ç§æ•°æ®åº“è¿æ¥æ± DBCPå’ŒC3P0</p>\n<h4 id=\"dbcpè¿æ¥æ± çš„é…ç½®\">DBCPè¿æ¥æ± çš„é…ç½®<a title=\"#dbcpè¿æ¥æ± çš„é…ç½®\" href=\"#dbcpè¿æ¥æ± çš„é…ç½®\"></a></h4>\n<p>é¦–å…ˆåˆ›å»ºè¿æ¥æ•°æ®åº“çš„é…ç½®æ–‡ä»¶<code>db.properties</code>ï¼Œæ³¨æ„ï¼Œä¸åŒçš„MySQLç‰ˆæœ¬å¯èƒ½urlä¿¡æ¯ä¼šä¸åŒï¼Œæ¯”å¦‚MySQL8å°±éœ€è¦æ·»åŠ <code>serverTimezone</code>å‚æ•°ã€‚</p>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">jdbc.driverClassName</span>=<span class=\"string\">com.mysql.cj.jdbc.Driver</span></span><br><span class=\"line\"><span class=\"meta\">jdbc.url</span>=<span class=\"string\">jdbc:mysql://localhost:3306/springjdbc?useUnicode=true&amp;characterEncoding=utf-8&amp;serverTimezone=Asia/Shanghai&amp;useSSL=false </span></span><br><span class=\"line\"><span class=\"meta\">jdbc.username</span>=<span class=\"string\">root</span></span><br><span class=\"line\"><span class=\"meta\">jdbc.password</span>=<span class=\"string\">123456</span></span><br></pre></td></tr></table></figure>\n<p>æ¥ç€åˆ›å»ºä¸€ä¸ªæ–°çš„é…ç½®æ–‡ä»¶<code>spring-dbcp.xml</code>å’Œå‰é¢çš„é…ç½®æ–‡ä»¶åšåŒºåˆ†ã€‚</p>\n<p>åˆ©ç”¨<code>context:property-placeholder</code>æ ‡ç­¾å¼•å…¥<code>db.properties</code>é…ç½®æ–‡ä»¶ï¼Œé€šè¿‡<code>$&#123;key&#125;</code>çš„æ–¹å¼æ¥è·å–å¯¹åº”çš„valueã€‚</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">beans</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xmlns:context</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- å¼•å…¥æ•°æ®åº“é…ç½®æ–‡ä»¶ --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">context:property-placeholder</span> <span class=\"attr\">location</span>=<span class=\"string\">&quot;db.properties&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- é…ç½®DBCPè¿æ¥æ±  --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;dataSource&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;org.apache.commons.dbcp2.BasicDataSource&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;driverClassName&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$&#123;jdbc.driverClassName&#125;&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;url&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;username&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$&#123;jdbc.username&#125;&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;password&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- é…ç½®Spring JDBC Template --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;jdbcTemplateDBCP&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;org.springframework.jdbc.core.JdbcTemplate&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;dataSource&quot;</span> <span class=\"attr\">ref</span>=<span class=\"string\">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>ç¼–å†™æµ‹è¯•æ–¹æ³•</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Spring JDBC Templateçš„ä½¿ç”¨</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> Chen Rui</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@version</span> 1.0</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"meta\">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class=\"line\"><span class=\"meta\">@ContextConfiguration(&quot;classpath:spring-dbcp.xml&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AppTest</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//ä½¿ç”¨å¼€æºçš„æ•°æ®åº“è¿æ¥æ± è¿›è¡Œé…ç½®</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ä½¿ç”¨DBCPè¿æ¥æ± </span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Resource(name = &quot;jdbcTemplateDBCP&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> JdbcTemplate jdbcTemplateDBCP;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test3</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> i = jdbcTemplateDBCP.update(<span class=\"string\">&quot;INSERT INTO account VALUES (null ,?,?)&quot;</span>, <span class=\"string\">&quot;Lucy&quot;</span>, <span class=\"number\">40000d</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (i &gt; <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;Update Successful&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"c3p0è¿æ¥æ± é…ç½®\">C3P0è¿æ¥æ± é…ç½®<a title=\"#c3p0è¿æ¥æ± é…ç½®\" href=\"#c3p0è¿æ¥æ± é…ç½®\"></a></h4>\n<p>åŒæ ·æ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„é…ç½®æ–‡ä»¶<code>spring-c3p0.xml</code>ï¼Œä»¥ä½œåŒºåˆ†ï¼ŒåŒæ—¶ä¹Ÿè¦å¼•å…¥æ•°æ®åº“é…ç½®æ–‡ä»¶<code>db.properties</code></p>\n<p>è¦æ³¨æ„<code>property</code>æ ‡ç­¾çš„<code>name</code>å±æ€§å’Œå‰é¢çš„é…ç½®æ–‡ä»¶<strong>ç¨æœ‰ä¸åŒ</strong></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">beans</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xmlns:context</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">\thttp://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">\thttp://www.springframework.org/schema/context</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">\thttp://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- å¼•å…¥æ•°æ®åº“é…ç½®æ–‡ä»¶ --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">context:property-placeholder</span> <span class=\"attr\">location</span>=<span class=\"string\">&quot;db.properties&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- é…ç½®C3P0è¿æ¥æ±  --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;dataSource&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;driverClass&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$&#123;jdbc.driverClassName&#125;&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;jdbcUrl&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;user&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$&#123;jdbc.username&#125;&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;password&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- é…ç½®Spring JDBC Template --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;jdbcTemplateC3P0&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;org.springframework.jdbc.core.JdbcTemplate&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;dataSource&quot;</span> <span class=\"attr\">ref</span>=<span class=\"string\">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>ç¼–å†™æµ‹è¯•æ–¹æ³•</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Spring JDBC Templateçš„ä½¿ç”¨</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> Chen Rui</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@version</span> 1.0</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"meta\">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class=\"line\"><span class=\"meta\">@ContextConfiguration(&quot;classpath:spring-*.xml&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AppTest</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//ä½¿ç”¨å¼€æºçš„æ•°æ®åº“è¿æ¥æ± è¿›è¡Œé…ç½®</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ä½¿ç”¨C3P0è¿æ¥æ± </span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Resource(name = &quot;jdbcTemplateC3P0&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> JdbcTemplate jdbcTemplateC3P0;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test4</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> i = jdbcTemplateC3P0.update(<span class=\"string\">&quot;INSERT INTO account VALUES (null ,?,?)&quot;</span>, <span class=\"string\">&quot;Lily&quot;</span>, <span class=\"number\">50000d</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (i &gt; <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;Update Successful&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"å®ŒæˆåŸºæœ¬çš„crudæ“ä½œ\">å®ŒæˆåŸºæœ¬çš„CRUDæ“ä½œ<a title=\"#å®ŒæˆåŸºæœ¬çš„crudæ“ä½œ\" href=\"#å®ŒæˆåŸºæœ¬çš„crudæ“ä½œ\"></a></h3>\n<p>ä»¥ä¸‹å†…å®¹éƒ½æ˜¯ä½¿ç”¨çš„<strong>C3P0è¿æ¥æ± </strong>ï¼Œå¹¶ä¸”é€šè¿‡<code>@Resource</code>æ³¨è§£ä»IOCå®¹å™¨ä¸­è·å–äº†<code>jdbcTemplateC3P0</code>å¯¹è±¡</p>\n<h4 id=\"æ’å…¥æ“ä½œ\">æ’å…¥æ“ä½œ<a title=\"#æ’å…¥æ“ä½œ\" href=\"#æ’å…¥æ“ä½œ\"></a></h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * æ’å…¥æ“ä½œ</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> i = jdbcTemplateC3P0.update(<span class=\"string\">&quot;INSERT INTO account VALUES (null ,?,?)&quot;</span>, <span class=\"string\">&quot;Lily&quot;</span>, <span class=\"number\">50000d</span>);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (i &gt; <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Update Successful&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"ä¿®æ”¹æ“ä½œ\">ä¿®æ”¹æ“ä½œ<a title=\"#ä¿®æ”¹æ“ä½œ\" href=\"#ä¿®æ”¹æ“ä½œ\"></a></h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * ä¿®æ”¹æ“ä½œ</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> i = jdbcTemplateC3P0.update(<span class=\"string\">&quot;UPDATE account SET name = ? WHERE id = ?&quot;</span>, <span class=\"string\">&quot;Bob&quot;</span>, <span class=\"number\">1</span>);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (i &gt; <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Update Successful&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"åˆ é™¤æ“ä½œ\">åˆ é™¤æ“ä½œ<a title=\"#åˆ é™¤æ“ä½œ\" href=\"#åˆ é™¤æ“ä½œ\"></a></h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * åˆ é™¤æ“ä½œ</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> i = jdbcTemplateC3P0.update(<span class=\"string\">&quot;DELETE FROM account WHERE id = ?&quot;</span>, <span class=\"number\">2</span>);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (i &gt; <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Delete Successful&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"æŸ¥è¯¢æ“ä½œ\">æŸ¥è¯¢æ“ä½œ<a title=\"#æŸ¥è¯¢æ“ä½œ\" href=\"#æŸ¥è¯¢æ“ä½œ\"></a></h4>\n<h5 id=\"æŸ¥è¯¢æŸä¸ªå±æ€§\">æŸ¥è¯¢æŸä¸ªå±æ€§<a title=\"#æŸ¥è¯¢æŸä¸ªå±æ€§\" href=\"#æŸ¥è¯¢æŸä¸ªå±æ€§\"></a></h5>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * æŸ¥è¯¢æ“ä½œ</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * æŸ¥è¯¢å•ä¸ªå­—ç¬¦ä¸²ç»“æœ</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    String result = jdbcTemplateC3P0.queryForObject(<span class=\"string\">&quot;SELECT name FROM account WHERE id = ?&quot;</span>, String.class, <span class=\"number\">1</span>);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (result != <span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">        System.out.println(result);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;NULL&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * ç»Ÿè®¡æŸ¥è¯¢</span></span><br><span class=\"line\"><span class=\"comment\"> * è¿”å›æ•°æ®è¡¨ä¸­çš„è®°å½•æ•°</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    Long result = jdbcTemplateC3P0.queryForObject(<span class=\"string\">&quot;SELECT COUNT(*) FROM account&quot;</span>, Long.class);</span><br><span class=\"line\">    System.out.println(result);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h5 id=\"æŸ¥è¯¢è¿”å›å•ä¸ªå¯¹è±¡\">æŸ¥è¯¢è¿”å›å•ä¸ªå¯¹è±¡<a title=\"#æŸ¥è¯¢è¿”å›å•ä¸ªå¯¹è±¡\" href=\"#æŸ¥è¯¢è¿”å›å•ä¸ªå¯¹è±¡\"></a></h5>\n<p>è¦å®ç°æŸ¥è¯¢çš„æ•°æ®å°è£…æˆä¸€ä¸ªå¯¹è±¡çš„è¯ï¼ŒæŸ¥è¯¢<code>queryForObject</code>çš„å‚æ•°åˆ—è¡¨å¯çŸ¥éœ€è¦ä¸€ä¸ª<code>rowMapper</code>çš„å‚æ•°ã€‚æ‰€ä»¥éœ€è¦åˆ›å»ºä¸€ä¸ªæ‰§è¡Œæ•°æ®å°è£…çš„ç±»æ¥å®ç°<code>RowMapper</code>æ¥å£é‡Œçš„<code>mapRow</code>æ–¹æ³•ï¼Œåœ¨è¿™ä¸ªæ–¹æ³•é‡Œè¿›è¡Œæ•°æ®å¯¹è±¡çš„å°è£…ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * æ•°æ®å°è£…ç±»</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> Chen Rui</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@version</span> 1.0</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyRowMapper</span> <span class=\"keyword\">implements</span> <span class=\"title\">RowMapper</span>&lt;<span class=\"title\">Account</span>&gt; </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Account <span class=\"title\">mapRow</span><span class=\"params\">(ResultSet rs, <span class=\"keyword\">int</span> rowNum)</span> <span class=\"keyword\">throws</span> SQLException </span>&#123;</span><br><span class=\"line\">        Account account = <span class=\"keyword\">new</span> Account();</span><br><span class=\"line\">        account.setId(rs.getInt(<span class=\"string\">&quot;id&quot;</span>));</span><br><span class=\"line\">        account.setName(rs.getString(<span class=\"string\">&quot;name&quot;</span>));</span><br><span class=\"line\">        account.setMoney(rs.getDouble(<span class=\"string\">&quot;money&quot;</span>));</span><br><span class=\"line\">        <span class=\"keyword\">return</span> account;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ç¼–å†™æµ‹è¯•æ–¹æ³•</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å°†æŸ¥è¯¢çš„ç»“æœå°è£…æˆå¯¹è±¡</span></span><br><span class=\"line\"><span class=\"comment\"> * è¦åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰rowMapperæ¥å®ç°RowMapperæ¥å£</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    Account account = jdbcTemplateC3P0.queryForObject(<span class=\"string\">&quot;SELECT * FROM account WHERE id = ?&quot;</span>, <span class=\"keyword\">new</span> MyRowMapper(), <span class=\"number\">1</span>);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (account != <span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">        System.out.println(account);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;NULL&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h5 id=\"æŸ¥è¯¢è¿”å›å¯¹è±¡é›†åˆ\">æŸ¥è¯¢è¿”å›å¯¹è±¡é›†åˆ<a title=\"#æŸ¥è¯¢è¿”å›å¯¹è±¡é›†åˆ\" href=\"#æŸ¥è¯¢è¿”å›å¯¹è±¡é›†åˆ\"></a></h5>\n<p>è¦å®ç°æŸ¥è¯¢è¿”å›å¯¹è±¡é›†åˆä¾ç„¶éœ€è¦è‡ªå®šä¹‰ç±»å®ç°<code>RowMapper</code>æ¥å£ï¼Œè°ƒç”¨çš„æ˜¯<code>query</code>æ–¹æ³•</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * æŸ¥è¯¢å¤šæ¡è®°å½•</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test10</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    List&lt;Account&gt; accounts = jdbcTemplateC3P0.query(<span class=\"string\">&quot;SELECT * FROM account&quot;</span>, <span class=\"keyword\">new</span> MyRowMapper());</span><br><span class=\"line\">    accounts.forEach(System.out::println);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"springäº‹åŠ¡ç®¡ç†\">Springäº‹åŠ¡ç®¡ç†<a title=\"#springäº‹åŠ¡ç®¡ç†\" href=\"#springäº‹åŠ¡ç®¡ç†\"></a></h1>\n<h2 id=\"ä»€ä¹ˆæ˜¯äº‹åŠ¡\">ä»€ä¹ˆæ˜¯äº‹åŠ¡<a title=\"#ä»€ä¹ˆæ˜¯äº‹åŠ¡\" href=\"#ä»€ä¹ˆæ˜¯äº‹åŠ¡\"></a></h2>\n<p>äº‹åŠ¡ï¼šé€»è¾‘ä¸Šçš„ä¸€ç»„æ“ä½œï¼Œç»„æˆè¿™ç»„æ“ä½œçš„å„ä¸ªå•å…ƒï¼Œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ã€‚</p>\n<h2 id=\"äº‹åŠ¡çš„ç‰¹æ€§\">äº‹åŠ¡çš„ç‰¹æ€§<a title=\"#äº‹åŠ¡çš„ç‰¹æ€§\" href=\"#äº‹åŠ¡çš„ç‰¹æ€§\"></a></h2>\n<ul>\n<li>åŸå­æ€§ï¼šäº‹åŠ¡ä¸å¯åˆ†å‰²</li>\n<li>ä¸€è‡´æ€§ï¼šäº‹åŠ¡æ‰§è¡Œå‰åæ•°æ®å®Œæ•´æ€§ä¿æŒä¸€è‡´</li>\n<li>éš”ç¦»æ€§ï¼šä¸€ä¸ªäº‹åŠ¡çš„æ‰§è¡Œä¸åº”è¯¥å—åˆ°å…¶ä»–äº‹åŠ¡çš„å¹²æ‰°</li>\n<li>æŒä¹…æ€§ï¼šä¸€æ—¦äº‹åŠ¡ç»“æŸï¼Œæ•°æ®å°±æŒä¹…åŒ–åˆ°æ•°æ®åº“</li>\n</ul>\n<h2 id=\"ä¸è€ƒè™‘éš”ç¦»æ€§å¼•å‘çš„å®‰å…¨æ€§é—®é¢˜\">ä¸è€ƒè™‘éš”ç¦»æ€§å¼•å‘çš„å®‰å…¨æ€§é—®é¢˜<a title=\"#ä¸è€ƒè™‘éš”ç¦»æ€§å¼•å‘çš„å®‰å…¨æ€§é—®é¢˜\" href=\"#ä¸è€ƒè™‘éš”ç¦»æ€§å¼•å‘çš„å®‰å…¨æ€§é—®é¢˜\"></a></h2>\n<ul>\n<li>è¯»é—®é¢˜\n<ul>\n<li>è„è¯»ï¼šAäº‹åŠ¡è¯»åˆ°Bäº‹åŠ¡æœªæäº¤çš„æ•°æ®</li>\n<li>ä¸å¯é‡å¤è¯»ï¼šBäº‹åŠ¡åœ¨Aäº‹åŠ¡ä¸¤æ¬¡è¯»å–æ•°æ®ä¹‹é—´ï¼Œä¿®æ”¹äº†æ•°æ®ï¼Œå¯¼è‡´Aäº‹åŠ¡ä¸¤æ¬¡è¯»å–ç»“æœä¸ä¸€è‡´</li>\n<li>å¹»è¯»/è™šè¯»ï¼šBäº‹åŠ¡åœ¨Aäº‹åŠ¡æ‰¹é‡ä¿®æ”¹æ•°æ®æ—¶ï¼Œæ’å…¥äº†ä¸€æ¡æ–°çš„æ•°æ®ï¼Œå¯¼è‡´æ•°æ®åº“ä¸­ä»æœ‰ä¸€æ¡æ•°æ®æœªè¢«ä¿®æ”¹ã€‚</li>\n</ul>\n</li>\n<li>å†™é—®é¢˜\n<ul>\n<li>ä¸¢å¤±æ›´æ–°ï¼š</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"è§£å†³è¯»é—®é¢˜\">è§£å†³è¯»é—®é¢˜<a title=\"#è§£å†³è¯»é—®é¢˜\" href=\"#è§£å†³è¯»é—®é¢˜\"></a></h2>\n<ul>\n<li>è®¾ç½®äº‹åŠ¡çš„éš”ç¦»çº§åˆ«\n<ul>\n<li><code>Read uncommitted</code>ï¼šæœªæäº¤è¯»ï¼Œä»»ä½•è¯»é—®é¢˜éƒ½è§£å†³ä¸äº†</li>\n<li><code>Read committed</code>ï¼šå·²æäº¤è¯»ï¼Œè§£å†³è„è¯»ï¼Œä½†æ˜¯ä¸å¯é‡å¤è¯»å’Œå¹»è¯»æœ‰å¯èƒ½å‘ç”Ÿ</li>\n<li><code>Repeatable read</code>ï¼šé‡å¤è¯»ï¼Œè§£å†³è„è¯»å’Œä¸å¯é‡å¤è¯»ï¼Œä½†æ˜¯å¹»è¯»æœ‰å¯èƒ½å‘ç”Ÿ</li>\n<li><code>Serializable</code>ï¼šè§£å†³æ‰€æœ‰è¯»é—®é¢˜ï¼Œå› ä¸ºç¦æ­¢å¹¶è¡Œæ‰§è¡Œ</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"springäº‹åŠ¡ç®¡ç†api\">Springäº‹åŠ¡ç®¡ç†API<a title=\"#springäº‹åŠ¡ç®¡ç†api\" href=\"#springäº‹åŠ¡ç®¡ç†api\"></a></h2>\n<ul>\n<li>\n<p><code>PlatformTransactionManager</code>ï¼šå¹³å°äº‹åŠ¡ç®¡ç†å™¨</p>\n<ul>\n<li><code>DataSourceTransactionManager</code>ï¼šåº•å±‚ä½¿ç”¨JDBCç®¡ç†äº‹åŠ¡</li>\n</ul>\n</li>\n<li>\n<p><code>TransactionDefinition</code>ï¼šäº‹åŠ¡å®šä¹‰ä¿¡æ¯</p>\n<p>ç”¨äºå®šä¹‰äº‹åŠ¡ç›¸å…³çš„ä¿¡æ¯ï¼Œéš”ç¦»çº§åˆ«ï¼Œè¶…æ—¶ä¿¡æ¯ï¼Œä¼ æ’­è¡Œä¸ºï¼Œæ˜¯å¦åªè¯»â€¦â€¦</p>\n</li>\n<li>\n<p><code>TransactionStatus</code>ï¼šäº‹åŠ¡çš„çŠ¶æ€</p>\n<p>ç”¨äºè®°å½•åœ¨äº‹åŠ¡ç®¡ç†è¿‡ç¨‹ä¸­ï¼Œäº‹åŠ¡çš„çŠ¶æ€</p>\n</li>\n</ul>\n<p>APIçš„å…³ç³»ï¼š</p>\n<p>Springåœ¨è¿›è¡Œäº‹åŠ¡ç®¡ç†çš„æ—¶å€™ï¼Œé¦–å…ˆ<strong>å¹³å°äº‹åŠ¡ç®¡ç†å™¨</strong>æ ¹æ®<strong>äº‹åŠ¡å®šä¹‰ä¿¡æ¯</strong>è¿›è¡Œäº‹åŠ¡çš„ç®¡ç†ï¼Œåœ¨äº‹åŠ¡ç®¡ç†è¿‡ç¨‹ä¸­ï¼Œäº§ç”Ÿå„ç§çŠ¶æ€ï¼Œå°†è¿™äº›çŠ¶æ€ä¿¡æ¯è®°å½•åˆ°<strong>äº‹åŠ¡çŠ¶æ€å¯¹è±¡</strong></p>\n<h2 id=\"springäº‹åŠ¡çš„ä¼ æ’­è¡Œä¸º\">Springäº‹åŠ¡çš„ä¼ æ’­è¡Œä¸º<a title=\"#springäº‹åŠ¡çš„ä¼ æ’­è¡Œä¸º\" href=\"#springäº‹åŠ¡çš„ä¼ æ’­è¡Œä¸º\"></a></h2>\n<p>é¦–å…ˆå‡è®¾ä¸€ä¸ªèƒŒæ™¯ï¼ŒService1é‡Œçš„x()æ–¹æ³•å·²ç»å®šä¹‰äº†ä¸€ä¸ªäº‹åŠ¡ï¼ŒService2é‡Œçš„y()æ–¹æ³•ä¹Ÿæœ‰ä¸€ä¸ªäº‹åŠ¡ï¼Œä½†ç°åœ¨æ–°å¢ä¸€è¡Œä»£ç åœ¨Service2çš„y()æ–¹æ³•ä¸­è¦å…ˆè°ƒç”¨Service1é‡Œçš„x()æ–¹æ³•ç„¶åå†æ‰§è¡Œæœ¬èº«çš„æ–¹æ³•ã€‚è¿™æ—¶å°±æ¶‰åŠåˆ°<strong>äº‹åŠ¡çš„ä¼ æ’­è¡Œä¸º</strong>ã€‚</p>\n<p><img src=\"https://blogpictrue-1251547651.cos.ap-chengdu.myqcloud.com/blog/20190321110709.png\" alt=\"img\" class=\"Ï†cx\"></p>\n<p>Springä¸­æä¾›äº†7ç§ä¼ æ’­è¡Œä¸º</p>\n<p><strong>å‡è®¾x()æ–¹æ³•ç§°ä¸ºAï¼Œy()æ–¹æ³•ç§°ä¸ºB</strong></p>\n<ul>\n<li>ä¿è¯å¤šä¸ªæ“ä½œåœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­\n<ul>\n<li><strong><code>PROPAGATION_REQUIRED</code></strong>(*)ï¼šSpringäº‹åŠ¡éš”ç¦»çº§åˆ«çš„é»˜è®¤å€¼ã€‚å¦‚æœAä¸­æœ‰äº‹åŠ¡ï¼Œåˆ™ä½¿ç”¨Aä¸­çš„äº‹åŠ¡ã€‚å¦‚æœæ²¡æœ‰ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„äº‹åŠ¡ï¼Œå°†æ“ä½œåŒ…å«è¿›æ¥ã€‚</li>\n<li><code>PROPAGATION_SUPPORTS</code>ï¼šæ”¯æŒäº‹åŠ¡ã€‚å¦‚æœAä¸­æœ‰äº‹åŠ¡ï¼Œä½¿ç”¨Aä¸­çš„äº‹åŠ¡ã€‚å¦‚æœAæ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™ä¸ä½¿ç”¨äº‹åŠ¡ã€‚</li>\n<li><code>PROPAGATION_MANDATORY</code>ï¼šå¦‚æœAä¸­æœ‰äº‹åŠ¡ï¼Œä½¿ç”¨Aä¸­çš„äº‹åŠ¡ã€‚å¦‚æœæ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ã€‚</li>\n</ul>\n</li>\n<li>ä¿è¯å¤šä¸ªäº‹åŠ¡ä¸åœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­\n<ul>\n<li><strong><code>PROPAGATION_REQUIRES_NEW</code></strong>(*)ï¼šå¦‚æœAä¸­æœ‰äº‹åŠ¡ï¼Œå°†Açš„äº‹åŠ¡æŒ‚èµ·ï¼Œåˆ›å»ºæ–°äº‹åŠ¡ï¼ŒåªåŒ…å«è‡ªèº«æ“ä½œã€‚å¦‚æœAä¸­æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ›å»ºä¸€ä¸ªæ–°äº‹ç‰©ï¼ŒåŒ…å«è‡ªèº«æ“ä½œã€‚</li>\n<li><code>PROPAGATION_NOT_SUPPORTED</code>ï¼šå¦‚æœAä¸­æœ‰äº‹åŠ¡ï¼Œå°†Açš„äº‹åŠ¡æŒ‚èµ·ï¼Œä¸ä½¿ç”¨äº‹åŠ¡ã€‚</li>\n<li><code>PROPAGATION_NEVER</code>ï¼šå¦‚æœAä¸­æœ‰äº‹åŠ¡ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ã€‚</li>\n</ul>\n</li>\n<li>åµŒå¥—å¼äº‹åŠ¡\n<ul>\n<li><strong><code>PROPAGATION_NESTED</code></strong>(*)ï¼šåµŒå¥—äº‹åŠ¡ï¼Œå¦‚æœAä¸­æœ‰äº‹åŠ¡ï¼Œåˆ™æŒ‰ç…§Açš„äº‹åŠ¡æ‰§è¡Œï¼Œæ‰§è¡Œå®Œæˆåï¼Œè®¾ç½®ä¸€ä¸ªä¿å­˜ç‚¹ï¼Œå†æ‰§è¡ŒBä¸­çš„æ“ä½œï¼Œå¦‚æœæ— å¼‚å¸¸ï¼Œåˆ™æ‰§è¡Œé€šè¿‡ï¼Œå¦‚æœæœ‰å¼‚å¸¸ï¼Œåˆ™å¯ä»¥é€‰æ‹©å›æ»šåˆ°åˆå§‹ä½ç½®æˆ–è€…ä¿å­˜ç‚¹ã€‚</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"springäº‹åŠ¡ç®¡ç†æ¡ˆä¾‹â€”â€”è½¬è´¦æƒ…æ™¯\">Springäº‹åŠ¡ç®¡ç†æ¡ˆä¾‹â€”â€”è½¬è´¦æƒ…æ™¯<a title=\"#springäº‹åŠ¡ç®¡ç†æ¡ˆä¾‹â€”â€”è½¬è´¦æƒ…æ™¯\" href=\"#springäº‹åŠ¡ç®¡ç†æ¡ˆä¾‹â€”â€”è½¬è´¦æƒ…æ™¯\"></a></h2>\n<h3 id=\"è½¬è´¦æƒ…æ™¯å®ç°\">è½¬è´¦æƒ…æ™¯å®ç°<a title=\"#è½¬è´¦æƒ…æ™¯å®ç°\" href=\"#è½¬è´¦æƒ…æ™¯å®ç°\"></a></h3>\n<p>é¦–å…ˆåˆ›å»ºæ¥å£<code>AccountDao</code>ï¼Œå®šä¹‰ä¸¤ä¸ªæ–¹æ³•åˆ†åˆ«æ˜¯<code>out</code>å’Œ<code>in</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * AccountDao</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> Chen Rui</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@version</span> 1.0</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">AccountDao</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * è½¬å‡º</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> from  è½¬å‡ºè´¦æˆ·</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> money è½¬å‡ºé‡‘é¢</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">out</span><span class=\"params\">(String from, <span class=\"keyword\">double</span> money)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * è½¬å…¥</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> to    è½¬å…¥è´¦æˆ·</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> money è½¬å…¥é‡‘é¢</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">in</span><span class=\"params\">(String to, <span class=\"keyword\">double</span> money)</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>æ¥ç€åˆ›å»ºå®ç°ç±»<code>AccountDaoImpl</code>å®ç°<code>out</code>å’Œ<code>in</code>æ–¹æ³•å¹¶ä¸”ç»§æ‰¿<code>JdbcSupport</code>ç±»ã€‚è¿™æ ·å°±å¯ä»¥ç›´æ¥ä½¿ç”¨çˆ¶ç±»çš„<code>JDBCTemplate</code>å¯¹è±¡ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * AccountDaoå®ç°ç±»</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> Chen Rui</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@version</span> 1.0</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AccountDaoImpl</span> <span class=\"keyword\">extends</span> <span class=\"title\">JdbcDaoSupport</span> <span class=\"keyword\">implements</span> <span class=\"title\">AccountDao</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">out</span><span class=\"params\">(String from, <span class=\"keyword\">double</span> money)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.getJdbcTemplate().update(<span class=\"string\">&quot;UPDATE account SET money = money - ? WHERE name = ?&quot;</span>, money, from);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">in</span><span class=\"params\">(String to, <span class=\"keyword\">double</span> money)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.getJdbcTemplate().update(<span class=\"string\">&quot;UPDATE account SET money = money + ? WHERE name = ?&quot;</span>, money, to);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ç„¶ååˆ›å»ºæ¥å£<code>AccountrService</code>ï¼Œå®šä¹‰<code>transfer</code>æ–¹æ³•</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * AccountService</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> Chen Rui</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@version</span> 1.0</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">AccountService</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * è½¬è´¦</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> from è½¬å‡ºè´¦æˆ·</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> to è½¬å…¥è´¦æˆ·</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> money äº¤æ˜“é‡‘é¢</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">transfer</span><span class=\"params\">(String from, String to, Double money)</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>å†åˆ›å»ºç±»<code>AccountServiceImpl</code>å®ç°è¯¥æ¥å£ï¼Œå¹¶å£°æ˜<code>AccountDao</code>å¼•ç”¨å¹¶åˆ›å»º<code>set</code>æ–¹æ³•</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * AccountServiceå®ç°ç±»</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> Chen Rui</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@version</span> 1.0</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AccountServiceImpl</span> <span class=\"keyword\">implements</span> <span class=\"title\">AccountService</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> AccountDao accountDao;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setAccountDao</span><span class=\"params\">(AccountDao accountDao)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.accountDao = accountDao;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">transfer</span><span class=\"params\">(String from, String to, Double money)</span> </span>&#123;</span><br><span class=\"line\">        accountDao.out(from, money);</span><br><span class=\"line\">        accountDao.in(to, money);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>æœ€ååˆ›å»ºé…ç½®æ–‡ä»¶<code>spring-tx-programmatic.xml</code>ï¼Œç”¨æ¥ç®¡ç†Beanã€‚</p>\n<p>å¼•å…¥æ•°æ®åº“è¿æ¥æ–‡ä»¶ï¼Œé…ç½®æ•°æ®æºï¼Œåˆ›å»ºBeanå¯¹è±¡<code>accountDao</code>å°†æ•°æ®æº<code>dataSource</code>æ³¨å…¥åˆ°<code>accountDao</code>ä¸­ï¼Œå†åˆ›å»ºBeanå¯¹è±¡<code>accountService</code>ï¼Œå°†<code>accountDao</code>æ³¨å…¥ã€‚</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">beans</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xmlns:tx</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/tx&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xmlns:aop</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xmlns:context</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">&quot;                                             </span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">            http://www.springframework.org/schema/beans  </span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">            http://www.springframework.org/schema/beans/spring-beans.xsd  </span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">            http://www.springframework.org/schema/context   </span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">            http://www.springframework.org/schema/context/spring-context.xsd  </span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">            http://www.springframework.org/schema/tx </span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">            http://www.springframework.org/schema/tx/spring-tx.xsd</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">            http://www.springframework.org/schema/aop</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">            http://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- ç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†é…ç½®æ–‡ä»¶ --&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- é…ç½®Service --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;accountService&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;learningspring.transaction.programmatic.AccountServiceImpl&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;accountDao&quot;</span> <span class=\"attr\">ref</span>=<span class=\"string\">&quot;accountDao&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- é…ç½®Dao --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;accountDao&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;learningspring.transaction.programmatic.AccountDaoImpl&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;dataSource&quot;</span> <span class=\"attr\">ref</span>=<span class=\"string\">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- å¼•å…¥æ•°æ®åº“é…ç½®æ–‡ä»¶ --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">context:property-placeholder</span> <span class=\"attr\">location</span>=<span class=\"string\">&quot;db.properties&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- é…ç½®C3P0è¿æ¥æ±  --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;dataSource&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;driverClass&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$&#123;jdbc.driverClassName&#125;&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;jdbcUrl&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;user&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$&#123;jdbc.username&#125;&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;password&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>åˆ°æ­¤ä¸€ä¸ªè½¬è´¦æ¨¡æ‹Ÿä¸šåŠ¡å°±å®ç°äº†ï¼Œæ•°æ®åº“è¡¨ä¾ç„¶ä½¿ç”¨å‰é¢åˆ›å»ºçš„<code>account</code>è¡¨ï¼Œå…ˆæŸ¥è¯¢å½“å‰æ•°æ®åº“çš„æ•°æ®ã€‚</p>\n<p><img src=\"https://blogpictrue-1251547651.cos.ap-chengdu.myqcloud.com/blog/20190321124514.png\" alt=\"img\" class=\"Ï†cx\"></p>\n<p>ç¼–å†™æµ‹è¯•æ–¹æ³•ï¼Œå®ç°è®©å§“åä¸ºBobçš„è´¦æˆ·å‘Jackè½¬è´¦1000å…ƒã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * ç¼–ç¨‹å¼äº‹åŠ¡æµ‹è¯•ç±»</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> Chen Rui</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@version</span> 1.0</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"meta\">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class=\"line\"><span class=\"meta\">@ContextConfiguration(value = &quot;classpath:spring-tx-programmatic.xml&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AppTest</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Resource(name = &quot;accountService&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> AccountService accountService;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        accountService.transfer(<span class=\"string\">&quot;Bob&quot;</span>,<span class=\"string\">&quot;Jack&quot;</span>,<span class=\"number\">1000d</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>è¿è¡Œç»“æœ</p>\n<p><img src=\"https://blogpictrue-1251547651.cos.ap-chengdu.myqcloud.com/blog/20190321124630.png\" alt=\"img\" class=\"Ï†cx\"></p>\n<p>ç°åœ¨å¯¹ç±»<code>AccountServiceImpl</code>é‡Œçš„<code>transfer</code>æ–¹æ³•è¿›è¡Œä¿®æ”¹ï¼Œè®©å…¶å‘ç”Ÿå¼‚å¸¸ï¼Œå†è§‚å¯Ÿç»“æœ</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * AccountServiceå®ç°ç±»</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> Chen Rui</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@version</span> 1.0</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AccountServiceImpl</span> <span class=\"keyword\">implements</span> <span class=\"title\">AccountService</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> AccountDao accountDao;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setAccountDao</span><span class=\"params\">(AccountDao accountDao)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.accountDao = accountDao;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">transfer</span><span class=\"params\">(String from, String to, Double money)</span> </span>&#123;</span><br><span class=\"line\">        accountDao.out(from, money);</span><br><span class=\"line\">        <span class=\"comment\">// æŠ›å‡ºå¼‚å¸¸</span></span><br><span class=\"line\">        <span class=\"keyword\">int</span> i = <span class=\"number\">1</span>/<span class=\"number\">0</span>;</span><br><span class=\"line\">        accountDao.in(to, money);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>æŸ¥è¯¢æ•°æ®åº“æ•°æ®</p>\n<p><img src=\"https://blogpictrue-1251547651.cos.ap-chengdu.myqcloud.com/blog/20190321125027.png\" alt=\"img\" class=\"Ï†cx\"></p>\n<p>è¿™æ—¶Bobè´¦æˆ·çš„é’±å°±å°‘äº†1000å…ƒï¼Œè€ŒJackè´¦æˆ·ä¹Ÿæ²¡æœ‰å¢åŠ 1000å…ƒã€‚</p>\n<p>æ‰€ä»¥å°±éœ€è¦äº‹åŠ¡æ¥è¿›è¡Œç®¡ç†ã€‚</p>\n<h3 id=\"ç¼–ç¨‹å¼äº‹åŠ¡\">ç¼–ç¨‹å¼äº‹åŠ¡<a title=\"#ç¼–ç¨‹å¼äº‹åŠ¡\" href=\"#ç¼–ç¨‹å¼äº‹åŠ¡\"></a></h3>\n<p>æ‰€è°“ç¼–ç¨‹å¼äº‹åŠ¡ï¼Œå°±æ˜¯è¦åœ¨æºç ä¸­ç¼–å†™äº‹åŠ¡ç›¸å…³çš„ä»£ç ã€‚å®ç°ç¼–ç¨‹å¼äº‹åŠ¡ï¼Œé¦–å…ˆè¦åœ¨<code>AccountServiceImpl</code>ä¸­å£°æ˜<code>TransactionTemplate</code>å¯¹è±¡ï¼Œå¹¶åˆ›å»ºsetæ–¹æ³•ã€‚ç„¶åä¿®æ”¹<code>transfer</code>å‚æ•°åˆ—è¡¨æ‰€æœ‰å‚æ•°éƒ½ç”¨<code>final</code>(å› ä¸ºä½¿ç”¨äº†åŒ¿åå†…éƒ¨ç±»)ä¿®é¥°ï¼Œå¹¶ä¿®æ”¹æ–¹æ³•ä½“å†…å®¹ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * AccountServiceå®ç°ç±»</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> Chen Rui</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@version</span> 1.0</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AccountServiceImpl</span> <span class=\"keyword\">implements</span> <span class=\"title\">AccountService</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> AccountDao accountDao;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> TransactionTemplate transactionTemplate;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setAccountDao</span><span class=\"params\">(AccountDao accountDao)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.accountDao = accountDao;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setTransactionTemplate</span><span class=\"params\">(TransactionTemplate transactionTemplate)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.transactionTemplate = transactionTemplate;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">transfer</span><span class=\"params\">(<span class=\"keyword\">final</span> String from, <span class=\"keyword\">final</span> String to, <span class=\"keyword\">final</span> Double money)</span> </span>&#123;</span><br><span class=\"line\">        transactionTemplate.execute(<span class=\"keyword\">new</span> TransactionCallbackWithoutResult() &#123;</span><br><span class=\"line\">            <span class=\"meta\">@Override</span></span><br><span class=\"line\">            <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">doInTransactionWithoutResult</span><span class=\"params\">(TransactionStatus status)</span> </span>&#123;</span><br><span class=\"line\">                accountDao.out(from, money);</span><br><span class=\"line\">                <span class=\"comment\">// æŠ›å‡ºå¼‚å¸¸</span></span><br><span class=\"line\">                <span class=\"keyword\">int</span> i = <span class=\"number\">1</span>/<span class=\"number\">0</span>;</span><br><span class=\"line\">                accountDao.in(to,money);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ç„¶åä¿®æ”¹<code>spring-tx-programmatic.xml</code>æ–‡ä»¶ï¼Œåˆ›å»ºBeanå¯¹è±¡<code>transactionManager</code>å’Œ<code>transactionTemplate</code>ï¼Œå¹¶å°†<code>transactionTemplate</code>æ³¨å…¥åˆ°<code>accountService</code>ä¸­ã€‚</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">beans</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xmlns:tx</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/tx&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xmlns:aop</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xmlns:context</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">&quot;                                             </span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">            http://www.springframework.org/schema/beans  </span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">            http://www.springframework.org/schema/beans/spring-beans.xsd  </span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">            http://www.springframework.org/schema/context   </span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">            http://www.springframework.org/schema/context/spring-context.xsd  </span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">            http://www.springframework.org/schema/tx </span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">            http://www.springframework.org/schema/tx/spring-tx.xsd</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">            http://www.springframework.org/schema/aop</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">            http://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- ç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†é…ç½®æ–‡ä»¶ --&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- é…ç½®Service --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;accountService&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;learningspring.transaction.programmatic.AccountServiceImpl&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;accountDao&quot;</span> <span class=\"attr\">ref</span>=<span class=\"string\">&quot;accountDao&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;transactionTemplate&quot;</span> <span class=\"attr\">ref</span>=<span class=\"string\">&quot;transactionTemplate&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- é…ç½®Dao --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;accountDao&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;learningspring.transaction.programmatic.AccountDaoImpl&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;dataSource&quot;</span> <span class=\"attr\">ref</span>=<span class=\"string\">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- å¼•å…¥æ•°æ®åº“é…ç½®æ–‡ä»¶ --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">context:property-placeholder</span> <span class=\"attr\">location</span>=<span class=\"string\">&quot;db.properties&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- é…ç½®C3P0è¿æ¥æ±  --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;dataSource&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;driverClass&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$&#123;jdbc.driverClassName&#125;&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;jdbcUrl&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;user&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$&#123;jdbc.username&#125;&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;password&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- é…ç½®äº‹åŠ¡ç®¡ç†å™¨ --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;transactionManager&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;dataSource&quot;</span> <span class=\"attr\">ref</span>=<span class=\"string\">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- é…ç½®æ¨¡æ¿ --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;transactionTemplate&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;org.springframework.transaction.support.TransactionTemplate&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;transactionManager&quot;</span> <span class=\"attr\">ref</span>=<span class=\"string\">&quot;transactionManager&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>æ­¤æ—¶å¼‚å¸¸ä¾ç„¶å­˜åœ¨ï¼Œæ•°æ®åº“æ•°æ®ä»ç„¶æ˜¯ä¸Šæ¬¡æ‰§è¡Œçš„ç»“æœçŠ¶æ€</p>\n<p><img src=\"https://blogpictrue-1251547651.cos.ap-chengdu.myqcloud.com/blog/20190321125027.png\" alt=\"img\" class=\"Ï†cx\"></p>\n<p>å†æ¬¡è¿è¡Œæµ‹è¯•æ–¹æ³•ï¼Œå¹¶æŸ¥è¯¢ç»“æœï¼Œè§‚å¯Ÿæ˜¯å¦å‘ç”Ÿå˜åŒ–</p>\n<p><img src=\"https://blogpictrue-1251547651.cos.ap-chengdu.myqcloud.com/blog/20190321130039.png\" alt=\"img\" class=\"Ï†cx\"></p>\n<p>ç°åœ¨å°±å®ç°äº†ç¼–ç¨‹å¼äº‹åŠ¡ï¼Œå½“å‡ºç°å¼‚å¸¸æ—¶ï¼Œæ•°æ®åº“çš„æ•°æ®å°±ä¸ä¼šè¢«ä¿®æ”¹ã€‚</p>\n<h3 id=\"å£°æ˜å¼äº‹åŠ¡\">å£°æ˜å¼äº‹åŠ¡<a title=\"#å£°æ˜å¼äº‹åŠ¡\" href=\"#å£°æ˜å¼äº‹åŠ¡\"></a></h3>\n<h4 id=\"xmlé…ç½®æ–¹å¼\">XMLé…ç½®æ–¹å¼<a title=\"#xmlé…ç½®æ–¹å¼\" href=\"#xmlé…ç½®æ–¹å¼\"></a></h4>\n<p>å£°æ˜å¼äº‹åŠ¡å³é€šè¿‡é…ç½®æ–‡ä»¶å®ç°ï¼Œåˆ©ç”¨çš„å°±æ˜¯Springçš„AOP</p>\n<p>ä¿®æ”¹ç±»<code>AccountServiceImpl</code>ï¼Œåˆ é™¤<code>TransactionTemplate</code>å¯¹è±¡ï¼Œå¹¶ä¿®æ”¹<code>transfer</code>æ–¹æ³•ï¼Œä¿ç•™å¼‚å¸¸ä»£ç </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * AccountServiceå®ç°ç±»</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> Chen Rui</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@version</span> 1.0</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AccountServiceImpl</span> <span class=\"keyword\">implements</span> <span class=\"title\">AccountService</span></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> AccountDao accountDao;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setAccountDao</span><span class=\"params\">(AccountDao accountDao)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.accountDao = accountDao;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">transfer</span><span class=\"params\">(String from, String to, Double money)</span> </span>&#123;</span><br><span class=\"line\">        accountDao.out(from, money);</span><br><span class=\"line\">        <span class=\"keyword\">int</span> i = <span class=\"number\">1</span>/<span class=\"number\">0</span>;</span><br><span class=\"line\">        accountDao.in(to,money);</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ç„¶ååˆ›å»ºé…ç½®æ–‡ä»¶<code>spring-tx-declarative.xml</code>ï¼Œé…ç½®æ•°æ®æºå³Beanå¯¹è±¡ï¼Œç„¶åé…ç½®äº‹åŠ¡ç®¡ç†å™¨ã€‚</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">beans</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xmlns:tx</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/tx&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xmlns:aop</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xmlns:context</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">            http://www.springframework.org/schema/beans</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">            http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">            http://www.springframework.org/schema/context</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">            http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">            http://www.springframework.org/schema/tx</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">            http://www.springframework.org/schema/tx/spring-tx.xsd</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">            http://www.springframework.org/schema/aop</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">            http://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- å£°æ˜å¼äº‹åŠ¡ç®¡ç†é…ç½®æ–‡ä»¶ --&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- é…ç½®Service --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;accountService&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;learningspring.transaction.declarative.AccountServiceImpl&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;accountDao&quot;</span> <span class=\"attr\">ref</span>=<span class=\"string\">&quot;accountDao&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- é…ç½®Dao --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;accountDao&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;learningspring.transaction.declarative.AccountDaoImpl&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;dataSource&quot;</span> <span class=\"attr\">ref</span>=<span class=\"string\">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- å¼•å…¥æ•°æ®åº“é…ç½®æ–‡ä»¶ --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">context:property-placeholder</span> <span class=\"attr\">location</span>=<span class=\"string\">&quot;db.properties&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- é…ç½®C3P0è¿æ¥æ±  --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;dataSource&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;driverClass&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$&#123;jdbc.driverClassName&#125;&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;jdbcUrl&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;user&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$&#123;jdbc.username&#125;&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;password&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- é…ç½®äº‹åŠ¡ç®¡ç†å™¨ --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;transactionManager&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;dataSource&quot;</span> <span class=\"attr\">ref</span>=<span class=\"string\">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>æ¥ç€å°±é…ç½®äº‹åŠ¡çš„å¢å¼ºï¼Œé…ç½®æ–‡ä»¶ä¸­åŠ å…¥ä»¥ä¸‹é…ç½®</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- é…ç½®äº‹åŠ¡çš„å¢å¼º --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">tx:advice</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;txAdvice&quot;</span> <span class=\"attr\">transaction-manager</span>=<span class=\"string\">&quot;transactionManager&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">tx:attributes</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- é…ç½®äº‹åŠ¡çš„è§„åˆ™ æ ¹æ®å®é™…ä¸šåŠ¡ä¿®æ”¹--&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">tx:method</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;*&quot;</span> <span class=\"attr\">propagation</span>=<span class=\"string\">&quot;REQUIRED&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">tx:attributes</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">tx:advice</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- AOPçš„é…ç½® --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">aop:config</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">aop:pointcut</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;pointcut1&quot;</span> <span class=\"attr\">expression</span>=<span class=\"string\">&quot;execution(* learningspring.transaction.declarative.AccountServiceImpl.*(..))&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">aop:advisor</span> <span class=\"attr\">advice-ref</span>=<span class=\"string\">&quot;txAdvice&quot;</span> <span class=\"attr\">pointcut-ref</span>=<span class=\"string\">&quot;pointcut1&quot;</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>å…ˆæŸ¥çœ‹å½“å‰æ•°æ®åº“æ•°æ®</p>\n<p><img src=\"https://blogpictrue-1251547651.cos.ap-chengdu.myqcloud.com/blog/20190321130039.png\" alt=\"img\" class=\"Ï†cx\"></p>\n<p>ç¼–å†™æµ‹è¯•æ–¹æ³•</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å£°æ˜å¼äº‹åŠ¡é…ç½®æµ‹è¯•ç±»</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> Chen Rui</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@version</span> 1.0</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"meta\">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class=\"line\"><span class=\"meta\">@ContextConfiguration(value = &quot;classpath:spring-tx-declarative.xml&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AppTest</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Resource(name = &quot;accountService&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> AccountService accountService;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        accountService.transfer(<span class=\"string\">&quot;Bob&quot;</span>,<span class=\"string\">&quot;Jack&quot;</span>,<span class=\"number\">1000d</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>è¿è¡ŒæŸ¥çœ‹ç»“æœï¼Œæ˜¯å¦å˜åŒ–</p>\n<p><img src=\"https://blogpictrue-1251547651.cos.ap-chengdu.myqcloud.com/blog/20190321132512.png\" alt=\"img\" class=\"Ï†cx\"></p>\n<p>è‡³æ­¤å°±å®ç°äº†å£°æ˜å¼äº‹åŠ¡XMLæ–¹å¼çš„é…ç½®ã€‚</p>\n<h4 id=\"æ³¨è§£é…ç½®æ–¹å¼\">æ³¨è§£é…ç½®æ–¹å¼<a title=\"#æ³¨è§£é…ç½®æ–¹å¼\" href=\"#æ³¨è§£é…ç½®æ–¹å¼\"></a></h4>\n<p>Springçš„äº‹åŠ¡é…ç½®ä»ç„¶æ”¯æŒæ³¨è§£é…ç½®</p>\n<p>ç»§ç»­æ²¿ç”¨<code>spring-tx-declarative.xml</code>æ–‡ä»¶ï¼ŒæŠŠäº‹åŠ¡å¢å¼ºå’ŒAOPç›¸å…³çš„é…ç½®æ³¨é‡Šï¼Œå¹¶å¼€å¯æ³¨è§£äº‹åŠ¡ã€‚</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">beans</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xmlns:tx</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/tx&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xmlns:aop</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xmlns:context</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">            http://www.springframework.org/schema/beans</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">            http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">            http://www.springframework.org/schema/context</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">            http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">            http://www.springframework.org/schema/tx</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">            http://www.springframework.org/schema/tx/spring-tx.xsd</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">            http://www.springframework.org/schema/aop</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">            http://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- å£°æ˜å¼äº‹åŠ¡ç®¡ç†é…ç½®æ–‡ä»¶ --&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- é…ç½®Service --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;accountService&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;learningspring.transaction.declarative.AccountServiceImpl&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;accountDao&quot;</span> <span class=\"attr\">ref</span>=<span class=\"string\">&quot;accountDao&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- é…ç½®Dao --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;accountDao&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;learningspring.transaction.declarative.AccountDaoImpl&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;dataSource&quot;</span> <span class=\"attr\">ref</span>=<span class=\"string\">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- å¼•å…¥æ•°æ®åº“é…ç½®æ–‡ä»¶ --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">context:property-placeholder</span> <span class=\"attr\">location</span>=<span class=\"string\">&quot;db.properties&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- é…ç½®C3P0è¿æ¥æ±  --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;dataSource&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;driverClass&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$&#123;jdbc.driverClassName&#125;&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;jdbcUrl&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;user&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$&#123;jdbc.username&#125;&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;password&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- é…ç½®äº‹åŠ¡ç®¡ç†å™¨ --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;transactionManager&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;dataSource&quot;</span> <span class=\"attr\">ref</span>=<span class=\"string\">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- é…ç½®äº‹åŠ¡çš„å¢å¼º --&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--&lt;tx:advice id=&quot;txAdvice&quot; transaction-manager=&quot;transactionManager&quot;&gt;--&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!--&lt;tx:attributes&gt;--&gt;</span></span><br><span class=\"line\">            <span class=\"comment\">&lt;!-- é…ç½®äº‹åŠ¡çš„è§„åˆ™ --&gt;</span></span><br><span class=\"line\">            <span class=\"comment\">&lt;!--&lt;tx:method name=&quot;*&quot; propagation=&quot;REQUIRED&quot;/&gt;--&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!--&lt;/tx:attributes&gt;--&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--&lt;/tx:advice&gt;--&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- AOPçš„é…ç½® --&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--&lt;aop:config&gt;--&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!--&lt;aop:pointcut id=&quot;pointcut1&quot; expression=&quot;execution(* learningspring.transaction.declarative.AccountServiceImpl.*(..))&quot;/&gt;--&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!--&lt;aop:advisor advice-ref=&quot;txAdvice&quot; pointcut-ref=&quot;pointcut1&quot;/&gt;--&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--&lt;/aop:config&gt;--&gt;</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">tx:annotation-driven</span> <span class=\"attr\">transaction-manager</span>=<span class=\"string\">&quot;transactionManager&quot;</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>æ¥ä¸‹æ¥å°±å¯ä»¥åœ¨ä¸šåŠ¡å±‚ç±»ä¸Šä½¿ç”¨äº‹åŠ¡ç®¡ç†çš„æ³¨è§£äº†ã€‚ä¿®æ”¹<code>AccountServiceImpl</code>ç±»ï¼Œæ·»åŠ <code>@Transactional</code>æ³¨è§£</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * AccountServiceå®ç°ç±»</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> Chen Rui</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@version</span> 1.0</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"meta\">@Transactional(rollbackFor = Exception.class)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AccountServiceImpl</span> <span class=\"keyword\">implements</span> <span class=\"title\">AccountService</span></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> AccountDao accountDao;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setAccountDao</span><span class=\"params\">(AccountDao accountDao)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.accountDao = accountDao;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">transfer</span><span class=\"params\">(String from, String to, Double money)</span> </span>&#123;</span><br><span class=\"line\">        accountDao.out(from, money);</span><br><span class=\"line\">        <span class=\"keyword\">int</span> i = <span class=\"number\">1</span>/<span class=\"number\">0</span>;</span><br><span class=\"line\">        accountDao.in(to,money);</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>å†æ¬¡è¿è¡Œæµ‹è¯•æ–¹æ³•ï¼Œæ•°æ®åº“ä¹Ÿä¸ä¼šå‘ç”Ÿæ”¹å˜ã€‚</p>\n","prev":{"title":"Mavenä¾èµ–ä¸‹è½½å¤±è´¥","link":"2020/05/19/mavenä¾èµ–"},"next":{"title":"ELä¸JSTL","link":"2020/03/08/ELä¸JSTL"},"plink":"https://pinkpeachabc.cn/2020/04/21/IOC å’Œ DI çš„æ¦‚è¿°/","toc":[{"id":"ioc-å’Œ-di-çš„æ¦‚è¿°","title":"IOC å’Œ DI çš„æ¦‚è¿°","index":"1","children":[{"id":"ioc(inversion-of-controll)","title":"IOC(Inversion of Controll)","index":"1.1"},{"id":"di(dependency-injection)","title":"DI(Dependency Injection)","index":"1.2"}]},{"id":"springé…ç½®","title":"Springé…ç½®","index":"2","children":[{"id":"applicationcontext","title":"ApplicationContext","index":"2.1"},{"id":"beançš„ç›¸å…³é…ç½®","title":"Beançš„ç›¸å…³é…ç½®","index":"2.2","children":[{"id":"beanæ ‡ç­¾çš„idå’Œnameçš„é…ç½®","title":"beanæ ‡ç­¾çš„idå’Œnameçš„é…ç½®","index":"2.2.1"},{"id":"beançš„ç”Ÿå‘½å‘¨æœŸçš„é…ç½®","title":"beançš„ç”Ÿå‘½å‘¨æœŸçš„é…ç½®","index":"2.2.2"},{"id":"beançš„ä½œç”¨èŒƒå›´çš„é…ç½®","title":"beançš„ä½œç”¨èŒƒå›´çš„é…ç½®","index":"2.2.3"}]},{"id":"springçš„beanç®¡ç†é…ç½®","title":"Springçš„Beanç®¡ç†é…ç½®","index":"2.3","children":[{"id":"springçš„beançš„å®ä¾‹åŒ–æ–¹å¼","title":"Springçš„Beançš„å®ä¾‹åŒ–æ–¹å¼","index":"2.3.1"},{"id":"springçš„å±æ€§æ³¨å…¥æ–¹å¼","title":"Springçš„å±æ€§æ³¨å…¥æ–¹å¼","index":"2.3.2"},{"id":"æ³¨å…¥é›†åˆç±»å‹çš„æ•°æ®","title":"æ³¨å…¥é›†åˆç±»å‹çš„æ•°æ®","index":"2.3.3"},{"id":"springåˆ†æ¨¡å—å¼€å‘çš„é…ç½®","title":"Springåˆ†æ¨¡å—å¼€å‘çš„é…ç½®","index":"2.3.4"}]}]},{"id":"springå¼€å‘ä¸­çš„å¸¸ç”¨æ³¨è§£","title":"Springå¼€å‘ä¸­çš„å¸¸ç”¨æ³¨è§£","index":"3","children":[{"id":"@component","title":"@Component","index":"3.1"},{"id":"@value","title":"@Value","index":"3.2"},{"id":"@autowired","title":"@Autowired","index":"3.3"},{"id":"@resource","title":"@Resource","index":"3.4"},{"id":"@postconstruct-å’Œ-@predestroy","title":"@PostConstruct å’Œ @PreDestroy","index":"3.5"},{"id":"@scope","title":"@Scope","index":"3.6"},{"id":"åŸºäºxmlé…ç½®å’ŒåŸºäºæ³¨è§£é…ç½®çš„å¯¹æ¯”","title":"åŸºäºXMLé…ç½®å’ŒåŸºäºæ³¨è§£é…ç½®çš„å¯¹æ¯”","index":"3.7"}]},{"id":"spring-aop","title":"Spring AOP","index":"4","children":[{"id":"aopçš„æ¦‚è¿°","title":"AOPçš„æ¦‚è¿°","index":"4.1"},{"id":"aopçš„æ¡ˆä¾‹ï¼ˆåº”ç”¨åœºæ™¯ï¼‰","title":"AOPçš„æ¡ˆä¾‹ï¼ˆåº”ç”¨åœºæ™¯ï¼‰","index":"4.2"},{"id":"aopåº•å±‚å®ç°åŸç†","title":"AOPåº•å±‚å®ç°åŸç†","index":"4.3","children":[{"id":"jdkåŠ¨æ€ä»£ç†","title":"JDKåŠ¨æ€ä»£ç†","index":"4.3.1"},{"id":"cglibåŠ¨æ€ä»£ç†","title":"CglibåŠ¨æ€ä»£ç†","index":"4.3.2"}]},{"id":"springä¸­çš„aopå®ç°â€”â€”aspectj","title":"Springä¸­çš„AOPå®ç°â€”â€”AspectJ","index":"4.4","children":[{"id":"aopå¼€å‘ä¸­çš„ç›¸å…³æœ¯è¯­","title":"AOPå¼€å‘ä¸­çš„ç›¸å…³æœ¯è¯­","index":"4.4.1"},{"id":"aspectjçš„xmlé…ç½®æ¡ˆä¾‹","title":"AspectJçš„XMLé…ç½®æ¡ˆä¾‹","index":"4.4.2"},{"id":"springä¸­å¸¸ç”¨çš„å¢å¼ºç±»å‹","title":"Springä¸­å¸¸ç”¨çš„å¢å¼ºç±»å‹","index":"4.4.3"},{"id":"aopåˆ‡å…¥ç‚¹è¡¨è¾¾å¼è¯­æ³•","title":"AOPåˆ‡å…¥ç‚¹è¡¨è¾¾å¼è¯­æ³•","index":"4.4.4"},{"id":"aspectjçš„æ³¨è§£é…ç½®æ¡ˆä¾‹","title":"AspectJçš„æ³¨è§£é…ç½®æ¡ˆä¾‹","index":"4.4.5"}]}]},{"id":"spring-jdbc-template","title":"Spring JDBC Template","index":"5","children":[{"id":"jdbc-templateçš„å…¥é—¨","title":"JDBC Templateçš„å…¥é—¨","index":"5.1","children":[{"id":"åŸºæœ¬ä½¿ç”¨","title":"åŸºæœ¬ä½¿ç”¨","index":"5.1.1"},{"id":"æ•°æ®åº“è¿æ¥æ± ","title":"æ•°æ®åº“è¿æ¥æ± ","index":"5.1.2"},{"id":"å®ŒæˆåŸºæœ¬çš„crudæ“ä½œ","title":"å®ŒæˆåŸºæœ¬çš„CRUDæ“ä½œ","index":"5.1.3"}]}]},{"id":"springäº‹åŠ¡ç®¡ç†","title":"Springäº‹åŠ¡ç®¡ç†","index":"6","children":[{"id":"ä»€ä¹ˆæ˜¯äº‹åŠ¡","title":"ä»€ä¹ˆæ˜¯äº‹åŠ¡","index":"6.1"},{"id":"äº‹åŠ¡çš„ç‰¹æ€§","title":"äº‹åŠ¡çš„ç‰¹æ€§","index":"6.2"},{"id":"ä¸è€ƒè™‘éš”ç¦»æ€§å¼•å‘çš„å®‰å…¨æ€§é—®é¢˜","title":"ä¸è€ƒè™‘éš”ç¦»æ€§å¼•å‘çš„å®‰å…¨æ€§é—®é¢˜","index":"6.3"},{"id":"è§£å†³è¯»é—®é¢˜","title":"è§£å†³è¯»é—®é¢˜","index":"6.4"},{"id":"springäº‹åŠ¡ç®¡ç†api","title":"Springäº‹åŠ¡ç®¡ç†API","index":"6.5"},{"id":"springäº‹åŠ¡çš„ä¼ æ’­è¡Œä¸º","title":"Springäº‹åŠ¡çš„ä¼ æ’­è¡Œä¸º","index":"6.6"},{"id":"springäº‹åŠ¡ç®¡ç†æ¡ˆä¾‹â€”â€”è½¬è´¦æƒ…æ™¯","title":"Springäº‹åŠ¡ç®¡ç†æ¡ˆä¾‹â€”â€”è½¬è´¦æƒ…æ™¯","index":"6.7","children":[{"id":"è½¬è´¦æƒ…æ™¯å®ç°","title":"è½¬è´¦æƒ…æ™¯å®ç°","index":"6.7.1"},{"id":"ç¼–ç¨‹å¼äº‹åŠ¡","title":"ç¼–ç¨‹å¼äº‹åŠ¡","index":"6.7.2"},{"id":"å£°æ˜å¼äº‹åŠ¡","title":"å£°æ˜å¼äº‹åŠ¡","index":"6.7.3"}]}]}],"reward":true,"copyright":{"license":"è‡ªç”±è½¬è½½-éå•†ç”¨-ç¦æ­¢æ¼”ç»-ä¿æŒç½²å (<a href=\"https://creativecommons.org/licenses/by-nc-sa/4.0/\" rel=\"external nofollow noopener\" target=\"_blank\">CC BY-NC-ND 4.0</a>)","link":"<a href=\"https://pinkpeachabc.cn/2020/04/21/IOC å’Œ DI çš„æ¦‚è¿°/\" title=\"Springæ¡†æ¶è¯¦è§£\">https://pinkpeachabc.cn/2020/04/21/IOC å’Œ DI çš„æ¦‚è¿°/</a>"}}